{"id":21604,"level":3,"name":"zama-ai/tfhe-rs","file_name":"gpu_signed_integer_classic_tests.yml","len":5,"prompt":"Generate a GitHub Workflow named `Cuda - Signed integer tests with classical PBS` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) a label is added to a pull request. The workflow modifies the default permissions for the GITHUB_TOKEN: the workflow disables permissions for the GITHUB_TOKEN across all scopes. This permission setting applies to all jobs in the workflow. The workflow sets 15 environment variables to use: `CARGO_TERM_COLOR` is set to `always`, `ACTION_RUN_URL` is set to `${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}`, `RUSTFLAGS` is set to `-C target-cpu=native`, `RUST_BACKTRACE` is set to `full`, `RUST_MIN_STACK` is set to `8388608`, `SLACK_CHANNEL` is set to `${{ secrets.SLACK_CHANNEL }}`, `SLACK_ICON` is set to `https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png`, `SLACK_USERNAME` is set to `${{ secrets.BOT_USERNAME }}`, `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK }}`, `SLACKIFY_MARKDOWN` is set to `True`, `IS_PULL_REQUEST` is set to `${{ github.event_name == 'pull_request' }}`, `PULL_REQUEST_MD_LINK` is set to ``, `CHECKOUT_TOKEN` is set to `${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}`, `SECRETS_AVAILABLE` is set to `${{ secrets.JOB_SECRET != '' }}` and `EXTERNAL_CONTRIBUTION_RUNNER` is set to `gpu_ubuntu-22.04`. The workflow has 5 jobs. The job id of the 1st job is `should-run`. This job will run on ubuntu-latest runner. The job `should-run` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `pull-requests` scope. This permission setting only applies to the job `should-run`. The job `should-run` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Check for file changes` and its id is `changed-files`. This step runs action `tj-actions/changed-files` whose commit is ed68ef82c095e0d48ec87eccea555d944a631a4c. The step defines an input parameter for the action: `files_yaml` is set to `gpu:\n  - tfhe/Cargo.toml\n  - tfhe/build.rs\n  - backends/tfhe-cuda-backend/**\n  - tfhe/src/core_crypto/gpu/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n  - tfhe/src/integer/gpu/**\n  - tfhe/src/shortint/parameters/**\n  - tfhe/src/high_level_api/**\n  - tfhe/src/c_api/**\n  - 'tfhe/docs/**/**.md'\n  - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n  - scripts/integer-tests.sh\n  - ci/slab.toml\n`. This job has an output: `gpu_test` is defined as ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}. The 2nd job is named `Setup instance (cuda-signed-classic-tests)` and its job id is `setup-instance`. Before this job runs, `should-run` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')) is met. This job will run on ubuntu-latest runner. The job `setup-instance` has 2 steps. The 1st step is named `Start remote instance` and its id is `start-remote-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 6 input parameters for the action: `mode` is set to `start`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}`, `backend` is set to `hyperstack` and `profile` is set to `gpu-test`. The 2nd step is named `Start GitHub instance` and its id is `start-github-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'false') is met. This step runs a script: `echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n`. This job has an output: `runner-name` is defined as ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}. The 3rd job is named `CUDA signed integer tests with classical PBS` and its job id is `cuda-tests-linux`. Before this job runs, `should-run` and `setup-instance` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')) is met. This job will run on ${{ needs.setup-instance.outputs.runner-name }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. For each object in the [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}] list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Only a single job using the ${{ github.workflow_ref }} concurrency group will run at a time. When this job is queued, any currently running job in the same concurrency group will be canceled. The job `cuda-tests-linux` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Setup Hyperstack dependencies`. This step runs action `./.github/actions/gpu_setup`.The step defines 3 input parameters for the action: `cuda-version` is set to `${{ matrix.cuda }}`, `gcc-version` is set to `${{ matrix.gcc }}` and `github-instance` is set to `${{ env.SECRETS_AVAILABLE == 'false' }}`. The 3rd step is named `Install latest stable`. This step runs action `dtolnay/rust-toolchain` whose commit is 888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1. The step defines an input parameter for the action: `toolchain` is set to `stable`. The 4th step is named `Run signed integer tests`. This step runs a script: `BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n`. The 4th job is named `Slack Notification` and its job id is `slack-notify`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}) is met. This job will run on ubuntu-latest runner. When the job run fails, the workflow run will not fail. The job `slack-notify` has 2 steps. The 1st step is named `Set pull-request URL`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request') is met. The step sets an environment variable to use: `PR_BASE_URL` is set to `${{ vars.PR_BASE_URL }}`. This step runs a script: `echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n`. The 2nd step is named `Send message`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ needs.cuda-tests-linux.result }}` and `SLACK_MESSAGE` is set to `Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. The 5th job is named `Teardown instance (cuda-signed-classic-tests)` and its job id is `teardown-instance`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.setup-instance.result == 'success' }}) is met. This job will run on ubuntu-latest runner. The job `teardown-instance` has 2 steps. The 1st step is named `Stop remote instance` and its id is `stop-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 5 input parameters for the action: `mode` is set to `stop`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}` and `label` is set to `${{ needs.setup-instance.outputs.runner-name }}`. The 2nd step is named `Slack Notification`. This step will run only if the condition(${{ failure() }}) is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}` and `SLACK_MESSAGE` is set to `Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. When this step fails, the job will move on to the next step. /no-think","answer":"```yaml\n# Signed integer GPU tests on an RTXA6000 VM on hyperstack with classical PBS\nname: Cuda - Signed integer tests with classical PBS\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  # Secrets will be available only to zama-ai organization members\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\non:\n  # Allows you to run this workflow manually from the Actions tab as an alternative.\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\n\npermissions: {}\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v46.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled'\n      && needs.should-run.outputs.gpu_test == 'true') || (github.event.action ==\n      'labeled' && github.event.label.name == 'approved' && \n      needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n\n      # This instance will be spawned especially for pull-request from forked repository\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == \n      'pull_request' && needs.setup-instance.result != 'skipped')\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      # explicit include-based build matrix, of known valid options\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: 'Integer GPU signed integer tests with classical PBS finished\n          with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK\n          }}[action run](${{ env.ACTION_RUN_URL }}))'\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n\n    - name: Slack Notification\n      if: ${{ failure() }}\n      continue-on-error: true\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Instance teardown (cuda-signed-classic-tests) finished with\n          status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})'\n\n```","llm_response":"<think>We are going to generate a GitHub Actions workflow YAML file based on the detailed requirements.\n Steps:\n 1. Name the workflow: `Cuda - Signed integer tests with classical PBS`\n 2. Trigger events: \n      - manual trigger (workflow_dispatch)\n      - when a label is added to a pull request (pull_request with types [labeled])\n\n 3. Set permissions for the entire workflow: disable all permissions for GITHUB_TOKEN (set to {})\n\n 4. Define 15 environment variables at the workflow level.\n\n 5. Define 5 jobs with specific conditions, steps, and dependencies.\n\n Let's break down the requirements:\n\n Workflow-level:\n   name: Cuda - Signed integer tests with classical PBS\n   on:\n     workflow_dispatch:   # manual trigger\n     pull_request:\n       types: [labeled]  # when a label is added\n\n   permissions: {}   # disable all permissions for the GITHUB_TOKEN for the entire workflow\n\n   env:\n     CARGO_TERM_COLOR: always\n     ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n     RUSTFLAGS: -C target-cpu=native\n     RUST_BACKTRACE: full\n     RUST_MIN_STACK: 8388608\n     SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n     SLACK_ICON: https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n     SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n     SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n     SLACKIFY_MARKDOWN: True\n     IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n     PULL_REQUEST_MD_LINK: ''   # note: empty string\n     CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n     SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n     EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\n Jobs:\n\n 1. Job: should-run\n    - runs-on: ubuntu-latest\n    - permissions (only for this job): pull-requests: read\n    - steps:\n        a. Checkout repository (using actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683)\n           with inputs: fetch-depth=0, persist-credentials=false, token=${{ env.CHECKOUT_TOKEN }}\n        b. Check for file changes (id: changed-files) using tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c\n           input: files_yaml (with the given multi-line string)\n    - outputs: \n        gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}\n\n 2. Job: setup-instance (id: setup-instance)\n    - needs: should-run\n    - runs-on: ubuntu-latest\n    - if: condition (github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true'))\n    - steps:\n        a. Start remote instance (id: start-remote-instance)\n           if: env.SECRETS_AVAILABLE == 'true'\n           runs: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n           inputs: mode=start, github-token=${{ secrets.SLAB_ACTION_TOKEN }}, slab-url=${{ secrets.SLAB_BASE_URL }}, job-secret=${{ secrets.JOB_SECRET }}, backend=hyperstack, profile=gpu-test\n        b. Start GitHub instance (id: start-github-instance)\n           if: env.SECRETS_AVAILABLE == 'false'\n           runs: a script that sets runner_group to EXTERNAL_CONTRIBUTION_RUNNER in GITHUB_OUTPUT\n    - outputs: \n        runner-name: ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}\n\n 3. Job: cuda-tests-linux\n    - name: CUDA signed integer tests with classical PBS\n    - needs: [should-run, setup-instance]\n    - runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    - if: github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n    - strategy:\n        matrix: \n          include: \n            - os: ubuntu-22.04\n              cuda: 12.2\n              gcc: 11\n        # Note: the requirement says \"for each object in the list [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}]\" \n        # We'll use matrix.include to have one entry.\n    - concurrency: \n        group: ${{ github.workflow_ref }}\n        cancel-in-progress: true\n    - steps:\n        a. Checkout repository (using actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683)\n           inputs: persist-credentials=false, token=${{ env.CHECKOUT_TOKEN }}\n        b. Setup Hyperstack dependencies (using action: ./.github/actions/gpu_setup)\n           inputs: cuda-version=${{ matrix.cuda }}, gcc-version=${{ matrix.gcc }}, github-instance=${{ env.SECRETS_AVAILABLE == 'false' }}\n        c. Install latest stable (using dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1)\n           input: toolchain=stable\n        d. Run signed integer tests (script: BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci)\n\n 4. Job: slack-notify (id: slack-notify)\n    - name: Slack Notification\n    - needs: [setup-instance, cuda-tests-linux]\n    - runs-on: ubuntu-latest\n    - if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\n    - continue-on-error: true   # When the job run fails, the workflow run will not fail.\n    - steps:\n        a. Set pull-request URL (id: set-pr-url)\n           if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n           sets env: PR_BASE_URL (from vars.PR_BASE_URL)\n           runs: script to set PULL_REQUEST_MD_LINK in GITHUB_ENV\n        b. Send message\n           if: env.SECRETS_AVAILABLE == 'true'\n           sets env: SLACK_COLOR and SLACK_MESSAGE\n           runs: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n\n 5. Job: teardown-instance (id: teardown-instance)\n    - name: Teardown instance (cuda-signed-classic-tests)\n    - needs: [setup-instance, cuda-tests-linux]\n    - runs-on: ubuntu-latest\n    - if: ${{ always() && needs.setup-instance.result == 'success' }}\n    - steps:\n        a. Stop remote instance (id: stop-instance)\n           if: env.SECRETS_AVAILABLE == 'true'\n           runs: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n           inputs: mode=stop, github-token=${{ secrets.SLAB_ACTION_TOKEN }}, slab-url=${{ secrets.SLAB_BASE_URL }}, job-secret=${{ secrets.JOB_SECRET }}, label=${{ needs.setup-instance.outputs.runner-name }}\n        b. Slack Notification\n           if: ${{ failure() }}\n           sets env: SLACK_COLOR and SLACK_MESSAGE\n           runs: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n           continue-on-error: true   # When this step fails, the job will move on to the next step.\n\n Note: \n   - The condition for job `setup-instance` is complex. We write it as:\n        if: >-\n          github.event_name != 'pull_request' ||\n          (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') ||\n          (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n\n   - The condition for job `cuda-tests-linux`:\n        if: >-\n          github.event_name != 'pull_request' ||\n          (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n\n   - The condition for job `slack-notify`:\n        if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\n\n   - The condition for job `teardown-instance`:\n        if: ${{ always() && needs.setup-instance.result == 'success' }}\n\n Implementation details:\n\n   - For the matrix strategy in `cuda-tests-linux`, we use `strategy.matrix.include` to define the single matrix entry.\n\n   - The `files_yaml` input for the changed-files step is a multi-line string. We'll use a YAML block scalar.\n\n   - In the step for setting `PULL_REQUEST_MD_LINK`, note that the script writes to GITHUB_ENV.\n\n   - For the `slack-notify` job, we set `continue-on-error: true` at the job level.\n\n   - For the `teardown-instance` job, the second step (Slack Notification) has `continue-on-error: true` at the step level.\n\n Let's write the YAML accordingly.\n</think>\n\n```yaml\nname: Cuda - Signed integer tests with classical PBS\n\non:\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\npermissions: {}\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: 8388608\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: True\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: \"\"\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          fetch-depth: 0\n          persist-credentials: false\n          token: ${{ env.CHECKOUT_TOKEN }}\n      - id: changed-files\n        name: Check for file changes\n        uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c\n        with:\n          files_yaml: |\n            gpu:\n              - tfhe/Cargo.toml\n              - tfhe/build.rs\n              - backends/tfhe-cuda-backend/**\n              - tfhe/src/core_crypto/gpu/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n              - tfhe/src/integer/gpu/**\n              - tfhe/src/shortint/parameters/**\n              - tfhe/src/high_level_api/**\n              - tfhe/src/c_api/**\n              - 'tfhe/docs/**/**.md'\n              - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n              - scripts/integer-tests.sh\n              - ci/slab.toml\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    runs-on: ubuntu-latest\n    if: >-\n      github.event_name != 'pull_request' ||\n      (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') ||\n      (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n    steps:\n      - id: start-remote-instance\n        name: Start remote instance\n        if: env.SECRETS_AVAILABLE == 'true'\n        uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n        with:\n          mode: start\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          backend: hyperstack\n          profile: gpu-test\n      - id: start-github-instance\n        name: Start GitHub instance\n        if: env.SECRETS_AVAILABLE == 'false'\n        run: echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    if: >-\n      github.event_name != 'pull_request' ||\n      (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n    strategy:\n      matrix:\n        include:\n          - os: ubuntu-22.04\n            cuda: 12.2\n            gcc: 11\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: true\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          persist-credentials: false\n          token: ${{ env.CHECKOUT_TOKEN }}\n      - name: Setup Hyperstack dependencies\n        uses: ./.github/actions/gpu_setup\n        with:\n          cuda-version: ${{ matrix.cuda }}\n          gcc-version: ${{ matrix.gcc }}\n          github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n      - name: Install latest stable\n        uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n        with:\n          toolchain: stable\n      - name: Run signed integer tests\n        run: BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\n    continue-on-error: true\n    steps:\n      - name: Set pull-request URL\n        if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n        env:\n          PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n        run: echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \" >> \"${GITHUB_ENV}\"\n      - name: Send message\n        if: env.SECRETS_AVAILABLE == 'true'\n        env:\n          SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n          SLACK_MESSAGE: Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))\n        uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    steps:\n      - id: stop-instance\n        name: Stop remote instance\n        if: env.SECRETS_AVAILABLE == 'true'\n        uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n        with:\n          mode: stop\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          label: ${{ needs.setup-instance.outputs.runner-name }}\n      - name: Slack Notification\n        if: ${{ failure() }}\n        env:\n          SLACK_COLOR: ${{ job.status }}\n          SLACK_MESSAGE: Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})\n        uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n        continue-on-error: true\n```","repository_id":76862382,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 141: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/e6bc92a6-ce76-440e-aeb9-b4d367a797a2.yml\", \"line\": 141, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"          SLACK_MESSAGE: Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":2003,"stats":{"NumofTriggers":2,"Triggers":["pull_request","workflow_dispatch"],"NumofJobs":5,"NumofActions":9,"Actions":["./.github/actions/gpu_setup","actions/checkout","actions/checkout","dtolnay/rust-toolchain","rtCamp/action-slack-notify","rtCamp/action-slack-notify","tj-actions/changed-files","zama-ai/slab-github-runner","zama-ai/slab-github-runner"],"Actions_details":[{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"ed68ef82c095e0d48ec87eccea555d944a631a4c","name":"tj-actions/changed-files"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":null,"name":"./.github/actions/gpu_setup"},{"version":"888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1","name":"dtolnay/rust-toolchain"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":5}}
{"id":3563,"level":3,"name":"paradigmxyz/reth","file_name":"kurtosis.yml","len":5,"prompt":"Generate a GitHub Workflow named `kurtosis` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) the scheduled time has come: every 12 hours. 3) The workflow would run whenever there is a push event to: a tag whose name matches *. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 3 jobs. The job id of the 1st job is `prepare-reth`. This job will call a reusable workflow located at `./.github/workflows/prepare-reth.yml`. The job will pass 2 inputs to the called workflow: the input `image_tag` is `ghcr.io/paradigmxyz/reth:kurtosis-ci` and the input `binary_name` is `reth`. The 2nd job is named `run kurtosis` and its job id is `test`. Before this job runs, `prepare-reth` must complete successfully. This job will execute on any runner that is a member of Reth. The maximum number of minutes to run the job is 60. The job `test` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Download reth image`. This step runs action `actions/download-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `artifacts` and `path` is set to `/tmp`. The 3rd step is named `Load Docker image`. This step runs a script: `docker load -i /tmp/reth_image.tar &\nwait\ndocker image ls -a\n`. The 4th step is named `Run kurtosis`. This step runs action `ethpandaops/kurtosis-assertoor-github-action` tagged as v1. The step defines an input parameter for the action: `ethereum_package_args` is set to `.github/assets/kurtosis_network_params.yaml`. The job id of the 3rd job is `notify-on-error`. Before this job runs, `test` must complete successfully. This job will run only if the condition(failure()) is met. This job will execute on any runner that is a member of Reth. The job `notify-on-error` has one step. The 1st step is named `Slack Webhook Action`. The step sets 3 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}`, `SLACK_MESSAGE` is set to `Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}` and `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK_URL }}`. This step runs action `rtCamp/action-slack-notify` tagged as v2. /no-think","answer":"```yaml\n# Runs `assertoor` tests on a `kurtosis` testnet.\n\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n\n  push:\n    tags:\n    - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    timeout-minutes: 60\n    strategy:\n      fail-fast: false\n    name: run kurtosis\n    runs-on:\n      group: Reth\n    needs:\n    - prepare-reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on:\n      group: Reth\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow named 'kurtosis' for a Rust repo. Let me break down the requirements step by step.\n\nFirst, the triggers. It needs to run when manually triggered, on a schedule every 12 hours, and on push to tags matching *. So, the on section should have workflow_dispatch, schedule with cron '0 */12 * * *', and push with tags: ['*'].\n\nNext, environment variables. The CARGO_TERM_COLOR should be set to 'always'. That goes under env at the workflow level.\n\nConcurrency is important. The group should be ${{ github.workflow }}-${{ github.head_ref || github.run_id }}, and cancel-in-progress set to true.\n\nThree jobs: prepare-reth, test (named 'run kurtosis'), and notify-on-error.\n\nJob 1: prepare-reth. Calls a reusable workflow at ./.github/workflows/prepare-reth.yml with inputs image_tag and binary_name. So, uses: path to the workflow, and with for the inputs.\n\nJob 2: test. Must depend on prepare-reth. Runs on runners labeled 'Reth'. Timeout 60 minutes. Steps:\n\n1. Checkout with actions/checkout@v4, fetch-depth 0.\n2. Download artifact from previous job, name 'artifacts', path /tmp.\n3. Load Docker image via script: docker load, wait, list images.\n4. Run Kurtosis action with specific input.\n\nJob 3: notify-on-error. Runs only if test fails. On 'Reth' runner. One step: Slack notify with env vars using secrets.SLACK_WEBHOOK_URL.\n\nWait, the notify job runs only on failure, so needs if: failure(). Also, the Slack step sets env vars, including SLACK_COLOR to job.status, which might be 'failure'.\n\nCheck concurrency group syntax. The group name uses github.head_ref or run_id. Also, cancel-in-progress: true.\n\nLet me structure each part. Make sure the jobs have correct needs dependencies. Test job needs prepare-reth. Notify needs test and condition.\n\nDouble-check the steps for test job. The third step is a script with docker commands. The fourth step uses the ethpandaops action with the specified input.\n\nFor notify-on-error job, the step uses action-slack-notify with the env variables set. SLACK_MESSAGE includes the run URL.\n\nMake sure all indentation is correct in YAML. Use comments as per user's note but the user said no additional explanation, so maybe skip comments in the final output. Wait, the user said \"You may use comments to reason step by step.\" but the output should be just the YAML. Wait, the instruction says: \"No additional explanation is needed. The output format should be ```yaml <Workflow>```. You may use comments to reason step by step.\" Hmm, but the output should be only the YAML in a code block. So during reasoning, I can use comments, but the final output must be pure YAML without any extra text.\n\nWait, the user says: \"Please generate a YAML file based on the user's input below. No additional explanation is needed. The output format should be ```yaml <Workflow>```.\"\n\nSo the answer should be exactly:\n\n```yaml\n<content>\n```\n\nNo other text. So during the thinking process, I can jot down notes, but the final answer is just the YAML in a code block.\n\nLet me verify all points:\n\n- Workflow name: kurtosis\n- Triggers: manual, schedule every 12h, push to tags *\n- Env: CARGO_TERM_COLOR=always\n- Concurrency group with cancel-in-progress\n- Three jobs with correct dependencies\n- prepare-reth job uses reusable workflow with inputs\n- test job has 4 steps, runs on Reth runner, 60 min timeout\n- notify-on-error runs on failure, sends Slack\n\nCheck the schedule cron: every 12 hours. The cron expression for that is '0 */12 * * *', which triggers at 0 and 12 hours.\n\nConcurrency group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}. Using || for fallback.\n\nIn the test job, the runner label is 'Reth' (as per \"any runner that is a member of Reth\" â€“ assuming the label is 'Reth').\n\nThe notify job's step uses action-slack-notify, and sets env vars. SLACK_COLOR is set to ${{ job.status }}, which in the context of the step would be 'failure' since it's running on failure().\n\nWait, the job's if condition is failure(), so when the job runs, job.status would be 'failure'. But the env for SLACK_COLOR is set to ${{ job.status }}. However, in GitHub Actions, job.status might not be available there. Wait, maybe it's using step context. Wait, the user says: \"SLACK_COLOR is set to `${{ job.status }}`\". But job.status in the context of the step might not be correct. However, the user specified it, so we'll follow as given.\n\nAlso, the notify job runs only if test fails, so the if: failure() on the job level.\n\nPutting it all together.\n</think>\n\n```yaml\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n    - cron: '0 */12 * * *'\n  push:\n    tags: ['*']\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    name: run kurtosis\n    needs: prepare-reth\n    runs-on: Reth\n    timeout-minutes: 60\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - name: Download reth image\n        uses: actions/download-artifact@v4\n        with:\n          name: artifacts\n          path: /tmp\n\n      - name: Load Docker image\n        run: |\n          docker load -i /tmp/reth_image.tar &\n          wait\n          docker image ls -a\n\n      - name: Run kurtosis\n        uses: ethpandaops/kurtosis-assertoor-github-action@v1\n        with:\n          ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on: Reth\n    steps:\n      - name: Slack Webhook Action\n        env:\n          SLACK_COLOR: ${{ job.status }}\n          SLACK_MESSAGE: Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}\n          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n        uses: rtCamp/action-slack-notify@v2\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"workflow is scalar node but mapping node is expected\", \"filepath\": \"../../tmp/2a406ee4-02c5-4311-bf5a-3e709e6548e7.yml\", \"line\": 1, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"<content>\\n^~~~~~~~~\", \"end_column\": 9}, {\"message\": \"\\\"on\\\" section is missing in workflow\", \"filepath\": \"../../tmp/2a406ee4-02c5-4311-bf5a-3e709e6548e7.yml\", \"line\": 1, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"<content>\\n^~~~~~~~~\", \"end_column\": 9}, {\"message\": \"\\\"jobs\\\" section is missing in workflow\", \"filepath\": \"../../tmp/2a406ee4-02c5-4311-bf5a-3e709e6548e7.yml\", \"line\": 1, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"<content>\\n^~~~~~~~~\", \"end_column\": 9}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":440,"stats":{"NumofTriggers":3,"Triggers":["push","schedule","workflow_dispatch"],"NumofJobs":3,"NumofActions":4,"Actions":["actions/checkout","actions/download-artifact","ethpandaops/kurtosis-assertoor-github-action","rtCamp/action-slack-notify"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ethpandaops/kurtosis-assertoor-github-action"},{"version":"v2","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/prepare-reth.yml"],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":40182,"level":3,"name":"dotnetcore/aspectcore-framework","file_name":"build-pr-ci.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build for PR` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: there is activity relating to a pull request. The workflow has one job. The job id of the 1st job is `build-and-test`. This job will run on windows-latest runner. The job `build-and-test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Setup .NET Core`. This step runs action `actions/setup-dotnet` tagged as v4. The step defines an input parameter for the action: `dotnet-version` is set to `9.x`. The 3rd step is named `Build Reason`. This step runs a script: `echo ref: ${{github.ref}} event: ${{github.event_name}}`. The 4th step is named `Build`. This step uses bash to run a script: `for project in $(find ./src -name \"*.csproj\"); do\n  dotnet build --configuration Release $project\ndone\n`. The 5th step is named `Run Tests`. This step uses bash to run a script: `for project in $(find ./tests -name \"*.csproj\"); do\n  dotnet test --configuration Release $project\ndone\n`. /no-think","answer":"```yaml\nname: Build for PR\non:\n  pull_request:\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: 'echo ref: ${{github.ref}} event: ${{github.event_name}}'\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","llm_response":" ```yaml\nname: Build for PR\non:\n  pull_request:\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Setup .NET Core\n        uses: actions/setup-dotnet@v4\n        with:\n          dotnet-version: 9.x\n      - name: Build Reason\n        run: echo ref: ${{github.ref}} event: ${{github.event_name}}\n      - name: Build\n        shell: bash\n        run: |\n          for project in $(find ./src -name \"*.csproj\"); do\n            dotnet build --configuration Release $project\n          done\n      - name: Run Tests\n        shell: bash\n        run: |\n          for project in $(find ./tests -name \"*.csproj\"); do\n            dotnet test --configuration Release $project\n          done\n``` ","repository_id":3450821,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 17: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/4fca1988-522f-4542-93f8-a927e444f815.yml\", \"line\": 17, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: echo ref: ${{github.ref}} event: ${{github.event_name}}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":207,"stats":{"NumofTriggers":1,"Triggers":["pull_request"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-dotnet"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/setup-dotnet"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":65428,"level":2,"name":"elementsproject/lightning","file_name":"release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Release ðŸš€` for a GitHub repository whose primary programming language is C. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a tag whose name matches v[0-9]+.[0-9]+, a tag whose name matches v[0-9]+.[0-9]+.[0-9]+ or a tag whose name matches v[0-9]+.[0-9]+[0-9a-z]+. 2) someone manually triggers the workflow. This workflow receives 2 inputs: version-this input represents release version and it must be supplied; create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False. The workflow has 4 jobs. The 1st job is named `Check` and its job id is `check`. The job `check` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Determine version`. The 3rd step is named `Validate release`. The 4th step is named `Catpure version output` and its id is `capture`. The 2nd job is named `Releases` and its job id is `releases`. The job `releases` has 5 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Prepare base environment`. The 3rd step is named `Build environment setup`. The 4th step is named `Build release`. The 5th step is named `Upload target artifacts`. The 3rd job is named `Construct release artifact` and its job id is `artifact`. The job `artifact` has one step. The 1st step is named `Merge artifacts`. The 4th job is named `Sign and prepare release draft` and its job id is `release`. The job `release` has 8 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download artifact`. The 3rd step is named `Import GPG keys` and its id is `gpg`. The 4th step is named `Set default GPG key`. The 5th step is named `Sign release`. The 6th step is named `Upload signed artifact`. The 7th step is named `Determine release data` and its id is `release_data`. The 8th step is named `Prepare release draft`. /no-think","answer":"```yaml\n# https://docs.corelightning.org/docs/release-checklist\nname: Release ðŸš€\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: no\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n        fetch-depth: 0\n        fetch-tags: true\n\n    - name: Determine version\n      run: |\n        if [[ \"${{ github.event.inputs.version }}\" != \"\" ]]; then\n          VERSION=\"${{ github.event.inputs.version }}\"\n        elif [ \"${{ github.ref_type }}\" == \"tag\" ]; then\n          VERSION=\"${{ github.ref_name }}\"\n        else\n          echo \"No release version provided and no tag found.\"\n          exit 1\n        fi\n        echo \"VERSION=$VERSION\" >> \"$GITHUB_ENV\"\n        echo \"Determined version: $VERSION\"\n\n    - name: Validate release\n      run: tools/check-release.sh --version=${VERSION}\n\n    - name: Catpure version output\n      id: capture\n      run: echo \"version=${VERSION}\" >> \"$GITHUB_OUTPUT\"\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-24.04\n    strategy:\n      fail-fast: false    # Let each build finish.\n      matrix:\n        target:\n        - bin-Fedora\n        - bin-Ubuntu-focal\n        - bin-Ubuntu-jammy\n        - bin-Ubuntu-noble\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n      # tools/build-release.sh requires lowdown\n    - name: Prepare base environment\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n\n    - name: Build environment setup\n      run: |\n        distribution=$(echo ${{ matrix.target }} | cut -d'-' -f3)\n        echo \"Building base image for ${distribution}\"\n        sudo docker run --rm -v $(pwd):/build ubuntu:${distribution} bash -c \"\\\n            apt-get update && \\\n            apt-get install -y debootstrap && \\\n            debootstrap ${distribution} /build/${distribution}\"\n        sudo tar -C ${distribution} -c . | docker import - ${distribution}\n\n        # Build Docker image\n        docker build -t cl-repro-${distribution} - < contrib/reprobuild/Dockerfile.${distribution}\n      if: contains(matrix.target, 'Ubuntu')\n\n    - name: Build release\n      run: tools/build-release.sh ${{ matrix.target }}\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        path: release/\n        name: ${{ matrix.target }}\n        if-no-files-found: error\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - check\n    - releases\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        pattern: bin-*\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        path: release/\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        trust_level: 5\n\n    - name: Set default GPG key\n      run: echo \"default-key ${{ steps.gpg.outputs.keyid }}\" >> \n        ~/.gnupg/gpg.conf\n\n    - name: Sign release\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n        tools/build-release.sh --without-zip sign\n        mv release/SHA256SUMS.asc${{ steps.gpg.outputs.keyid  }} release/SHA256SUMS.asc\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        overwrite: true\n        path: release/\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        VERSION=${{ env.version }}\n        CHANGELOG_VERSION=${VERSION#v}\n        echo \"CHANGELOG_VERSION=$CHANGELOG_VERSION\"\n        echo \"changelog_version=$CHANGELOG_VERSION\" >> \"$GITHUB_OUTPUT\"\n\n        CHANGELOG_TITLE=$(grep \"## \\[${CHANGELOG_VERSION}\\]\" CHANGELOG.md)\n        echo \"CHANGELOG_TITLE=$CHANGELOG_TITLE\"\n        echo \"changelog_title=$CHANGELOG_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n        RELEASE_TITLE=$(echo $CHANGELOG_TITLE | cut -d'\"' -f2)\n        echo \"RELEASE_TITLE=$RELEASE_TITLE\"\n        echo \"release_title=$RELEASE_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n    - name: Prepare release draft\n      if: github.event_name == 'push' || (github.event_name == \n        'workflow_dispatch' && github.event.inputs.create_release == 'yes')\n      uses: softprops/action-gh-release@v2\n      with:\n        name: ${{ env.version }} ${{ steps.release_data.outputs.release_title }}\n        tag_name: ${{ env.version }}\n        draft: true\n        prerelease: contains(env.version, \"-rc\")\n        files: release/*\n        fail_on_unmatched_files: true\n\n```","llm_response":" ```yaml\nname: Release ðŸš€\non:\n  push:\n    tags:\n      - 'v[0-9]+.[0-9]+'\n      - 'v[0-9]+.[0-9]+.[0-9]+'\n      - 'v[0-9]+.[0-9]+[0-9a-z]+'\n  workflow_dispatch:\n    inputs:\n      version:\n        description: 'Release version'\n        required: true\n      create_release:\n        description: 'Create a draft release'\n        default: 'False'\n        type: choice\n        options:\n          - 'True'\n          - 'False'\njobs:\n  check:\n    name: Check\n    runs-on: ubuntu-latest\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n      - name: Determine version\n        id: capture\n        run: |\n          version=$(cat VERSION)\n          echo \"::set-output name=version::$version\"\n      - name: Validate release\n        run: |\n          echo ${{ github.event.inputs.version }}\n          if [[ ${{ github.event.inputs.version }} =~ ^v[0-9]+\\.[0-9]+\\.[0-9]+$ ]]; then\n            echo \"Release version ${{ github.event.inputs.version }} is valid\"\n          else\n            echo \"Release version ${{ github.event.inputs.version }} is invalid\"\n            exit 1\n          fi\n  releases:\n    name: Releases\n    needs:\n      - check\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n      - name: Prepare base environment\n        uses: ./.github/actions/base-environment\n      - name: Build environment setup\n        uses: ./.github/actions/build-environment\n      - name: Build release\n        uses: ./.github/actions/build-release\n      - name: Upload target artifacts\n        uses: actions/upload-artifact@v3\n        with:\n          name: target\n          path: ./target\n  artifact:\n    name: Construct release artifact\n    needs:\n      - releases\n    runs-on: ubuntu-latest\n    steps:\n      - name: Merge artifacts\n        uses: dawidd6/action-download-artifact@v2\n        with:\n          name: target\n      - name: Construct release artifact\n        run: |\n          find ./target -type f -executable -exec sh -c 'echo -n \"$0 \" && file \"$0\"' {} \\;\n  release:\n    name: Sign and prepare release draft\n    needs:\n      - artifact\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n      - name: Download artifact\n        uses: actions/download-artifact@v3\n        with:\n          name: target\n      - name: Import GPG keys\n        id: gpg\n        uses: crazy-max/ghaction-import-gpg@v6\n        with:\n          gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n          passphrase: ${{ secrets.GPG_PASSPHRASE }}\n      - name: Set default GPG key\n        uses: crazy-max/ghaction-gpg@v6\n        with:\n          default: true\n          decrypt: true\n          sign: true\n          passphrase: ${{ secrets.GPG_PASSPHRASE }}\n      - name: Sign release\n        run: |\n          echo \"v${{ needs.check.outputs.version }}\"\n          gpg --armor --detach --output ./target/firmware-${{ needs.check.outputs.version }}.zip.sig ./target/firmware-${{ needs.check.outputs.version }}.zip\n      - name: Upload signed artifact\n        uses: actions/upload-artifact@v3\n        with:\n          name: signed-target\n          path: ./target\n      - name: Determine release data\n        id: release_data\n        run: |\n          echo \"::set-output name=tag::v${{ needs.check.outputs.version }}\"\n          echo \"::set-output name=title::Firmware v${{ needs.check.outputs.version }}\"\n      - name: Prepare release draft\n        uses: softprops/action-gh-release@v1\n        with:\n          tag_name: ${{ steps.release_data.outputs.tag }}\n          name: ${{ steps.release_data.outputs.title }}\n          files: |\n            ./target/*\n          overwrite: true\n``` ","repository_id":3976044,"lint_valid":false,"lint_output":"[{\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/05b1e54e-9a0e-43a5-ace9-0bfda20d7269.yml\", \"line\": 31, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"property \\\"check\\\" is not defined in object type {artifact: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/05b1e54e-9a0e-43a5-ace9-0bfda20d7269.yml\", \"line\": 101, \"column\": 25, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 25}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/05b1e54e-9a0e-43a5-ace9-0bfda20d7269.yml\", \"line\": 111, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/05b1e54e-9a0e-43a5-ace9-0bfda20d7269.yml\", \"line\": 111, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"property \\\"check\\\" is not defined in object type {artifact: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/05b1e54e-9a0e-43a5-ace9-0bfda20d7269.yml\", \"line\": 111, \"column\": 48, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 48}]","meteor_score":0.38082943228656635,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1416,"stats":{"NumofTriggers":2,"Triggers":["push","workflow_dispatch"],"NumofJobs":4,"NumofActions":9,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/download-artifact","actions/upload-artifact","actions/upload-artifact","actions/upload-artifact/merge","crazy-max/ghaction-import-gpg","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact/merge"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v6","name":"crazy-max/ghaction-import-gpg"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v2","name":"softprops/action-gh-release"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":18,"CyclomaticComplexity":3}}
{"id":46171,"level":1,"name":"wger-project/flutter","file_name":"make-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build release artefacts` for a GitHub repository whose primary programming language is Dart. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives an input: version-this input represents version to tag and release (x.y.z), it must be supplied and the data type is string. The workflow has 9 jobs. The 1st job is named `CI` and its job id is `ci`. The 2nd job is named `Prepare` and its job id is `determine_version`. The 3rd job is named `Linux` and its job id is `build_linux`. The 4th job is named `Android` and its job id is `build_android`. The 5th job is named `Apple` and its job id is `build_apple`. The 6th job is named `Microsoft` and its job id is `build_windows`. The 7th job is named `Upload to Play Store` and its job id is `upload_play_store`. The 8th job is named `Make Github Release` and its job id is `make_gh_release`. The 9th job is named `Upload flathub manifest` and its job id is `generate_flathub_manifest`. /no-think","answer":"```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n\n  determine_version:\n    needs: ci\n    name: Prepare\n    uses: ./.github/workflows/bump-version.yml\n    with:\n      app_version: ${{ github.event.inputs.version }}\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    uses: ./.github/workflows/build-linux.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs: determine_version\n    uses: ./.github/workflows/build-android.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n    secrets:\n      DECRYPTKEY_PLAYSTORE_SIGNING_KEY: ${{ \n        secrets.DECRYPTKEY_PLAYSTORE_SIGNING_KEY }}\n      DECRYPTKEY_PROPERTIES: ${{ secrets.DECRYPTKEY_PROPERTIES }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    uses: ./.github/workflows/build-apple.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    uses: ./.github/workflows/build-windows.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    runs-on: ubuntu-latest\n    needs:\n    - build_android\n    - build_linux\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Download builds\n      uses: actions/download-artifact@v4\n      with:\n        path: /tmp/\n\n    - name: Setup Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.4\n\n    - name: Decrypt config files\n      run: |\n        cd ./fastlane/metadata/envfiles\n        chmod +x ./decrypt_secrets.sh\n        ./decrypt_secrets.sh\n      shell: bash\n      env:\n        DECRYPTKEY_PLAYSTORE: ${{ secrets.DECRYPTKEY_PLAYSTORE }}\n\n    - name: Upload build to Play Store\n      run: |\n        mkdir -p ./build/app/outputs/bundle/release/\n        cp /tmp/builds-aab/app-release.aab ./build/app/outputs/bundle/release/app-release.aab\n        bundle install\n        bundle exec fastlane android production\n\n  #\n  # This is currently commented out since the iOS upload are currently being handled\n  # by the fastlane script in the ios folder. We use the account of pthaler for this\n  # and he runs the script manually.\n  #\n\n  #  upload_app_store:\n  #    name: Upload to App Store (placeholder)\n  #    runs-on: ubuntu-latest\n  #    needs:\n  #      - build_android\n  #      - build_apple\n  #    steps:\n  #      - name: Checkout application\n  #        uses: actions/checkout@v4\n  #        with:\n  #          ref: feature/build-process\n  #        #          ref: ${{ github.event.inputs.version }}\n  #\n  #      - name: Common flutter setup\n  #        uses: ./.github/actions/flutter-common\n  #\n  #      - name: Download builds\n  #        uses: actions/download-artifact@v4\n  #        with:\n  #          path: /tmp/\n  #\n  #      - name: Upload build to App Store\n  #        run: |\n  #          # bundle exec fastlane todo\n\n  make_gh_release:\n    name: Make Github Release\n    runs-on: ubuntu-latest\n    needs:\n    - upload_play_store\n    - build_linux\n    - build_windows\n    - build_apple\n\n    steps:\n    - name: Download builds\n      uses: actions/download-artifact@v4\n\n    - name: Make Github release\n      uses: softprops/action-gh-release@v2\n      with:\n        tag_name: ${{ inputs.version }}\n        files: |\n          builds-aab/app-release.aab\n          builds-apk/app-release.apk\n          builds-linux/wger-linux-x86_64.tar.gz\n          builds-linux/wger-linux-x86_64.sha256\n          builds-ios/Runner.app\n          builds-macos/wger.app\n          builds-windows/wger.exe\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    name: Upload flathub manifest\n    needs:\n    - make_gh_release\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Common flutter setup\n      uses: ./.github/actions/flutter-common\n\n    - name: Generate manifest\n      run: |\n        cd flatpak/scripts\n        dart pub get\n        dart manifest_generator.dart --meta ../flatpak_meta.json --github\n        mkdir ../../flathub\n        cp flatpak_generator_exports/de.wger.flutter.json ../../flathub\n        cp flatpak_generator_exports/flathub.json ../../flathub\n\n    - name: Push updated config to flathub repository\n      uses: cpina/github-action-push-to-another-repository@main\n      env:\n        SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}\n      with:\n        source-directory: flathub\n        destination-github-username: wger-project\n        destination-repository-name: de.wger.flutter\n        user-email: github-actions@github.com\n        target-branch: release-${{ github.event.inputs.version }}\n        create-target-branch-if-needed: true\n        commit-message: Update to ${{ github.event.inputs.version }}\n\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Actions workflow generation request. The user wants a YAML file for a Dart project with specific requirements.\n\nFirst, the workflow name is \"Build release artefacts\" and it's triggered manually. So I need to set the on: workflow_dispatch with an input for version. The version input must be required and a string. Let me check the syntax for inputs in workflow_dispatch. It should be under inputs with the name, required: true, and type string.\n\nNext, there are 9 jobs. Let me list them out as per the user's description:\n\n1. CI (job id: ci)\n2. Prepare (job id: determine_version)\n3. Linux (build_linux)\n4. Android (build_android)\n5. Apple (build_apple)\n6. Microsoft (build_windows)\n7. Upload to Play Store (upload_play_store)\n8. Make Github Release (make_gh_release)\n9. Upload flathub manifest (generate_flathub_manifest)\n\nEach job needs to be defined. The first job, CI, probably runs tests. Since it's a Dart project, maybe using the dart test command. But the user didn't specify the steps, so I'll have to make generic steps. Wait, the user didn't give details on what each job does, just the names and IDs. So I need to create placeholder steps for each job, maybe with run commands that are typical for Dart.\n\nWait, the user says \"no additional explanation is needed\", so the YAML should just have the structure with the jobs, but maybe minimal steps. However, the problem states to generate the workflow based on the input, so perhaps the steps can be left as comments or minimal. But the user might expect that each job has some basic setup.\n\nWait, the user didn't specify the steps for each job, only the names and IDs. So the main thing is to structure the workflow with the correct triggers, inputs, and jobs with their dependencies.\n\nWait, the user mentions that the workflow has 9 jobs, but doesn't specify dependencies between them. However, typically, the CI job would run first, then Prepare, then the build jobs, then the upload and release jobs. But the user didn't specify dependencies, so maybe all jobs after the first might depend on previous ones. Wait, the user says \"the workflow has 9 jobs\" but doesn't say the order or dependencies. However, the job IDs are listed in order, so perhaps they are sequential.\n\nWait, the user lists the jobs in order from 1st to 9th, so maybe they are intended to run in sequence. So job 2 depends on job 1, job 3 depends on job 2, etc. But the user didn't explicitly state dependencies, but in GitHub Actions, jobs run in parallel by default unless you specify needs.\n\nBut the user's instruction says \"the workflow has 9 jobs\" in that order, so perhaps they should run sequentially. So each job after the first should have a needs clause pointing to the previous job.\n\nWait, but the user didn't specify dependencies, but given the context of building release artifacts, it's logical that CI runs first, then determine_version, then the build jobs for each platform, then upload steps.\n\nWait, the second job is \"Prepare\" which is determine_version. Maybe it's determining the version, but the user says the workflow receives an input for version, so perhaps the determine_version job is using that input. Wait, the input is called \"version\" and it's required. So the determine_version job might just pass that input along, but maybe it's a step that sets up the version.\n\nBut since the user didn't specify, perhaps the jobs are structured with the necessary dependencies. For example, the CI job runs first, then determine_version, then the build jobs might run in parallel after determine_version, but the user lists them as 3rd to 6th jobs. Wait, the user lists the jobs in order: 1st CI, 2nd Prepare, 3rd Linux, 4th Android, 5th Apple, 6th Microsoft, then the next three. So maybe after Prepare, the four build jobs run in parallel, then the upload jobs.\n\nBut the user didn't specify, so perhaps the safest way is to have each job depend on the previous one. But that might not be efficient. However, the user didn't specify dependencies, so maybe the workflow should have the jobs in order with needs.\n\nWait, the problem statement says \"the workflow has 9 jobs\" but doesn't specify their dependencies. However, in a typical release workflow, you'd have:\n\n- CI (tests)\n- Prepare (maybe version determination, but here the version is input)\n- Then build for each platform (Linux, Android, Apple, Windows) in parallel\n- Then upload to Play Store (Android)\n- Make GitHub Release (which would need all the artifacts)\n- Upload flathub manifest (maybe after Linux build)\n\nBut the user lists the jobs in order 1-9, so perhaps they expect the jobs to be sequential. However, that's not efficient for builds. But since the user didn't specify, maybe we should follow the order given, with each job depending on the previous.\n\nWait, but the user says \"the 1st job is named CI...\", so the order is given, but dependencies are not specified. However, in GitHub Actions, jobs run in parallel by default. So to have them run sequentially, each job needs a needs clause.\n\nBut the user might expect that the jobs are ordered as listed, so job 2 runs after job 1, job 3 after job 2, etc. So each job i has needs: [job i-1].\n\nAlternatively, maybe the build jobs (3-6) can run in parallel after job 2, and then the upload jobs run after the relevant build jobs.\n\nBut the user didn't specify, so perhaps the safest approach is to have each job depend on the previous one. Let's check the user's exact words: \"the workflow has 9 jobs. The 1st job... The 2nd job... etc.\" So the order is 1 to 9, implying sequence.\n\nTherefore, each job after the first should have needs pointing to the prior job.\n\nWait, but job 7 is Upload to Play Store, which would depend on build_android. Similarly, job 8 (Make GitHub Release) would depend on all build jobs, and job 9 (Flathub) depends on build_linux.\n\nBut the user lists them in order 1-9, so maybe they want them sequential. However, that's not realistic. For example, build_android and build_ios can run in parallel.\n\nBut since the user didn't specify dependencies, perhaps the problem expects a simple sequential workflow where each job runs after the previous. Let's proceed with that, as per the order given.\n\nSo job ci (1st) runs first.\n\nJob determine_version (2nd) needs ci.\n\nJob build_linux (3rd) needs determine_version.\n\nJob build_android (4th) needs build_linux.\n\nWait, but that's not logical. Maybe the build jobs can run in parallel after determine_version.\n\nBut the user lists them as 3rd, 4th, 5th, 6th jobs, so perhaps they are sequential. However, in reality, you'd run them in parallel. But the problem says \"the workflow has 9 jobs\" in that order, but doesn't specify dependencies. Since the user is asking for a YAML file based on the input, and the input doesn't mention dependencies, perhaps the jobs are to be listed in order but without explicit dependencies, which would mean they run in parallel. But that's probably not intended.\n\nWait, the user says \"the workflow has 9 jobs\" but in GitHub Actions, jobs run in parallel by default. So to have them run in sequence, you need to specify needs.\n\nGiven that it's a release process, it's likely that:\n\n- CI runs first.\n\n- Then Prepare (determine_version) which might use the input version.\n\n- Then the build jobs for each platform can run in parallel.\n\n- Then the upload jobs depend on their respective build jobs.\n\n- Then the GitHub release depends on all build jobs.\n\nBut the user lists the jobs in order 1-9, so perhaps they expect the YAML to have them in that order with appropriate dependencies.\n\nLet me think:\n\nJob 1: ci - runs first.\n\nJob 2: determine_version - needs ci.\n\nJobs 3-6: build_linux, build_android, build_apple, build_windows - all need determine_version, and can run in parallel.\n\nJob 7: upload_play_store - needs build_android.\n\nJob 8: make_gh_release - needs all build jobs (3-6).\n\nJob 9: generate_flathub_manifest - needs build_linux.\n\nBut the user lists job 7 after job 6, so maybe job 7 depends on job 6 (build_windows), but that doesn't make sense. Wait, job 7 is Upload to Play Store, which is Android, so it should depend on build_android (job 4).\n\nSimilarly, job 9 is Flathub, which is Linux, so depends on build_linux (job 3).\n\nJob 8 (GitHub Release) would depend on all build jobs.\n\nSo the dependencies would be:\n\n- ci has no needs.\n\n- determine_version needs ci.\n\n- build_linux, build_android, build_apple, build_windows all need determine_version.\n\n- upload_play_store needs build_android.\n\n- make_gh_release needs build_linux, build_android, build_apple, build_windows.\n\n- generate_flathub_manifest needs build_linux.\n\nBut the user lists the jobs in order 1-9, so the YAML should list them in that order, but with the correct dependencies.\n\nSo in the YAML, the jobs section would have:\n\nci: ...\n\ndetermine_version: needs: ci\n\nbuild_linux: needs: determine_version\n\nbuild_android: needs: determine_version\n\nbuild_apple: needs: determine_version\n\nbuild_windows: needs: determine_version\n\nupload_play_store: needs: build_android\n\nmake_gh_release: needs: [build_linux, build_android, build_apple, build_windows]\n\ngenerate_flathub_manifest: needs: build_linux\n\nBut the user lists job 7 as Upload to Play Store (after job 6, build_windows), but logically it depends on build_android (job4). Similarly, job9 depends on job3.\n\nSo the job order in the YAML doesn't have to follow the dependency order, but it's common to list them in the order they are intended to run.\n\nBut the user specified the job names in order 1-9, so the YAML should list the jobs in that order: ci, determine_version, build_linux, build_android, build_apple, build_windows, upload_play_store, make_gh_release, generate_flathub_manifest.\n\nEach job's needs should reflect the dependencies.\n\nSo:\n\nci: no needs\n\ndetermine_version: needs ci\n\nbuild_linux: needs determine_version\n\nbuild_android: needs determine_version\n\nbuild_apple: needs determine_version\n\nbuild_windows: needs determine_version\n\nupload_play_store: needs build_android\n\nmake_gh_release: needs [build_linux, build_android, build_apple, build_windows]\n\ngenerate_flathub_manifest: needs build_linux\n\nYes, that makes sense.\n\nNow, for the workflow_dispatch input:\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n\nEach job may need to use the version input. For example, the determine_version job might set it as an environment variable or pass it to subsequent jobs. But since the input is provided, the jobs can access it via github.event.inputs.version.\n\nHowever, to pass data between jobs, you need to use outputs. So perhaps the determine_version job would output the version, but since the version is provided as input, maybe it's just used directly in later jobs.\n\nBut the user didn't specify, so perhaps each job that needs the version can reference it as ${{ github.event.inputs.version }}.\n\nBut some jobs might need to use it, like tagging or building with the version.\n\nNow, for each job, we need to define runs-on and steps.\n\nSince it's a Dart project, the CI job would likely set up Dart, run tests.\n\nThe build jobs would set up the respective platforms (e.g., Android needs Android SDK, Apple needs macOS, etc.)\n\nBut the user didn't specify the steps, so we'll have to create placeholder steps.\n\nFor example, the CI job:\n\njobs:\n  ci:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: dart-lang/setup-dart@v1\n      - run: dart test\n\nSimilarly, build_linux might be:\n\nbuild_linux:\n  needs: determine_version\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n    - uses: dart-lang/setup-dart@v1\n    - run: dart compile exe bin/main.dart -o build/linux/app\n\nBut the exact steps aren't specified, so the user probably just wants the structure with the job names, IDs, triggers, and dependencies.\n\nThe user said \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\"\n\nSo the YAML should have the correct structure with the specified jobs, inputs, and dependencies.\n\nLet me structure it:\n\nname: Build release artefacts\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n\njobs:\n  ci:\n    name: CI\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Run tests\n        run: dart test\n\n  determine_version:\n    name: Prepare\n    needs: ci\n    runs-on: ubuntu-latest\n    steps:\n      - name: Use version input\n        run: echo \"Version to release: ${{ github.event.inputs.version }}\"\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Linux\n        run: echo \"Building Linux artifact for version ${{ github.event.inputs.version }}\"\n\n  build_android:\n    name: Android\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Android\n        run: echo \"Building Android artifact for version ${{ github.event.inputs.version }}\"\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    runs-on: macos-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Apple\n        run: echo \"Building Apple artifact for version ${{ github.event.inputs.version }}\"\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    runs-on: windows-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Windows\n        run: echo \"Building Windows artifact for version ${{ github.event.inputs.version }}\"\n\n  upload_play_store:\n    name: Upload to Play Store\n    needs: build_android\n    runs-on: ubuntu-latest\n    steps:\n      - name: Upload\n        run: echo \"Uploading to Play Store version ${{ github.event.inputs.version }}\"\n\n  make_gh_release:\n    name: Make Github Release\n    needs: [build_linux, build_android, build_apple, build_windows]\n    runs-on: ubuntu-latest\n    steps:\n      - name: Create Release\n        uses: actions/github-release@v1\n        with:\n          tag_name: ${{ github.event.inputs.version }}\n          release_name: Release ${{ github.event.inputs.version }}\n\n  generate_flathub_manifest:\n    name: Upload flathub manifest\n    needs: build_linux\n    runs-on: ubuntu-latest\n    steps:\n      - name: Generate Manifest\n        run: echo \"Generating Flathub manifest for version ${{ github.event.inputs.version }}\"\n\nWait, but the job id for the 8th job is make_gh_release, and the 9th is generate_flathub_manifest.\n\nAlso, for the make_gh_release job, it needs all four build jobs, so the needs should be a list of those job ids.\n\nIn YAML, the needs for make_gh_release would be:\n\nneeds: [build_linux, build_android, build_apple, build_windows]\n\nSimilarly, upload_play_store needs: build_android\n\ngenerate_flathub_manifest needs: build_linux\n\nYes.\n\nAlso, the runs-on for Apple should be macos-latest, Windows is windows-latest, others are ubuntu-latest.\n\nI think this structure meets the user's requirements.\n</think>\n\n```yaml\nname: Build release artefacts\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n\njobs:\n  ci:\n    name: CI\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Run tests\n        run: dart test\n\n  determine_version:\n    name: Prepare\n    needs: ci\n    runs-on: ubuntu-latest\n    steps:\n      - name: Validate version input\n        run: echo \"Building version: ${{ github.event.inputs.version }}\"\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Linux artifact\n        run: dart compile exe bin/main.dart -o release/linux/app\n\n  build_android:\n    name: Android\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Android APK\n        run: flutter build apk --release --dart-define=APP_VERSION=${{ github.event.inputs.version }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    runs-on: macos-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build iOS app\n        run: flutter build ipa --release --dart-define=APP_VERSION=${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    runs-on: windows-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Setup Dart\n        uses: dart-lang/setup-dart@v1\n      - name: Build Windows executable\n        run: dart compile exe bin/main.dart -o release/windows/app.exe\n\n  upload_play_store:\n    name: Upload to Play Store\n    needs: build_android\n    runs-on: ubuntu-latest\n    steps:\n      - name: Upload to Play Store\n        uses: r0adkll/upload-google-play@v1\n        with:\n          serviceAccountJsonPlainText: ${{ secrets.PLAY_STORE_SERVICE_ACCOUNT }}\n          packageName: com.example.app\n          releaseFile: build/app/outputs/apk/release/app-release.apk\n          track: production\n\n  make_gh_release:\n    name: Make Github Release\n    needs: [build_linux, build_android, build_apple, build_windows]\n    runs-on: ubuntu-latest\n    steps:\n      - name: Create GitHub Release\n        uses: softprops/action-gh-release@v1\n        with:\n          tag_name: ${{ github.event.inputs.version }}\n          name: Release ${{ github.event.inputs.version }}\n          draft: false\n          prerelease: false\n\n  generate_flathub_manifest:\n    name: Upload flathub manifest\n    needs: build_linux\n    runs-on: ubuntu-latest\n    steps:\n      - name: Generate Flathub manifest\n        run: |\n          echo \"Generating manifest for version ${{ github.event.inputs.version }}\"\n          # Flathub manifest generation steps would go here\n```","repository_id":69029763,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 28: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/43576505-b83e-42e9-a17e-10d8e847ca33.yml\", \"line\": 28, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: echo \\\"Building version: ${{ github.event.inputs.version }}\\\"\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1270,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":9,"NumofActions":8,"Actions":["./.github/actions/flutter-common","actions/checkout","actions/checkout","actions/download-artifact","actions/download-artifact","cpina/github-action-push-to-another-repository","ruby/setup-ruby","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ruby/setup-ruby"},{"version":"v4","name":"actions/download-artifact"},{"version":"v2","name":"softprops/action-gh-release"},{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/flutter-common"},{"version":"main","name":"cpina/github-action-push-to-another-repository"}],"NumofReusableWfs":6,"ReusableWfs":["./.github/workflows/build-android.yml","./.github/workflows/build-apple.yml","./.github/workflows/build-linux.yml","./.github/workflows/build-windows.yml","./.github/workflows/bump-version.yml","./.github/workflows/ci.yml"],"NumofSteps":11,"CyclomaticComplexity":5}}
{"id":54038,"level":3,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has 2 values: prefer-lowest and prefer-stable. The job `test` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.composer/cache/files` and `key` is set to `composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 3 input parameters for the action: `php-version` is set to `${{ matrix.php }}`, `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick` and `coverage` is set to `none`. The 4th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n`. The 5th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v3. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `packages/vue/package.json`. The 6th step is named `Install Node Dependencies`. This step runs a script: `npm install`. The 7th step is named `Run npm tests`. This step runs a script: `npm run test`. The 8th step is named `Run PHP Tests`. This step runs a script: `vendor/bin/phpunit`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types:\n    - opened\n    - synchronize\n    - reopened\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php:\n        - 8.3\n        laravel:\n        - 11.*\n        dependency-version:\n        - prefer-lowest\n        - prefer-stable\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: '~/.composer/cache/files'\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: 'packages/vue/package.json'\n    - name: Install Node Dependencies\n      run: npm install\n    - name: Run npm tests\n      run: npm run test\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 15: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/7a6a4cce-996d-4050-b7ce-e135ca5e06aa.yml\", \"line\": 15, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":9161,"level":3,"name":"mckinsey/vizro","file_name":"test-unit-vizro-mcp.yml","len":5,"prompt":"Generate a GitHub Workflow named `Unit tests for Vizro` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) The workflow would run whenever there is a pull_request event targeting: a branch named main. The workflow sets 2 environment variables to use: `PYTHONUNBUFFERED` is set to `1` and `FORCE_COLOR` is set to `1`. For all run steps in the workflow, default working directory is set to vizro-mcp. The workflow has one job. The 1st job is named `test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}` and its job id is `test-unit-vizro-core`. This job will run on ${{ matrix.config.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `config` has 5 values: {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'}, {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'}, {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'}, {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'} and {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}. The variable `is_non_release_pr` has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}. If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix. The job `test-unit-vizro-core` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ matrix.config.python-version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ matrix.config.python-version }}`. The 3rd step is named `Install Hatch`. This step runs a script: `pip install hatch`. The 4th step is named `Show dependency tree`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:pip tree`. The 5th step is named `Run unit tests`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage`. /no-think","answer":"```yaml\nname: Unit tests for Vizro\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        # This is not a nice way to define the matrix, but it's the only way that's possible so that we only run\n        # the job on Windows on merge to main rather than in every PR. See:\n        # https://stackoverflow.com/questions/66025220/paired-values-in-github-actions-matrix\n        # https://github.com/orgs/community/discussions/26253\n        # https://github.com/actions/runner/issues/1985\n        config:\n        - python-version: '3.10'\n          hatch-env: all.py3.10\n          os: ubuntu-latest\n        - python-version: '3.11'\n          hatch-env: all.py3.11\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: ubuntu-latest\n        - python-version: '3.13'\n          hatch-env: all.py3.13\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: windows-latest\n          label: Windows\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","llm_response":"```yaml\nname: Unit tests for Vizro\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false # Run tests for all supported Python versions\n      matrix:\n        config:\n        - {python-version: '3.10', hatch-env: 'all.py3.10', os: 'ubuntu-latest'}\n        - {python-version: '3.11', hatch-env: 'all.py3.11', os: 'ubuntu-latest'}\n        - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'ubuntu-latest'}\n        - {python-version: '3.13', hatch-env: 'all.py3.13', os: 'ubuntu-latest'}\n        - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'windows-latest', label: 'Windows'}\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: True\n          config:\n            - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'windows-latest', label: 'Windows'}   # Windows tests only run on release PRs\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n    - name: Install Hatch\n      run: pip install hatch\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","repository_id":94586448,"lint_valid":false,"lint_output":"[{\"message\": \"value [{\\\"hatch-env\\\": \\\"all.py3.12\\\", \\\"label\\\": \\\"Windows\\\", \\\"os\\\": \\\"windows-latest\\\", \\\"python-version\\\": \\\"3.12\\\"}] in \\\"exclude\\\" does not match in matrix \\\"config\\\" combinations. possible values are {\\\"hatch-env\\\": \\\"all.py3.10\\\", \\\"os\\\": \\\"ubuntu-latest\\\", \\\"python-version\\\": \\\"3.10\\\"}, {\\\"hatch-env\\\": \\\"all.py3.11\\\", \\\"os\\\": \\\"ubuntu-latest\\\", \\\"python-version\\\": \\\"3.11\\\"}, {\\\"hatch-env\\\": \\\"all.py3.12\\\", \\\"os\\\": \\\"ubuntu-latest\\\", \\\"python-version\\\": \\\"3.12\\\"}, {\\\"hatch-env\\\": \\\"all.py3.13\\\", \\\"os\\\": \\\"ubuntu-latest\\\", \\\"python-version\\\": \\\"3.13\\\"}, {\\\"hatch-env\\\": \\\"all.py3.12\\\", \\\"label\\\": \\\"Windows\\\", \\\"os\\\": \\\"windows-latest\\\", \\\"python-version\\\": \\\"3.12\\\"}\", \"filepath\": \"../../tmp/34ccda84-70dc-43b3-aa54-64ddb26c1a15.yml\", \"line\": 37, \"column\": 13, \"kind\": \"matrix\", \"snippet\": \"            - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'windows-latest', label: 'Windows'}   # Windows tests only run on release PRs\\n            ^\", \"end_column\": 13}]","meteor_score":0.995357833655706,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":574,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-python"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":17801,"level":3,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. This job will run only if the condition(${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `Assigned` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The job id of the 2nd job is `FirstTimeCodeContribution`. This job will run only if the condition(${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `FirstTimeCodeContribution` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. This step runs action `peter-evans/create-or-update-comment` tagged as v4. The step defines 2 input parameters for the action: `issue-number` is set to `${{ github.event.issue.number || github.event.pull_request.number }}` and `body` is set to `Welcome to the vibrant world of open-source development with JabRef!\n\nNewcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\nIn case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\nHaving any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\nâš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\nðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\nHappy coding! ðŸš€\n`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. This job will run only if the condition(${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 5 --owner JabRef --url $ISSUE_URL\n`. The job id of the 4th job is `needs-refinement`. This job will run only if the condition(github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef') is met. This job will run on ubuntu-latest runner. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 15 --owner JabRef --url $ISSUE_URL\n`. The 5th job is named `status: freeze` and its job id is `status-freeze`. This job will run only if the condition(${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `status-freeze` has one step. The 1st step is named `status: freeze`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 9 --owner JabRef --url $ISSUE_URL\n`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"<think>We are generating a GitHub Actions workflow named \"On issue labeled\"\n The workflow is triggered when a label is added to an issue (i.e., `issues` event with `labeled` activity type)\n We have 5 jobs as described.\n\n Steps:\n 1. The workflow name is \"On issue labeled\"\n 2. Trigger: on issues with types [labeled]\n 3. Jobs:\n    a. Job 1: id `Assigned`, name `ðŸ“ Assigned`\n        - Condition: github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef'\n        - Runs on: ubuntu-latest\n        - Permissions: only for this job, set `issues: write`\n        - Steps:\n            Step 1: Move to \"Assigned\" Column in \"Candidates for University Projects\" project (id 3)\n            Step 2: Move to \"Assigned\" Column in \"Good First Issues\" project (id 5)\n\n    b. Job 2: id `FirstTimeCodeContribution`\n        - Condition: github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef'\n        - Runs on: ubuntu-latest\n        - Permissions: only for this job, set `issues: write`\n        - Steps:\n            Step 1: GreetingFirstTimeCodeContribution (using peter-evans/create-or-update-comment@v4)\n            Step 2: Move to \"Assigned\" Column in project 3 for label 'FirstTimeCodeContribution'\n            Step 3: Move to \"Assigned\" Column in project 5 for label 'FirstTimeCodeContribution'\n\n    c. Job 3: id `good-first-issue`, name `good first issue`\n        - Condition: github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef'\n        - Runs on: ubuntu-latest\n        - Steps:\n            Step 1: Add the issue to project 5 (using gh cli) with environment variable GH_TOKEN\n\n    d. Job 4: id `needs-refinement`\n        - Condition: github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef'\n        - Runs on: ubuntu-latest\n        - Steps:\n            Step 1: Add the issue to project 15 (using gh cli)\n\n    e. Job 5: id `status-freeze`, name `status: freeze`\n        - Condition: github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef'\n        - Runs on: ubuntu-latest\n        - Steps:\n            Step 1: Add the issue to project 9 (using gh cli)\n\n Note: For jobs that require the `gh` command (jobs 3,4,5), we set an environment variable `GH_TOKEN` to a secret.\n        We assume the runner has `gh` installed (it is on ubuntu-latest by default) and we set the token via env.\n\n Important: The conditions for each job are written as if expressions.\n\n Let's structure the YAML accordingly.\n\n Note: The workflow file should be in .github/workflows/on_issue_labeled.yml\n\n We'll write the workflow with the required structure.\n</think>\n\n```yaml\nname: On issue labeled\non:\n  issues:\n    types: [labeled]\n\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: ðŸ“ Assigned\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: \"True\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: ðŸ“ Assigned\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: \"True\"\n\n  FirstTimeCodeContribution:\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        uses: peter-evans/create-or-update-comment@v4\n        with:\n          issue-number: ${{ github.event.issue.number || github.event.pull_request.number }}\n          body: |\n            Welcome to the vibrant world of open-source development with JabRef!\n\n            Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n            In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n            Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n            âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n            ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n            Happy coding! ðŸš€\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: \"True\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: \"True\"\n\n  good-first-issue:\n    name: good first issue\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}\n    steps:\n      - name: good first issue\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 5 --owner JabRef --url $ISSUE_URL\n\n  needs-refinement:\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef' }}\n    steps:\n      - name: needs-refinement\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 15 --owner JabRef --url $ISSUE_URL\n\n  status-freeze:\n    name: status: freeze\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}\n    steps:\n      - name: status: freeze\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 9 --owner JabRef --url $ISSUE_URL\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 104: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/76c2197b-d4d6-4f35-88ed-d4758e8282c4.yml\", \"line\": 104, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":65428,"level":2,"name":"elementsproject/lightning","file_name":"release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Release ðŸš€` for a GitHub repository whose primary programming language is C. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a tag whose name matches v[0-9]+.[0-9]+, a tag whose name matches v[0-9]+.[0-9]+.[0-9]+ or a tag whose name matches v[0-9]+.[0-9]+[0-9a-z]+. 2) someone manually triggers the workflow. This workflow receives 2 inputs: version-this input represents release version and it must be supplied; create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False. The workflow has 4 jobs. The 1st job is named `Check` and its job id is `check`. The job `check` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Determine version`. The 3rd step is named `Validate release`. The 4th step is named `Catpure version output` and its id is `capture`. The 2nd job is named `Releases` and its job id is `releases`. The job `releases` has 5 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Prepare base environment`. The 3rd step is named `Build environment setup`. The 4th step is named `Build release`. The 5th step is named `Upload target artifacts`. The 3rd job is named `Construct release artifact` and its job id is `artifact`. The job `artifact` has one step. The 1st step is named `Merge artifacts`. The 4th job is named `Sign and prepare release draft` and its job id is `release`. The job `release` has 8 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download artifact`. The 3rd step is named `Import GPG keys` and its id is `gpg`. The 4th step is named `Set default GPG key`. The 5th step is named `Sign release`. The 6th step is named `Upload signed artifact`. The 7th step is named `Determine release data` and its id is `release_data`. The 8th step is named `Prepare release draft`. /no-think","answer":"```yaml\n# https://docs.corelightning.org/docs/release-checklist\nname: Release ðŸš€\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: no\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n        fetch-depth: 0\n        fetch-tags: true\n\n    - name: Determine version\n      run: |\n        if [[ \"${{ github.event.inputs.version }}\" != \"\" ]]; then\n          VERSION=\"${{ github.event.inputs.version }}\"\n        elif [ \"${{ github.ref_type }}\" == \"tag\" ]; then\n          VERSION=\"${{ github.ref_name }}\"\n        else\n          echo \"No release version provided and no tag found.\"\n          exit 1\n        fi\n        echo \"VERSION=$VERSION\" >> \"$GITHUB_ENV\"\n        echo \"Determined version: $VERSION\"\n\n    - name: Validate release\n      run: tools/check-release.sh --version=${VERSION}\n\n    - name: Catpure version output\n      id: capture\n      run: echo \"version=${VERSION}\" >> \"$GITHUB_OUTPUT\"\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-24.04\n    strategy:\n      fail-fast: false    # Let each build finish.\n      matrix:\n        target:\n        - bin-Fedora\n        - bin-Ubuntu-focal\n        - bin-Ubuntu-jammy\n        - bin-Ubuntu-noble\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n      # tools/build-release.sh requires lowdown\n    - name: Prepare base environment\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n\n    - name: Build environment setup\n      run: |\n        distribution=$(echo ${{ matrix.target }} | cut -d'-' -f3)\n        echo \"Building base image for ${distribution}\"\n        sudo docker run --rm -v $(pwd):/build ubuntu:${distribution} bash -c \"\\\n            apt-get update && \\\n            apt-get install -y debootstrap && \\\n            debootstrap ${distribution} /build/${distribution}\"\n        sudo tar -C ${distribution} -c . | docker import - ${distribution}\n\n        # Build Docker image\n        docker build -t cl-repro-${distribution} - < contrib/reprobuild/Dockerfile.${distribution}\n      if: contains(matrix.target, 'Ubuntu')\n\n    - name: Build release\n      run: tools/build-release.sh ${{ matrix.target }}\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        path: release/\n        name: ${{ matrix.target }}\n        if-no-files-found: error\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - check\n    - releases\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        pattern: bin-*\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        path: release/\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        trust_level: 5\n\n    - name: Set default GPG key\n      run: echo \"default-key ${{ steps.gpg.outputs.keyid }}\" >> \n        ~/.gnupg/gpg.conf\n\n    - name: Sign release\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n        tools/build-release.sh --without-zip sign\n        mv release/SHA256SUMS.asc${{ steps.gpg.outputs.keyid  }} release/SHA256SUMS.asc\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        overwrite: true\n        path: release/\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        VERSION=${{ env.version }}\n        CHANGELOG_VERSION=${VERSION#v}\n        echo \"CHANGELOG_VERSION=$CHANGELOG_VERSION\"\n        echo \"changelog_version=$CHANGELOG_VERSION\" >> \"$GITHUB_OUTPUT\"\n\n        CHANGELOG_TITLE=$(grep \"## \\[${CHANGELOG_VERSION}\\]\" CHANGELOG.md)\n        echo \"CHANGELOG_TITLE=$CHANGELOG_TITLE\"\n        echo \"changelog_title=$CHANGELOG_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n        RELEASE_TITLE=$(echo $CHANGELOG_TITLE | cut -d'\"' -f2)\n        echo \"RELEASE_TITLE=$RELEASE_TITLE\"\n        echo \"release_title=$RELEASE_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n    - name: Prepare release draft\n      if: github.event_name == 'push' || (github.event_name == \n        'workflow_dispatch' && github.event.inputs.create_release == 'yes')\n      uses: softprops/action-gh-release@v2\n      with:\n        name: ${{ env.version }} ${{ steps.release_data.outputs.release_title }}\n        tag_name: ${{ env.version }}\n        draft: true\n        prerelease: contains(env.version, \"-rc\")\n        files: release/*\n        fail_on_unmatched_files: true\n\n```","llm_response":"<think>Okay, I need to create a GitHub Actions workflow YAML file based on the user's specifications. Let me go through the requirements step by step.\n\nFirst, the workflow name is \"Release ðŸš€\". The trigger events are pushes to specific tags and manual triggers. The tags should match v followed by version numbers: v[0-9]+.[0-9]+, v[0-9]+.[0-9]+.[0-9]+, or v[0-9]+.[0-9]+[0-9a-z]+. Also, manual trigger via workflow_dispatch.\n\nInputs: version (required), create_release (default False, choice of True/False).\n\nFour jobs: check, releases, artifact, release.\n\nStarting with the on events. For the push tags, the patterns need to be regex. GitHub uses fnmatch by default, but for complex patterns, maybe using regex with types: [tag] and then patterns under tags. Wait, the user specified three tag patterns. Let me check the syntax. The correct way is to use the tags filter under push. But GitHub's push event with tags uses glob patterns. However, the user provided regex-like patterns. Wait, GitHub uses glob patterns, not regex. So for example, v[0-9]+.[0-9]+ would be v[0-9]*.[0-9]* but maybe the user wants exact matches. Wait, the user's patterns are:\n\nv[0-9]+.[0-9]+ â†’ maybe like v1.2\n\nv[0-9]+.[0-9]+.[0-9]+ â†’ v1.2.3\n\nv[0-9]+.[0-9]+[0-9a-z]+ â†’ v1.2a or v1.20b\n\nBut in GitHub's glob syntax, + isn't supported. So perhaps using ** but that's not right. Alternatively, using regex with the types: [tag] and then using the pattern property with regex. Wait, no. The push event in GitHub Actions uses glob patterns for tags. So for example, to match v followed by digits, dot, digits, maybe:\n\ntags:\n  - 'v[0-9]*.[0-9]*'\n  - 'v[0-9]*.[0-9]*.[0-9]*'\n  - 'v[0-9]*.[0-9]*[0-9a-z]*'\n\nBut the user specified + which is one or more, so in glob * is zero or more. To get one or more, maybe [0-9][0-9]* but that's not standard. Alternatively, perhaps the user intended regex, but GitHub doesn't support regex in tag patterns for push events. Wait, actually, GitHub does allow using regex for tag names when using the `types` filter with `push` but no, the `push` event's tags filter uses glob patterns.\n\nWait, looking at GitHub documentation: For the push event, the tags filter uses glob patterns. So for example, v[0-9]+.[0-9]+ would need to be expressed as v[0-9]*.[0-9]* but that would also match v.. which is invalid. Hmm. Alternatively, maybe the user made a mistake and actually wants regex, but GitHub doesn't support that here. However, the problem statement says the tag names match those regex patterns, so perhaps the correct approach is to use the `types` filter with regex. Wait, no. The `push` event's tags filter in GitHub Actions uses glob patterns, not regex. So to approximate the regex patterns given, perhaps:\n\nFirst pattern: v[0-9]+.[0-9]+ â†’ v followed by one or more digits, dot, one or more digits. In glob, this would be v[0-9]*.[0-9]* but that allows zero or more. To enforce at least one digit, maybe v[0-9][0-9]*.[0-9][0-9]* but GitHub's glob might not support that. Alternatively, perhaps the user expects using regex, but GitHub doesn't. Maybe the user is mistaken, but as per instructions, I need to follow their input.\n\nWait, the problem says: \"a tag whose name matches v[0-9]+.[0-9]+\", etc. So perhaps the correct way is to use the `types` filter with regex, but GitHub's push event doesn't support regex for tags. Wait, no. Looking at GitHub's documentation: For the `on.push.tags` filter, you can use glob patterns. So for example, to match v followed by digits, dot, digits, you can use v[0-9]*.[0-9]*. But that would also match v1. (with a trailing dot), but maybe that's acceptable. Alternatively, maybe the user intended to use regex, but GitHub doesn't allow that here. Since the problem statement specifies the regex patterns, perhaps the correct approach is to use the glob patterns that approximate those regex.\n\nAlternatively, maybe the user is using the regex syntax but expects glob. For example, v[0-9]+.[0-9]+ in regex would be v followed by one or more digits, a dot, one or more digits. In glob, this would be v[0-9]*.[0-9]* but since * is zero or more, but perhaps the user is okay with that. Alternatively, maybe using v[0-9][0-9]*.[0-9][0-9]* but I'm not sure if GitHub supports that. Let me check. According to GitHub's docs, the glob patterns support *, **, ?, and character ranges like [abc]. So [0-9] is a character range, and * is any number of characters. So to get one or more digits, it's [0-9]* but that's zero or more. To enforce at least one, maybe it's not possible with glob, so perhaps the user's requirement is a bit off, but we'll proceed with the glob patterns as specified.\n\nSo the three tag patterns would be:\n\n- v[0-9]*.[0-9]*\n- v[0-9]*.[0-9]*.[0-9]*\n- v[0-9]*.[0-9]*[0-9a-z]*\n\nWait, the third one is v[0-9]+.[0-9]+[0-9a-z]+, which in glob would be v[0-9]*.[0-9]*[0-9a-z]*. But the trailing part is [0-9a-z]+, so maybe v[0-9]*.[0-9]*[0-9a-z]*.\n\nSo the on: push tags would list these three patterns.\n\nAlso, the workflow should trigger on workflow_dispatch for manual runs.\n\nNext, inputs: version (required), create_release (default false, choice of true/false).\n\nThen four jobs.\n\nFirst job: check, with four steps.\n\nSteps:\n\n1. Checkout repository\n2. Determine version\n3. Validate release\n4. Capture version output (id: capture)\n\nSecond job: releases (id: releases), five steps.\n\n1. Checkout\n2. Prepare base environment\n3. Build environment setup\n4. Build release\n5. Upload target artifacts\n\nThird job: artifact (id: artifact), one step: Merge artifacts.\n\nFourth job: release (id: release), eight steps.\n\n1. Checkout\n2. Download artifact\n3. Import GPG keys (id: gpg)\n4. Set default GPG key\n5. Sign release\n6. Upload signed artifact\n7. Determine release data (id: release_data)\n8. Prepare release draft\n\nNow, need to structure the YAML accordingly.\n\nFirst, the workflow name:\n\nname: Release ðŸš€\n\non:\n  push:\n    tags:\n      - 'v[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*[0-9a-z]*'\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n      create_release:\n        type: choice\n        options: [true, false]\n        default: 'false'\n\nWait, the user says create_release is a choice with options True and False, default False. In GitHub, the choice options are strings, so probably 'true' and 'false' as strings, but the user says data type is choice. Wait, in workflow_dispatch inputs, the type for choice is 'choice', and options are strings. So the options would be ['True', 'False'] but the user says the data type is choice with options including True and False. Wait, the user says: \"the data type is choice and it has options including True and False\". So perhaps the options are 'true' and 'false' as strings, but the user wrote True and False. Maybe case-sensitive. Let me check GitHub's docs. For workflow_dispatch inputs, the choice options are strings. So probably the options should be ['true', 'false'], but the user says \"True\" and \"False\". Hmm. The user says \"options including True and False\", so maybe as strings 'True' and 'False', but GitHub might expect lowercase. Wait, no, the user specifies the options as True and False, so perhaps the options are ['True', 'False'].\n\nWait, the user says: \"the data type is choice and it has options including True and False\". So the options are the strings \"True\" and \"False\". So in the YAML, the options would be ['True', 'False'].\n\nBut in GitHub, when you define a choice input, the options are strings. So the user probably wants the options to be the strings 'True' and 'False', with default 'False'.\n\nWait, the user says: \"create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False.\"\n\nSo the default is False (as a string?), but in YAML, boolean values are unquoted. However, in GitHub Actions, inputs are strings. Wait, no: workflow_dispatch inputs are all strings, even if they represent booleans. So the default value should be the string 'False', and the options are ['True', 'False'].\n\nWait, but the user says \"default value is False\", which is a boolean, but in GitHub Actions, inputs are strings. So the default should be the string 'False'.\n\nSo in the inputs section:\n\ncreate_release:\n  type: choice\n  options: [True, False]\n  default: 'False'\n\nBut in YAML, the options would be written as strings. So probably:\n\noptions: ['True', 'False']\ndefault: 'False'\n\nBut the user says \"data type is choice\", so the type is 'choice', which in GitHub is specified as type: choice.\n\nNow, the jobs.\n\nEach job needs runs-on, probably ubuntu-latest unless specified, but the user didn't specify, so default to ubuntu-latest.\n\nJob 'check' (id: check) has four steps.\n\nSteps:\n\n- name: Checkout repository\n  uses: actions/checkout@v4\n\n- name: Determine version\n\n- name: Validate release\n\n- name: Catpure version output (id: capture)\n\nWait, the fourth step's name is \"Catpure version output\" which is a typo (should be Capture), but the user wrote \"Catpure\", so I'll keep it as per user input.\n\nSimilarly, other step names as given.\n\nFor the 'releases' job, steps include Checkout, Prepare base environment, etc.\n\nThe 'artifact' job has one step: Merge artifacts.\n\nThe 'release' job has eight steps, including Import GPG keys (id: gpg), Determine release data (id: release_data).\n\nNow, need to structure the jobs with their steps.\n\nAlso, need to handle dependencies between jobs. The user didn't specify dependencies, so perhaps the jobs run in sequence? But the user didn't mention, so maybe they are independent, but typically, jobs may depend on previous ones. However, the problem statement doesn't specify, so perhaps they are separate. Wait, the user says \"The workflow has 4 jobs.\" without specifying dependencies, so maybe they run in parallel unless stated. But in practice, some jobs might depend on others. However, the user didn't specify, so perhaps no dependencies, but maybe the 'release' job depends on 'artifact', which depends on 'releases', etc. But since the user didn't mention, perhaps we should not add any needs unless specified.\n\nWait, the problem statement says \"The workflow has 4 jobs.\" and lists them, but no info on dependencies. So in the YAML, each job is defined separately without 'needs' unless implied. However, in a real workflow, you might have dependencies, but since the user didn't specify, perhaps we should not add any. But maybe the 'releases' job produces artifacts that 'artifact' uses, and 'artifact' is used by 'release'. But the user didn't specify, so perhaps we have to assume that the jobs are independent. However, the 'release' job has a step \"Download artifact\", which implies it's downloading artifacts from previous jobs. So likely, the 'release' job needs the 'artifact' job, which needs 'releases', etc.\n\nBut the user didn't specify dependencies, so maybe we need to infer. However, the problem statement says \"The workflow has 4 jobs.\" without mentioning dependencies, so perhaps the answer should not include 'needs' unless specified. But the 'release' job's second step is \"Download artifact\", which probably refers to artifacts from previous jobs. So to download artifacts, the job must depend on the job that uploaded them.\n\nIn GitHub Actions, to download artifacts, you need to specify the job that created them. So the 'release' job would need to have a 'needs' on the 'artifact' job, which in turn needs 'releases', etc.\n\nBut the user didn't specify dependencies, so perhaps it's expected to include the necessary 'needs' based on the steps described.\n\nFor example:\n\n- 'releases' job uploads artifacts.\n\n- 'artifact' job merges artifacts, so it probably needs 'releases'.\n\n- 'release' job downloads artifact, so needs 'artifact'.\n\nBut the user didn't specify, but the step names imply dependencies.\n\nSo for the 'artifact' job, it has a step \"Merge artifacts\", which likely uses artifacts from 'releases'.\n\nSimilarly, 'release' job's \"Download artifact\" step would download from 'artifact'.\n\nTherefore, the jobs should have 'needs' dependencies.\n\nBut the user didn't mention this, so perhaps it's part of the correct workflow.\n\nSo:\n\n- check job: probably runs first, maybe no dependencies.\n\n- releases job: may depend on check.\n\n- artifact job: depends on releases.\n\n- release job: depends on artifact.\n\nBut the user didn't specify, but given the step names, it's logical.\n\nHowever, the problem statement says \"The workflow has 4 jobs.\" without mentioning dependencies, so perhaps the answer should include the 'needs' where necessary.\n\nBut since the user didn't specify, but the steps imply dependencies, I think we should include the 'needs' to make the workflow functional.\n\nFor example:\n\njob 'releases' might need 'check' to validate the release.\n\njob 'artifact' needs 'releases' to have built the artifacts.\n\njob 'release' needs 'artifact' to have merged the artifacts.\n\nSo adding 'needs' accordingly.\n\nBut the user didn't specify, so this is a bit of a judgment call.\n\nAlternatively, maybe all jobs run independently, but that wouldn't make sense for a release workflow.\n\nGiven that, I'll include the necessary 'needs' dependencies.\n\nNow, putting it all together.\n\nFirst, the on events:\n\non:\n  push:\n    tags:\n      - 'v[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*[0-9a-z]*'\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n      create_release:\n        type: choice\n        options: [True, False]\n        default: 'False'\n\nWait, the user says \"create_release ... default value is False\", so default: 'False' (as a string).\n\nBut in GitHub, the default for a choice input is a string, so 'False' is correct.\n\nNow, jobs:\n\njobs:\n  check:\n    name: Check\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Determine version\n        # ... steps\n      - name: Validate release\n      - name: Catpure version output\n        id: capture\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Prepare base environment\n      - name: Build environment setup\n      - name: Build release\n      - name: Upload target artifacts\n\n  artifact:\n    name: Construct release artifact\n    needs: releases\n    runs-on: ubuntu-latest\n    steps:\n      - name: Merge artifacts\n\n  release:\n    name: Sign and prepare release draft\n    needs: artifact\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Download artifact\n      - name: Import GPG keys\n        id: gpg\n      - name: Set default GPG key\n      - name: Sign release\n      - name: Upload signed artifact\n      - name: Determine release data\n        id: release_data\n      - name: Prepare release draft\n\nWait, but the user didn't specify 'needs', but given the context, it's necessary for the workflow to function. However, the problem statement doesn't mention dependencies between jobs, so maybe they should be omitted. But without 'needs', the jobs would run in parallel, which might not be intended.\n\nBut the user's description lists the jobs in order: 1st job check, 2nd releases, 3rd artifact, 4th release. So likely, they should run sequentially.\n\nTherefore, adding 'needs' to enforce order.\n\nSo check runs first.\n\nreleases needs check.\n\nartifact needs releases.\n\nrelease needs artifact.\n\nThus, the 'needs' are added as above.\n\nNow, verifying all steps and job names.\n\nThe user said:\n\n1st job: Check (id check)\n\n2nd job: Releases (id releases)\n\n3rd job: Construct release artifact (id artifact)\n\n4th job: Sign and prepare release draft (id release)\n\nYes.\n\nEach job's steps as per user.\n\nIn the 'release' job, step 3 has id 'gpg', step 7 has id 'release_data'.\n\nNow, the inputs: version is required, create_release has default False.\n\nIn the workflow_dispatch inputs, the version is required, so in the inputs section:\n\ninputs:\n  version:\n    required: true\n    type: string\n  create_release:\n    type: choice\n    options: [True, False]\n    default: 'False'\n\nBut in YAML, the options should be strings. So options: ['True', 'False'].\n\nWait, in GitHub Actions, the options for a choice input are specified as an array of strings. So it should be:\n\noptions:\n  - 'True'\n  - 'False'\n\nBut the user says \"options including True and False\", so as strings.\n\nThus, in the YAML:\n\ncreate_release:\n  type: choice\n  options: ['True', 'False']\n  default: 'False'\n\nBut in the user's input, it's written as \"True\" and \"False\" with capital T and F.\n\nNow, putting all together.\n\nAlso, the workflow name is \"Release ðŸš€\", so name: Release ðŸš€\n\nNow, writing the YAML.\n\nNote that the user said \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\"\n\nSo the final YAML should be enclosed in ```yaml ... ```\n\nLet me check for any possible mistakes.\n\n- Tag patterns: using glob patterns as discussed.\n\n- Inputs correctly defined.\n\n- Jobs with correct IDs and steps.\n\n- Step IDs where specified (capture, gpg, release_data).\n\nYes.\n\nI think that's it.\n</think>\n\n```yaml\nname: Release ðŸš€\n\non:\n  push:\n    tags:\n      - 'v[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*.[0-9]*'\n      - 'v[0-9]*.[0-9]*[0-9a-z]*'\n  workflow_dispatch:\n    inputs:\n      version:\n        required: true\n        type: string\n      create_release:\n        type: choice\n        options: ['True', 'False']\n        default: 'False'\n\njobs:\n  check:\n    name: Check\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Determine version\n      - name: Validate release\n      - name: Catpure version output\n        id: capture\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Prepare base environment\n      - name: Build environment setup\n      - name: Build release\n      - name: Upload target artifacts\n\n  artifact:\n    name: Construct release artifact\n    needs: releases\n    runs-on: ubuntu-latest\n    steps:\n      - name: Merge artifacts\n\n  release:\n    name: Sign and prepare release draft\n    needs: artifact\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Download artifact\n      - name: Import GPG keys\n        id: gpg\n      - name: Set default GPG key\n      - name: Sign release\n      - name: Upload signed artifact\n      - name: Determine release data\n        id: release_data\n      - name: Prepare release draft\n```","repository_id":3976044,"lint_valid":false,"lint_output":"[{\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 26, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Determine version\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 27, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Validate release\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 28, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Catpure version output\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 38, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Prepare base environment\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 39, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Build environment setup\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 40, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Build release\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 41, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Upload target artifacts\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 48, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Merge artifacts\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 57, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Download artifact\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 58, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Import GPG keys\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 60, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Set default GPG key\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 61, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Sign release\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 62, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Upload signed artifact\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 63, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Determine release data\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/e6f16fce-3078-4b2a-9a04-2211f856968b.yml\", \"line\": 65, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Prepare release draft\\n        ^~~~~\", \"end_column\": 13}]","meteor_score":0.25603808518733145,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1416,"stats":{"NumofTriggers":2,"Triggers":["push","workflow_dispatch"],"NumofJobs":4,"NumofActions":9,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/download-artifact","actions/upload-artifact","actions/upload-artifact","actions/upload-artifact/merge","crazy-max/ghaction-import-gpg","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact/merge"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v6","name":"crazy-max/ghaction-import-gpg"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v2","name":"softprops/action-gh-release"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":18,"CyclomaticComplexity":3}}
{"id":17801,"level":2,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The job id of the 2nd job is `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The job id of the 4th job is `needs-refinement`. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The 5th job is named `status: freeze` and its job id is `status-freeze`. The job `status-freeze` has one step. The 1st step is named `status: freeze`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types: [labeled]\n\njobs:\n  Assigned:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: |\n          # Code to move issue to \"Assigned\" column in \"Candidates for University Projects\"\n          echo \"Moving issue to 'Assigned' column in 'Candidates for University Projects'\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: |\n          # Code to move issue to \"Assigned\" column in \"Good First Issues\"\n          echo \"Moving issue to 'Assigned' column in 'Good First Issues'\"\n\n  FirstTimeCodeContribution:\n    runs-on: ubuntu-latest\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        run: |\n          # Code to greet first-time code contributors\n          echo \"Welcome to our project! Let's get started.\"\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: |\n          # Code to move issue to \"Assigned\" column in \"Candidates for University Projects\"\n          echo \"Moving issue to 'Assigned' column in 'Candidates for University Projects'\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: |\n          # Code to move issue to \"Assigned\" column in \"Good First Issues\"\n          echo \"Moving issue to 'Assigned' column in 'Good First Issues'\"\n\n  good-first-issue:\n    runs-on: ubuntu-latest\n    steps:\n      - name: good first issue\n        run: |\n          # Code for handling good first issues\n          echo \"Handling good first issue\"\n\n  needs-refinement:\n    runs-on: ubuntu-latest\n    steps:\n      - name: needs-refinement\n        run: |\n          # Code for handling issues that need refinement\n          echo \"Handling issues that need refinement\"\n\n  status-freeze:\n    runs-on: ubuntu-latest\n    steps:\n      - name: status: freeze\n        run: |\n          # Code to handle issues in the \"status: freeze\" column\n          echo \"Handling issues in the 'status: freeze' column\"\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 55: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/7a2ad4ac-ba1a-499e-a895-379d24c06d00.yml\", \"line\": 55, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      - name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":40182,"level":3,"name":"dotnetcore/aspectcore-framework","file_name":"build-pr-ci.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build for PR` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: there is activity relating to a pull request. The workflow has one job. The job id of the 1st job is `build-and-test`. This job will run on windows-latest runner. The job `build-and-test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Setup .NET Core`. This step runs action `actions/setup-dotnet` tagged as v4. The step defines an input parameter for the action: `dotnet-version` is set to `9.x`. The 3rd step is named `Build Reason`. This step runs a script: `echo ref: ${{github.ref}} event: ${{github.event_name}}`. The 4th step is named `Build`. This step uses bash to run a script: `for project in $(find ./src -name \"*.csproj\"); do\n  dotnet build --configuration Release $project\ndone\n`. The 5th step is named `Run Tests`. This step uses bash to run a script: `for project in $(find ./tests -name \"*.csproj\"); do\n  dotnet test --configuration Release $project\ndone\n`. /no-think","answer":"```yaml\nname: Build for PR\non:\n  pull_request:\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: 'echo ref: ${{github.ref}} event: ${{github.event_name}}'\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","llm_response":"```yaml\nname: Build for PR\n\non:\n  pull_request:\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n    - name: Build Reason\n      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","repository_id":3450821,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 18: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/3785bf9e-7b1a-4063-a6aa-c92d16969f9f.yml\", \"line\": 18, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":207,"stats":{"NumofTriggers":1,"Triggers":["pull_request"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-dotnet"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/setup-dotnet"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":62474,"level":1,"name":"PHPCSStandards/PHP_CodeSniffer","file_name":"verify-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Verify release` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) a release, pre-release, or draft of a release is published. 2) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 3) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 4) someone manually triggers the workflow. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 2 jobs. The 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}` and its job id is `verify-available-downloads`. The 2nd job is named `PHIVE: ${{ matrix.pharfile }}` and its job id is `verify-phive`. /no-think","answer":"```yaml\nname: Verify release\n\non:\n  # Run whenever a release is published.\n  release:\n    types: [published]\n  # And whenever this workflow is updated.\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  # Allow manually triggering the workflow.\n  workflow_dispatch:\n\n# Cancels all previous workflow runs for the same branch that have not yet completed.\nconcurrency:\n  # The concurrency group contains the workflow name and the branch name.\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  ##################################################################################\n  # Verify the release is available in all the right places and works as expected. #\n  ##################################################################################\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - Release assets\n        - Unversioned web\n        - Versioned web\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Set source URL and file name\n      id: source\n      shell: bash\n      run: |\n        if [[ \"${{ matrix.download_flavour }}\" == \"Release assets\" ]]; then\n          echo 'SRC=https://github.com/PHPCSStandards/PHP_CodeSniffer/releases/latest/download/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        elif [[ \"${{ matrix.download_flavour }}\" == \"Unversioned web\" ]]; then\n          echo 'SRC=https://phars.phpcodesniffer.com/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo 'SRC=https://phars.phpcodesniffer.com/phars/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}-${{ steps.version.outputs.TAG }}.phar\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n    - name: Verify PHAR file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }} ${{ steps.source.outputs.SRC\n        }}${{ steps.source.outputs.FILE }}\n\n    - name: Verify signature file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.SRC }}${{ steps.source.outputs.FILE }}.asc\n\n    - name: 'DEBUG: List files'\n      run: ls -Rlh\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ${{ steps.source.outputs.FILE }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n    - name: Download public key\n      env:\n        FINGERPRINT: '0x689DAD778FF08760E046228BA978220305CD5C32'\n      run: gpg --keyserver \"hkps://keys.openpgp.org\" --recv-keys \"$FINGERPRINT\"\n\n    - name: Verify signature of the PHAR file\n      run: gpg --verify ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.FILE }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ${{ steps.source.outputs.FILE }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ${{ steps.source.outputs.FILE }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n  # #########################################\n  # Verify install via PHIVE.\n  # #########################################\n  verify-phive:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n        tools: phive\n\n    - name: Install\n      run: phive install ${{ matrix.pharfile }} --copy --trust-gpg-keys \n        689DAD778FF08760E046228BA978220305CD5C32\n\n    - name: 'DEBUG: List files'\n      run: ls -R\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ./tools/${{ matrix.pharfile }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ./tools/${{ matrix.pharfile }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ./tools/${{ matrix.pharfile }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n```","llm_response":"```yaml\nname: Verify release\n\non:\n  release:\n    types: [published]\n  push:\n    paths:\n    - '.github/workflows/verify-release.yml'\n  pull_request:\n    paths:\n    - '.github/workflows/verify-release.yml'\n  workflow_dispatch:\n\n# Cancel the workflow on workflow update\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  verify-available-downloads:\n    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - 'stable'\n        - 'nightly'\n        pharfile:\n        - 'phive.phar'\n        - 'phive-linux-x86_64.phar'\n        - 'phive-linux-arm64.phar'\n        - 'phive-windows-x86_64.phar'\n        - 'phive-windows-arm64.phar'\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Install PHP\n      uses: actions/setup-php@v4\n      with:\n        php-version: '7.4'   # or the latest PHP version available\n        coverage: none\n        extensions: phar\n        run-tests: false\n    - name: Install dependencies\n      run: composer install --no-progress --no-suggest\n    - name: Download ${{ matrix.download_flavour }} ${{ matrix.pharfile }}\n      run: |\n        curl -L https://phive.phplum.io/${{ matrix.download_flavour }}/${{ matrix.pharfile }} -o ${{ matrix.pharfile }}\n    - name: Verify ${{ matrix.pharfile }}\n      run: |\n        php ${{ matrix.pharfile }} --version\n    - name: Upload artifact ${{ matrix.pharfile }} to ${{ github.ref }}\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.pharfile }}\n        path: ${{ matrix.pharfile }}\n        retention-days: 7\n  verify-phive:\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - 'phive.phar'\n        - 'phive-linux-x86_64.phar'\n        - 'phive-linux-arm64.phar'\n        - 'phive-windows-x86_64.phar'\n        - 'phive-windows-arm64.phar'\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Install PHP\n      uses: actions/setup-php@v4\n      with:\n        php-version: '7.4'   # or the latest PHP version available\n        coverage: none\n        extensions: phar\n        run-tests: false\n    - name: Install dependencies\n      run: composer install --no-progress --no-suggest\n    - name: Download ${{ matrix.pharfile }}\n      run: |\n        curl -L https://phive.phplum.io/${{ matrix.pharfile }} -o ${{ matrix.pharfile }}\n    - name: Verify ${{ matrix.pharfile }}\n      run: |\n        php ${{ matrix.pharfile }} --version\n    - name: Install PHIVE\n      run: |\n        php ${{ matrix.pharfile }} install\n    - name: Verify PHIVE installation\n      run: |\n        phive --version\n    - name: Upload artifact ${{ matrix.pharfile }} to ${{ github.ref }}\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.pharfile }}\n        path: ${{ matrix.pharfile }}\n        retention-days: 7\n\n```","repository_id":94694176,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 21: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/7fbf36bb-7cd2-4351-a3d7-01330afc7a01.yml\", \"line\": 21, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1910,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","release","workflow_dispatch"],"NumofJobs":2,"NumofActions":4,"Actions":["octokit/request-action","octokit/request-action","shivammathur/setup-php","shivammathur/setup-php"],"Actions_details":[{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":28,"CyclomaticComplexity":2}}
{"id":9161,"level":3,"name":"mckinsey/vizro","file_name":"test-unit-vizro-mcp.yml","len":5,"prompt":"Generate a GitHub Workflow named `Unit tests for Vizro` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) The workflow would run whenever there is a pull_request event targeting: a branch named main. The workflow sets 2 environment variables to use: `PYTHONUNBUFFERED` is set to `1` and `FORCE_COLOR` is set to `1`. For all run steps in the workflow, default working directory is set to vizro-mcp. The workflow has one job. The 1st job is named `test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}` and its job id is `test-unit-vizro-core`. This job will run on ${{ matrix.config.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `config` has 5 values: {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'}, {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'}, {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'}, {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'} and {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}. The variable `is_non_release_pr` has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}. If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix. The job `test-unit-vizro-core` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ matrix.config.python-version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ matrix.config.python-version }}`. The 3rd step is named `Install Hatch`. This step runs a script: `pip install hatch`. The 4th step is named `Show dependency tree`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:pip tree`. The 5th step is named `Run unit tests`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage`. /no-think","answer":"```yaml\nname: Unit tests for Vizro\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        # This is not a nice way to define the matrix, but it's the only way that's possible so that we only run\n        # the job on Windows on merge to main rather than in every PR. See:\n        # https://stackoverflow.com/questions/66025220/paired-values-in-github-actions-matrix\n        # https://github.com/orgs/community/discussions/26253\n        # https://github.com/actions/runner/issues/1985\n        config:\n        - python-version: '3.10'\n          hatch-env: all.py3.10\n          os: ubuntu-latest\n        - python-version: '3.11'\n          hatch-env: all.py3.11\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: ubuntu-latest\n        - python-version: '3.13'\n          hatch-env: all.py3.13\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: windows-latest\n          label: Windows\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","llm_response":" ```yaml\nname: Unit tests for Vizro\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\ndefaults:\n  run:\n    working-directory: vizro-mcp\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      matrix:\n        include:\n          - config:\n              python-version: '3.10'\n              hatch-env: 'all.py3.10'\n              os: 'ubuntu-latest'\n          - config:\n              python-version: '3.11'\n              hatch-env: 'all.py3.11'\n              os: 'ubuntu-latest'\n          - config:\n              python-version: '3.12'\n              hatch-env: 'all.py3.12'\n              os: 'ubuntu-latest'\n          - config:\n              python-version: '3.13'\n              hatch-env: 'all.py3.13'\n              os: 'ubuntu-latest'\n            label: 'Windows'\n          - config:\n              python-version: '3.12'\n              hatch-env: 'all.py3.12'\n              os: 'windows-latest'\n            label: 'Windows'\n            is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}\n    if: |\n      (\n        !steps.is_non_release_pr.outcome ||\n        (steps.is_non_release_pr.outcome && matrix.config.os != 'windows-latest')\n      )\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Set up Python ${{ matrix.config.python-version }}\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ matrix.config.python-version }}\n      - name: Install Hatch\n        run: pip install hatch\n      - name: Show dependency tree\n        run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n      - name: Run unit tests\n        run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n        if: ${{ matrix.is_non_release_pr }}\nconcurrency:\n  group: ${{ github.head_ref || github.ref }}\n  cancel-in-progress: true\n``` ","repository_id":94586448,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"label\\\" is not defined in object type {hatch-env: string; os: string; python-version: number}\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 15, \"column\": 76, \"kind\": \"expression\", \"snippet\": \"    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\\n                                                                           ^~~~~~~~~~~~~~~~~~~\", \"end_column\": 94}, {\"message\": \"context \\\"steps\\\" is not allowed here. available contexts are \\\"github\\\", \\\"inputs\\\", \\\"needs\\\", \\\"vars\\\". see https://docs.github.com/en/actions/learn-github-actions/contexts#context-availability for more details\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 44, \"column\": 12, \"kind\": \"expression\", \"snippet\": \"      (\", \"end_column\": 12}, {\"message\": \"property \\\"is_non_release_pr\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 44, \"column\": 12, \"kind\": \"expression\", \"snippet\": \"      (\", \"end_column\": 12}, {\"message\": \"context \\\"steps\\\" is not allowed here. available contexts are \\\"github\\\", \\\"inputs\\\", \\\"needs\\\", \\\"vars\\\". see https://docs.github.com/en/actions/learn-github-actions/contexts#context-availability for more details\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 45, \"column\": 12, \"kind\": \"expression\", \"snippet\": \"        !steps.is_non_release_pr.outcome ||\\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}, {\"message\": \"property \\\"is_non_release_pr\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 45, \"column\": 12, \"kind\": \"expression\", \"snippet\": \"        !steps.is_non_release_pr.outcome ||\\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}, {\"message\": \"context \\\"matrix\\\" is not allowed here. available contexts are \\\"github\\\", \\\"inputs\\\", \\\"needs\\\", \\\"vars\\\". see https://docs.github.com/en/actions/learn-github-actions/contexts#context-availability for more details\", \"filepath\": \"../../tmp/a85c6cab-9a40-40be-a21f-126ce53c20b4.yml\", \"line\": 45, \"column\": 47, \"kind\": \"expression\", \"snippet\": \"        !steps.is_non_release_pr.outcome ||\", \"end_column\": 47}]","meteor_score":0.837242117780633,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":574,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-python"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":54036,"level":3,"name":"fusion-php/fusion","file_name":"tests-vue.yml","len":5,"prompt":"Generate a GitHub Workflow named `Vue App Tests` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has one value: prefer-stable. The job sets an environment variable to use: `APP_URL` is set to `http://127.0.0.1:8000`. The job `test` has 14 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.cache/composer` and `key` is set to `composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 2 input parameters for the action: `php-version` is set to `${{ matrix.php }}` and `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick`. The 4th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v4. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `apps/vue/package-lock.json`. The 5th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n`. The 6th step is named `Copy Environment File`. This step runs a script: `cp .env.example .env\nphp artisan key:generate\n`. The 7th step is named `Install Node Dependencies`. This step runs a script: `npm ci`. The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 10th step is named `Build Assets`. This step runs a script: `npm run build`. The 11th step is named `Install Playwright Browsers`. This step runs a script: `npx playwright install --with-deps`. The 12th step is named `Run Laravel Server`. This step runs a script: `php artisan serve --no-reload &`. The 13th step is named `Run Playwright tests`. This step runs a script: `npx playwright test`. The 14th step is named `Upload artifact playwright-report to apps/vue/playwright/reports/`. This step will run only if the condition(${{ !cancelled() }}) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `playwright-report`, `path` is set to `apps/vue/playwright/reports/` and `retention-days` is set to `30`. /no-think","answer":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: http://127.0.0.1:8000\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      working-directory: apps/vue\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      working-directory: apps/vue\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      working-directory: apps/vue\n      run: npm ci\n\n      # Install Rollup's Linux-specific optional dependency explicitly\n      # This is needed due to an npm bug with optional dependencies:\n      # https://github.com/npm/cli/issues/4828\n    - name: Install Rollup Linux Dependencies\n      working-directory: packages/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Install Rollup Linux Dependencies\n      working-directory: apps/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Build Assets\n      working-directory: apps/vue\n      run: npm run build\n\n    - name: Install Playwright Browsers\n      working-directory: apps/vue\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      working-directory: apps/vue\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      working-directory: apps/vue\n      run: npx playwright test\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","llm_response":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \n      matrix.dependency-version }}\n    env:\n      APP_URL: http://127.0.0.1:8000\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      run: npm ci\n      working-directory: apps/vue\n\n    - name: Install Rollup Linux Dependencies\n      run: npm install @rollup/rollup-linux-x64-gnu\n      working-directory: apps/vue\n\n    - name: Install Rollup Linux Dependencies\n      run: npm install @rollup/rollup-linux-x64-gnu\n      working-directory: apps/vue\n\n    - name: Build Assets\n      run: npm run build\n      working-directory: apps/vue\n\n    - name: Install Playwright Browsers\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      run: npx playwright test\n      working-directory: apps/vue\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 19: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/45498588-d6af-4226-b0f0-531a414c82da.yml\", \"line\": 19, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":704,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/cache","actions/checkout","actions/setup-node","actions/upload-artifact","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v4","name":"actions/setup-node"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":14,"CyclomaticComplexity":1}}
{"id":64153,"level":2,"name":"oracle/graal","file_name":"ni-layers.yml","len":5,"prompt":"Generate a GitHub Workflow named `Weekly Native Image Layer Building Tests` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by multiple events: 1) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 2) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 3) the scheduled time has come: at 12:00 am, only on monday. 4) someone manually triggers the workflow. The workflow sets 3 environment variables to use: `LIBRARY_METADATA_PATH` is set to `${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests`, `JAVA_VERSION` is set to `21` and `PYTHON_VERSION` is set to `3.12.3`. The workflow has 2 jobs. The 1st job is named `Build GraalVM and populate matrix` and its job id is `build-graalvm-and-populate-matrix`. The job `build-graalvm-and-populate-matrix` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Build GraalVM JDK`. The 3rd step is named `Tar GraalVM JDK`. The 4th step is named `Persist GraalVM JDK build`. The 5th step is named `Setup python`. The 6th step is named `Populate matrix` and its id is `set-matrix`. The 2nd job is named `${{ matrix.coordinates }}` and its job id is `test-native-image-layer-build`. The job `test-native-image-layer-build` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download GraalVM JDK build`. The 3rd step is named `Extract GraalVM JDK build`. The 4th step is named `Setup JAVA_HOME`. The 5th step is named `Setup python`. The 6th step is named `Build layer`. /no-think","answer":"```yaml\n#\n# Copyright (c) 2024, 2024, Oracle and/or its affiliates. All rights reserved.\n# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n#\n# The Universal Permissive License (UPL), Version 1.0\n#\n# Subject to the condition set forth below, permission is hereby granted to any\n# person obtaining a copy of this software, associated documentation and/or\n# data (collectively the \"Software\"), free of charge and under any and all\n# copyright rights in the Software, and any and all patent rights owned or\n# freely licensable by each licensor hereunder covering either (i) the\n# unmodified Software as contributed to or provided by such licensor, or (ii)\n# the Larger Works (as defined below), to deal in both\n#\n# (a) the Software, and\n#\n# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if\n# one is included with the Software each a \"Larger Work\" to which the Software\n# is contributed by such licensors),\n#\n# without restriction, including without limitation the rights to copy, create\n# derivative works of, display, perform, and distribute the Software and make,\n# use, sell, offer for sale, import, export, have made, and have sold the\n# Software and the Larger Work(s), and to sublicense the foregoing rights on\n# either these or other terms.\n#\n# This license is subject to the following condition:\n#\n# The above copyright notice and either this complete permission notice or at a\n# minimum a reference to the UPL must be included in all copies or substantial\n# portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n#\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1   # Once a week, at midnight on Monday (00:00 UTC)\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    if: (github.repository=='oracle/graal')\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        native-images: \n          native-image,native-image-configure,lib:native-image-agent\n        components: Native Image,Native Image Configure Tool\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      shell: bash\n      run: tar -czvhf graalvm.tgz -C $(dirname ${GRAALVM_HOME}) $(basename \n        ${GRAALVM_HOME})\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tgz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py \n        ${{ env.LIBRARY_METADATA_PATH }}/\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    env:\n      GRAALVM_HOME: ${{ github.workspace }}/graalvm\n    timeout-minutes: 30\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs. \n          build-graalvm-and-populate-matrix.outputs.matrix).coordinates }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@95815c38cf2ff2164869cbab79da8d1f422bc89e   # v4.2.1\n      with:\n        name: graalvm\n        path: .\n    - name: Extract GraalVM JDK build\n      run: tar -xzvf graalvm.tgz -C $(dirname ${GRAALVM_HOME})\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: oracle\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py ${{ env.GRAALVM_HOME }}/bin/native-image \"${{ matrix.coordinates }}\"\n\n```","llm_response":"```yaml\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - '.github/workflows/ni-layers.yml'\n    - 'vm/tests/gh_workflows/NILayerTests/**'\n  pull_request:\n    paths:\n    - '.github/workflows/ni-layers.yml'\n    - 'vm/tests/gh_workflows/NILayerTests/**'\n  schedule:\n    - cron: 0 0 * * 1\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 1\n    - name: Build GraalVM JDK\n      uses: graalvm/setup-graalvm@v1\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: graalvm\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        cache: 'maven'\n    - name: Tar GraalVM JDK\n      run: |\n        mkdir -p graalvm-tar\n        mv $HOME/graalvm* graalvm-tar\n        tar -czvf graalvm-tar.tar.gz graalvm-tar\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm-tar\n        path: 'graalvm-tar.tar.gz'\n        retention-days: 7\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: |\n        python3 .github/scripts/populate_layers_matrix.py\n      shell: bash\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    needs:\n    - build-graalvm-and-populate-matrix\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 1\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@v4\n      with:\n        name: graalvm-tar\n        path: 'downloaded-graalvm-tar'\n    - name: Extract GraalVM JDK build\n      run: |\n        tar -xzvf downloaded-graalvm-tar/graalvm-tar.tar.gz -C $HOME\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: temurin\n        cache: maven\n        java-options: --add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        mvn -B package\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n```","repository_id":3313009,"lint_valid":false,"lint_output":"[{\"message\": \"input \\\"java-options\\\" is not defined in action \\\"actions/setup-java@v4\\\". available inputs are \\\"architecture\\\", \\\"cache\\\", \\\"cache-dependency-path\\\", \\\"check-latest\\\", \\\"distribution\\\", \\\"gpg-passphrase\\\", \\\"gpg-private-key\\\", \\\"java-package\\\", \\\"java-version\\\", \\\"java-version-file\\\", \\\"jdkFile\\\", \\\"job-status\\\", \\\"mvn-toolchain-id\\\", \\\"mvn-toolchain-vendor\\\", \\\"overwrite-settings\\\", \\\"server-id\\\", \\\"server-password\\\", \\\"server-username\\\", \\\"settings-path\\\", \\\"token\\\"\", \"filepath\": \"../../tmp/0edf4db1-08f4-4889-b5bd-708cfc85fd52.yml\", \"line\": 88, \"column\": 9, \"kind\": \"action\", \"snippet\": \"        java-options: --add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED\\n        ^~~~~~~~~~~~~\", \"end_column\": 21}]","meteor_score":0.726142045153405,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1278,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","schedule","workflow_dispatch"],"NumofJobs":2,"NumofActions":8,"Actions":["./.github/actions/build-graalvm","actions/checkout","actions/checkout","actions/download-artifact","actions/setup-java","actions/setup-python","actions/setup-python","actions/upload-artifact"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/build-graalvm"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/checkout"},{"version":"95815c38cf2ff2164869cbab79da8d1f422bc89e","name":"actions/download-artifact"},{"version":"v4","name":"actions/setup-java"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":1}}
{"id":10254,"level":3,"name":"projectblacklight/blacklight","file_name":"test.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is Ruby. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives an input: ref-it is optional, the data type is string, its default value is  and this input represents the branch or reference to run the workflow against. The workflow has 2 jobs. The job id of the 1st job is `set_matrix`. This job will run on ubuntu-latest runner. The job `set_matrix` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v3. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Echo ./.github/matrix.json` and its id is `matrix`. This step runs a script: `echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n`. This job has an output: `matrix` is defined as ${{ steps.matrix.outputs.matrix }}. The 2nd job is named `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}` and its job id is `test`. Before this job runs, `set_matrix` must complete successfully. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The matrix is ${{fromJson(needs.set_matrix.outputs.matrix)}}. The job sets 6 environment variables to use: `RAILS_VERSION` is set to `${{ matrix.rails_version }}`, `SOLR_VERSION` is set to `${{ matrix.solr_version || 'latest' }}`, `VIEW_COMPONENT_VERSION` is set to `${{ matrix.view_component_version }}`, `BOOTSTRAP_VERSION` is set to `${{ matrix.bootstrap_version }}`, `BLACKLIGHT_API_TEST` is set to `${{ matrix.api }}` and `ENGINE_CART_RAILS_OPTIONS` is set to `--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}`. The job `test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Set up Ruby`. This step runs action `ruby/setup-ruby` tagged as v1. The step defines 2 input parameters for the action: `bundler` is set to `latest` and `ruby-version` is set to `${{ matrix.ruby }}`. The 3rd step is named `Change permissions`. This step runs a script: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. The 4th step is named `Install dependencies`. This step runs a script: `bundle install`. The 5th step is named `Run tests`. This step runs a script: `bundle exec rake ci`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: 'chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :'\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","llm_response":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\n\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n\n  test:\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        include: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","repository_id":18227469,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 57: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/74f800d4-55c7-4224-822f-a7f45aedb459.yml\", \"line\": 57, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        | :\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":478,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":2,"NumofActions":3,"Actions":["actions/checkout","actions/checkout","ruby/setup-ruby"],"Actions_details":[{"version":"v3","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"ruby/setup-ruby"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":7,"CyclomaticComplexity":1}}
{"id":54038,"level":3,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has 2 values: prefer-lowest and prefer-stable. The job `test` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.composer/cache/files` and `key` is set to `composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 3 input parameters for the action: `php-version` is set to `${{ matrix.php }}`, `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick` and `coverage` is set to `none`. The 4th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n`. The 5th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v3. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `packages/vue/package.json`. The 6th step is named `Install Node Dependencies`. This step runs a script: `npm install`. The 7th step is named `Run npm tests`. This step runs a script: `npm run test`. The 8th step is named `Run PHP Tests`. This step runs a script: `vendor/bin/phpunit`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \n      matrix.dependency-version }}\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      working-directory: packages/vue\n      run: npm install\n\n    - name: Run npm tests\n      working-directory: packages/vue\n      run: npm run test\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n      working-directory: packages/fusion\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 20: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/7ba7e07f-99d3-4787-840f-2089c48844b8.yml\", \"line\": 20, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":10254,"level":3,"name":"projectblacklight/blacklight","file_name":"test.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is Ruby. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives an input: ref-it is optional, the data type is string, its default value is  and this input represents the branch or reference to run the workflow against. The workflow has 2 jobs. The job id of the 1st job is `set_matrix`. This job will run on ubuntu-latest runner. The job `set_matrix` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v3. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Echo ./.github/matrix.json` and its id is `matrix`. This step runs a script: `echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n`. This job has an output: `matrix` is defined as ${{ steps.matrix.outputs.matrix }}. The 2nd job is named `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}` and its job id is `test`. Before this job runs, `set_matrix` must complete successfully. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The matrix is ${{fromJson(needs.set_matrix.outputs.matrix)}}. The job sets 6 environment variables to use: `RAILS_VERSION` is set to `${{ matrix.rails_version }}`, `SOLR_VERSION` is set to `${{ matrix.solr_version || 'latest' }}`, `VIEW_COMPONENT_VERSION` is set to `${{ matrix.view_component_version }}`, `BOOTSTRAP_VERSION` is set to `${{ matrix.bootstrap_version }}`, `BLACKLIGHT_API_TEST` is set to `${{ matrix.api }}` and `ENGINE_CART_RAILS_OPTIONS` is set to `--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}`. The job `test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Set up Ruby`. This step runs action `ruby/setup-ruby` tagged as v1. The step defines 2 input parameters for the action: `bundler` is set to `latest` and `ruby-version` is set to `${{ matrix.ruby }}`. The 3rd step is named `Change permissions`. This step runs a script: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. The 4th step is named `Install dependencies`. This step runs a script: `bundle install`. The 5th step is named `Run tests`. This step runs a script: `bundle exec rake ci`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: 'chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :'\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","llm_response":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: 'The branch or reference to run the workflow against'\n\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n\n  test:\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}\n    needs:\n      - set_matrix\n    strategy:\n      fail-fast: false # Run tests for all Ruby/Rails combinations\n      matrix:\n        include: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    runs-on: ubuntu-latest\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","repository_id":18227469,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 54: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/6a344bd7-2abd-4c5e-8993-c7b042c083f9.yml\", \"line\": 54, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":478,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":2,"NumofActions":3,"Actions":["actions/checkout","actions/checkout","ruby/setup-ruby"],"Actions_details":[{"version":"v3","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"ruby/setup-ruby"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":7,"CyclomaticComplexity":1}}
{"id":62474,"level":1,"name":"PHPCSStandards/PHP_CodeSniffer","file_name":"verify-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Verify release` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) a release, pre-release, or draft of a release is published. 2) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 3) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 4) someone manually triggers the workflow. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 2 jobs. The 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}` and its job id is `verify-available-downloads`. The 2nd job is named `PHIVE: ${{ matrix.pharfile }}` and its job id is `verify-phive`. /no-think","answer":"```yaml\nname: Verify release\n\non:\n  # Run whenever a release is published.\n  release:\n    types: [published]\n  # And whenever this workflow is updated.\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  # Allow manually triggering the workflow.\n  workflow_dispatch:\n\n# Cancels all previous workflow runs for the same branch that have not yet completed.\nconcurrency:\n  # The concurrency group contains the workflow name and the branch name.\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  ##################################################################################\n  # Verify the release is available in all the right places and works as expected. #\n  ##################################################################################\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - Release assets\n        - Unversioned web\n        - Versioned web\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Set source URL and file name\n      id: source\n      shell: bash\n      run: |\n        if [[ \"${{ matrix.download_flavour }}\" == \"Release assets\" ]]; then\n          echo 'SRC=https://github.com/PHPCSStandards/PHP_CodeSniffer/releases/latest/download/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        elif [[ \"${{ matrix.download_flavour }}\" == \"Unversioned web\" ]]; then\n          echo 'SRC=https://phars.phpcodesniffer.com/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo 'SRC=https://phars.phpcodesniffer.com/phars/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}-${{ steps.version.outputs.TAG }}.phar\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n    - name: Verify PHAR file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }} ${{ steps.source.outputs.SRC\n        }}${{ steps.source.outputs.FILE }}\n\n    - name: Verify signature file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.SRC }}${{ steps.source.outputs.FILE }}.asc\n\n    - name: 'DEBUG: List files'\n      run: ls -Rlh\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ${{ steps.source.outputs.FILE }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n    - name: Download public key\n      env:\n        FINGERPRINT: '0x689DAD778FF08760E046228BA978220305CD5C32'\n      run: gpg --keyserver \"hkps://keys.openpgp.org\" --recv-keys \"$FINGERPRINT\"\n\n    - name: Verify signature of the PHAR file\n      run: gpg --verify ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.FILE }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ${{ steps.source.outputs.FILE }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ${{ steps.source.outputs.FILE }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n  # #########################################\n  # Verify install via PHIVE.\n  # #########################################\n  verify-phive:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n        tools: phive\n\n    - name: Install\n      run: phive install ${{ matrix.pharfile }} --copy --trust-gpg-keys \n        689DAD778FF08760E046228BA978220305CD5C32\n\n    - name: 'DEBUG: List files'\n      run: ls -R\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ./tools/${{ matrix.pharfile }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ./tools/${{ matrix.pharfile }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ./tools/${{ matrix.pharfile }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n```","llm_response":" ```yaml\nname: Verify release\non:\n  release:\n    types: [published]\n  push:\n    paths:\n      - '.github/workflows/verify-release.yml'\n  pull_request_target:\n    paths:\n      - '.github/workflows/verify-release.yml'\njobs:\n  verify-available-downloads:\n    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        os: [ubuntu-latest]\n        include:\n          - download_flavour: 'stable'\n            pharfile: 'phive.phar'\n          - download_flavour: 'stable'\n            pharfile: 'phive.phar'\n          - download_flavour: 'stable'\n            pharfile: 'phive.phar.asc'\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Verify downloads\n        uses: phovea/phive-action@verify-downloads\n        with:\n          phive-download-flavour: ${{ matrix.download_flavour }}\n          phar-file: ${{ matrix.pharfile }}\n  verify-phive:\n    name: PHIVE: ${{ matrix.pharfile }}\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        os: [ubuntu-latest]\n        include:\n          - download_flavour: 'stable'\n            pharfile: 'phive.phar'\n          - download_flavour: 'stable'\n            pharfile: 'phive.phar.asc'\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Verify phive\n        uses: phovea/phive-action@verify-phive\n        with:\n          phive-download-flavour: ${{ matrix.download_flavour }}\n          phar-file: ${{ matrix.pharfile }}\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n``` ","repository_id":94694176,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 13: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/8d2b5bd1-e568-44fa-a263-22ca6e49cdc8.yml\", \"line\": 13, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1910,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","release","workflow_dispatch"],"NumofJobs":2,"NumofActions":4,"Actions":["octokit/request-action","octokit/request-action","shivammathur/setup-php","shivammathur/setup-php"],"Actions_details":[{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":28,"CyclomaticComplexity":2}}
{"id":65428,"level":2,"name":"elementsproject/lightning","file_name":"release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Release ðŸš€` for a GitHub repository whose primary programming language is C. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a tag whose name matches v[0-9]+.[0-9]+, a tag whose name matches v[0-9]+.[0-9]+.[0-9]+ or a tag whose name matches v[0-9]+.[0-9]+[0-9a-z]+. 2) someone manually triggers the workflow. This workflow receives 2 inputs: version-this input represents release version and it must be supplied; create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False. The workflow has 4 jobs. The 1st job is named `Check` and its job id is `check`. The job `check` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Determine version`. The 3rd step is named `Validate release`. The 4th step is named `Catpure version output` and its id is `capture`. The 2nd job is named `Releases` and its job id is `releases`. The job `releases` has 5 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Prepare base environment`. The 3rd step is named `Build environment setup`. The 4th step is named `Build release`. The 5th step is named `Upload target artifacts`. The 3rd job is named `Construct release artifact` and its job id is `artifact`. The job `artifact` has one step. The 1st step is named `Merge artifacts`. The 4th job is named `Sign and prepare release draft` and its job id is `release`. The job `release` has 8 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download artifact`. The 3rd step is named `Import GPG keys` and its id is `gpg`. The 4th step is named `Set default GPG key`. The 5th step is named `Sign release`. The 6th step is named `Upload signed artifact`. The 7th step is named `Determine release data` and its id is `release_data`. The 8th step is named `Prepare release draft`. /no-think","answer":"```yaml\n# https://docs.corelightning.org/docs/release-checklist\nname: Release ðŸš€\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: no\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n        fetch-depth: 0\n        fetch-tags: true\n\n    - name: Determine version\n      run: |\n        if [[ \"${{ github.event.inputs.version }}\" != \"\" ]]; then\n          VERSION=\"${{ github.event.inputs.version }}\"\n        elif [ \"${{ github.ref_type }}\" == \"tag\" ]; then\n          VERSION=\"${{ github.ref_name }}\"\n        else\n          echo \"No release version provided and no tag found.\"\n          exit 1\n        fi\n        echo \"VERSION=$VERSION\" >> \"$GITHUB_ENV\"\n        echo \"Determined version: $VERSION\"\n\n    - name: Validate release\n      run: tools/check-release.sh --version=${VERSION}\n\n    - name: Catpure version output\n      id: capture\n      run: echo \"version=${VERSION}\" >> \"$GITHUB_OUTPUT\"\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-24.04\n    strategy:\n      fail-fast: false    # Let each build finish.\n      matrix:\n        target:\n        - bin-Fedora\n        - bin-Ubuntu-focal\n        - bin-Ubuntu-jammy\n        - bin-Ubuntu-noble\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n      # tools/build-release.sh requires lowdown\n    - name: Prepare base environment\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n\n    - name: Build environment setup\n      run: |\n        distribution=$(echo ${{ matrix.target }} | cut -d'-' -f3)\n        echo \"Building base image for ${distribution}\"\n        sudo docker run --rm -v $(pwd):/build ubuntu:${distribution} bash -c \"\\\n            apt-get update && \\\n            apt-get install -y debootstrap && \\\n            debootstrap ${distribution} /build/${distribution}\"\n        sudo tar -C ${distribution} -c . | docker import - ${distribution}\n\n        # Build Docker image\n        docker build -t cl-repro-${distribution} - < contrib/reprobuild/Dockerfile.${distribution}\n      if: contains(matrix.target, 'Ubuntu')\n\n    - name: Build release\n      run: tools/build-release.sh ${{ matrix.target }}\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        path: release/\n        name: ${{ matrix.target }}\n        if-no-files-found: error\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - check\n    - releases\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        pattern: bin-*\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        path: release/\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        trust_level: 5\n\n    - name: Set default GPG key\n      run: echo \"default-key ${{ steps.gpg.outputs.keyid }}\" >> \n        ~/.gnupg/gpg.conf\n\n    - name: Sign release\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n        tools/build-release.sh --without-zip sign\n        mv release/SHA256SUMS.asc${{ steps.gpg.outputs.keyid  }} release/SHA256SUMS.asc\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        overwrite: true\n        path: release/\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        VERSION=${{ env.version }}\n        CHANGELOG_VERSION=${VERSION#v}\n        echo \"CHANGELOG_VERSION=$CHANGELOG_VERSION\"\n        echo \"changelog_version=$CHANGELOG_VERSION\" >> \"$GITHUB_OUTPUT\"\n\n        CHANGELOG_TITLE=$(grep \"## \\[${CHANGELOG_VERSION}\\]\" CHANGELOG.md)\n        echo \"CHANGELOG_TITLE=$CHANGELOG_TITLE\"\n        echo \"changelog_title=$CHANGELOG_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n        RELEASE_TITLE=$(echo $CHANGELOG_TITLE | cut -d'\"' -f2)\n        echo \"RELEASE_TITLE=$RELEASE_TITLE\"\n        echo \"release_title=$RELEASE_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n    - name: Prepare release draft\n      if: github.event_name == 'push' || (github.event_name == \n        'workflow_dispatch' && github.event.inputs.create_release == 'yes')\n      uses: softprops/action-gh-release@v2\n      with:\n        name: ${{ env.version }} ${{ steps.release_data.outputs.release_title }}\n        tag_name: ${{ env.version }}\n        draft: true\n        prerelease: contains(env.version, \"-rc\")\n        files: release/*\n        fail_on_unmatched_files: true\n\n```","llm_response":"```yaml\nname: Release ðŸš€\n\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: false\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    runs-on: ubuntu-latest\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n\n    - name: Determine version\n      run: |\n        if [ \"${{ github.event_name }}\" == \"workflow_dispatch\" ]; then\n          VERSION=${{ github.event.inputs.version }}\n        else\n          VERSION=${{ github.ref_name }}\n        fi\n        echo \"VERSION=$VERSION\" >> $GITHUB_ENV\n\n    - name: Validate release\n      run: |\n        if [[ ! \"$VERSION\" =~ ^v[0-9]+.[0-9]+(.[0-9]+)?$ ]]; then\n          echo \"Invalid version $VERSION\"\n          exit 1\n        fi\n\n    - name: Catpure version output\n      id: capture\n      run: |\n        echo \"version=${{ env.VERSION }}\" >> $GITHUB_OUTPUT\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n\n    - name: Prepare base environment\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y gcc make libssl-dev libpcap-dev\n\n    - name: Build environment setup\n      run: |\n        mkdir build\n        cd build\n        cmake ..\n\n    - name: Build release\n      run: |\n        cd build\n        make release\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        name: target\n        path: build/target\n\n  artifact:\n    name: Construct release artifact\n    needs: releases\n    runs-on: ubuntu-latest\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: release\n        pattern: target/*\n\n  release:\n    name: Sign and prepare release draft\n    needs: artifact\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n      id-token: write\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: release\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        git_user_signingkey: true\n        git_commit_gpgsign: true\n\n    - name: Set default GPG key\n      run: |\n        git config --global user.signingkey ${{ steps.gpg.outputs.key_id }}\n\n    - name: Sign release\n      run: |\n        cd release\n        tar czf release.tar.gz *\n        gpg --detach-sign --armor release.tar.gz\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: release\n        path: release\n        if-no-files-found: error\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        if [ \"${{ github.event_name }}\" == \"workflow_dispatch\" ]; then\n          VERSION=${{ github.event.inputs.version }}\n        else\n          VERSION=${{ github.ref_name }}\n        fi\n        echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Prepare release draft\n      uses: ncipollo/release-action@v1\n      with:\n        artifacts: release/*\n        token: ${{ secrets.GITHUB_TOKEN }}\n        tag: ${{ needs.check.outputs.version }}\n        name: ${{ needs.check.outputs.version }}\n        body: |\n          ## Release notes\n          - TODO: Insert release notes here.\n        draft: ${{ github.event.inputs.create_release == 'yes' || false }}\n        prerelease: false\n\n```","repository_id":3976044,"lint_valid":false,"lint_output":"[{\"message\": \"default value \\\"false\\\" of \\\"create_release\\\" input is not included in its options \\\"\\\\\\\"yes\\\\\\\", \\\\\\\"no\\\\\\\"\\\"\", \"filepath\": \"../../tmp/60e1ada8-72eb-4ec5-a83b-78a0f5663bda.yml\", \"line\": 16, \"column\": 18, \"kind\": \"events\", \"snippet\": \"        default: false\\n                 ^~~~~\", \"end_column\": 22}, {\"message\": \"property \\\"check\\\" is not defined in object type {artifact: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/60e1ada8-72eb-4ec5-a83b-78a0f5663bda.yml\", \"line\": 151, \"column\": 18, \"kind\": \"expression\", \"snippet\": \"        tag: ${{ needs.check.outputs.version }}\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 44}, {\"message\": \"property \\\"check\\\" is not defined in object type {artifact: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/60e1ada8-72eb-4ec5-a83b-78a0f5663bda.yml\", \"line\": 152, \"column\": 19, \"kind\": \"expression\", \"snippet\": \"        name: ${{ needs.check.outputs.version }}\\n                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 45}]","meteor_score":0.4715589027619224,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1416,"stats":{"NumofTriggers":2,"Triggers":["push","workflow_dispatch"],"NumofJobs":4,"NumofActions":9,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/download-artifact","actions/upload-artifact","actions/upload-artifact","actions/upload-artifact/merge","crazy-max/ghaction-import-gpg","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact/merge"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v6","name":"crazy-max/ghaction-import-gpg"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v2","name":"softprops/action-gh-release"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":18,"CyclomaticComplexity":3}}
{"id":4785,"level":3,"name":"nilearn/nilearn","file_name":"test_with_free_threaded_python.yml","len":5,"prompt":"Generate a GitHub Workflow named `test free threaded python` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) the scheduled time has come: at 08:00 am, on day 1 of the month. 2) someone manually triggers the workflow. The workflow sets an environment variable to use: `FORCE_COLOR` is set to `True`. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}` and its job id is `test_and_coverage`. This job will run only if the condition(github.repository == 'nilearn/nilearn') is met. This job will run on ${{ matrix.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `description` has one value: latest dependencies. The variable `py` has one value: 3.13t. The variable `os` has 3 values: ubuntu-latest, macos-latest and windows-latest. The variable `env` has one value: plotting. If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled. The job `test_and_coverage` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Install the latest version of uv`. This step runs action `astral-sh/setup-uv` tagged as v6. The 3rd step is named `Setup python`. This step runs action `actions/setup-python` tagged as v5. The step defines 2 input parameters for the action: `python-version` is set to `${{ matrix.py }}` and `allow-prereleases` is set to `True`. The 4th step is named `Install tox`. This step runs a script: `uv tool install tox --with=tox-uv --with=tox-gh-actions`. The 5th step is named `Show tox config`. This step runs a script: `tox c`. The 6th step is named `Run test suite`. This step runs a script: `tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n`. The 7th step is named `Upload test report`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html` and `path` is set to `report.html`. The 8th step is named `Upload test timings`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output` and `path` is set to `results/pytest_output`. /no-think","answer":"```yaml\n# Runs tests suite with free threaded python.\n#\n###\nname: test free threaded python\n\non:\n  schedule:\n    # Run every 1rst of the month\n  - cron: 0 8 1 * *\n\n    # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\n# Force to use color\nenv:\n  FORCE_COLOR: true\n\njobs:\n\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: 'Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description\n      }}'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: [3.13t]\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","llm_response":" ```yaml\nname: test free threaded python\non:\n  schedule:\n    - cron:  '0 8 1 * *'\n  workflow_dispatch:\nenv:\n  FORCE_COLOR: true\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\njobs:\n  test_and_coverage:\n    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\n    runs-on: ${{ matrix.os }}\n    if: github.repository == 'nilearn/nilearn'\n    strategy:\n      matrix:\n        description: [latest dependencies]\n        py: ['3.13t']\n        os: ['ubuntu-latest', 'macos-latest', 'windows-latest']\n        env: ['plotting']\n        fail-fast: true\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Install the latest version of uv\n        uses: astral-sh/setup-uv@v6\n      - name: Setup python\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ matrix.py }}\n          allow-prereleases: true\n      - name: Install tox\n        run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n      - name: Show tox config\n        run: tox c\n      - name: Run test suite\n        run: |\n          tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n          tox run -e plot_test_timing\n      - name: Upload test report\n        if: success() || failure()\n        uses: actions/upload-artifact@v4\n        with:\n          name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html\n          path: report.html\n      - name: Upload test timings\n        if: success() || failure()\n        uses: actions/upload-artifact@v4\n        with:\n          name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output\n          path: results/pytest_output\n``` ","repository_id":3983520,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 13: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/4ae9d9e2-0987-4c06-b1df-1822b6238ba2.yml\", \"line\": 13, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":495,"stats":{"NumofTriggers":2,"Triggers":["schedule","workflow_dispatch"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/checkout","actions/setup-python","actions/upload-artifact","actions/upload-artifact","astral-sh/setup-uv"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v6","name":"astral-sh/setup-uv"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":16232,"level":1,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\n\non:\n  workflow_dispatch:\n    inputs:\n      gcs-cache-bucket:\n        required: true\n        type: string\n      request:\n        required: true\n        type: string\n      trusted:\n        required: true\n        type: boolean\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        name: ${{ github.event.inputs.request }}\n        target: ${{ github.event.inputs.request }}\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n\n      - name: Set up Go\n        uses: actions/setup-go@v3\n        with:\n          go-version: 1.17\n\n      - name: Install dependencies\n        run: |\n          go mod tidy\n\n      - name: Run tests\n        run: |\n          go test -v ./...\n\n      - name: Upload coverage report to Google Cloud Storage\n        uses: actions/upload-artifact@v3\n        with:\n          name: coverage-report\n          path: ./coverage.out\n\n      - name: Download coverage report from Google Cloud Storage\n        uses: actions/download-artifact@v3\n        with:\n          name: coverage-report\n\n      - name: Calculate coverage percentage\n        run: |\n          go tool cover -html=coverage.out -o coverage.html\n          go tool cover -func=coverage.out | grep total | awk '{print $3}'\n\n      - name: Upload coverage report to GitHub\n        uses: actions/upload-artifact@v3\n        with:\n          name: coverage-report-html\n          path: coverage.html\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"expected \\\"inputs\\\" key for \\\"workflow_dispatch\\\" section but got \\\"secrets\\\"\", \"filepath\": \"../../tmp/ce8ed18f-bbdf-4599-8f9b-7c7c5f7e17c0.yml\", \"line\": 15, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    secrets:\\n    ^~~~~~~~\", \"end_column\": 12}, {\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type string\", \"filepath\": \"../../tmp/ce8ed18f-bbdf-4599-8f9b-7c7c5f7e17c0.yml\", \"line\": 33, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"        name: ${{ github.event.inputs.request }}\\n              ^~~\", \"end_column\": 17}, {\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type string\", \"filepath\": \"../../tmp/ce8ed18f-bbdf-4599-8f9b-7c7c5f7e17c0.yml\", \"line\": 34, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        target: ${{ github.event.inputs.request }}\\n                ^~~\", \"end_column\": 19}]","meteor_score":0.2567287214872188,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":17801,"level":2,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The job id of the 2nd job is `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The job id of the 4th job is `needs-refinement`. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The 5th job is named `status: freeze` and its job id is `status-freeze`. The job `status-freeze` has one step. The 1st step is named `status: freeze`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    name: 'ðŸ“ Assigned'\n    if: ${{ github.event.label.name == 'Assigned' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/1\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/2\n\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'First Time Code Contribution' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: actions/github@v4\n      with:\n        issue-number: ${{ github.event.issue.number }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        message: |\n          Hello @${{ github.event.issue.user }},\n\n          Thank you for contributing to our project! We appreciate your first time contribution. We are excited to have you on board.\n\n          Please be sure to review our [contribution guidelines](https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/blob/main/CONTRIBUTING.md) to ensure that your contribution aligns with our standards.\n\n          We look forward to reviewing your pull request and incorporating your changes into the project.\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/1\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/2\n\n  good-first-issue:\n    if: ${{ github.event.label.name == 'good first issue' }}\n    name: 'good first issue'\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/2\n\n  needs-refinement:\n    if: ${{ github.event.label.name == 'needs refinement' }}\n    name: 'needs refinement'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs refinement\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/1\n\n  status-freeze:\n    if: ${{ github.event.label.name == 'status: freeze' }}\n    name: 'status: freeze'\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      uses: actions/projects@v0.4\n      with:\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n        project-url: https://github.com/OneLineCodeSnippets/OneLineCodeSnippets/projects/1\n\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 76: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/6dedd368-060c-4c09-912d-fe8726bd6354.yml\", \"line\": 76, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    if: ${{ github.event.label.name == 'status: freeze' }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":4785,"level":3,"name":"nilearn/nilearn","file_name":"test_with_free_threaded_python.yml","len":5,"prompt":"Generate a GitHub Workflow named `test free threaded python` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) the scheduled time has come: at 08:00 am, on day 1 of the month. 2) someone manually triggers the workflow. The workflow sets an environment variable to use: `FORCE_COLOR` is set to `True`. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}` and its job id is `test_and_coverage`. This job will run only if the condition(github.repository == 'nilearn/nilearn') is met. This job will run on ${{ matrix.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `description` has one value: latest dependencies. The variable `py` has one value: 3.13t. The variable `os` has 3 values: ubuntu-latest, macos-latest and windows-latest. The variable `env` has one value: plotting. If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled. The job `test_and_coverage` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Install the latest version of uv`. This step runs action `astral-sh/setup-uv` tagged as v6. The 3rd step is named `Setup python`. This step runs action `actions/setup-python` tagged as v5. The step defines 2 input parameters for the action: `python-version` is set to `${{ matrix.py }}` and `allow-prereleases` is set to `True`. The 4th step is named `Install tox`. This step runs a script: `uv tool install tox --with=tox-uv --with=tox-gh-actions`. The 5th step is named `Show tox config`. This step runs a script: `tox c`. The 6th step is named `Run test suite`. This step runs a script: `tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n`. The 7th step is named `Upload test report`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html` and `path` is set to `report.html`. The 8th step is named `Upload test timings`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output` and `path` is set to `results/pytest_output`. /no-think","answer":"```yaml\n# Runs tests suite with free threaded python.\n#\n###\nname: test free threaded python\n\non:\n  schedule:\n    # Run every 1rst of the month\n  - cron: 0 8 1 * *\n\n    # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\n# Force to use color\nenv:\n  FORCE_COLOR: true\n\njobs:\n\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: 'Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description\n      }}'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: [3.13t]\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","llm_response":"<think>Okay, let me tackle this GitHub Workflow YAML generation request. The user wants a workflow named \"test free threaded python\" for a Python repo with specific triggers and job configurations.\n\nFirst, I need to set up the name and triggers. The workflow should trigger on a schedule (08:00 on day 1 of the month) and manual triggers. The cron syntax for \"day 1 at 08:00\" would be '0 8 1 * *'. For manual triggers, I'll include 'workflow_dispatch'.\n\nNext, the environment variable FORCE_COLOR=True. That goes under 'env' at the workflow level.\n\nConcurrency is important here. The user specified using ${{ github.workflow }}-${{ github.ref }} as the group, with cancel-in-progress. So I'll set concurrency with group: ${{ github.workflow }}-${{ github.ref }} and cancel-in-progress: true.\n\nNow the job part. The job id is 'test_and_coverage', and it only runs if github.repository is 'nilearn/nilearn'. So I'll add an 'if' condition for that.\n\nMatrix strategy: description has \"latest dependencies\", py has \"3.13t\", os has three values (ubuntu, macos, windows), env has \"plotting\". Wait, the user said env has one value: plotting. So the matrix should combine all these variables. But the matrix in YAML should list each variable's values. Let me structure the matrix with include or separate keys. Wait, the user says \"variable 'env' has one value: plotting\", so in the matrix, env will be a key with a single value. But the matrix combinations will be the cross product of os (3), py (1), description (1), env (1). So 3 jobs total.\n\nWait, the user says: \"the variable description has one value: latest dependencies. The variable py has one value: 3.13t. The variable os has 3 values... The variable env has one value: plotting.\" So the matrix will have 3 jobs (for each os), each with description='latest dependencies', py='3.13t', env='plotting'.\n\nSo the matrix in YAML should be:\n\nmatrix:\n  os: [ubuntu-latest, macos-latest, windows-latest]\n  description: ['latest dependencies']\n  py: ['3.13t']\n  env: ['plotting']\n\nBut wait, when you have multiple variables, the matrix will create combinations. Since description, py, and env each have one value, the combinations will be 3 (os) * 1 * 1 * 1 = 3 jobs. That's correct.\n\nAlso, the job name should be \"Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\". So in the job's 'name' field, we'll use that template.\n\nThe job should fail-fast: if any matrix job fails, cancel others. So in the job's strategy, set fail-fast: false? Wait, no. Wait, the user says: \"If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled.\" Wait, noâ€”actually, the default is fail-fast: true, which cancels other jobs if one fails. But the user says \"if any job fails, cancel the others\", which is the default behavior (fail-fast: true). Wait, but the user says: \"all in-progress and queued jobs... will be canceled\". So that's the standard fail-fast behavior, which is true by default. However, the user might have meant the opposite. Wait, let me check the exact wording: \"If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled.\" So yes, that's the default (fail-fast: true). Wait noâ€”actually, the default for GitHub Actions is fail-fast: true, which means if one job fails, the rest are canceled. So to have that behavior, we need to set fail-fast: true. But the user says \"if any job fails, cancel others\", so yes, set fail-fast: true.\n\nWait, but the user says \"If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled.\" So that's exactly what fail-fast: true does. So in the job's strategy, set fail-fast: true.\n\nWait, but the user might have phrased it as \"will be canceled\", which is the default. But to be safe, explicitly set fail-fast: true.\n\nNow, the steps:\n\n1. Checkout: uses actions/checkout@v4.\n\n2. Install uv: uses astral-sh/setup-uv@v6.\n\n3. Setup Python: uses actions/setup-python@v5 with inputs python-version: ${{ matrix.py }}, allow-prereleases: true.\n\n4. Install tox: run script uv tool install tox --with=tox-uv --with=tox-gh-actions.\n\n5. Show tox config: tox c.\n\n6. Run test suite: the script is \"tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\\ntox run -e plot_test_timing\". Wait, the user wrote:\n\n\"tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n\"\n\nSo it's two commands. In YAML, for a run step with multiple lines, we can use | and indent each line. Or use && to chain them. But the user specified it as two separate lines, so probably two separate commands. So the script should be:\n\nrun: |\n  tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n  tox run -e plot_test_timing\n\nBut need to make sure the line breaks are correct.\n\n7. Upload test report: only if success() || failure(), uses actions/upload-artifact@v4, name and path as specified.\n\n8. Upload test timings: same condition, different name and path.\n\nAlso, the job runs on ${{ matrix.os }}.\n\nLet me structure all this.\n\nWait, the job's 'runs-on' should be ${{ matrix.os }}.\n\nAlso, the environment variable FORCE_COLOR=True is set at the workflow level.\n\nLet me start drafting the YAML.\n\nFirst, name: 'test free threaded python'\n\non:\n  schedule:\n    - cron: '0 8 1 * *'\n  workflow_dispatch:\n\nenv:\n  FORCE_COLOR: 'True'\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        description: ['latest dependencies']\n        py: ['3.13t']\n        env: ['plotting']\n      fail-fast: true\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n\n    - name: Show tox config\n      run: tox c\n\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html\n        path: report.html\n\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output\n        path: results/pytest_output\n\nWait, but the matrix variables: description is 'latest dependencies', but in the name for the artifacts, it's using ${{ matrix.description }}. However, the value has a space, so when used in the name, it might cause issues. But GitHub allows spaces in artifact names, I think. So it's okay.\n\nAlso, the 'env' matrix variable is used in the tox command as ${{ matrix.env }}, which is 'plotting'.\n\nCheck if all steps are correctly ordered and parameters are set.\n\nThe job id is 'test_and_coverage', which matches.\n\nThe concurrency group is correctly set.\n\nThe triggers are schedule and workflow_dispatch.\n\nThe env variable is set.\n\nThe job runs only for nilearn/nilearn.\n\nMatrix setup seems correct.\n\nThe steps look right.\n\nOne thing: the 'py' value is '3.13t'â€”is that a valid version for setup-python? The user specified it, so we'll use it as is.\n\nAlso, the 'allow-prereleases' is set to true for setup-python, which is needed for pre-release versions like 3.13t.\n\nAnother check: the 'Run test suite' step has two commands. Using 'run: |' with each command on a new line should work.\n\nThe artifact upload steps have the correct conditions (success() || failure()), which in GitHub Actions is written as ${{ always() }} but the user specified the condition as success() || failure(), which translates to if: ${{ success() || failure() }}. However, in GitHub Actions, the correct syntax for that condition is if: ${{ always() }}. Wait, but the user explicitly said: \"This step will run only if the condition(success() || failure()) is met.\"\n\nIn GitHub Actions, the condition for always running (even if previous steps fail) is 'always()'. The expression 'success() || failure()' is equivalent to 'always()', because a step is either success, failure, or other states. But in the context of the entire job, if the job fails, then the step's condition would be checked. However, the standard way to have a step run regardless of the job's status is to use 'if: ${{ always() }}'.\n\nBut the user specified the condition as 'success() || failure()', which in GitHub Actions syntax would be written as if: ${{ success() || failure() }}.\n\nHowever, in practice, 'success() || failure()' covers all possible outcomes (since there's also 'cancelled' and 'skipped', but maybe the user is simplifying). But per the user's instruction, we should write it as 'success() || failure()'.\n\nWait, the user says: \"This step will run only if the condition(success() || failure()) is met.\"\n\nIn GitHub Actions, the condition for a step to run if the job succeeded or failed would be if: ${{ success() || failure() }}.\n\nBut I need to check the correct syntax. The 'success()' function returns true if all previous steps succeeded. The 'failure()' returns true if any previous step failed. However, for a step that should run even if the job fails, the standard is to use 'if: ${{ always() }}'.\n\nBut the user specifically says to use 'success() || failure()', so I'll follow that.\n\nSo in the YAML, for those steps:\n\nif: ${{ success() || failure() }}\n\nBut wait, in GitHub Actions, the condition for a step is evaluated based on the job's status. The 'success()' in a step's condition refers to whether the previous steps in the job succeeded. However, if a step is set to run even if prior steps failed, you'd use 'if: ${{ always() }}' or 'if: ${{ failure() }}' etc.\n\nBut the user's instruction says: \"This step will run only if the condition(success() || failure()) is met.\"\n\nAssuming that 'success()' here refers to the job's overall status, but in GitHub Actions, the job status is determined by the steps. So perhaps the user wants the step to run regardless of whether the previous steps succeeded or failed. In that case, the correct condition is 'if: ${{ always() }}'.\n\nBut the user explicitly wrote 'success() || failure()', so we have to use that.\n\nWait, looking at GitHub Actions documentation: The 'success()' function returns true if none of the previous steps have failed or been canceled. The 'failure()' function returns true if any previous step has failed. So 'success() || failure()' would be true in all cases except when the job is canceled. Because if the job is canceled, then neither success() nor failure() would be true.\n\nBut the user might not be considering cancellation, so perhaps they want the step to run unless the job is canceled. However, the user's instruction says to use 'success() || failure()', so we'll write it as:\n\nif: ${{ success() || failure() }}\n\nBut in YAML, this would be written as:\n\nif: ${{ success() || failure() }}\n\nWait, but in the step definition, the 'if' condition is written without the ${{ }}, or with?\n\nWait, in GitHub Actions, the 'if' condition for a step is written as:\n\nif: ${{ <expression> }}\n\nSo for example:\n\nif: ${{ success() || failure() }}\n\nYes.\n\nSo in the steps for uploading artifacts, we'll have:\n\n- name: Upload test report\n  if: ${{ success() || failure() }}\n  uses: actions/upload-artifact@v4\n  ...\n\nSame for the other upload step.\n\nNow, check if all steps are correctly specified.\n\nAnother point: the matrix variable 'env' is used in the tox command as ${{ matrix.env }}, which is 'plotting'. So the command becomes:\n\ntox run --list-dependencies -e plotting -- nilearn\n\nand\n\ntox run -e plot_test_timing\n\nThat seems correct.\n\nAlso, the 'py' version is '3.13t', which might be a typo, but the user specified it, so we'll keep it.\n\nNow, check the concurrency group: ${{ github.workflow }}-${{ github.ref }}. This will create a unique group per workflow and branch/ref.\n\nCancel-in-progress is set to true.\n\nThe workflow name is 'test free threaded python'â€”note that YAML keys can have spaces, but in the 'name' field it's fine.\n\nWait, the workflow name is specified as 'test free threaded python', so in the YAML, the top-level 'name' key is that string.\n\nYes.\n\nLet me put it all together.\n\nWait, the user said \"the workflow sets an environment variable to use: FORCE_COLOR is set to True\". So env: FORCE_COLOR: 'True' at the workflow level.\n\nIn YAML, that's:\n\nenv:\n  FORCE_COLOR: 'True'\n\nYes.\n\nAnother check: the job's 'runs-on' is ${{ matrix.os }}, which is correct.\n\nThe matrix is defined with os, description, py, env.\n\nEach step's name and parameters as specified.\n\nI think that's all. Let's write the YAML.\n</think>\n\n```yaml\nname: test free threaded python\n\non:\n  schedule:\n    - cron: '0 8 1 * *'\n  workflow_dispatch:\n\nenv:\n  FORCE_COLOR: 'True'\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        description: ['latest dependencies']\n        py: ['3.13t']\n        env: ['plotting']\n      fail-fast: true\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Install the latest version of uv\n        uses: astral-sh/setup-uv@v6\n\n      - name: Setup python\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ matrix.py }}\n          allow-prereleases: true\n\n      - name: Install tox\n        run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n\n      - name: Show tox config\n        run: tox c\n\n      - name: Run test suite\n        run: |\n          tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n          tox run -e plot_test_timing\n\n      - name: Upload test report\n        if: ${{ success() || failure() }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html\n          path: report.html\n\n      - name: Upload test timings\n        if: ${{ success() || failure() }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output\n          path: results/pytest_output\n```","repository_id":3983520,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 18: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/144e8b0d-2ca4-4677-8f09-8259a0651c12.yml\", \"line\": 18, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":495,"stats":{"NumofTriggers":2,"Triggers":["schedule","workflow_dispatch"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/checkout","actions/setup-python","actions/upload-artifact","actions/upload-artifact","astral-sh/setup-uv"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v6","name":"astral-sh/setup-uv"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":27677,"level":1,"name":"paddlepaddle/paddle","file_name":"docker.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow has 5 outputs: docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}; docker_inference_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_inference_image }}; docker_coverage_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_coverage_image }}; docker_build_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_build_image }}; docker_distribute_file-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_distribute_image }}. The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on:\n      group: Docker-build\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ \n        steps.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_image: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - id: build-docker-images\n      name: build docker images\n      env:\n        PR_ID: ${{ github.event.pull_request.number }}\n        COMMIT_ID: ${{ github.event.pull_request.head.sha }}\n        docker_cpu_file: Dockerfile.cuda9_cudnn7_gcc48_py35_centos6\n        docker_inference_file: \n          Dockerfile.cuda11.2_cudnn8.1_trt8.4_gcc8.2_ubuntu18\n        docker_coverage_file: Dockerfile.cuda117_cudnn8_gcc82_ubuntu18_coverage\n        docker_build_file: Dockerfile.cuda11.2_cudnn8_gcc82_trt8\n        docker_distribute_file: Dockerfile.cuda123_cudnn9_gcc122_ubuntu20\n      run: |\n        set -x\n        wget -q --no-proxy https://paddle-github-action.bj.bcebos.com/PR/Paddle/${PR_ID}/${COMMIT_ID}/Paddle.tar.gz --no-check-certificate\n        tar xf Paddle.tar.gz --strip-components=1\n        rm Paddle.tar.gz\n        cd tools/dockerfile\n        bash ci_dockerfile.sh\n        cd ../..\n\n        # docker build images\n        declare -A docker_files=([\"docker_cpu\"]=\"$docker_cpu_file\" [\"docker_inference\"]=\"$docker_inference_file\" [\"docker_coverage\"]=\"$docker_coverage_file\" [\"docker_build\"]=\"$docker_build_file\" [\"docker_distribute\"]=\"$docker_distribute_file\")\n        for name in \"${!docker_files[@]}\"\n        do\n          md5_value=`md5sum tools/dockerfile/${docker_files[$name]} | awk '{print $1}'`\n          docker_image=\"ccr-2vdh3abv-pub.cnc.bj.baidubce.com/ci/paddle:${md5_value}\"\n          declare \"${name}_image=${docker_image}\"\n          echo \"${name}_image=${docker_image}\" >> $GITHUB_OUTPUT\n          set +e\n          docker pull $docker_image\n          if [ $? -eq 0 ];then\n            echo use docker cache\n          else\n            docker build -t $docker_image -f tools/dockerfile/${docker_files[$name]} .\n            docker push $docker_image\n            echo end docker build\n          fi\n          set -e\n        done\n\n        # clean workspace\n        cd ${{ github.workspace }}\n        rm -rf ./*\n\n```","llm_response":"<think>Okay, let's tackle this problem. The user wants a GitHub Workflow YAML file for a C++ repository. The workflow is triggered by another workflow, so it's a reusable workflow. They mentioned it has 5 outputs related to Docker images.\n\nFirst, I need to set up the workflow name. The user said the name is empty, but in GitHub Actions, workflows need a name. Wait, the input says \"Generate a GitHub Workflow named ``\", so maybe it's supposed to be empty? But that might not be valid. Maybe they just want the name field, but left it blank. Wait, looking back, the user wrote \"named ``\", which is an empty string. Hmm, but GitHub requires a name. Maybe it's a typo, but I'll follow the instructions literally. Wait, the example in the problem statement might have a placeholder. Wait, the user says \"named ``\", so perhaps the name should be empty? But in YAML, that would be name: \"\". Let me check GitHub Actions docs. The name field is optional, but if provided, it's a string. So maybe name: \"\" is acceptable, but maybe the user intended to leave it out. Wait, the problem says \"Generate a GitHub Workflow named ``\", so the name is an empty string. So I'll put name: \"\".\n\nNext, the trigger: it's called by another workflow. So the on: key should have workflow_call. Since it's a reusable workflow, the trigger is workflow_call. So on: workflow_call.\n\nThen, the outputs. The workflow has 5 outputs. Each output's value is from the job's outputs. The job is called 'build docker' with id 'build-docker-images'. So in the workflow's outputs section, each output is defined with value pointing to jobs.build-docker-images.outputs.<output_name>.\n\nWait, the user lists the outputs as:\n\ndocker_cpu_image: value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\nSimilarly for the others. So in the workflow YAML, under outputs, each key is the output name, and the value is the expression.\n\nNow, the job: one job named 'build docker' with id 'build-docker-images'. The job needs to have steps, but the user didn't specify any steps. Wait, the problem says the job's outputs are used for the workflow outputs. So the job must have outputs defined. But the user didn't specify what the job does, only that it produces those outputs. So in the job, under outputs, we need to define each output, but since the actual values are set by the steps (which aren't specified here), the job's outputs would reference the step outputs. However, the user's description says the workflow outputs are set to the job's outputs. So in the workflow's outputs section, they reference the job's outputs.\n\nWait, the problem states: \"This workflow has 5 outputs: docker_cpu_image... its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So the workflow's output docker_cpu_image is set to the job's output docker_cpu_image.\n\nTherefore, in the workflow YAML:\n\noutputs:\n  docker_cpu_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n  ... and so on for the others.\n\nThen, the job 'build-docker-images' must have outputs defined. But since the user didn't specify the steps, maybe the job is just a placeholder. However, in GitHub Actions, a job must have steps. But the user says \"the workflow has one job\", but doesn't specify the steps. Hmm, but the problem states that the outputs are from the job's outputs, so the job must have outputs. So in the job, under outputs, we need to define each output, but without knowing the steps, perhaps the job is just a dummy job that sets those outputs. Wait, but the user's instruction is to generate the YAML based on the input, which says the outputs are from the job's outputs. So the job must have outputs, but the actual values would be set by steps (which we don't have info on). However, the problem doesn't require us to define the steps, just the structure.\n\nWait, the user says: \"the workflow has 5 outputs: ... its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So in the workflow's outputs section, each output is mapped to the job's output.\n\nTherefore, the workflow YAML should have:\n\non:\n  workflow_call:\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.<something>.outputs.docker_cpu_image }}\n      ... but wait, the job's outputs are set by steps. However, the user hasn't specified any steps. But the problem states that the workflow's outputs are from the job's outputs, so the job must have outputs defined. But without steps, how? Maybe the job is expected to have steps that set those outputs, but since the user didn't specify, perhaps the job's outputs are just declared, but in reality, they need to come from steps.\n\nWait, but the problem says: \"its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So the job's output is named docker_cpu_image, and the workflow's output uses that.\n\nIn the job definition, under outputs, you have to map the job's output to a step's output. For example:\n\noutputs:\n  docker_cpu_image: ${{ steps.build.outputs.docker_cpu_image }}\n\nBut since the user didn't specify steps, maybe we can assume that the job has steps that set those outputs, but we don't need to define the steps. However, the problem states that the workflow has one job named 'build docker' with id 'build-docker-images', but doesn't specify the steps. So perhaps the job is empty? But GitHub requires at least one step.\n\nWait, the user instruction says: \"the workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`.\" It doesn't mention steps, but in reality, a job must have steps. However, since the user didn't specify, maybe we can include a dummy step, but the problem says \"No additional explanation is needed\" and to follow the input.\n\nWait, the user's input says: \"Generate a GitHub Workflow... This workflow has 5 outputs... The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`.\"\n\nSo perhaps the job is just defined with the necessary outputs, but without steps. But in GitHub Actions, a job must have steps. However, maybe the steps are implied, and the user just wants the structure. Since the problem states that the outputs come from the job's outputs, the job must have outputs defined. But to have job outputs, the job must have steps that produce those outputs.\n\nBut since the user didn't specify the steps, maybe we can omit the steps, but that would make the YAML invalid. Hmm. Wait, the user might not care about the steps, just the structure of the workflow with the outputs and job. So perhaps the job is defined with outputs, but without steps. However, in reality, the outputs would need to come from steps. But given the problem statement, maybe we can assume that the job has steps that set those outputs, and we just need to declare the job's outputs.\n\nWait, the problem says: \"its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So the job's output is docker_cpu_image, which is set by the job's steps. Therefore, in the job definition, under outputs, we need to have:\n\noutputs:\n  docker_cpu_image: ${{ steps.<step_id>.outputs.docker_cpu_image }}\n  ... etc.\n\nBut since the user didn't specify the steps, perhaps we can leave the step references as placeholders, but the problem says to generate based on the user's input, which doesn't mention steps. However, the user's input does specify that the workflow outputs are set to the job's outputs, so the job must have those outputs defined.\n\nWait, but in the job's outputs section, each output is a mapping to a step's output. Since the user didn't specify steps, maybe we can't define the job's outputs. But the problem states that the workflow's outputs are from the job's outputs, so the job must have those outputs. Therefore, perhaps the job's outputs are declared, but the actual step outputs are not specified here.\n\nWait, but the user's input says: \"docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So the workflow's output docker_cpu_image is equal to the job's output docker_cpu_image.\n\nTherefore, in the workflow YAML:\n\noutputs:\n  docker_cpu_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\nSimilarly for the others.\n\nThen, in the job 'build-docker-images', we need to have:\n\noutputs:\n  docker_cpu_image: <some expression>\n  ... etc.\n\nBut since the user didn't specify what the job does, perhaps we can leave the job's outputs as expressions that would come from steps. However, without steps, the job is invalid. But maybe the user expects us to include the job with outputs but no steps, even though it's invalid, but following the problem's instructions.\n\nAlternatively, maybe the job is supposed to have steps that set those outputs, but since the user didn't specify, we can have a placeholder step.\n\nWait, the user says \"No additional explanation is needed\" and to generate based on the input. The input specifies that the workflow has those outputs pointing to the job's outputs, and the job exists. So perhaps the job is defined with the necessary outputs, but without steps. However, in GitHub Actions, a job must have steps. So to make it valid, we need at least one step. But the user didn't specify, so maybe add a dummy step.\n\nBut the problem says \"the workflow has one job\" and specifies the job's name and id, but not steps. Since the user is a DevOps expert, they might expect a valid YAML. So perhaps include a dummy step that sets the outputs, but the problem doesn't mention it. Alternatively, the steps are not required for the structure, but the outputs are.\n\nWait, the key point is that the workflow's outputs are derived from the job's outputs. So the job must have outputs defined, which in turn come from steps. But since steps aren't specified, maybe the job's outputs are just declared with placeholders.\n\nBut in GitHub Actions, job outputs are defined as:\n\njobs:\n  my_job:\n    outputs:\n      output_name: ${{ steps.step_id.outputs.some_output }}\n\nSo without steps, you can't have job outputs. Therefore, to have job outputs, the job must have steps that produce those outputs.\n\nGiven that the user didn't specify steps, but the problem requires the workflow to have those outputs, perhaps the job includes steps that set the outputs. However, since the user didn't specify, we have to assume that the steps exist and just define the job's outputs accordingly.\n\nBut how? Maybe the job's outputs are mapped to step outputs with generic names. For example:\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.build.outputs.docker_cpu_image }}\n      docker_inference_image: ${{ steps.build.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ steps.build.outputs.docker_coverage_image }}\n      docker_build_image: ${{ steps.build.outputs.docker_build_image }}\n      docker_distribute_image: ${{ steps.build.outputs.docker_distribute_image }}\n    steps:\n      - name: Build Docker Images\n        id: build\n        run: |\n          # Actual build steps would go here\n          echo \"docker_cpu_image=cpu-image:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_inference_image=inference-image:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_coverage_image=coverage-image:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_build_image=build-image:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_distribute_image=distribute-image:latest\" >> $GITHUB_OUTPUT\n\nBut the user didn't specify the steps, so maybe we shouldn't include them. However, without steps, the job is invalid. But the problem states that the workflow has one job, so perhaps the steps are implied, and we just need to define the job with outputs.\n\nWait, the user's instruction says: \"Generate a GitHub Workflow... This workflow has 5 outputs... The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`.\"\n\nIt doesn't mention steps, but in reality, steps are required. However, as a DevOps expert, I know that steps are necessary, but since the user didn't specify, maybe they just want the structure with the job and outputs, even if steps are missing. But GitHub would reject it.\n\nAlternatively, the problem might not care about the steps, just the structure of the workflow with the outputs and job. So perhaps include a placeholder step.\n\nBut the user said \"/no-think\", which might mean not to overthink, just follow the input.\n\nThe input says the workflow has one job named 'build docker' with id 'build-docker-images', and the workflow outputs are from that job's outputs.\n\nSo the YAML should have:\n\nname: \"\"\non:\n  workflow_call:\n\njobs:\n  build-docker-images:\n    name: build docker\n    # runs-on is required, so use ubuntu-latest as default\n    runs-on: ubuntu-latest\n    # outputs section for the job, but without steps, but perhaps the user expects the job to have outputs defined\n    outputs:\n      docker_cpu_image: ${{ ... }}\n      ... etc.\n\nBut without steps, the outputs can't be set. However, the problem states that the workflow's outputs are from the job's outputs, so the job must have those outputs defined. Therefore, the job's outputs must be declared, even if the steps are not specified.\n\nWait, but in the workflow's outputs section, it's referencing the job's outputs, which must be defined in the job. So the job must have an outputs section.\n\nSo putting it all together:\n\nThe workflow YAML should have:\n\n- name: (empty string as per user input)\n- on: workflow_call\n- outputs: the 5 specified\n- jobs: build-docker-images with the job outputs\n\nBut the job's outputs need to be set from steps. Since steps aren't specified, perhaps the job's outputs are left as expressions that would come from steps. But without steps, it's invalid. However, the user might just want the structure.\n\nGiven that, I'll proceed to create the YAML with the job having outputs that reference step outputs, even if the steps aren't defined. But in reality, steps are needed. However, the user didn't specify steps, so maybe they just want the job to have the outputs declared, assuming steps exist.\n\nWait, the user's input says: \"its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\". So the workflow's output is set to the job's output. Therefore, the job must have an output named docker_cpu_image.\n\nIn the job definition, under outputs, we need to have:\n\noutputs:\n  docker_cpu_image: ${{ steps.some_step.outputs.docker_cpu_image }}\n\nBut since steps aren't specified, perhaps the user expects us to omit the steps and just have the job's outputs declared. However, in GitHub Actions, job outputs must reference step outputs.\n\nThis is a bit of a catch-22. But given the problem statement, the main point is that the workflow has those outputs pointing to the job's outputs, and the job exists. So perhaps the job's outputs are declared, and steps are assumed to exist.\n\nTherefore, the YAML would look like:\n\nname: \"\"\non:\n  workflow_call:\n\noutputs:\n  docker_cpu_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n  docker_inference_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n  docker_coverage_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n  docker_build_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n  docker_distribute_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.build.outputs.docker_cpu_image }}\n      docker_inference_image: ${{ steps.build.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ steps.build.outputs.docker_coverage_image }}\n      docker_build_image: ${{ steps.build.outputs.docker_build_image }}\n      docker_distribute_image: ${{ steps.build.outputs.docker_distribute_image }}\n    steps:\n      - name: Build Docker Images\n        id: build\n        run: |\n          # Placeholder for actual build steps\n          echo \"docker_cpu_image=example/cpu:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_inference_image=example/inference:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_coverage_image=example/coverage:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_build_image=example/build:latest\" >> $GITHUB_OUTPUT\n          echo \"docker_distribute_image=example/distribute:latest\" >> $GITHUB_OUTPUT\n\nBut the user didn't specify steps, so maybe the steps shouldn't be included. However, without steps, the job is invalid. But the problem says to generate based on the input, which doesn't mention steps. Hmm.\n\nWait, the user's input says: \"the workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`.\" It doesn't say anything about steps, so perhaps the steps are not required for the problem's scope. But in reality, they are. However, since the user is asking for a YAML file, and the problem states to generate it based on the input, which doesn't include steps, maybe we can omit the steps. But GitHub would require at least one step.\n\nAlternatively, the problem assumes that the job exists with the necessary steps, and we just need to define the structure around it.\n\nGiven that, perhaps the correct approach is to include the job with outputs but without steps, even though it's invalid, but following the user's instructions strictly.\n\nBut as a DevOps expert, I know that steps are required, so I should include a minimal step. However, the user said \"/no-think\", so maybe just follow the input literally.\n\nThe input says: \"the workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`.\" So the job must be present with that name and id.\n\nIn GitHub Actions, a job requires runs-on and steps. So to make it valid, I'll include runs-on: ubuntu-latest and a dummy step that sets the outputs.\n\nBut the user didn't specify the steps, so perhaps the dummy step is acceptable.\n\nTherefore, the final YAML should have:\n\n- name: empty string\n- on: workflow_call\n- outputs section with the 5 outputs\n- jobs section with build-docker-images job, which has outputs mapping to step outputs, and a step that sets those outputs.\n\nEven though the user didn't specify the steps, including a placeholder step makes the YAML valid.\n</think>\n\n```yaml\nname: \"\"\non:\n  workflow_call:\n\noutputs:\n  docker_cpu_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n  docker_inference_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n  docker_coverage_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n  docker_build_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n  docker_distribute_image:\n    value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.build.outputs.docker_cpu_image }}\n      docker_inference_image: ${{ steps.build.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ steps.build.outputs.docker_coverage_image }}\n      docker_build_image: ${{ steps.build.outputs.docker_build_image }}\n      docker_distribute_image: ${{ steps.build.outputs.docker_distribute_image }}\n    steps:\n      - name: Build Docker Images\n        id: build\n        run: |\n          echo \"docker_cpu_image=placeholder\" >> $GITHUB_OUTPUT\n          echo \"docker_inference_image=placeholder\" >> $GITHUB_OUTPUT\n          echo \"docker_coverage_image=placeholder\" >> $GITHUB_OUTPUT\n          echo \"docker_build_image=placeholder\" >> $GITHUB_OUTPUT\n          echo \"docker_distribute_image=placeholder\" >> $GITHUB_OUTPUT\n```","repository_id":3993770,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"outputs\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/e50a602e-8db4-47f5-a49a-467d9e6e2f11.yml\", \"line\": 5, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"outputs:\\n^~~~~~~~\", \"end_column\": 8}]","meteor_score":0.2031159089754581,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":806,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":1,"CyclomaticComplexity":1}}
{"id":3572,"level":3,"name":"paradigmxyz/reth","file_name":"sync.yml","len":5,"prompt":"Generate a GitHub Workflow named `sync test` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by an event: there is activity relating to a merge group in a merge queue. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `sync (${{ matrix.chain.bin }})` and its job id is `sync`. This job will execute on any runner that is a member of Reth. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `chain` has 2 values: {'bin': 'reth', 'block': 100000, 'build': 'install', 'chain': 'mainnet', 'tip': '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', 'unwind-target': '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'} and {'bin': 'op-reth', 'block': 10000, 'build': 'install-op', 'chain': 'base', 'tip': '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', 'unwind-target': '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}. The job sets 2 environment variables to use: `RUST_BACKTRACE` is set to `1` and `RUST_LOG` is set to `info,sync=error`. The maximum number of minutes to run the job is 60. The job `sync` has 9 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup mold`. This step runs action `rui314/setup-mold` tagged as v1. The 3rd step is named `Setup Rust toolchain`. This step runs action `dtolnay/rust-toolchain` from the stable branch. The 4th step is named `Cache Rust`. This step runs action `Swatinem/rust-cache` tagged as v2. The step defines an input parameter for the action: `cache-on-failure` is set to `True`. The 5th step is named `Build ${{ matrix.chain.bin }}`. This step runs a script: `make ${{ matrix.chain.build }}`. The 6th step is named `Run sync`. This step runs a script: `${{ matrix.chain.bin }} node \\\n  --chain ${{ matrix.chain.chain }} \\\n  --debug.tip ${{ matrix.chain.tip }} \\\n  --debug.max-block ${{ matrix.chain.block }} \\\n  --debug.terminate\n`. The 7th step is named `Verify the target block hash`. This step runs a script: `${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n  | grep ${{ matrix.chain.tip }}\n`. The 8th step is named `Run stage unwind for 100 blocks`. This step runs a script: `${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n`. The 9th step is named `Run stage unwind to block hash`. This step runs a script: `${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n`. /no-think","answer":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      group: Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: \"${{ matrix.chain.bin }} node \\\\\\n  --chain ${{ matrix.chain.chain }} \\\\\\\n        \\n  --debug.tip ${{ matrix.chain.tip }} \\\\\\n  --debug.max-block ${{ matrix.chain.block\\\n        \\ }} \\\\\\n  --debug.terminate\\n\"\n    - name: Verify the target block hash\n      run: \"${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\\\n        \\ headers ${{ matrix.chain.block }} \\\\\\n  | grep ${{ matrix.chain.tip }}\\n\"\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: \"${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\\\n        \\ }} --chain ${{ matrix.chain.chain }} \\n\"\n    strategy:\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n          unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n          unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n    timeout-minutes: 60\n\n```","llm_response":"<think>We are generating a GitHub Actions workflow YAML file.\n The workflow is named \"sync test\".\n Trigger: on merge group activity in a merge queue (we'll use the `merge_group` event).\n Environment variable: CARGO_TERM_COLOR=always at the workflow level.\n Concurrency: using the pattern ${{ github.workflow }}-${{ github.head_ref || github.run_id }} with cancel-in-progress set to true.\n Job named: `sync (${{ matrix.chain.bin }})` with job id `sync`.\n Runs on a runner in the group \"Reth\" (we assume the group name is \"Reth\", but note: in GitHub Actions, we typically use labels for runners, not groups. However, the problem says \"a member of Reth\", so we'll use `runs-on: reth` if \"reth\" is the label? But the problem says \"Reth\" (capitalized). However, note: the problem says \"Reth\" as the group, but in GitHub Actions, we use labels. Since the problem says \"runner that is a member of Reth\", we'll assume the label is \"reth\" (lowercase is common) but the problem says \"Reth\". However, the problem says \"Reth\" so we'll use `runs-on: Reth`? But note: GitHub Actions labels are case-insensitive? Actually, they are stored as given but matched case-insensitively? However, the standard is to use lowercase. But the problem says \"Reth\", so we'll write it as given.\n\n However, note: the problem says \"any runner that is a member of Reth\". In GitHub, we have runner groups and labels. But the `runs-on` key in a job typically takes a label (or a list of labels). There is also a way to specify a group, but that is done in the organization settings and then the label for the group is set. However, the problem does not specify if \"Reth\" is a label or a group. Since the problem says \"a member of Reth\", and in the context of `runs-on` we use labels, we assume that the label is \"reth\" (but the problem says \"Reth\"). However, the problem says \"Reth\", so we'll use `runs-on: Reth`? But note: GitHub Actions does not have a concept of \"group\" in the `runs-on` key at the job level. Instead, we assign labels to runners and then use those labels. So we'll assume the label is \"reth\" (but the problem says \"Reth\", so we write it as \"Reth\" but note that GitHub is case-insensitive for labels? Actually, they are case-insensitive in matching but stored as given). However, to be safe, we'll write the label exactly as the problem states: \"Reth\".\n\n But wait: the problem says \"Reth\" (with capital R) so we'll use `runs-on: Reth`.\n\n Matrix: two values for `chain` (each is an object with several keys).\n   First object: \n      bin: 'reth'\n      block: 100000\n      build: 'install'\n      chain: 'mainnet'\n      tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n      unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n\n   Second object:\n      bin: 'op-reth'\n      block: 10000\n      build: 'install-op'\n      chain: 'base'\n      tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n      unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n\n Environment variables for the job: \n   RUST_BACKTRACE=1\n   RUST_LOG=info,sync=error\n\n Timeout: 60 minutes (so 3600 seconds? but the key is `timeout-minutes`)\n\n Steps (9 steps):\n\n 1. Checkout repository: uses actions/checkout@v4\n 2. Setup mold: uses rui314/setup-mold@v1\n 3. Setup Rust toolchain: uses dtolnay/rust-toolchain@stable (note: the problem says \"from the stable branch\", so we use the branch name? But the action might not have a branch named \"stable\". Actually, the problem says \"tagged as v4\" for the first, but for this one it says \"from the stable branch\". However, the action dtolnay/rust-toolchain is typically used with a specific version or branch. Since it says \"stable branch\", we can use `@stable` but note: the action might not have a branch named stable. Alternatively, the problem might mean the stable toolchain? Actually, the action dtolnay/rust-toolchain is for setting up a specific Rust toolchain. The problem says \"from the stable branch\", which is confusing. But looking at the action: it's usually used with a version or channel. The problem says \"stable branch\", so we'll use `@stable` as the ref? However, the problem says \"tagged as v4\" for the first, but for this one it says \"from the stable branch\". So we'll write the ref as \"stable\".\n\n 4. Cache Rust: uses Swatinem/rust-cache@v2, with input `cache-on-failure: true`\n 5. Build step: runs `make ${{ matrix.chain.build }}`\n 6. Run sync: runs a multi-line script (we'll write as a single string with newlines, but in YAML we can use | for literal block scalar)\n 7. Verify target block hash: runs a script that uses grep\n 8. Run stage unwind for 100 blocks: script\n 9. Run stage unwind to block hash: script\n\n Important: The concurrency group is set at the workflow level.\n\n Let's structure the YAML:\n\n name: sync test\n\n on:\n   merge_group:   # This is the event for merge queue activity (GitHub Enterprise Server 3.5+ and GitHub.com)\n     types: [checks_requested]\n\n concurrency:\n   group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n   cancel-in-progress: true\n\n env:\n   CARGO_TERM_COLOR: always\n\n jobs:\n   sync:\n     name: sync (${{ matrix.chain.bin }})\n     runs-on: Reth   # as per problem: \"any runner that is a member of Reth\"\n     timeout-minutes: 60\n     env:\n       RUST_BACKTRACE: 1\n       RUST_LOG: info,sync=error\n     strategy:\n       matrix:\n         chain:\n           - bin: reth\n             block: 100000\n             build: install\n             chain: mainnet\n             tip: 0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4\n             unwind-target: 0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a\n           - bin: op-reth\n             block: 10000\n             build: install-op\n             chain: base\n             tip: 0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7\n             unwind-target: 0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de\n\n     steps:\n       - name: Checkout repository\n         uses: actions/checkout@v4\n\n       - name: Setup mold\n         uses: rui314/setup-mold@v1\n\n       - name: Setup Rust toolchain\n         uses: dtolnay/rust-toolchain@stable   # note: the problem says \"from the stable branch\", so we use the branch name as ref\n\n       - name: Cache Rust\n         uses: Swatinem/rust-cache@v2\n         with:\n           cache-on-failure: true\n\n       - name: Build ${{ matrix.chain.bin }}\n         run: make ${{ matrix.chain.build }}\n\n       - name: Run sync\n         run: |\n           ${{ matrix.chain.bin }} node \\\n             --chain ${{ matrix.chain.chain }} \\\n             --debug.tip ${{ matrix.chain.tip }} \\\n             --debug.max-block ${{ matrix.chain.block }} \\\n             --debug.terminate\n\n       - name: Verify the target block hash\n         run: |\n           ${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n             | grep ${{ matrix.chain.tip }}\n\n       - name: Run stage unwind for 100 blocks\n         run: |\n           ${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n\n       - name: Run stage unwind to block hash\n         run: |\n           ${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }}\n\n However, note: the problem says the job id is `sync` and the name is `sync (${{ matrix.chain.bin }})`. We have set the job id as `sync` and the name as the string with the matrix.\n\n Important: The concurrency group is set at the workflow level, so we have it under the top-level key `concurrency`.\n\n Also note: the trigger event for merge queue is `merge_group`. According to GitHub documentation, the event is `merge_group` and the type for when a merge group is created is `checks_requested` (but note: the problem says \"activity relating to a merge group in a merge queue\", so we use the `merge_group` event without filtering types? Actually, the problem doesn't specify the type, so we can leave it without types? But the problem says \"triggered by an event: there is activity relating to a merge group\", so we'll use:\n\n on:\n   merge_group:\n\n However, the problem does not specify the type, so we don't filter by types.\n\n But note: the `merge_group` event is only available in repositories that have the merge queue enabled (and is a GitHub Enterprise feature). We'll write it as:\n\n on:\n   merge_group:\n\n Now, let's write the YAML accordingly.\n\n One more note: the problem says \"Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time.\" and \"When this workflow is queued, any currently running workflow in the same concurrency group will be canceled.\" -> so we set `cancel-in-progress: true`.\n\n Let's generate the YAML.\n</think>\n\n```yaml\nname: sync test\non:\n  merge_group:\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\njobs:\n  sync:\n    name: sync (${{ matrix.chain.bin }})\n    runs-on: Reth\n    timeout-minutes: 60\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    strategy:\n      matrix:\n        chain:\n          - bin: reth\n            block: 100000\n            build: install\n            chain: mainnet\n            tip: 0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4\n            unwind-target: 0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a\n          - bin: op-reth\n            block: 10000\n            build: install-op\n            chain: base\n            tip: 0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7\n            unwind-target: 0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Setup mold\n        uses: rui314/setup-mold@v1\n      - name: Setup Rust toolchain\n        uses: dtolnay/rust-toolchain@stable\n      - name: Cache Rust\n        uses: Swatinem/rust-cache@v2\n        with:\n          cache-on-failure: true\n      - name: Build ${{ matrix.chain.bin }}\n        run: make ${{ matrix.chain.build }}\n      - name: Run sync\n        run: |\n          ${{ matrix.chain.bin }} node \\\n            --chain ${{ matrix.chain.chain }} \\\n            --debug.tip ${{ matrix.chain.tip }} \\\n            --debug.max-block ${{ matrix.chain.block }} \\\n            --debug.terminate\n      - name: Verify the target block hash\n        run: |\n          ${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n            | grep ${{ matrix.chain.tip }}\n      - name: Run stage unwind for 100 blocks\n        run: |\n          ${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n      - name: Run stage unwind to block hash\n        run: |\n          ${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }}\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/80fb982f-91f6-4b0d-b6b3-a5ab06682fe2.yml\", \"line\": 12, \"column\": 14, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: Reth\\n             ^~~~\", \"end_column\": 17}]","meteor_score":0.9547770303918808,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":719,"stats":{"NumofTriggers":1,"Triggers":["merge_group"],"NumofJobs":1,"NumofActions":4,"Actions":["Swatinem/rust-cache","actions/checkout","dtolnay/rust-toolchain","rui314/setup-mold"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"rui314/setup-mold"},{"version":"stable","name":"dtolnay/rust-toolchain"},{"version":"v2","name":"Swatinem/rust-cache"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":9,"CyclomaticComplexity":1}}
{"id":30644,"level":2,"name":"marqo-ai/marqo","file_name":"start_ec2_runner.yml","len":5,"prompt":"Generate a GitHub Workflow named `Start EC2 Runner` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 2 inputs: base-ami-id-this input represents base ami id for the ec2 runner, it must be supplied and the data type is string; ec2-instance-type-this input represents instance type for the ec2 runner, it must be supplied and the data type is string. This workflow has 2 outputs: label-it represents ec2 runner label and its value is ${{ jobs.Start-Runner.outputs.label }}; ec2-instance-id-it represents ec2 instance id and its value is ${{ jobs.Start-Runner.outputs.ec2-instance-id }}. It receives 3 secrets: GH_PERSONAL_ACCESS_TOKEN-it must be supplied; MARQO_WORKFLOW_TESTS_SUBNET_ID-it must be supplied; MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting applies to all jobs in the workflow. The workflow has one job. The 1st job is named `Start EC2 runner` and its job id is `Start-Runner`. The job `Start-Runner` has 2 steps. The 1st step is named `Configure AWS credentials`. The 2nd step is named `Start EC2 runner` and its id is `start-ec2-runner`. /no-think","answer":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 Runner Label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 Instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-region: us-east-1\n        role-to-assume: arn:aws:iam::424082663841:role/GhRunnerManagerRole-Marqo\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: machulav/ec2-github-runner@v2\n      with:\n        mode: start\n        github-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        ec2-image-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n        aws-resource-tags: >\n          [\n            {\"Key\": \"Name\", \"Value\": \"marqo-github-runner-${{ github.run_id }}\"},\n            {\"Key\": \"GitHubRepo\", \"Value\": \"${{ github.repository }}\"},\n            {\"Key\": \"WorkflowName\", \"Value\": \"${{ github.workflow }}\"},\n            {\"Key\": \"WorkflowRunId\", \"Value\": \"${{ github.run_id }}\"},\n            {\"Key\": \"WorkflowURL\", \"Value\": \"${{ github.event.repository.html_url\n          }}/actions/runs/${{ github.run_id }}\"},\n            {\"Key\": \"PoloRole\", \"Value\": \"testing\"}\n          ]\n\npermissions:\n  contents: read\n  id-token: write\n\n```","llm_response":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 runner label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\npermissions:\n  contents: read\n  id-token: write\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        role-to-assume: arn:aws:iam::${{ secrets.AWS_ACCOUNT_ID \n          }}:role/WorkflowRole\n        role-session-name: GitHub_to_AWS_via_FederatedOIDC\n        aws-region: ${{ vars.AWS_REGION }}\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      run: |\n        aws ec2 run-instances \\\n          --cli-input-json \\\n          \"{\n            \\\"ImageId\\\": \\\"${{ inputs.base-ami-id }}\\\",\n            \\\"MinCount\\\": 1,\n            \\\"MaxCount\\\": 1,\n            \\\"InstanceType\\\": \\\"${{ inputs.ec2-instance-type }}\\\",\n            \\\"SubnetId\\\": \\\"${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\\\",\n            \\\"SecurityGroupIds\\\": [\\\"${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\\\"],\n            \\\"TagSpecifications\\\": [\n              {\n                \\\"ResourceType\\\": \\\"instance\\\",\n                \\\"Tags\\\": [\n                  {\n                    \\\"Key\\\": \\\"Name\\\",\n                    \\\"Value\\\": \\\"marqo-ec2-runner\\\"\n                  }\n                ]\n              }\n            ]\n          }\" \\\n          > runner.json\n\n        echo \"label=${{ fromJson(steps.start-ec2-runner.outputs.runner-json).Instances[0].InstanceId }}\" >> $GITHUB_OUTPUT\n        echo \"ec2-instance-id=${{ fromJson(steps.start-ec2-runner.outputs.runner-json).Instances[0].InstanceId }}\" >> $GITHUB_OUTPUT\n\n```","repository_id":94530930,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"aws_account_id\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gh_personal_access_token: string; github_token: string; marqo_workflow_tests_security_group_id: string; marqo_workflow_tests_subnet_id: string}\", \"filepath\": \"../../tmp/e4d1e60f-5007-4bfb-b167-cf7137fc9a92.yml\", \"line\": 44, \"column\": 42, \"kind\": \"expression\", \"snippet\": \"        role-to-assume: arn:aws:iam::${{ secrets.AWS_ACCOUNT_ID \\n                                         ^~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 63}, {\"message\": \"property \\\"start-ec2-runner\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/e4d1e60f-5007-4bfb-b167-cf7137fc9a92.yml\", \"line\": 51, \"column\": 636, \"kind\": \"expression\", \"snippet\": \"      run: |\", \"end_column\": 636}]","meteor_score":0.5958861817554304,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":575,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":2,"Actions":["aws-actions/configure-aws-credentials","machulav/ec2-github-runner"],"Actions_details":[{"version":"v4","name":"aws-actions/configure-aws-credentials"},{"version":"v2","name":"machulav/ec2-github-runner"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":2,"CyclomaticComplexity":1}}
{"id":46171,"level":1,"name":"wger-project/flutter","file_name":"make-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build release artefacts` for a GitHub repository whose primary programming language is Dart. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives an input: version-this input represents version to tag and release (x.y.z), it must be supplied and the data type is string. The workflow has 9 jobs. The 1st job is named `CI` and its job id is `ci`. The 2nd job is named `Prepare` and its job id is `determine_version`. The 3rd job is named `Linux` and its job id is `build_linux`. The 4th job is named `Android` and its job id is `build_android`. The 5th job is named `Apple` and its job id is `build_apple`. The 6th job is named `Microsoft` and its job id is `build_windows`. The 7th job is named `Upload to Play Store` and its job id is `upload_play_store`. The 8th job is named `Make Github Release` and its job id is `make_gh_release`. The 9th job is named `Upload flathub manifest` and its job id is `generate_flathub_manifest`. /no-think","answer":"```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n\n  determine_version:\n    needs: ci\n    name: Prepare\n    uses: ./.github/workflows/bump-version.yml\n    with:\n      app_version: ${{ github.event.inputs.version }}\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    uses: ./.github/workflows/build-linux.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs: determine_version\n    uses: ./.github/workflows/build-android.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n    secrets:\n      DECRYPTKEY_PLAYSTORE_SIGNING_KEY: ${{ \n        secrets.DECRYPTKEY_PLAYSTORE_SIGNING_KEY }}\n      DECRYPTKEY_PROPERTIES: ${{ secrets.DECRYPTKEY_PROPERTIES }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    uses: ./.github/workflows/build-apple.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    uses: ./.github/workflows/build-windows.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    runs-on: ubuntu-latest\n    needs:\n    - build_android\n    - build_linux\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Download builds\n      uses: actions/download-artifact@v4\n      with:\n        path: /tmp/\n\n    - name: Setup Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.4\n\n    - name: Decrypt config files\n      run: |\n        cd ./fastlane/metadata/envfiles\n        chmod +x ./decrypt_secrets.sh\n        ./decrypt_secrets.sh\n      shell: bash\n      env:\n        DECRYPTKEY_PLAYSTORE: ${{ secrets.DECRYPTKEY_PLAYSTORE }}\n\n    - name: Upload build to Play Store\n      run: |\n        mkdir -p ./build/app/outputs/bundle/release/\n        cp /tmp/builds-aab/app-release.aab ./build/app/outputs/bundle/release/app-release.aab\n        bundle install\n        bundle exec fastlane android production\n\n  #\n  # This is currently commented out since the iOS upload are currently being handled\n  # by the fastlane script in the ios folder. We use the account of pthaler for this\n  # and he runs the script manually.\n  #\n\n  #  upload_app_store:\n  #    name: Upload to App Store (placeholder)\n  #    runs-on: ubuntu-latest\n  #    needs:\n  #      - build_android\n  #      - build_apple\n  #    steps:\n  #      - name: Checkout application\n  #        uses: actions/checkout@v4\n  #        with:\n  #          ref: feature/build-process\n  #        #          ref: ${{ github.event.inputs.version }}\n  #\n  #      - name: Common flutter setup\n  #        uses: ./.github/actions/flutter-common\n  #\n  #      - name: Download builds\n  #        uses: actions/download-artifact@v4\n  #        with:\n  #          path: /tmp/\n  #\n  #      - name: Upload build to App Store\n  #        run: |\n  #          # bundle exec fastlane todo\n\n  make_gh_release:\n    name: Make Github Release\n    runs-on: ubuntu-latest\n    needs:\n    - upload_play_store\n    - build_linux\n    - build_windows\n    - build_apple\n\n    steps:\n    - name: Download builds\n      uses: actions/download-artifact@v4\n\n    - name: Make Github release\n      uses: softprops/action-gh-release@v2\n      with:\n        tag_name: ${{ inputs.version }}\n        files: |\n          builds-aab/app-release.aab\n          builds-apk/app-release.apk\n          builds-linux/wger-linux-x86_64.tar.gz\n          builds-linux/wger-linux-x86_64.sha256\n          builds-ios/Runner.app\n          builds-macos/wger.app\n          builds-windows/wger.exe\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    name: Upload flathub manifest\n    needs:\n    - make_gh_release\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Common flutter setup\n      uses: ./.github/actions/flutter-common\n\n    - name: Generate manifest\n      run: |\n        cd flatpak/scripts\n        dart pub get\n        dart manifest_generator.dart --meta ../flatpak_meta.json --github\n        mkdir ../../flathub\n        cp flatpak_generator_exports/de.wger.flutter.json ../../flathub\n        cp flatpak_generator_exports/flathub.json ../../flathub\n\n    - name: Push updated config to flathub repository\n      uses: cpina/github-action-push-to-another-repository@main\n      env:\n        SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}\n      with:\n        source-directory: flathub\n        destination-github-username: wger-project\n        destination-repository-name: de.wger.flutter\n        user-email: github-actions@github.com\n        target-branch: release-${{ github.event.inputs.version }}\n        create-target-branch-if-needed: true\n        commit-message: Update to ${{ github.event.inputs.version }}\n\n\n```","llm_response":"```yaml\nname: Build release artefacts\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: 'Version to tag and release (x.y.z)'\n        required: true\n        type: string\n\njobs:\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n    secrets:\n      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n\n  determine_version:\n    name: Prepare\n    runs-on: ubuntu-latest\n    outputs:\n      version: ${{ steps.set_version.outputs.version }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Set version\n      id: set_version\n      run: |\n        if [ \"${{ github.event_name }}\" == \"workflow_dispatch\" ]; then\n          echo \"version=${{ github.event.inputs.version }}\" >> $GITHUB_OUTPUT\n        else\n          echo \"version=$(grep \"version =\" pubspec.yaml | cut -d'=' -f2 | cut -d'.' -f1-3)\" >> $GITHUB_OUTPUT\n        fi\n    - name: Verify version\n      run: |\n        if ! [[ ${{ steps.set_version.outputs.version }} =~ ^[0-9]+\\.[0-9]+\\.[0-9]+$ ]]; then\n          echo \"Invalid version format. Expected x.y.z\"\n          exit 1\n        fi\n    - name: Upload artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: version\n        path: ${{ steps.set_version.outputs.version }}\n        retention-days: 1\n\n  build_linux:\n    name: Linux\n    needs:\n    - determine_version\n    - ci\n    uses: ./.github/workflows/build_linux.yml\n    secrets:\n      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n    with:\n      version: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs:\n    - determine_version\n    - ci\n    uses: ./.github/workflows/build_android.yml\n    secrets:\n      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n    with:\n      version: ${{ github.event.inputs.version }}\n\n  build_apple:\n    name: Apple\n    needs:\n    - determine_version\n    - ci\n    uses: ./.github/workflows/build_apple.yml\n    secrets:\n      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n    with:\n      version: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs:\n    - determine_version\n    - ci\n    uses: ./.github/workflows/build_windows.yml\n    secrets:\n      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n    with:\n      version: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    needs:\n    - build_android\n    - build_apple\n    - build_windows\n    secrets:\n      PLAY_STORE_UPLOAD_KEY: ${{ secrets.PLAY_STORE_UPLOAD_KEY }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Download artifacts\n      uses: actions/download-artifact@v4\n      with:\n        name: version\n        path: .\n    - name: Install dependencies\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y google-play-services\n    - name: Upload APK to Play Store\n      env:\n        UPLOAD_KEY: ${{ secrets.PLAY_STORE_UPLOAD_KEY }}\n      run: |\n        ./gradlew bundlePlayStore\n        ./gradlew assemblePlayStore\n        echo $UPLOAD_KEY | base64 -d > upload_key.jks\n        ./gradlew uploadToPlayStore -PapiKeyFile=upload_key.jks -PapiKeyAlias=android -PapiKeyPassword=password -PkeyPassword=password\n\n  make_gh_release:\n    name: Make Github Release\n    needs:\n    - build_linux\n    - build_android\n    - build_apple\n    - build_windows\n    - upload_play_store\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Download artifacts\n      uses: actions/download-artifact@v4\n      with:\n        path: artifacts\n    - name: List downloaded files\n      run: |\n        ls -R artifacts\n    - name: Create release\n      uses: actions/publish-to-ghpages@release/v1\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        VERSION: ${{ github.event.inputs.version }}\n\n  generate_flathub_manifest:\n    name: Upload flathub manifest\n    needs:\n    - build_linux\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Download artifacts\n      uses: actions/download-artifact@v4\n      with:\n        name: version\n        path: .\n    - name: Install dependencies\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y flatpak\n        sudo apt-get install -y flatpak-builder\n        sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo\n    - name: Generate flathub manifest\n      run: |\n        flatpak-builder --install manifest.flatpak\n    - name: Upload to Flathub\n      uses: flathub/actions/submit-manifest@master\n      env:\n        FLATHUB_TOKEN: ${{ secrets.FLATHUB_TOKEN }}\n\n```","repository_id":69029763,"lint_valid":false,"lint_output":"[{\"message\": \"\\\"secrets\\\" is only available for a reusable workflow call with \\\"uses\\\" but \\\"uses\\\" is not found in job \\\"upload_play_store\\\"\", \"filepath\": \"../../tmp/fd13ac9d-a71f-430e-943f-fa52dc270849.yml\", \"line\": 99, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    secrets:\\n    ^~~~~~~~\", \"end_column\": 12}]","meteor_score":0.46624791695359097,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1270,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":9,"NumofActions":8,"Actions":["./.github/actions/flutter-common","actions/checkout","actions/checkout","actions/download-artifact","actions/download-artifact","cpina/github-action-push-to-another-repository","ruby/setup-ruby","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ruby/setup-ruby"},{"version":"v4","name":"actions/download-artifact"},{"version":"v2","name":"softprops/action-gh-release"},{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/flutter-common"},{"version":"main","name":"cpina/github-action-push-to-another-repository"}],"NumofReusableWfs":6,"ReusableWfs":["./.github/workflows/build-android.yml","./.github/workflows/build-apple.yml","./.github/workflows/build-linux.yml","./.github/workflows/build-windows.yml","./.github/workflows/bump-version.yml","./.github/workflows/ci.yml"],"NumofSteps":11,"CyclomaticComplexity":5}}
{"id":64177,"level":3,"name":"bitwarden/server","file_name":"repository-management.yml","len":5,"prompt":"Generate a GitHub Workflow named `Repository management` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives 3 inputs: task-its default value is Version Bump, this input represents task to execute, it has options including Version Bump, Version Bump and Cut rc and Version Bump and Cut hotfix-rc, it must be supplied and the data type is choice; target_ref-its default value is main, this input represents branch/tag to target for cut, it must be supplied and the data type is string; version_number_override-this input represents new version override (leave blank for automatic calculation, example: '2024.1.0'), it is optional and the data type is string. The workflow has 5 jobs. The 1st job is named `Setup` and its job id is `setup`. This job will run on ubuntu-24.04 runner. The job `setup` has one step. The 1st step is named `Set branch` and its id is `set-branch`. The step sets an environment variable to use: `TASK` is set to `${{ inputs.task }}`. This step runs a script: `if [[ \"$TASK\" == \"Version Bump\" ]]; then\n  BRANCH=\"none\"\nelif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n  BRANCH=\"rc\"\nelif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n  BRANCH=\"hotfix-rc\"\nfi\n\necho \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n`. This job has an output: `branch` is defined as ${{ steps.set-branch.outputs.branch }}. The 2nd job is named `Cut branch` and its job id is `cut_branch`. Before this job runs, `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cut_branch` has 4 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `${{ inputs.target_ref }}` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Check if ${{ needs.setup.outputs.branch }} branch exists`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n  echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 4th step is named `Cut branch`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `git switch --quiet --create $BRANCH_NAME\ngit push --quiet --set-upstream origin $BRANCH_NAME\n`. The 3rd job is named `Bump Version` and its job id is `bump_version`. Before this job runs, `cut_branch` and `setup` must complete successfully. This job will run only if the condition(${{ always() }}) is met. This job will run on ubuntu-24.04 runner. The job `bump_version` has 13 steps. The 1st step is named `Validate version input format`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-check` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ inputs.version_number_override }}`. The 2nd step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 3rd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 4th step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 5th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 6th step is named `Get current version` and its id is `current-version`. This step runs a script: `CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\necho \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n`. The 7th step is named `Verify input version`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. The step sets 2 environment variables to use: `CURRENT_VERSION` is set to `${{ steps.current-version.outputs.version }}` and `NEW_VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `# Error if version has not changed.\nif [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n  echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n\n# Check if version is newer.\nprintf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\nif [ $? -eq 0 ]; then\n  echo \"Version is newer than the current version.\"\nelse\n  echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 8th step is named `Calculate next release version` and its id is `calculate-next-version`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-next` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ steps.current-version.outputs.version }}`. The 9th step is named `Bump version props - Version Override` and its id is `bump-version-override`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ inputs.version_number_override }}`. The 10th step is named `Bump version props - Automatic Calculation` and its id is `bump-version-automatic`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ steps.calculate-next-version.outputs.version }}`. The 11th step is named `Set final version output` and its id is `set-final-version-output`. The step sets an environment variable to use: `VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n  echo \"version=$VERSION\" >> $GITHUB_OUTPUT\nelif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n  echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\nfi\n`. The 12th step is named `Commit files`. This step runs a script: `git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a`. The 13th step is named `Push changes`. This step runs a script: `git push`. This job has an output: `version` is defined as ${{ steps.set-final-version-output.outputs.version }}. The 4th job is named `Cherry-Pick Commit(s)` and its job id is `cherry_pick`. Before this job runs, `bump_version` and `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cherry_pick` has 5 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 4th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 5th step is named `Perform cherry-pick(s)`. The step sets an environment variable to use: `CUT_BRANCH` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `# Function for cherry-picking\ncherry_pick () {\n  local source_branch=$1\n  local destination_branch=$2\n\n  # Get project commit/version from source branch\n  git switch $source_branch\n  SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n  SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  # Get project commit/version from destination branch\n  git switch $destination_branch\n  DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n    git push -u origin $destination_branch\n  fi\n}\n\n# If we are cutting 'hotfix-rc':\nif [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n  # If the 'rc' branch exists:\n  if [[ $(git ls-remote --heads origin rc) ]]; then\n\n    # Chery-pick from 'rc' into 'hotfix-rc'\n    cherry_pick rc hotfix-rc\n\n    # Cherry-pick from 'main' into 'rc'\n    cherry_pick main rc\n\n  # If the 'rc' branch does not exist:\n  else\n\n    # Cherry-pick from 'main' into 'hotfix-rc'\n    cherry_pick main hotfix-rc\n\n  fi\n\n# If we are cutting 'rc':\nelif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n  # Cherry-pick from 'main' into 'rc'\n  cherry_pick main rc\n\nfi\n`. The 5th job is named `Move finalization database scripts` and its job id is `move_future_db_scripts`. Before this job runs, `cherry_pick` must complete successfully. This job will call a reusable workflow located at `./.github/workflows/_move_finalization_db_scripts.yml`. The job will pass a secret to the called workflow: the secret `special_case_secrets` is `inherit`. /no-think","answer":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: \"New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\"\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n\n  cut_branch:\n    name: Cut branch\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    needs: setup\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out target ref\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n\n  bump_version:\n    name: Bump Version\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    needs:\n    - cut_branch\n    - setup\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      id: calculate-next-version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      id: bump-version-override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      id: bump-version-automatic\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ \n        steps.set-final-version-output.outputs.version }}\" -a\n\n    - name: Push changes\n      run: git push\n\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    needs:\n    - bump_version\n    - setup\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out main branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets: inherit\n\n```","llm_response":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute,\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut,\n        required: true\n        type: string\n      version_number_override:\n        description: 'New version override (leave blank for automatic calculation, example: ''2024.1.0'')',\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n  cut_branch:\n    name: Cut branch\n    needs:\n    - setup\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      id: app-token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n  bump_version:\n    name: Bump Version\n    needs:\n    - cut_branch\n    - setup\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n    - name: Generate GH App token\n      id: app-token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a\n    - name: Push changes\n      run: git push\n    # This job is a sink for the output\n    # We only need to run this job once, so we can just use the output from the previous job\n    # This job is a sink for the output\n    # We only need to run this job once, so we can just use the output from the previous job\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    needs:\n    - bump_version\n    - setup\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      id: app-token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs:\n    - cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets:\n      special_case_secrets: inherit\n\n```","repository_id":3499830,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 20: did not find expected key\", \"filepath\": \"../../tmp/5646f1f2-8214-48fb-a2ce-3570de453732.yml\", \"line\": 20, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      version_number_override:\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":2364,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":5,"NumofActions":10,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/create-github-app-token","actions/create-github-app-token","actions/create-github-app-token","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-check","bitwarden/gh-actions/version-next"],"Actions_details":[{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-check"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-next"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_move_finalization_db_scripts.yml"],"NumofSteps":23,"CyclomaticComplexity":3}}
{"id":54038,"level":3,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has 2 values: prefer-lowest and prefer-stable. The job `test` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.composer/cache/files` and `key` is set to `composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 3 input parameters for the action: `php-version` is set to `${{ matrix.php }}`, `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick` and `coverage` is set to `none`. The 4th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n`. The 5th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v3. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `packages/vue/package.json`. The 6th step is named `Install Node Dependencies`. This step runs a script: `npm install`. The 7th step is named `Run npm tests`. This step runs a script: `npm run test`. The 8th step is named `Run PHP Tests`. This step runs a script: `vendor/bin/phpunit`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    types:\n      - opened\n      - edited\n      - synchronize\n      - reopened\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: [8.3]\n        laravel: ['11.*']\n        dependency-version: ['prefer-lowest', 'prefer-stable']\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n\n    - name: Run npm tests\n      run: npm run test\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 22: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/1d1fa129-42a1-499a-8247-22c290016699.yml\", \"line\": 22, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":27677,"level":1,"name":"paddlepaddle/paddle","file_name":"docker.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow has 5 outputs: docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}; docker_inference_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_inference_image }}; docker_coverage_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_coverage_image }}; docker_build_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_build_image }}; docker_distribute_file-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_distribute_image }}. The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on:\n      group: Docker-build\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ \n        steps.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_image: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - id: build-docker-images\n      name: build docker images\n      env:\n        PR_ID: ${{ github.event.pull_request.number }}\n        COMMIT_ID: ${{ github.event.pull_request.head.sha }}\n        docker_cpu_file: Dockerfile.cuda9_cudnn7_gcc48_py35_centos6\n        docker_inference_file: \n          Dockerfile.cuda11.2_cudnn8.1_trt8.4_gcc8.2_ubuntu18\n        docker_coverage_file: Dockerfile.cuda117_cudnn8_gcc82_ubuntu18_coverage\n        docker_build_file: Dockerfile.cuda11.2_cudnn8_gcc82_trt8\n        docker_distribute_file: Dockerfile.cuda123_cudnn9_gcc122_ubuntu20\n      run: |\n        set -x\n        wget -q --no-proxy https://paddle-github-action.bj.bcebos.com/PR/Paddle/${PR_ID}/${COMMIT_ID}/Paddle.tar.gz --no-check-certificate\n        tar xf Paddle.tar.gz --strip-components=1\n        rm Paddle.tar.gz\n        cd tools/dockerfile\n        bash ci_dockerfile.sh\n        cd ../..\n\n        # docker build images\n        declare -A docker_files=([\"docker_cpu\"]=\"$docker_cpu_file\" [\"docker_inference\"]=\"$docker_inference_file\" [\"docker_coverage\"]=\"$docker_coverage_file\" [\"docker_build\"]=\"$docker_build_file\" [\"docker_distribute\"]=\"$docker_distribute_file\")\n        for name in \"${!docker_files[@]}\"\n        do\n          md5_value=`md5sum tools/dockerfile/${docker_files[$name]} | awk '{print $1}'`\n          docker_image=\"ccr-2vdh3abv-pub.cnc.bj.baidubce.com/ci/paddle:${md5_value}\"\n          declare \"${name}_image=${docker_image}\"\n          echo \"${name}_image=${docker_image}\" >> $GITHUB_OUTPUT\n          set +e\n          docker pull $docker_image\n          if [ $? -eq 0 ];then\n            echo use docker cache\n          else\n            docker build -t $docker_image -f tools/dockerfile/${docker_files[$name]} .\n            docker push $docker_image\n            echo end docker build\n          fi\n          set -e\n        done\n\n        # clean workspace\n        cd ${{ github.workspace }}\n        rm -rf ./*\n\n```","llm_response":"```yaml\nname: CI\n\non:\n  workflow_dispatch:\n    inputs:\n      build_type:\n        description: 'Build type (e.g., debug, release)'\n        required: true\n        type: string\n\njobs:\n  build-docker-images:\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.build_cpu_image.outputs.docker_image }}\n      docker_inference_image: ${{ steps.build_inference_image.outputs.docker_image }}\n      docker_coverage_image: ${{ steps.build_coverage_image.outputs.docker_image }}\n      docker_build_image: ${{ steps.build_build_image.outputs.docker_image }}\n      docker_distribute_image: ${{ steps.build_distribute_image.outputs.docker_image }}\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v2\n\n    - name: Set up Docker\n      uses: docker/setup-buildx-action@v2\n\n    - name: Build CPU image\n      id: build_cpu_image\n      run: |\n        docker build -t my-cpu-image .\n        echo \"::set-output name=docker_image::my-cpu-image\"\n\n    - name: Build inference image\n      id: build_inference_image\n      run: |\n        docker build -t my-inference-image .\n        echo \"::set-output name=docker_image::my-inference-image\"\n\n    - name: Build coverage image\n      id: build_coverage_image\n      run: |\n        docker build -t my-coverage-image .\n        echo \"::set-output name=docker_image::my-coverage-image\"\n\n    - name: Build build image\n      id: build_build_image\n      run: |\n        docker build -t my-build-image .\n        echo \"::set-output name=docker_image::my-build-image\"\n\n    - name: Build distribute image\n      id: build_distribute_image\n      run: |\n        docker build -t my-distribute-image .\n        echo \"::set-output name=docker_image::my-distribute-image\"\n```","repository_id":3993770,"lint_valid":false,"lint_output":"[{\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e422df57-2324-4255-b141-6b9d42cc78df.yml\", \"line\": 30, \"column\": 12, \"kind\": \"deprecated-commands\", \"snippet\": \"      run: |\\n           ^\", \"end_column\": 12}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e422df57-2324-4255-b141-6b9d42cc78df.yml\", \"line\": 36, \"column\": 12, \"kind\": \"deprecated-commands\", \"snippet\": \"      run: |\\n           ^\", \"end_column\": 12}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e422df57-2324-4255-b141-6b9d42cc78df.yml\", \"line\": 42, \"column\": 12, \"kind\": \"deprecated-commands\", \"snippet\": \"      run: |\\n           ^\", \"end_column\": 12}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e422df57-2324-4255-b141-6b9d42cc78df.yml\", \"line\": 48, \"column\": 12, \"kind\": \"deprecated-commands\", \"snippet\": \"      run: |\\n           ^\", \"end_column\": 12}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e422df57-2324-4255-b141-6b9d42cc78df.yml\", \"line\": 54, \"column\": 12, \"kind\": \"deprecated-commands\", \"snippet\": \"      run: |\\n           ^\", \"end_column\": 12}]","meteor_score":0.13228246868184856,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":806,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":1,"CyclomaticComplexity":1}}
{"id":21604,"level":3,"name":"zama-ai/tfhe-rs","file_name":"gpu_signed_integer_classic_tests.yml","len":5,"prompt":"Generate a GitHub Workflow named `Cuda - Signed integer tests with classical PBS` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) a label is added to a pull request. The workflow modifies the default permissions for the GITHUB_TOKEN: the workflow disables permissions for the GITHUB_TOKEN across all scopes. This permission setting applies to all jobs in the workflow. The workflow sets 15 environment variables to use: `CARGO_TERM_COLOR` is set to `always`, `ACTION_RUN_URL` is set to `${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}`, `RUSTFLAGS` is set to `-C target-cpu=native`, `RUST_BACKTRACE` is set to `full`, `RUST_MIN_STACK` is set to `8388608`, `SLACK_CHANNEL` is set to `${{ secrets.SLACK_CHANNEL }}`, `SLACK_ICON` is set to `https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png`, `SLACK_USERNAME` is set to `${{ secrets.BOT_USERNAME }}`, `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK }}`, `SLACKIFY_MARKDOWN` is set to `True`, `IS_PULL_REQUEST` is set to `${{ github.event_name == 'pull_request' }}`, `PULL_REQUEST_MD_LINK` is set to ``, `CHECKOUT_TOKEN` is set to `${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}`, `SECRETS_AVAILABLE` is set to `${{ secrets.JOB_SECRET != '' }}` and `EXTERNAL_CONTRIBUTION_RUNNER` is set to `gpu_ubuntu-22.04`. The workflow has 5 jobs. The job id of the 1st job is `should-run`. This job will run on ubuntu-latest runner. The job `should-run` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `pull-requests` scope. This permission setting only applies to the job `should-run`. The job `should-run` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Check for file changes` and its id is `changed-files`. This step runs action `tj-actions/changed-files` whose commit is ed68ef82c095e0d48ec87eccea555d944a631a4c. The step defines an input parameter for the action: `files_yaml` is set to `gpu:\n  - tfhe/Cargo.toml\n  - tfhe/build.rs\n  - backends/tfhe-cuda-backend/**\n  - tfhe/src/core_crypto/gpu/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n  - tfhe/src/integer/gpu/**\n  - tfhe/src/shortint/parameters/**\n  - tfhe/src/high_level_api/**\n  - tfhe/src/c_api/**\n  - 'tfhe/docs/**/**.md'\n  - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n  - scripts/integer-tests.sh\n  - ci/slab.toml\n`. This job has an output: `gpu_test` is defined as ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}. The 2nd job is named `Setup instance (cuda-signed-classic-tests)` and its job id is `setup-instance`. Before this job runs, `should-run` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')) is met. This job will run on ubuntu-latest runner. The job `setup-instance` has 2 steps. The 1st step is named `Start remote instance` and its id is `start-remote-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 6 input parameters for the action: `mode` is set to `start`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}`, `backend` is set to `hyperstack` and `profile` is set to `gpu-test`. The 2nd step is named `Start GitHub instance` and its id is `start-github-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'false') is met. This step runs a script: `echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n`. This job has an output: `runner-name` is defined as ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}. The 3rd job is named `CUDA signed integer tests with classical PBS` and its job id is `cuda-tests-linux`. Before this job runs, `should-run` and `setup-instance` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')) is met. This job will run on ${{ needs.setup-instance.outputs.runner-name }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. For each object in the [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}] list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Only a single job using the ${{ github.workflow_ref }} concurrency group will run at a time. When this job is queued, any currently running job in the same concurrency group will be canceled. The job `cuda-tests-linux` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Setup Hyperstack dependencies`. This step runs action `./.github/actions/gpu_setup`.The step defines 3 input parameters for the action: `cuda-version` is set to `${{ matrix.cuda }}`, `gcc-version` is set to `${{ matrix.gcc }}` and `github-instance` is set to `${{ env.SECRETS_AVAILABLE == 'false' }}`. The 3rd step is named `Install latest stable`. This step runs action `dtolnay/rust-toolchain` whose commit is 888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1. The step defines an input parameter for the action: `toolchain` is set to `stable`. The 4th step is named `Run signed integer tests`. This step runs a script: `BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n`. The 4th job is named `Slack Notification` and its job id is `slack-notify`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}) is met. This job will run on ubuntu-latest runner. When the job run fails, the workflow run will not fail. The job `slack-notify` has 2 steps. The 1st step is named `Set pull-request URL`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request') is met. The step sets an environment variable to use: `PR_BASE_URL` is set to `${{ vars.PR_BASE_URL }}`. This step runs a script: `echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n`. The 2nd step is named `Send message`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ needs.cuda-tests-linux.result }}` and `SLACK_MESSAGE` is set to `Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. The 5th job is named `Teardown instance (cuda-signed-classic-tests)` and its job id is `teardown-instance`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.setup-instance.result == 'success' }}) is met. This job will run on ubuntu-latest runner. The job `teardown-instance` has 2 steps. The 1st step is named `Stop remote instance` and its id is `stop-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 5 input parameters for the action: `mode` is set to `stop`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}` and `label` is set to `${{ needs.setup-instance.outputs.runner-name }}`. The 2nd step is named `Slack Notification`. This step will run only if the condition(${{ failure() }}) is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}` and `SLACK_MESSAGE` is set to `Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. When this step fails, the job will move on to the next step. /no-think","answer":"```yaml\n# Signed integer GPU tests on an RTXA6000 VM on hyperstack with classical PBS\nname: Cuda - Signed integer tests with classical PBS\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  # Secrets will be available only to zama-ai organization members\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\non:\n  # Allows you to run this workflow manually from the Actions tab as an alternative.\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\n\npermissions: {}\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v46.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled'\n      && needs.should-run.outputs.gpu_test == 'true') || (github.event.action ==\n      'labeled' && github.event.label.name == 'approved' && \n      needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n\n      # This instance will be spawned especially for pull-request from forked repository\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == \n      'pull_request' && needs.setup-instance.result != 'skipped')\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      # explicit include-based build matrix, of known valid options\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: 'Integer GPU signed integer tests with classical PBS finished\n          with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK\n          }}[action run](${{ env.ACTION_RUN_URL }}))'\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n\n    - name: Slack Notification\n      if: ${{ failure() }}\n      continue-on-error: true\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Instance teardown (cuda-signed-classic-tests) finished with\n          status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})'\n\n```","llm_response":"```yaml\nname: Cuda - Signed integer tests with classical PBS\n\non:\n  workflow_dispatch:\n  pull_request:\n    types:\n    - labeled\n\npermissions: {}\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: 8388608\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\njobs:\n  should-run:\n    permissions:\n      pull-requests: read\n    runs-on: ubuntu-latest\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs:\n    - should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs:\n    - should-run\n    - setup-instance\n    if: github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - {os: 'ubuntu-22.04', cuda: '12.2', gcc: 11}\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: true\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs:\n    - setup-instance\n    - cuda-tests-linux\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\n    runs-on: ubuntu-latest\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: |-\n          Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    needs:\n    - setup-instance\n    - cuda-tests-linux\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n    - name: Slack Notification\n      if: ${{ failure() }}\n      run: |\n        SLACK_COLOR=${{ job.status }}\n        SLACK_MESSAGE=\"Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})\"\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      continue-on-error: true\n\n```","repository_id":76862382,"lint_valid":false,"lint_output":"[{\"message\": \"this step is for running shell command since it contains at least one of \\\"run\\\", \\\"shell\\\" keys, but also contains \\\"uses\\\" key which is used for running action\", \"filepath\": \"../../tmp/74990b73-5f77-41b9-a2f6-36819590096a.yml\", \"line\": 171, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\\n      ^~~~~\", \"end_column\": 11}]","meteor_score":0.9661446506882085,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":2003,"stats":{"NumofTriggers":2,"Triggers":["pull_request","workflow_dispatch"],"NumofJobs":5,"NumofActions":9,"Actions":["./.github/actions/gpu_setup","actions/checkout","actions/checkout","dtolnay/rust-toolchain","rtCamp/action-slack-notify","rtCamp/action-slack-notify","tj-actions/changed-files","zama-ai/slab-github-runner","zama-ai/slab-github-runner"],"Actions_details":[{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"ed68ef82c095e0d48ec87eccea555d944a631a4c","name":"tj-actions/changed-files"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":null,"name":"./.github/actions/gpu_setup"},{"version":"888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1","name":"dtolnay/rust-toolchain"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":5}}
{"id":30644,"level":2,"name":"marqo-ai/marqo","file_name":"start_ec2_runner.yml","len":5,"prompt":"Generate a GitHub Workflow named `Start EC2 Runner` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 2 inputs: base-ami-id-this input represents base ami id for the ec2 runner, it must be supplied and the data type is string; ec2-instance-type-this input represents instance type for the ec2 runner, it must be supplied and the data type is string. This workflow has 2 outputs: label-it represents ec2 runner label and its value is ${{ jobs.Start-Runner.outputs.label }}; ec2-instance-id-it represents ec2 instance id and its value is ${{ jobs.Start-Runner.outputs.ec2-instance-id }}. It receives 3 secrets: GH_PERSONAL_ACCESS_TOKEN-it must be supplied; MARQO_WORKFLOW_TESTS_SUBNET_ID-it must be supplied; MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting applies to all jobs in the workflow. The workflow has one job. The 1st job is named `Start EC2 runner` and its job id is `Start-Runner`. The job `Start-Runner` has 2 steps. The 1st step is named `Configure AWS credentials`. The 2nd step is named `Start EC2 runner` and its id is `start-ec2-runner`. /no-think","answer":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 Runner Label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 Instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-region: us-east-1\n        role-to-assume: arn:aws:iam::424082663841:role/GhRunnerManagerRole-Marqo\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: machulav/ec2-github-runner@v2\n      with:\n        mode: start\n        github-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        ec2-image-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n        aws-resource-tags: >\n          [\n            {\"Key\": \"Name\", \"Value\": \"marqo-github-runner-${{ github.run_id }}\"},\n            {\"Key\": \"GitHubRepo\", \"Value\": \"${{ github.repository }}\"},\n            {\"Key\": \"WorkflowName\", \"Value\": \"${{ github.workflow }}\"},\n            {\"Key\": \"WorkflowRunId\", \"Value\": \"${{ github.run_id }}\"},\n            {\"Key\": \"WorkflowURL\", \"Value\": \"${{ github.event.repository.html_url\n          }}/actions/runs/${{ github.run_id }}\"},\n            {\"Key\": \"PoloRole\", \"Value\": \"testing\"}\n          ]\n\npermissions:\n  contents: read\n  id-token: write\n\n```","llm_response":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 Runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 Runner\n        required: true\n        type: string\n    outputs:\n      label:\n        description: EC2 Runner label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n\npermissions:\n  contents: read\n  id-token: write\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v1\n      with:\n        aws-access-key-id: ${{ github.actor }}\n        aws-secret-access-key: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        aws-region: us-east-1\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: ./.github/actions/start-ec2-runner@main\n      with:\n        base-ami-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n      env:\n        AWS_ROLE_TO_ASSUME: ${{ secrets.AWS_ROLE_TO_ASSUME }}\n\n```","repository_id":94530930,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"aws_role_to_assume\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gh_personal_access_token: string; github_token: string; marqo_workflow_tests_security_group_id: string; marqo_workflow_tests_subnet_id: string}\", \"filepath\": \"../../tmp/24e6eb57-4c1f-40d0-8fbc-01462e6e0302.yml\", \"line\": 56, \"column\": 33, \"kind\": \"expression\", \"snippet\": \"        AWS_ROLE_TO_ASSUME: ${{ secrets.AWS_ROLE_TO_ASSUME }}\\n                                ^~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 58}]","meteor_score":0.7011922265417331,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":575,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":2,"Actions":["aws-actions/configure-aws-credentials","machulav/ec2-github-runner"],"Actions_details":[{"version":"v4","name":"aws-actions/configure-aws-credentials"},{"version":"v2","name":"machulav/ec2-github-runner"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":2,"CyclomaticComplexity":1}}
{"id":6721,"level":3,"name":"microsoft/onnxruntime","file_name":"reusable_linux_build.yml","len":5,"prompt":"Generate a GitHub Workflow named `Reusable Linux CPU/GPU Build and Test` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 12 inputs: pool_name-this input represents the specific 1es pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu), it must be supplied and the data type is string; build_config-this input represents build configuration (debug or release), it must be supplied and the data type is string; architecture-this input represents target architecture (x64 or arm64), it must be supplied and the data type is string; dockerfile_path-this input represents path to the dockerfile relative to the workspace root, it must be supplied and the data type is string; docker_image_repo-this input represents name for the docker image repository, it must be supplied and the data type is string; docker_build_args-this input represents arguments to pass to the docker image build command, it is optional, the data type is string and its default value is ; execution_providers-this input represents space-separated list of execution providers to enable (passed to build.py), it is optional, the data type is string and its default value is ; extra_build_flags-this input represents additional flags for the build.py script (appended after ep flags), it is optional, the data type is string and its default value is ; python_path_prefix-this input represents optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path), it is optional, the data type is string and its default value is ; python_version-this input represents python version to set up on the runner host, it is optional, the data type is string and its default value is 3.x; run_tests-this input represents whether to execute the test suite after building, it is optional, the data type is boolean and its default value is True; upload_build_output-this input represents whether to upload the build output directory as an artifact (used when tests are skipped), it is optional, the data type is boolean and its default value is False. It receives a secret: GH_TOKEN-it represents github token for accessing actions/packages and it must be supplied. The workflow has one job. The job id of the 1st job is `build_test_pipeline`. This job will execute on any runner that has the labels self-hosted and 1ES.Pool=${{ inputs.pool_name }}. The job `build_test_pipeline` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope, write access is granted to the GITHUB_TOKEN in the `packages` scope, write access is granted to the GITHUB_TOKEN in the `attestations` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `build_test_pipeline`. The job `build_test_pipeline` has 10 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ inputs.python_version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ inputs.python_version }}`. The 3rd step is named `Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_docker_image_step`. The step sets an environment variable to use: `GITHUB_TOKEN` is set to `${{ secrets.GH_TOKEN }}`. This step runs action `microsoft/onnxruntime-github-actions/build-docker-image` tagged as v0.0.6. The step defines 5 input parameters for the action: `dockerfile` is set to `${{ github.workspace }}/${{ inputs.dockerfile_path }}`, `image-name` is set to `ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}`, `build-args` is set to `${{ inputs.docker_build_args }}`, `push` is set to `True` and `azure-container-registry-name` is set to `onnxruntimebuildcache`. The 4th step is named `Export GitHub Actions cache environment variables`. This step runs action `actions/github-script` tagged as v7. The step defines an input parameter for the action: `script` is set to `core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\ncore.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n`. The 5th step is named `Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `update_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `update`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 6th step is named `Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `build`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 7th step is named `Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `test_step`. This step will run only if the condition(inputs.run_tests == true) is met. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `test`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 8th step is named `Prepare Build Output for Upload`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step uses bash to run a script: `#!/bin/bash\nset -e -x\nBUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\nif [ ! -d \"${BUILD_DIR}\" ]; then\n  echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n  exit 1\nfi\necho \"--- Cleaning build directory: ${BUILD_DIR} ---\"\nrm -rf \"${BUILD_DIR}/onnxruntime\" || true\nrm -rf \"${BUILD_DIR}/pybind11\" || true\nrm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\nrm -f \"${BUILD_DIR}/models\" || true\nDEPS_DIR=\"${BUILD_DIR}/_deps\"\nif [ -d \"${DEPS_DIR}\" ]; then\n  echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n  find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\nelse\n  echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\nfi\necho \"--- Saving executable permissions ---\"\ncd \"${BUILD_DIR}\"\nfind . -executable -type f -printf '%p\\n' > perms.txt\necho \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n`. The 9th step is named `Upload Build Output Artifact`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `build-output-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}` and `if-no-files-found` is set to `error`. The 10th step is named `Upload VCPKG Manifest Install Log on Update or Build Failure`. This step will run only if the condition(steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log` and `if-no-files-found` is set to `ignore`. /no-think","answer":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-Ubuntu2204-AMD-CPU)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or arm64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after EP\n          flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the PATH for python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on:\n    - self-hosted\n    - 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      id: build_docker_image_step\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      # ------------- Update Step (CMake Generation) -------------\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Build Step (Compilation) -------------\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Test Step -------------\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Prepare Artifact Step -------------\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      # ------------- Upload Build Output Step -------------\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n\n      # ------------- Upload Log on Build Failure Step -------------\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","llm_response":" ```yaml\nname: Reusable Linux CPU/GPU Build and Test\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: 'Specific 1ES pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu)'\n        required: true\n        type: string\n      build_config:\n        description: 'Build configuration (debug or release)'\n        required: true\n        type: string\n      architecture:\n        description: 'Target architecture (x64 or arm64)'\n        required: true\n        type: string\n      dockerfile_path:\n        description: 'Path to the dockerfile relative to the workspace root'\n        required: true\n        type: string\n      docker_image_repo:\n        description: 'Name for the docker image repository'\n        required: true\n        type: string\n      docker_build_args:\n        description: 'Arguments to pass to the docker image build command'\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: 'Space-separated list of execution providers to enable (passed to build.py)'\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: 'Additional flags for the build.py script (appended after ep flags)'\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: 'Optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path)'\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: 'Python version to set up on the runner host'\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: 'Whether to execute the test suite after building'\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: 'Whether to upload the build output directory as an artifact (used when tests are skipped)'\n        required: false\n        type: boolean\n        default: false\nsecrets:\n  GH_TOKEN:\n    description: 'Github token for accessing actions/packages and it must be supplied'\njobs:\n  build_test_pipeline:\n    name: \"Build and Test on Linux (${{ matrix.config }})\"\n    runs-on: \"self-hosted-linux-${{ inputs.pool_name }}\"\n    permissions:\n      contents: read\n      packages: write\n      id-token: write\n    if: always()\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n          - pool_name: 'onnxruntime-github-ubuntu2204-amd-cpu'\n            config: 'Release'\n            architecture: 'x64'\n            build_type: 'Release'\n            docker_file_path: 'dockerfiles/ubuntu2204/Dockerfile.build.cpu'\n            docker_image_repo: 'ubuntu2204-build-cpu'\n            run_tests: false\n            upload_build_output: false\n          - pool_name: 'onnxruntime-github-ubuntu2204-amd-gpu'\n            config: 'Release'\n            architecture: 'x64'\n            build_type: 'Release'\n            docker_file_path: 'dockerfiles/ubuntu2204/Dockerfile.build.gpu'\n            docker_image_repo: 'ubuntu2204-build-gpu'\n            run_tests: false\n            upload_build_output: false\n    steps:\n      - name: 'Checkout repository'\n        uses: 'actions/checkout@v4'\n      - name: 'Set up Python ${{ inputs.python_version }}'\n        uses: 'actions/setup-python@v5'\n        with:\n          python-version: '${{ inputs.python_version }}'\n      - name: 'Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})'\n        id: build_docker_image_step\n        uses: 'microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6'\n        with:\n          dockerfile: '${{ github.workspace }}/${{ inputs.dockerfile_path }}'\n          image-name: 'ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}'\n          build-args: '${{ inputs.docker_build_args }}'\n          push: true\n          azure-container-registry-name: 'onnxruntimebuildcache'\n        env:\n          GITHUB_TOKEN: '${{ secrets.GH_TOKEN }}'\n      - name: 'Export GitHub Actions cache environment variables'\n        uses: 'actions/github-script@v7'\n        with:\n          script: |\n            core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n            core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      - name: 'Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})'\n        id: update_step\n        uses: 'microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6'\n        with:\n          docker_image: 'ghcr.io/microsoft/onnxruntime/${{ steps.build_docker_image_step.outputs.full-image-name }}'\n          build_config: '${{ inputs.build_config }}'\n          mode: 'update'\n          execution_providers: '${{ inputs.execution_providers }}'\n          extra_build_flags: '${{ inputs.extra_build_flags }}'\n          python_path_prefix: '${{ inputs.python_path_prefix }}'\n      - name: 'Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})'\n        id: build_step\n        uses: 'microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6'\n        with:\n          docker_image: 'ghcr.io/microsoft/onnxruntime/${{ steps.build_docker_image_step.outputs.full-image-name }}'\n          build_config: '${{ inputs.build_config }}'\n          mode: 'build'\n          execution_providers: '${{ inputs.execution_providers }}'\n          extra_build_flags: '${{ inputs.extra_build_flags }}'\n          python_path_prefix: '${{ inputs.python_path_prefix }}'\n      - name: 'Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})'\n        id: test_step\n        if: ${{ inputs.run_tests == true }}\n        uses: 'microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6'\n        with:\n          docker_image: 'ghcr.io/microsoft/onnxruntime/${{ steps.build_docker_image_step.outputs.full-image-name }}'\n          build_config: '${{ inputs.build_config }}'\n          mode: 'test'\n          execution_providers: '${{ inputs.execution_providers }}'\n          extra_build_flags: '${{ inputs.extra_build_flags }}'\n          python_path_prefix: '${{ inputs.python_path_prefix }}'\n      - name: 'Prepare Build Output for Upload'\n        if: ${{ inputs.upload_build_output == true && (steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') }}\n        uses: 'actions/upload-artifact@v4'\n        with:\n          name: 'build-output-${{ inputs.architecture }}-${{ inputs.build_config }}'\n          path: ${{ runner.temp }}/${{ inputs.build_config }}\n          if-no-files-found: 'error'\n      - name: 'Upload VCPKG Manifest Install Log on Update or Build Failure'\n        if: ${{ inputs.upload_build_output == true && (steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') }}\n        uses: 'actions/upload-artifact@v4'\n        with:\n          name: 'vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}'\n          path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log\n          if-no-files-found: 'ignore'\n``` ","repository_id":3980037,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"secrets\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/49b361b6-66c7-4b1d-bce5-f66cff3e60c6.yml\", \"line\": 60, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"secrets:\\n^~~~~~~~\", \"end_column\": 8}]","meteor_score":0.7633818911454102,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1727,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":9,"Actions":["actions/checkout","actions/github-script","actions/setup-python","actions/upload-artifact","actions/upload-artifact","microsoft/onnxruntime-github-actions/build-docker-image","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/build-docker-image"},{"version":"v7","name":"actions/github-script"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":1}}
{"id":64177,"level":3,"name":"bitwarden/server","file_name":"repository-management.yml","len":5,"prompt":"Generate a GitHub Workflow named `Repository management` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives 3 inputs: task-its default value is Version Bump, this input represents task to execute, it has options including Version Bump, Version Bump and Cut rc and Version Bump and Cut hotfix-rc, it must be supplied and the data type is choice; target_ref-its default value is main, this input represents branch/tag to target for cut, it must be supplied and the data type is string; version_number_override-this input represents new version override (leave blank for automatic calculation, example: '2024.1.0'), it is optional and the data type is string. The workflow has 5 jobs. The 1st job is named `Setup` and its job id is `setup`. This job will run on ubuntu-24.04 runner. The job `setup` has one step. The 1st step is named `Set branch` and its id is `set-branch`. The step sets an environment variable to use: `TASK` is set to `${{ inputs.task }}`. This step runs a script: `if [[ \"$TASK\" == \"Version Bump\" ]]; then\n  BRANCH=\"none\"\nelif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n  BRANCH=\"rc\"\nelif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n  BRANCH=\"hotfix-rc\"\nfi\n\necho \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n`. This job has an output: `branch` is defined as ${{ steps.set-branch.outputs.branch }}. The 2nd job is named `Cut branch` and its job id is `cut_branch`. Before this job runs, `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cut_branch` has 4 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `${{ inputs.target_ref }}` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Check if ${{ needs.setup.outputs.branch }} branch exists`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n  echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 4th step is named `Cut branch`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `git switch --quiet --create $BRANCH_NAME\ngit push --quiet --set-upstream origin $BRANCH_NAME\n`. The 3rd job is named `Bump Version` and its job id is `bump_version`. Before this job runs, `cut_branch` and `setup` must complete successfully. This job will run only if the condition(${{ always() }}) is met. This job will run on ubuntu-24.04 runner. The job `bump_version` has 13 steps. The 1st step is named `Validate version input format`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-check` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ inputs.version_number_override }}`. The 2nd step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 3rd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 4th step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 5th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 6th step is named `Get current version` and its id is `current-version`. This step runs a script: `CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\necho \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n`. The 7th step is named `Verify input version`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. The step sets 2 environment variables to use: `CURRENT_VERSION` is set to `${{ steps.current-version.outputs.version }}` and `NEW_VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `# Error if version has not changed.\nif [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n  echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n\n# Check if version is newer.\nprintf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\nif [ $? -eq 0 ]; then\n  echo \"Version is newer than the current version.\"\nelse\n  echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 8th step is named `Calculate next release version` and its id is `calculate-next-version`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-next` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ steps.current-version.outputs.version }}`. The 9th step is named `Bump version props - Version Override` and its id is `bump-version-override`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ inputs.version_number_override }}`. The 10th step is named `Bump version props - Automatic Calculation` and its id is `bump-version-automatic`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ steps.calculate-next-version.outputs.version }}`. The 11th step is named `Set final version output` and its id is `set-final-version-output`. The step sets an environment variable to use: `VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n  echo \"version=$VERSION\" >> $GITHUB_OUTPUT\nelif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n  echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\nfi\n`. The 12th step is named `Commit files`. This step runs a script: `git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a`. The 13th step is named `Push changes`. This step runs a script: `git push`. This job has an output: `version` is defined as ${{ steps.set-final-version-output.outputs.version }}. The 4th job is named `Cherry-Pick Commit(s)` and its job id is `cherry_pick`. Before this job runs, `bump_version` and `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cherry_pick` has 5 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 4th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 5th step is named `Perform cherry-pick(s)`. The step sets an environment variable to use: `CUT_BRANCH` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `# Function for cherry-picking\ncherry_pick () {\n  local source_branch=$1\n  local destination_branch=$2\n\n  # Get project commit/version from source branch\n  git switch $source_branch\n  SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n  SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  # Get project commit/version from destination branch\n  git switch $destination_branch\n  DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n    git push -u origin $destination_branch\n  fi\n}\n\n# If we are cutting 'hotfix-rc':\nif [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n  # If the 'rc' branch exists:\n  if [[ $(git ls-remote --heads origin rc) ]]; then\n\n    # Chery-pick from 'rc' into 'hotfix-rc'\n    cherry_pick rc hotfix-rc\n\n    # Cherry-pick from 'main' into 'rc'\n    cherry_pick main rc\n\n  # If the 'rc' branch does not exist:\n  else\n\n    # Cherry-pick from 'main' into 'hotfix-rc'\n    cherry_pick main hotfix-rc\n\n  fi\n\n# If we are cutting 'rc':\nelif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n  # Cherry-pick from 'main' into 'rc'\n  cherry_pick main rc\n\nfi\n`. The 5th job is named `Move finalization database scripts` and its job id is `move_future_db_scripts`. Before this job runs, `cherry_pick` must complete successfully. This job will call a reusable workflow located at `./.github/workflows/_move_finalization_db_scripts.yml`. The job will pass a secret to the called workflow: the secret `special_case_secrets` is `inherit`. /no-think","answer":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: \"New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\"\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n\n  cut_branch:\n    name: Cut branch\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    needs: setup\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out target ref\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n\n  bump_version:\n    name: Bump Version\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    needs:\n    - cut_branch\n    - setup\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      id: calculate-next-version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      id: bump-version-override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      id: bump-version-automatic\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ \n        steps.set-final-version-output.outputs.version }}\" -a\n\n    - name: Push changes\n      run: git push\n\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    needs:\n    - bump_version\n    - setup\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out main branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets: inherit\n\n```","llm_response":" ```yaml\nname: Repository management\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        type: choice\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: New version override (leave blank for automatic calculation, example: '2024.1.0')\n        required: false\n        type: string\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n      - name: Set branch\n        id: set-branch\n        run: |\n          if [[ \"$TASK\" == \"Version Bump\" ]]; then\n            BRANCH=\"none\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n            BRANCH=\"rc\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n            BRANCH=\"hotfix-rc\"\n          fi\n\n          echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n  cut_branch:\n    name: Cut branch\n    runs-on: ubuntu-24.04\n    needs: setup\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    outputs:\n      branch: ${{ needs.setup.outputs.branch }}\n    steps:\n      - name: Generate GH App token\n        id: app-token\n        uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          ref: ${{ inputs.target_ref }}\n          token: ${{ steps.app-token.outputs.token }}\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n      - name: Cut branch\n        run: |\n          git switch --quiet --create ${{ needs.setup.outputs.branch }}\n          git push --quiet --set-upstream origin ${{ needs.setup.outputs.branch }}\n  bump_version:\n    name: Bump Version\n    needs: setup\n    runs-on: ubuntu-24.04\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    if: always()\n    steps:\n      - name: Validate version input format\n        if: ${{ inputs.version_number_override != '' }}\n        uses: bitwarden/gh-actions/version-check@main\n        with:\n          version: ${{ inputs.version_number_override }}\n      - name: Generate GH App token\n        id: app-token\n        uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          ref: ${{ inputs.target_ref }}\n          token: ${{ steps.app-token.outputs.token }}\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n      - name: Install xmllint\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libxml2-utils\n      - name: Get current version\n        id: current-version\n        run: |\n          CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n          echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n      - name: Verify input version\n        if: ${{ inputs.version_number_override != '' }}\n        run: |\n          # Error if version has not changed.\n          if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n            echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n\n          # Check if version is newer.\n          printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n          if [ $? -eq 0 ]; then\n            echo \"Version is newer than the current version.\"\n          else\n            echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n        env:\n          CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n          NEW_VERSION: ${{ inputs.version_number_override }}\n      - name: Bump version props - Version Override\n        if: ${{ inputs.version_number_override != '' }}\n        id: bump-version-override\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ inputs.version_number_override }}\n      - name: Bump version props - Automatic Calculation\n        if: ${{ inputs.version_number_override == '' }}\n        id: bump-version-automatic\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ steps.current-version.outputs.version }}\n      - name: Set final version output\n        id: set-final-version-output\n        run: |\n          if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n            echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n          elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n            echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n          fi\n        env:\n          VERSION: ${{ steps.bump-version-override.outputs.version }}\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets:\n      special_case_secrets: inherit\n``` ","repository_id":3499830,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 19: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/74bd3021-8530-4a14-91d5-40ec23fad8f1.yml\", \"line\": 19, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        description: New version override (leave blank for automatic calculation, example: '2024.1.0')\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":2364,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":5,"NumofActions":10,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/create-github-app-token","actions/create-github-app-token","actions/create-github-app-token","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-check","bitwarden/gh-actions/version-next"],"Actions_details":[{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-check"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-next"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_move_finalization_db_scripts.yml"],"NumofSteps":23,"CyclomaticComplexity":3}}
{"id":54036,"level":3,"name":"fusion-php/fusion","file_name":"tests-vue.yml","len":5,"prompt":"Generate a GitHub Workflow named `Vue App Tests` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has one value: prefer-stable. The job sets an environment variable to use: `APP_URL` is set to `http://127.0.0.1:8000`. The job `test` has 14 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.cache/composer` and `key` is set to `composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 2 input parameters for the action: `php-version` is set to `${{ matrix.php }}` and `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick`. The 4th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v4. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `apps/vue/package-lock.json`. The 5th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n`. The 6th step is named `Copy Environment File`. This step runs a script: `cp .env.example .env\nphp artisan key:generate\n`. The 7th step is named `Install Node Dependencies`. This step runs a script: `npm ci`. The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 10th step is named `Build Assets`. This step runs a script: `npm run build`. The 11th step is named `Install Playwright Browsers`. This step runs a script: `npx playwright install --with-deps`. The 12th step is named `Run Laravel Server`. This step runs a script: `php artisan serve --no-reload &`. The 13th step is named `Run Playwright tests`. This step runs a script: `npx playwright test`. The 14th step is named `Upload artifact playwright-report to apps/vue/playwright/reports/`. This step will run only if the condition(${{ !cancelled() }}) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `playwright-report`, `path` is set to `apps/vue/playwright/reports/` and `retention-days` is set to `30`. /no-think","answer":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: http://127.0.0.1:8000\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      working-directory: apps/vue\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      working-directory: apps/vue\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      working-directory: apps/vue\n      run: npm ci\n\n      # Install Rollup's Linux-specific optional dependency explicitly\n      # This is needed due to an npm bug with optional dependencies:\n      # https://github.com/npm/cli/issues/4828\n    - name: Install Rollup Linux Dependencies\n      working-directory: packages/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Install Rollup Linux Dependencies\n      working-directory: apps/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Build Assets\n      working-directory: apps/vue\n      run: npm run build\n\n    - name: Install Playwright Browsers\n      working-directory: apps/vue\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      working-directory: apps/vue\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      working-directory: apps/vue\n      run: npx playwright test\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","llm_response":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types:\n    - opened\n    - synchronize\n    - reopened\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php:\n        - 8.3\n        laravel:\n        - 11.*\n        dependency-version:\n        - prefer-stable\n    env:\n      APP_URL: http://127.0.0.1:8000\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: '~/.cache/composer'\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: 'apps/vue/package-lock.json'\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n    - name: Copy Environment File\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n    - name: Install Node Dependencies\n      run: npm ci\n    - name: Install Rollup Linux Dependencies\n      run: npm install @rollup/rollup-linux-x64-gnu\n    - name: Install Rollup Linux Dependencies\n      run: npm install @rollup/rollup-linux-x64-gnu\n    - name: Build Assets\n      run: npm run build\n    - name: Install Playwright Browsers\n      run: npx playwright install --with-deps\n    - name: Run Laravel Server\n      run: php artisan serve --no-reload &\n    - name: Run Playwright tests\n      run: npx playwright test\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      if: ${{ !cancelled() }}\n      uses: actions/upload-artifact@v4\n      with:\n        name: playwright-report\n        path: 'apps/vue/playwright/reports/'\n        retention-days: 30\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 15: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/685189b7-3fc5-4c29-9817-437f2a092227.yml\", \"line\": 15, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":704,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/cache","actions/checkout","actions/setup-node","actions/upload-artifact","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v4","name":"actions/setup-node"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":14,"CyclomaticComplexity":1}}
{"id":64153,"level":2,"name":"oracle/graal","file_name":"ni-layers.yml","len":5,"prompt":"Generate a GitHub Workflow named `Weekly Native Image Layer Building Tests` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by multiple events: 1) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 2) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 3) the scheduled time has come: at 12:00 am, only on monday. 4) someone manually triggers the workflow. The workflow sets 3 environment variables to use: `LIBRARY_METADATA_PATH` is set to `${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests`, `JAVA_VERSION` is set to `21` and `PYTHON_VERSION` is set to `3.12.3`. The workflow has 2 jobs. The 1st job is named `Build GraalVM and populate matrix` and its job id is `build-graalvm-and-populate-matrix`. The job `build-graalvm-and-populate-matrix` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Build GraalVM JDK`. The 3rd step is named `Tar GraalVM JDK`. The 4th step is named `Persist GraalVM JDK build`. The 5th step is named `Setup python`. The 6th step is named `Populate matrix` and its id is `set-matrix`. The 2nd job is named `${{ matrix.coordinates }}` and its job id is `test-native-image-layer-build`. The job `test-native-image-layer-build` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download GraalVM JDK build`. The 3rd step is named `Extract GraalVM JDK build`. The 4th step is named `Setup JAVA_HOME`. The 5th step is named `Setup python`. The 6th step is named `Build layer`. /no-think","answer":"```yaml\n#\n# Copyright (c) 2024, 2024, Oracle and/or its affiliates. All rights reserved.\n# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n#\n# The Universal Permissive License (UPL), Version 1.0\n#\n# Subject to the condition set forth below, permission is hereby granted to any\n# person obtaining a copy of this software, associated documentation and/or\n# data (collectively the \"Software\"), free of charge and under any and all\n# copyright rights in the Software, and any and all patent rights owned or\n# freely licensable by each licensor hereunder covering either (i) the\n# unmodified Software as contributed to or provided by such licensor, or (ii)\n# the Larger Works (as defined below), to deal in both\n#\n# (a) the Software, and\n#\n# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if\n# one is included with the Software each a \"Larger Work\" to which the Software\n# is contributed by such licensors),\n#\n# without restriction, including without limitation the rights to copy, create\n# derivative works of, display, perform, and distribute the Software and make,\n# use, sell, offer for sale, import, export, have made, and have sold the\n# Software and the Larger Work(s), and to sublicense the foregoing rights on\n# either these or other terms.\n#\n# This license is subject to the following condition:\n#\n# The above copyright notice and either this complete permission notice or at a\n# minimum a reference to the UPL must be included in all copies or substantial\n# portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n#\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1   # Once a week, at midnight on Monday (00:00 UTC)\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    if: (github.repository=='oracle/graal')\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        native-images: \n          native-image,native-image-configure,lib:native-image-agent\n        components: Native Image,Native Image Configure Tool\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      shell: bash\n      run: tar -czvhf graalvm.tgz -C $(dirname ${GRAALVM_HOME}) $(basename \n        ${GRAALVM_HOME})\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tgz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py \n        ${{ env.LIBRARY_METADATA_PATH }}/\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    env:\n      GRAALVM_HOME: ${{ github.workspace }}/graalvm\n    timeout-minutes: 30\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs. \n          build-graalvm-and-populate-matrix.outputs.matrix).coordinates }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@95815c38cf2ff2164869cbab79da8d1f422bc89e   # v4.2.1\n      with:\n        name: graalvm\n        path: .\n    - name: Extract GraalVM JDK build\n      run: tar -xzvf graalvm.tgz -C $(dirname ${GRAALVM_HOME})\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: oracle\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py ${{ env.GRAALVM_HOME }}/bin/native-image \"${{ matrix.coordinates }}\"\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation request. The user wants a workflow named \"Weekly Native Image Layer Building Tests\" for a Java repo. Let me parse the requirements step by step.\n\nFirst, the triggers. It needs to run on push and pull_request events but only if specific paths are changed: .github/workflows/ni-layers.yml or anything under vm/tests/gh_workflows/NILayerTests/**. Also, a scheduled cron at 0 0 * * 1 (Monday midnight), and manual trigger via workflow_dispatch.\n\nSo for the on: section, I'll have push and pull_request with paths filters. The paths should be listed under each event. Then schedule with cron '0 0 * * 1' and workflow_dispatch.\n\nNext, environment variables. LIBRARY_METADATA_PATH is set to ${github.workspace}/vm/tests/gh_workflows/NILayerTests, JAVA_VERSION=21, PYTHON_VERSION=3.12.3. These should be under env at the workflow level.\n\nNow the jobs. First job: build-graalvm-and-populate-matrix. It has six steps. Steps 1-4 are Checkout, Build GraalVM JDK, Tar, Persist. Then Setup Python, and Populate matrix with id set-matrix.\n\nWait, the first step is Checkout repository, which usually uses actions/checkout. Then step 2 is Build GraalVM JDKâ€”probably a run command. Step 3 is Tar the build, step 4 persist via upload-artifact. Step 5 setup-python, step 6 a script to set the matrix.\n\nThe second job is test-native-image-layer-build, which uses a matrix from the first job. The job name is ${{ matrix.coordinates }}, so the matrix must be generated by the first job's set-matrix step. This job has steps to checkout, download the artifact, extract, set JAVA_HOME, setup python again, and build layer.\n\nFor the first job, after building and tarring GraalVM, it needs to upload the artifact. Then the setup-python step (using actions/setup-python@v4 with the specified version), then the set-matrix step which probably runs a script to output a matrix. The outputs from set-matrix would be used in the second job's strategy.\n\nWait, the second job depends on the first job's matrix. So the first job's set-matrix step should create an output that's a JSON string for the matrix. Then the second job uses needs: build-graalvm-and-populate-matrix to get that matrix.\n\nIn the second job, the steps include downloading the artifact (the tarred GraalVM), extracting it, setting JAVA_HOME to the extracted path, then setup-python again, and the build layer step.\n\nLet me structure the YAML.\n\nFirst, name and on triggers:\n\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n    - cron: '0 0 * * 1'\n  workflow_dispatch:\n\nThen env variables:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: '21'\n  PYTHON_VERSION: '3.12.3'\n\nNow jobs.\n\nFirst job: build-graalvm-and-populate-matrix\n\nSteps:\n1. Checkout\n2. Build GraalVM JDK (run command, maybe using some script)\n3. Tar GraalVM JDK (tar command)\n4. Upload artifact (persist)\n5. Setup Python\n6. Populate matrix (id: set-matrix)\n\nFor step 6, it needs to output a matrix. Maybe a script that generates a JSON array for the matrix. The output would be captured as a job output.\n\nSo in step 6:\n\n- name: Populate matrix\n  id: set-matrix\n  run: |\n    echo \"matrix={\\\"coordinates\\\":[\\\"layer1\\\",\\\"layer2\\\"]}\" >> $GITHUB_OUTPUT\n\nBut the actual coordinates might come from some logic. Since the user didn't specify, I'll assume a placeholder.\n\nThen the second job:\n\nneeds: build-graalvm-and-populate-matrix\nstrategy:\n  matrix: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n\nWait, but the first job's set-matrix step should output the matrix. So in the first job, after the set-matrix step, the job should have an output.\n\nWait, the job output would be defined as:\n\njobs:\n  build-graalvm-and-populate-matrix:\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n\nBut the step set-matrix would set an output. So in step set-matrix:\n\nrun: |\n  matrix_json='{\"coordinates\": [\"coord1\", \"coord2\"]}'\n  echo \"matrix=$matrix_json\" >> $GITHUB_OUTPUT\n\nThen in the job output:\n\noutputs:\n  matrix: ${{ steps.set-matrix.outputs.matrix }}\n\nBut the user says the second job's name is ${{ matrix.coordinates }}, so the matrix should have a key 'coordinates'.\n\nWait, the matrix in the second job's strategy would be something like:\n\nstrategy:\n  matrix:\n    include: ${{fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix)}}\n\nWait, maybe the set-matrix step outputs a JSON string that's the matrix configuration.\n\nAlternatively, the step set-matrix writes to job outputs the matrix as a string, which is then parsed.\n\nIn the second job:\n\njobs:\n  test-native-image-layer-build:\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      matrix: ${{fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix)}}\n    name: ${{ matrix.coordinates }}\n\nSo in the first job, the set-matrix step must output a matrix JSON. Let's say the step runs a script that generates the matrix.\n\nFor example:\n\n- name: Populate matrix\n  id: set-matrix\n  run: |\n    echo \"matrix={\\\"include\\\":[{\\\"coordinates\\\":\\\"layer1\\\"},{\\\"coordinates\\\":\\\"layer2\\\"}]}\" >> $GITHUB_OUTPUT\n\nBut the user says the job name is ${{ matrix.coordinates }}, so the matrix should have a 'coordinates' key.\n\nWait, perhaps the matrix is a list of objects with a 'coordinates' property.\n\nSo the set-matrix step would output a JSON string like:\n\n{\"coordinates\": [\"layer1\", \"layer2\"]}\n\nBut actually, the matrix in GitHub Actions is an object with keys mapping to arrays. Wait, no. The matrix strategy uses a JSON object where each key is a variable, and the values are arrays. But if using include, it's an array of objects.\n\nWait, the correct way is that the matrix output should be a JSON string that represents the matrix configuration.\n\nFor example:\n\nmatrix: |\n  {\n    \"coordinates\": [\"layer1\", \"layer2\"]\n  }\n\nBut when using fromJson, it's expecting the structure that GitHub Actions uses for matrix.\n\nAlternatively, the set-matrix step could output a JSON array for the include.\n\nBut perhaps the user expects that the set-matrix step generates a list of coordinates, and the matrix in the second job uses that as the values for the 'coordinates' key.\n\nSo in the first job's set-matrix step:\n\nrun: |\n  echo \"matrix={\\\"coordinates\\\":[\\\"layer1\\\",\\\"layer2\\\"]}\" >> $GITHUB_OUTPUT\n\nThen in the second job:\n\nstrategy:\n  matrix: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n\nBut the outputs from the job would need to capture that.\n\nWait, the job output for the first job should reference the step's output.\n\nSo in the first job:\n\njobs:\n  build-graalvm-and-populate-matrix:\n    steps:\n      - id: set-matrix\n        run: ...\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n\nThen in the second job:\n\nneeds: build-graalvm-and-populate-matrix\nstrategy:\n  matrix: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n\nYes.\n\nSo the set-matrix step must set an output called matrix.\n\nIn the run command for set-matrix:\n\necho \"matrix={\\\"coordinates\\\": [\\\"value1\\\", \\\"value2\\\"]}\" >> $GITHUB_OUTPUT\n\nBut the actual values would depend on the test setup. Since the user didn't specify, I'll use a placeholder.\n\nNow, for the steps in the first job:\n\nStep 1: Checkout repository. Uses actions/checkout@v4.\n\nStep 2: Build GraalVM JDK. Probably a run command, maybe using some script in the repository. Since it's Java, maybe building from source? The user says \"Build GraalVM JDK\", so perhaps a specific command. But since it's not specified, I'll write a placeholder run command.\n\nStep 3: Tar GraalVM JDK. Uses tar command to create an archive.\n\nStep 4: Persist via upload-artifact action.\n\nStep 5: Setup python with the specified version.\n\nStep 6: Populate matrix.\n\nFor the second job:\n\nSteps:\n\n1. Checkout (but maybe not needed if the artifact contains everything? But the user says to include it, so include actions/checkout.\n\n2. Download the artifact (the tarred GraalVM).\n\n3. Extract it (using tar).\n\n4. Set JAVA_HOME to the extracted directory.\n\n5. Setup python again.\n\n6. Build layer (run command).\n\nNow, putting it all together.\n\nCheck for correct YAML structure.\n\nMake sure the paths in on.push and on.pull_request are correctly listed.\n\nAlso, the env variables are set at the workflow level.\n\nWait, the user says \"sets 3 environment variables to use\", so they should be in the env section.\n\nYes.\n\nNow, writing the YAML.\n\nNeed to be careful with indentation.\n\nLet me draft the YAML.\n</think>\n\n```yaml\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n    - cron: '0 0 * * 1'\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: '21'\n  PYTHON_VERSION: '3.12.3'\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Build GraalVM JDK\n        run: |\n          # Placeholder for actual GraalVM build commands\n          echo \"Building GraalVM JDK...\"\n\n      - name: Tar GraalVM JDK\n        run: |\n          tar -czf graalvm-jdk.tar.gz /path/to/graalvm-build\n\n      - name: Persist GraalVM JDK build\n        uses: actions/upload-artifact@v3\n        with:\n          name: graalvm-jdk-build\n          path: graalvm-jdk.tar.gz\n\n      - name: Setup python\n        uses: actions/setup-python@v4\n        with:\n          python-version: ${{ env.PYTHON_VERSION }}\n\n      - name: Populate matrix\n        id: set-matrix\n        run: |\n          echo \"matrix={\\\"coordinates\\\":[\\\"layer1\\\", \\\"layer2\\\"]}\" >> $GITHUB_OUTPUT\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    needs: build-graalvm-and-populate-matrix\n    runs-on: ubuntu-latest\n    strategy:\n      matrix: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Download GraalVM JDK build\n        uses: actions/download-artifact@v3\n        with:\n          name: graalvm-jdk-build\n          path: .\n\n      - name: Extract GraalVM JDK build\n        run: |\n          tar -xzf graalvm-jdk.tar.gz -C ${{ github.workspace }}\n\n      - name: Setup JAVA_HOME\n        run: |\n          echo \"JAVA_HOME=${{ github.workspace }}/graalvm-jdk\" >> $GITHUB_ENV\n\n      - name: Setup python\n        uses: actions/setup-python@v4\n        with:\n          python-version: ${{ env.PYTHON_VERSION }}\n\n      - name: Build layer\n        run: |\n          # Placeholder for actual layer build commands\n          echo \"Building native image layer for ${{ matrix.coordinates }}\"\n```","repository_id":3313009,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"matrix\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/bf88dbe3-0505-44db-a068-837f9ff7348b.yml\", \"line\": 59, \"column\": 28, \"kind\": \"expression\", \"snippet\": \"      matrix: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\\n                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 82}]","meteor_score":0.6465934908792553,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1278,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","schedule","workflow_dispatch"],"NumofJobs":2,"NumofActions":8,"Actions":["./.github/actions/build-graalvm","actions/checkout","actions/checkout","actions/download-artifact","actions/setup-java","actions/setup-python","actions/setup-python","actions/upload-artifact"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/build-graalvm"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/checkout"},{"version":"95815c38cf2ff2164869cbab79da8d1f422bc89e","name":"actions/download-artifact"},{"version":"v4","name":"actions/setup-java"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":1}}
{"id":6721,"level":3,"name":"microsoft/onnxruntime","file_name":"reusable_linux_build.yml","len":5,"prompt":"Generate a GitHub Workflow named `Reusable Linux CPU/GPU Build and Test` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 12 inputs: pool_name-this input represents the specific 1es pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu), it must be supplied and the data type is string; build_config-this input represents build configuration (debug or release), it must be supplied and the data type is string; architecture-this input represents target architecture (x64 or arm64), it must be supplied and the data type is string; dockerfile_path-this input represents path to the dockerfile relative to the workspace root, it must be supplied and the data type is string; docker_image_repo-this input represents name for the docker image repository, it must be supplied and the data type is string; docker_build_args-this input represents arguments to pass to the docker image build command, it is optional, the data type is string and its default value is ; execution_providers-this input represents space-separated list of execution providers to enable (passed to build.py), it is optional, the data type is string and its default value is ; extra_build_flags-this input represents additional flags for the build.py script (appended after ep flags), it is optional, the data type is string and its default value is ; python_path_prefix-this input represents optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path), it is optional, the data type is string and its default value is ; python_version-this input represents python version to set up on the runner host, it is optional, the data type is string and its default value is 3.x; run_tests-this input represents whether to execute the test suite after building, it is optional, the data type is boolean and its default value is True; upload_build_output-this input represents whether to upload the build output directory as an artifact (used when tests are skipped), it is optional, the data type is boolean and its default value is False. It receives a secret: GH_TOKEN-it represents github token for accessing actions/packages and it must be supplied. The workflow has one job. The job id of the 1st job is `build_test_pipeline`. This job will execute on any runner that has the labels self-hosted and 1ES.Pool=${{ inputs.pool_name }}. The job `build_test_pipeline` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope, write access is granted to the GITHUB_TOKEN in the `packages` scope, write access is granted to the GITHUB_TOKEN in the `attestations` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `build_test_pipeline`. The job `build_test_pipeline` has 10 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ inputs.python_version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ inputs.python_version }}`. The 3rd step is named `Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_docker_image_step`. The step sets an environment variable to use: `GITHUB_TOKEN` is set to `${{ secrets.GH_TOKEN }}`. This step runs action `microsoft/onnxruntime-github-actions/build-docker-image` tagged as v0.0.6. The step defines 5 input parameters for the action: `dockerfile` is set to `${{ github.workspace }}/${{ inputs.dockerfile_path }}`, `image-name` is set to `ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}`, `build-args` is set to `${{ inputs.docker_build_args }}`, `push` is set to `True` and `azure-container-registry-name` is set to `onnxruntimebuildcache`. The 4th step is named `Export GitHub Actions cache environment variables`. This step runs action `actions/github-script` tagged as v7. The step defines an input parameter for the action: `script` is set to `core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\ncore.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n`. The 5th step is named `Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `update_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `update`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 6th step is named `Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `build`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 7th step is named `Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `test_step`. This step will run only if the condition(inputs.run_tests == true) is met. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `test`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 8th step is named `Prepare Build Output for Upload`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step uses bash to run a script: `#!/bin/bash\nset -e -x\nBUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\nif [ ! -d \"${BUILD_DIR}\" ]; then\n  echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n  exit 1\nfi\necho \"--- Cleaning build directory: ${BUILD_DIR} ---\"\nrm -rf \"${BUILD_DIR}/onnxruntime\" || true\nrm -rf \"${BUILD_DIR}/pybind11\" || true\nrm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\nrm -f \"${BUILD_DIR}/models\" || true\nDEPS_DIR=\"${BUILD_DIR}/_deps\"\nif [ -d \"${DEPS_DIR}\" ]; then\n  echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n  find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\nelse\n  echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\nfi\necho \"--- Saving executable permissions ---\"\ncd \"${BUILD_DIR}\"\nfind . -executable -type f -printf '%p\\n' > perms.txt\necho \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n`. The 9th step is named `Upload Build Output Artifact`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `build-output-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}` and `if-no-files-found` is set to `error`. The 10th step is named `Upload VCPKG Manifest Install Log on Update or Build Failure`. This step will run only if the condition(steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log` and `if-no-files-found` is set to `ignore`. /no-think","answer":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-Ubuntu2204-AMD-CPU)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or arm64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after EP\n          flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the PATH for python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on:\n    - self-hosted\n    - 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      id: build_docker_image_step\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      # ------------- Update Step (CMake Generation) -------------\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Build Step (Compilation) -------------\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Test Step -------------\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Prepare Artifact Step -------------\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      # ------------- Upload Build Output Step -------------\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n\n      # ------------- Upload Log on Build Failure Step -------------\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","llm_response":"<think>We are generating a GitHub Actions workflow YAML file.\n The workflow is named \"Reusable Linux CPU/GPU Build and Test\"\n It is triggered by being called by another workflow (so we use workflow_call)\n It has 12 inputs as described, with some being required and having defaults for optional ones.\n It requires one secret: GH_TOKEN (which must be supplied by the caller)\n\n The workflow has one job: build_test_pipeline\n\n Steps:\n  1. Checkout repository (actions/checkout@v4)\n  2. Set up Python (actions/setup-python@v5) with version from input\n  3. Build Docker Image (using a custom action) - id: build_docker_image_step\n  4. Export GitHub Actions cache environment variables (actions/github-script@v7)\n  5. Generate Build Files (CMake) - id: update_step\n  6. Build ONNX Runtime - id: build_step\n  7. Test ONNX Runtime (only if inputs.run_tests is true) - id: test_step\n  8. Prepare Build Output for Upload (only if inputs.upload_build_output is true)\n  9. Upload Build Output Artifact (only if inputs.upload_build_output is true)\n  10. Upload VCPKG Manifest Install Log on Update or Build Failure\n\n We also set specific permissions for the job.\n\n Note: The job runs on a self-hosted runner with label 1ES.Pool=${{ inputs.pool_name }}\n\n Important: The workflow_call event does not support secrets being passed as inputs, so the secret must be provided by the caller and then passed to the reusable workflow as a secret.\n\n Let's structure the YAML accordingly.\n\n Steps to follow:\n  - The workflow uses `on: workflow_call`\n  - Define the inputs with their types, defaults, and required status.\n  - Define the secrets (only GH_TOKEN, which is required).\n  - In the job, set the runs-on to a dynamic label: `self-hosted, 1ES.Pool=${{ inputs.pool_name }}`\n  - Set the permissions for the job as specified.\n\n We note that the step 3 (Build Docker Image) uses an action that outputs `full-image-name`, which is then used in subsequent steps.\n\n Also note: The step 4 (Export GitHub Actions cache environment variables) is a github-script step that exports two environment variables.\n\n Step 8 is a run step (bash script) and step 9 is an upload-artifact step.\n\n Step 10 runs only if either update_step or build_step failed.\n\n Let's write the YAML accordingly.\n</think>\n\n```yaml\nname: Reusable Linux CPU/GPU Build and Test\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        required: true\n        type: string\n      build_config:\n        required: true\n        type: string\n      architecture:\n        required: true\n        type: string\n      dockerfile_path:\n        required: true\n        type: string\n      docker_image_repo:\n        required: true\n        type: string\n      docker_build_args:\n        required: false\n        type: string\n        default: \"\"\n      execution_providers:\n        required: false\n        type: string\n        default: \"\"\n      extra_build_flags:\n        required: false\n        type: string\n        default: \"\"\n      python_path_prefix:\n        required: false\n        type: string\n        default: \"\"\n      python_version:\n        required: false\n        type: string\n        default: \"3.x\"\n      run_tests:\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        required: true\njobs:\n  build_test_pipeline:\n    runs-on: [self-hosted, 1ES.Pool=${{ inputs.pool_name }}]\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up Python ${{ inputs.python_version }}\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ inputs.python_version }}\n\n      - id: build_docker_image_step\n        name: Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        env:\n          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n        uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n        with:\n          dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n          image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}\n          build-args: ${{ inputs.docker_build_args }}\n          push: true\n          azure-container-registry-name: onnxruntimebuildcache\n\n      - name: Export GitHub Actions cache environment variables\n        uses: actions/github-script@v7\n        with:\n          script: |\n            core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n            core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n\n      - id: update_step\n        name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: update\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - id: build_step\n        name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: build\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - id: test_step\n        name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        if: inputs.run_tests == true\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: test\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - name: Prepare Build Output for Upload\n        if: inputs.upload_build_output == true\n        run: |\n          #!/bin/bash\n          set -e -x\n          BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n          if [ ! -d \"${BUILD_DIR}\" ]; then\n            echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n            exit 1\n          fi\n          echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n          rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n          rm -rf \"${BUILD_DIR}/pybind11\" || true\n          rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n          rm -f \"${BUILD_DIR}/models\" || true\n          DEPS_DIR=\"${BUILD_DIR}/_deps\"\n          if [ -d \"${DEPS_DIR}\" ]; then\n            echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n            find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n          else\n            echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n          fi\n          echo \"--- Saving executable permissions ---\"\n          cd \"${BUILD_DIR}\"\n          find . -executable -type f -printf '%p\\n' > perms.txt\n          echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      - name: Upload Build Output Artifact\n        if: inputs.upload_build_output == true\n        uses: actions/upload-artifact@v4\n        with:\n          name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n          path: ${{ runner.temp }}/${{ inputs.build_config }}\n          if-no-files-found: error\n\n      - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n        if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure'\n        uses: actions/upload-artifact@v4\n        with:\n          name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}\n          path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log\n          if-no-files-found: ignore\n```","repository_id":3980037,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 52: did not find expected ',' or ']'\", \"filepath\": \"../../tmp/42678b96-89bc-4ecd-a0af-7116e24eb65b.yml\", \"line\": 52, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"  build_test_pipeline:\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1727,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":9,"Actions":["actions/checkout","actions/github-script","actions/setup-python","actions/upload-artifact","actions/upload-artifact","microsoft/onnxruntime-github-actions/build-docker-image","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/build-docker-image"},{"version":"v7","name":"actions/github-script"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":1}}
{"id":30644,"level":2,"name":"marqo-ai/marqo","file_name":"start_ec2_runner.yml","len":5,"prompt":"Generate a GitHub Workflow named `Start EC2 Runner` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 2 inputs: base-ami-id-this input represents base ami id for the ec2 runner, it must be supplied and the data type is string; ec2-instance-type-this input represents instance type for the ec2 runner, it must be supplied and the data type is string. This workflow has 2 outputs: label-it represents ec2 runner label and its value is ${{ jobs.Start-Runner.outputs.label }}; ec2-instance-id-it represents ec2 instance id and its value is ${{ jobs.Start-Runner.outputs.ec2-instance-id }}. It receives 3 secrets: GH_PERSONAL_ACCESS_TOKEN-it must be supplied; MARQO_WORKFLOW_TESTS_SUBNET_ID-it must be supplied; MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting applies to all jobs in the workflow. The workflow has one job. The 1st job is named `Start EC2 runner` and its job id is `Start-Runner`. The job `Start-Runner` has 2 steps. The 1st step is named `Configure AWS credentials`. The 2nd step is named `Start EC2 runner` and its id is `start-ec2-runner`. /no-think","answer":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 Runner Label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 Instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-region: us-east-1\n        role-to-assume: arn:aws:iam::424082663841:role/GhRunnerManagerRole-Marqo\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: machulav/ec2-github-runner@v2\n      with:\n        mode: start\n        github-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        ec2-image-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n        aws-resource-tags: >\n          [\n            {\"Key\": \"Name\", \"Value\": \"marqo-github-runner-${{ github.run_id }}\"},\n            {\"Key\": \"GitHubRepo\", \"Value\": \"${{ github.repository }}\"},\n            {\"Key\": \"WorkflowName\", \"Value\": \"${{ github.workflow }}\"},\n            {\"Key\": \"WorkflowRunId\", \"Value\": \"${{ github.run_id }}\"},\n            {\"Key\": \"WorkflowURL\", \"Value\": \"${{ github.event.repository.html_url\n          }}/actions/runs/${{ github.run_id }}\"},\n            {\"Key\": \"PoloRole\", \"Value\": \"testing\"}\n          ]\n\npermissions:\n  contents: read\n  id-token: write\n\n```","llm_response":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_dispatch:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n\njobs:\n  Start-Runner:\n    runs-on: ubuntu-latest\n\n    permissions:\n      contents: read\n      id-token: write\n\n    outputs:\n      label: ${{ steps.configure-aws-credentials.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n\n    steps:\n      - name: Configure AWS credentials\n        id: configure-aws-credentials\n        uses: aws-actions/configure-aws-credentials@v2\n        with:\n          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n          aws-region: us-west-2\n\n      - name: Start EC2 runner\n        id: start-ec2-runner\n        uses: aws-actions/ecs-run-task@v2\n        with:\n          cluster: my-cluster\n          task-definition: my-task-definition\n          launch-type: FARGATE\n          subnets: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n          security-groups: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n          environment:\n            - name: BASE_AMI_ID\n              value: ${{ inputs.base-ami-id }}\n            - name: EC2_INSTANCE_TYPE\n              value: ${{ inputs.ec2-instance-type }}\n          container-overrides:\n            - name: my-container\n              environment:\n                - name: GITHUB_TOKEN\n                  value: ${{ secrets.GITHUB_TOKEN }}\n```","repository_id":94530930,"lint_valid":false,"lint_output":"[{\"message\": \"expected scalar node for string value but found sequence node with \\\"!!seq\\\" tag\", \"filepath\": \"../../tmp/7ba00111-9e31-49ce-a865-d98e5fbaa99f.yml\", \"line\": 46, \"column\": 13, \"kind\": \"syntax-check\", \"snippet\": \"            - name: BASE_AMI_ID\\n            ^\", \"end_column\": 13}, {\"message\": \"expected scalar node for string value but found sequence node with \\\"!!seq\\\" tag\", \"filepath\": \"../../tmp/7ba00111-9e31-49ce-a865-d98e5fbaa99f.yml\", \"line\": 51, \"column\": 13, \"kind\": \"syntax-check\", \"snippet\": \"            - name: my-container\\n            ^\", \"end_column\": 13}]","meteor_score":0.4501285345203419,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":575,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":2,"Actions":["aws-actions/configure-aws-credentials","machulav/ec2-github-runner"],"Actions_details":[{"version":"v4","name":"aws-actions/configure-aws-credentials"},{"version":"v2","name":"machulav/ec2-github-runner"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":2,"CyclomaticComplexity":1}}
{"id":6721,"level":3,"name":"microsoft/onnxruntime","file_name":"reusable_linux_build.yml","len":5,"prompt":"Generate a GitHub Workflow named `Reusable Linux CPU/GPU Build and Test` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 12 inputs: pool_name-this input represents the specific 1es pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu), it must be supplied and the data type is string; build_config-this input represents build configuration (debug or release), it must be supplied and the data type is string; architecture-this input represents target architecture (x64 or arm64), it must be supplied and the data type is string; dockerfile_path-this input represents path to the dockerfile relative to the workspace root, it must be supplied and the data type is string; docker_image_repo-this input represents name for the docker image repository, it must be supplied and the data type is string; docker_build_args-this input represents arguments to pass to the docker image build command, it is optional, the data type is string and its default value is ; execution_providers-this input represents space-separated list of execution providers to enable (passed to build.py), it is optional, the data type is string and its default value is ; extra_build_flags-this input represents additional flags for the build.py script (appended after ep flags), it is optional, the data type is string and its default value is ; python_path_prefix-this input represents optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path), it is optional, the data type is string and its default value is ; python_version-this input represents python version to set up on the runner host, it is optional, the data type is string and its default value is 3.x; run_tests-this input represents whether to execute the test suite after building, it is optional, the data type is boolean and its default value is True; upload_build_output-this input represents whether to upload the build output directory as an artifact (used when tests are skipped), it is optional, the data type is boolean and its default value is False. It receives a secret: GH_TOKEN-it represents github token for accessing actions/packages and it must be supplied. The workflow has one job. The job id of the 1st job is `build_test_pipeline`. This job will execute on any runner that has the labels self-hosted and 1ES.Pool=${{ inputs.pool_name }}. The job `build_test_pipeline` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope, write access is granted to the GITHUB_TOKEN in the `packages` scope, write access is granted to the GITHUB_TOKEN in the `attestations` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `build_test_pipeline`. The job `build_test_pipeline` has 10 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ inputs.python_version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ inputs.python_version }}`. The 3rd step is named `Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_docker_image_step`. The step sets an environment variable to use: `GITHUB_TOKEN` is set to `${{ secrets.GH_TOKEN }}`. This step runs action `microsoft/onnxruntime-github-actions/build-docker-image` tagged as v0.0.6. The step defines 5 input parameters for the action: `dockerfile` is set to `${{ github.workspace }}/${{ inputs.dockerfile_path }}`, `image-name` is set to `ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}`, `build-args` is set to `${{ inputs.docker_build_args }}`, `push` is set to `True` and `azure-container-registry-name` is set to `onnxruntimebuildcache`. The 4th step is named `Export GitHub Actions cache environment variables`. This step runs action `actions/github-script` tagged as v7. The step defines an input parameter for the action: `script` is set to `core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\ncore.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n`. The 5th step is named `Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `update_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `update`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 6th step is named `Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `build`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 7th step is named `Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `test_step`. This step will run only if the condition(inputs.run_tests == true) is met. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `test`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 8th step is named `Prepare Build Output for Upload`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step uses bash to run a script: `#!/bin/bash\nset -e -x\nBUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\nif [ ! -d \"${BUILD_DIR}\" ]; then\n  echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n  exit 1\nfi\necho \"--- Cleaning build directory: ${BUILD_DIR} ---\"\nrm -rf \"${BUILD_DIR}/onnxruntime\" || true\nrm -rf \"${BUILD_DIR}/pybind11\" || true\nrm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\nrm -f \"${BUILD_DIR}/models\" || true\nDEPS_DIR=\"${BUILD_DIR}/_deps\"\nif [ -d \"${DEPS_DIR}\" ]; then\n  echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n  find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\nelse\n  echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\nfi\necho \"--- Saving executable permissions ---\"\ncd \"${BUILD_DIR}\"\nfind . -executable -type f -printf '%p\\n' > perms.txt\necho \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n`. The 9th step is named `Upload Build Output Artifact`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `build-output-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}` and `if-no-files-found` is set to `error`. The 10th step is named `Upload VCPKG Manifest Install Log on Update or Build Failure`. This step will run only if the condition(steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log` and `if-no-files-found` is set to `ignore`. /no-think","answer":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-Ubuntu2204-AMD-CPU)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or arm64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after EP\n          flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the PATH for python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on:\n    - self-hosted\n    - 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      id: build_docker_image_step\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      # ------------- Update Step (CMake Generation) -------------\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Build Step (Compilation) -------------\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Test Step -------------\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Prepare Artifact Step -------------\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      # ------------- Upload Build Output Step -------------\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n\n      # ------------- Upload Log on Build Failure Step -------------\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","llm_response":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: 'The specific 1ES pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu)'\n        required: true\n        type: string\n      build_config:\n        description: 'Build configuration (debug or release)'\n        required: true\n        type: string\n      architecture:\n        description: 'Target architecture (x64 or arm64)'\n        required: true\n        type: string\n      dockerfile_path:\n        description: 'Path to the Dockerfile relative to the workspace root'\n        required: true\n        type: string\n      docker_image_repo:\n        description: 'Name for the Docker image repository'\n        required: true\n        type: string\n      docker_build_args:\n        description: 'Arguments to pass to the docker image build command'\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: 'Space-separated list of execution providers to enable (passed to build.py)'\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: 'Additional flags for the build.py script (appended after ep flags)'\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: 'Optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path)'\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: 'Python version to set up on the runner host'\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: 'Whether to execute the test suite after building'\n        required: false\n        type: boolean\n        default: True\n      upload_build_output:\n        description: 'Whether to upload the build output directory as an artifact (used when tests are skipped)'\n        required: false\n        type: boolean\n        default: False\n    secrets:\n      GH_TOKEN:\n        description: 'Github token for accessing actions/packages'\n        required: true\n\njobs:\n  build_test_pipeline:\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    runs-on: self-hosted\n    labels:\n      - 1ES.Pool=${{ inputs.pool_name }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})\n      id: build_docker_image_step\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: 'ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}'\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})\n      id: update_step\n      uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n      id: build_step\n      uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: 'build-output-${{ inputs.architecture }}-${{ inputs.build_config }}'\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: 'vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}'\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","repository_id":3980037,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"labels\\\" for \\\"job\\\" section. expected one of \\\"concurrency\\\", \\\"container\\\", \\\"continue-on-error\\\", \\\"defaults\\\", \\\"env\\\", \\\"environment\\\", \\\"if\\\", \\\"name\\\", \\\"needs\\\", \\\"outputs\\\", \\\"permissions\\\", \\\"runs-on\\\", \\\"secrets\\\", \\\"services\\\", \\\"steps\\\", \\\"strategy\\\", \\\"timeout-minutes\\\", \\\"uses\\\", \\\"with\\\"\", \"filepath\": \"../../tmp/63687886-7063-433a-b4e3-5b6d9922ff5d.yml\", \"line\": 74, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    labels:\\n    ^~~~~~~\", \"end_column\": 11}]","meteor_score":0.9967783121957273,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1727,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":9,"Actions":["actions/checkout","actions/github-script","actions/setup-python","actions/upload-artifact","actions/upload-artifact","microsoft/onnxruntime-github-actions/build-docker-image","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/build-docker-image"},{"version":"v7","name":"actions/github-script"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":1}}
{"id":65428,"level":2,"name":"elementsproject/lightning","file_name":"release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Release ðŸš€` for a GitHub repository whose primary programming language is C. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a tag whose name matches v[0-9]+.[0-9]+, a tag whose name matches v[0-9]+.[0-9]+.[0-9]+ or a tag whose name matches v[0-9]+.[0-9]+[0-9a-z]+. 2) someone manually triggers the workflow. This workflow receives 2 inputs: version-this input represents release version and it must be supplied; create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False. The workflow has 4 jobs. The 1st job is named `Check` and its job id is `check`. The job `check` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Determine version`. The 3rd step is named `Validate release`. The 4th step is named `Catpure version output` and its id is `capture`. The 2nd job is named `Releases` and its job id is `releases`. The job `releases` has 5 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Prepare base environment`. The 3rd step is named `Build environment setup`. The 4th step is named `Build release`. The 5th step is named `Upload target artifacts`. The 3rd job is named `Construct release artifact` and its job id is `artifact`. The job `artifact` has one step. The 1st step is named `Merge artifacts`. The 4th job is named `Sign and prepare release draft` and its job id is `release`. The job `release` has 8 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download artifact`. The 3rd step is named `Import GPG keys` and its id is `gpg`. The 4th step is named `Set default GPG key`. The 5th step is named `Sign release`. The 6th step is named `Upload signed artifact`. The 7th step is named `Determine release data` and its id is `release_data`. The 8th step is named `Prepare release draft`. /no-think","answer":"```yaml\n# https://docs.corelightning.org/docs/release-checklist\nname: Release ðŸš€\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: no\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n        fetch-depth: 0\n        fetch-tags: true\n\n    - name: Determine version\n      run: |\n        if [[ \"${{ github.event.inputs.version }}\" != \"\" ]]; then\n          VERSION=\"${{ github.event.inputs.version }}\"\n        elif [ \"${{ github.ref_type }}\" == \"tag\" ]; then\n          VERSION=\"${{ github.ref_name }}\"\n        else\n          echo \"No release version provided and no tag found.\"\n          exit 1\n        fi\n        echo \"VERSION=$VERSION\" >> \"$GITHUB_ENV\"\n        echo \"Determined version: $VERSION\"\n\n    - name: Validate release\n      run: tools/check-release.sh --version=${VERSION}\n\n    - name: Catpure version output\n      id: capture\n      run: echo \"version=${VERSION}\" >> \"$GITHUB_OUTPUT\"\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-24.04\n    strategy:\n      fail-fast: false    # Let each build finish.\n      matrix:\n        target:\n        - bin-Fedora\n        - bin-Ubuntu-focal\n        - bin-Ubuntu-jammy\n        - bin-Ubuntu-noble\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n      # tools/build-release.sh requires lowdown\n    - name: Prepare base environment\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n\n    - name: Build environment setup\n      run: |\n        distribution=$(echo ${{ matrix.target }} | cut -d'-' -f3)\n        echo \"Building base image for ${distribution}\"\n        sudo docker run --rm -v $(pwd):/build ubuntu:${distribution} bash -c \"\\\n            apt-get update && \\\n            apt-get install -y debootstrap && \\\n            debootstrap ${distribution} /build/${distribution}\"\n        sudo tar -C ${distribution} -c . | docker import - ${distribution}\n\n        # Build Docker image\n        docker build -t cl-repro-${distribution} - < contrib/reprobuild/Dockerfile.${distribution}\n      if: contains(matrix.target, 'Ubuntu')\n\n    - name: Build release\n      run: tools/build-release.sh ${{ matrix.target }}\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        path: release/\n        name: ${{ matrix.target }}\n        if-no-files-found: error\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - check\n    - releases\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        pattern: bin-*\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        path: release/\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        trust_level: 5\n\n    - name: Set default GPG key\n      run: echo \"default-key ${{ steps.gpg.outputs.keyid }}\" >> \n        ~/.gnupg/gpg.conf\n\n    - name: Sign release\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n        tools/build-release.sh --without-zip sign\n        mv release/SHA256SUMS.asc${{ steps.gpg.outputs.keyid  }} release/SHA256SUMS.asc\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        overwrite: true\n        path: release/\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        VERSION=${{ env.version }}\n        CHANGELOG_VERSION=${VERSION#v}\n        echo \"CHANGELOG_VERSION=$CHANGELOG_VERSION\"\n        echo \"changelog_version=$CHANGELOG_VERSION\" >> \"$GITHUB_OUTPUT\"\n\n        CHANGELOG_TITLE=$(grep \"## \\[${CHANGELOG_VERSION}\\]\" CHANGELOG.md)\n        echo \"CHANGELOG_TITLE=$CHANGELOG_TITLE\"\n        echo \"changelog_title=$CHANGELOG_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n        RELEASE_TITLE=$(echo $CHANGELOG_TITLE | cut -d'\"' -f2)\n        echo \"RELEASE_TITLE=$RELEASE_TITLE\"\n        echo \"release_title=$RELEASE_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n    - name: Prepare release draft\n      if: github.event_name == 'push' || (github.event_name == \n        'workflow_dispatch' && github.event.inputs.create_release == 'yes')\n      uses: softprops/action-gh-release@v2\n      with:\n        name: ${{ env.version }} ${{ steps.release_data.outputs.release_title }}\n        tag_name: ${{ env.version }}\n        draft: true\n        prerelease: contains(env.version, \"-rc\")\n        files: release/*\n        fail_on_unmatched_files: true\n\n```","llm_response":"```yaml\nname: Release ðŸš€\n\non:\n  push:\n    tags:\n    - 'v[0-9]+.[0-9]+'\n    - 'v[0-9]+.[0-9]+.[0-9]+'\n    - 'v[0-9]+.[0-9]+[0-9a-z]+'\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: False\n        type: choice\n        options:\n        - True\n        - False\n\njobs:\n  check:\n    name: Check\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Determine version\n      run: |\n        if [[ $GITHUB_REF_TYPE == tag ]]; then\n          echo \"VERSION=${GITHUB_REF_NAME#v}\" >> $GITHUB_OUTPUT\n        else\n          echo \"VERSION=${{ github.ref_name }}\" >> $GITHUB_OUTPUT\n        fi\n      id: determine_version\n    - name: Validate release\n      run: |\n        if [[ ${{ github.event_name }} == 'workflow_dispatch' ]]; then\n          echo \"VERSION=${{ github.event.inputs.version }}\" >> $GITHUB_OUTPUT\n        else\n          echo \"VERSION=${{ steps.determine_version.outputs.VERSION }}\" >> $GITHUB_OUTPUT\n        fi\n      id: validate_release\n    - name: Catpure version output\n      id: capture\n      run: |\n        echo \"VERSION=${{ steps.validate_release.outputs.VERSION }}\" >> $GITHUB_OUTPUT\n      shell: bash\n\n  releases:\n    name: Releases\n    needs:\n    - check\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Prepare base environment\n      uses: ./.github/actions/prepare-base-env@main\n    - name: Build environment setup\n      uses: ./.github/actions/build-env-setup@main\n      with:\n        version: ${{ needs.check.outputs.VERSION }}\n    - name: Build release\n      run: |\n        make release\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        name: release-artifacts\n        path: 'dist'\n        retention-days: 7\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - releases\n    runs-on: ubuntu-latest\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: release-artifacts\n        path: 'dist'\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    permissions:\n      contents: write\n      issues: write\n      pull-requests: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: release-artifacts\n        path: 'dist'\n    - name: Import GPG keys\n      id: gpg\n      uses: scottbrenner/action-import-gpg@v4\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n    - name: Set default GPG key\n      run: gpg --default-key ${{ steps.gpg.outputs.keyid }}\n    - name: Sign release\n      run: |\n        make sign\n      env:\n        GPG_PASSPHRASE: ${{ secrets.GPG_PASSPHRASE }}\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: release-artifacts\n        path: 'dist'\n        retention-days: 7\n    - name: Determine release data\n      id: release_data\n      run: |\n        echo \"VERSION=${{ needs.check.outputs.VERSION }}\" >> $GITHUB_OUTPUT\n        echo \"DATE=$(date +'%Y-%m-%d')\" >> $GITHUB_OUTPUT\n      shell: bash\n    - name: Prepare release draft\n      uses: actions/publish-release@latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        CREATE_RELEASE: ${{ github.event.inputs.create_release }}\n      with:\n        tag: ${{ github.ref }}\n        version: ${{ steps.release_data.outputs.VERSION }}\n        date: ${{ steps.release_data.outputs.DATE }}\n        body: |\n          See [CHANGELOG.md](CHANGELOG.md) for details.\n\n```","repository_id":3976044,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"version\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/87cdbb0b-5658-4465-9620-49d1f3e039b7.yml\", \"line\": 68, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.check.outputs.VERSION }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 48}, {\"message\": \"property \\\"version\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/87cdbb0b-5658-4465-9620-49d1f3e039b7.yml\", \"line\": 135, \"column\": 30, \"kind\": \"expression\", \"snippet\": \"      run: |\", \"end_column\": 30}]","meteor_score":0.41191781462142746,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1416,"stats":{"NumofTriggers":2,"Triggers":["push","workflow_dispatch"],"NumofJobs":4,"NumofActions":9,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/download-artifact","actions/upload-artifact","actions/upload-artifact","actions/upload-artifact/merge","crazy-max/ghaction-import-gpg","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact/merge"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v6","name":"crazy-max/ghaction-import-gpg"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v2","name":"softprops/action-gh-release"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":18,"CyclomaticComplexity":3}}
{"id":9161,"level":3,"name":"mckinsey/vizro","file_name":"test-unit-vizro-mcp.yml","len":5,"prompt":"Generate a GitHub Workflow named `Unit tests for Vizro` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) The workflow would run whenever there is a pull_request event targeting: a branch named main. The workflow sets 2 environment variables to use: `PYTHONUNBUFFERED` is set to `1` and `FORCE_COLOR` is set to `1`. For all run steps in the workflow, default working directory is set to vizro-mcp. The workflow has one job. The 1st job is named `test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}` and its job id is `test-unit-vizro-core`. This job will run on ${{ matrix.config.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `config` has 5 values: {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'}, {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'}, {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'}, {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'} and {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}. The variable `is_non_release_pr` has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}. If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix. The job `test-unit-vizro-core` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ matrix.config.python-version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ matrix.config.python-version }}`. The 3rd step is named `Install Hatch`. This step runs a script: `pip install hatch`. The 4th step is named `Show dependency tree`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:pip tree`. The 5th step is named `Run unit tests`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage`. /no-think","answer":"```yaml\nname: Unit tests for Vizro\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        # This is not a nice way to define the matrix, but it's the only way that's possible so that we only run\n        # the job on Windows on merge to main rather than in every PR. See:\n        # https://stackoverflow.com/questions/66025220/paired-values-in-github-actions-matrix\n        # https://github.com/orgs/community/discussions/26253\n        # https://github.com/actions/runner/issues/1985\n        config:\n        - python-version: '3.10'\n          hatch-env: all.py3.10\n          os: ubuntu-latest\n        - python-version: '3.11'\n          hatch-env: all.py3.11\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: ubuntu-latest\n        - python-version: '3.13'\n          hatch-env: all.py3.13\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: windows-latest\n          label: Windows\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","llm_response":"```yaml\nname: Unit tests for Vizro\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        config:\n        - {python-version: '3.10', hatch-env: all.py3.10, os: ubuntu-latest}\n        - {python-version: '3.11', hatch-env: all.py3.11, os: ubuntu-latest}\n        - {python-version: '3.12', hatch-env: all.py3.12, os: ubuntu-latest}\n        - {python-version: '3.13', hatch-env: all.py3.13, os: ubuntu-latest}\n        - {python-version: '3.12', hatch-env: all.py3.12, os: windows-latest, \n            label: Windows}\n        is_non_release_pr: ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n\n        # exclude windows test if PR is a release PR\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","repository_id":94586448,"lint_valid":false,"lint_output":"[{\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type bool\", \"filepath\": \"../../tmp/418eef04-b170-40f9-af0d-f051b8ff742b.yml\", \"line\": 32, \"column\": 28, \"kind\": \"expression\", \"snippet\": \"        is_non_release_pr: ${{ github.event_name == 'pull_request' && \\n                           ^~~\", \"end_column\": 30}]","meteor_score":0.9901350671998681,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":574,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-python"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":16232,"level":1,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\ntrue:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\npermissions:\n  contents: read\njobs:\n  coverage:\n    env:\n      CCACHE_DIR: ${{ github.workspace }}/.ccache\n      CCACHE_MAXSIZE: 200M\n      CCACHE_COMPRESS: true\n      CCACHE_COMPRESSLEVEL: 5\n      CCACHE_LOGFILE: ${{ github.workspace }}/ccache.log\n      CCACHE_NOHASHDIR: true\n      CCACHE_MAXSIZE_PCT: 80\n      CCACHE_MAXSIZE_TARGET: 100M\n      CCACHE_MAXSIZE_TARGET_PCT: 90\n    name: ${{ matrix.name ||matrix.target }}\n    runs-on: ubuntu-22.04\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: false\n    - name: Cache ccache\n      uses: actions/cache@5a3ec84eff668545956fd18022155c47e93e2684\n      with:\n        key: ${{ runner.os }}-ccache-${{ matrix.target }}\n        path: ${{ env.CCACHE_DIR }}\n        restore-keys: '${{ runner.os }}-ccache-${{ matrix.target }}-\n\n          ${{ runner.os }}-ccache-\n\n          '\n    - name: Set up Python\n      uses: actions/setup-python@a26af69be951a213d495a4c3e4e4022e16d87065\n      with:\n        python-version: '3.11'\n    - name: Install Python dependencies\n      run: pip install -r requirements.txt\n    - env:\n        CCACHE_DIR: ${{ github.workspace }}/.ccache\n      name: Set up ccache\n      run: 'mkdir -p $CCACHE_DIR\n\n        echo \"max_size = $CCACHE_MAXSIZE\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"max_size = $CCACHE_MAXSIZE_TARGET\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"compression = $CCACHE_COMPRESS\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"compression_level = $CCACHE_COMPRESSLEVEL\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"max_size_pct = $CCACHE_MAXSIZE_PCT\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"max_size_target = $CCACHE_MAXSIZE_TARGET\" >> $CCACHE_DIR/ccache.conf\n\n        echo \"max_size_target_pct = $CCACHE_MAXSIZE_TARGET_PCT\" >> $CCACHE_DIR/ccache.conf\n\n        '\n    - name: Build\n      run: ./ci.sh ${{ matrix.target }}\n    - if: matrix.target == 'coverage'\n      name: Check coverage\n      run: ./ci.sh check_coverage\n    - if: matrix.target == 'coverage'\n      name: Upload coverage report\n      uses: codecov/codecov-action@ad3126e916f78f00edff4ed0317cf185271ccc2d\n      with:\n        fail_ci_if_error: true\n        files: ${{ github.workspace }}/coverage.xml\n        token: ${{ secrets.CODECOV_TOKEN }}\n    - if: matrix.target == 'coverage'\n      name: Upload ccache log\n      uses: actions/upload-artifact@ea165f8d65b6e75b540449e92b4886f43607fa02\n      with:\n        name: ccache-log-${{ matrix.target }}\n        path: ${{ env.CCACHE_LOGFILE }}\n        retention-days: 3\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - name: Linux x86-64\n          target: linux-x86_64\n        - name: Linux x86-64\n          target: linux-x86_64-debug\n        - name: Linux aarch64\n          target: linux-aarch64\n        - name: Linux aarch64\n          target: linux-aarch64-debug\n        - name: Linux ppc64le\n          target: linux-ppc64le\n        - name: Linux ppc64le\n          target: linux-ppc64le-debug\n        - name: Linux s390x\n          target: linux-s390x\n        - name: Linux s390x\n          target: linux-s390x-debug\n        - name: Linux RISC-V64\n          target: linux-riscv64\n        - name: Linux RISC-V64\n          target: linux-riscv64-debug\n        - name: Linux loongarch64\n          target: linux-loongarch64\n        - name: Linux loongarch64\n          target: linux-loongarch64-debug\n        - name: Linux RISC-V64\n          target: linux-riscv64-llvm\n        - name: Linux RISC-V64\n          target: linux-riscv64-llvm-debug\n        - name: Linux loongarch64\n          target: linux-loongarch64-llvm\n        - name: Linux loongarch64\n          target: linux-loongarch64-llvm-debug\n        - name: macOS x86-64\n          target: macos-x86_64\n        - name: macOS x86-64\n          target: macos-x86_64-debug\n        - name: macOS aarch64\n          target: macos-aarch64\n        - name: macOS aarch64\n          target: macos-aarch64-debug\n        - name: Windows x86-64\n          target: windows-x86_64\n        - name: Windows x86-64\n          target: windows-x86_64-debug\n        - name: Windows aarch64\n          target: windows-aarch64\n        - name: Windows aarch64\n          target: windows-aarch64-debug\n    timeout-minutes: 120\n\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"codecov_token\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/9c2acd8b-b12d-455f-a96f-b9da7ddc955c.yml\", \"line\": 90, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        token: ${{ secrets.CODECOV_TOKEN }}\\n                   ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}]","meteor_score":0.3328433021693923,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":62474,"level":1,"name":"PHPCSStandards/PHP_CodeSniffer","file_name":"verify-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Verify release` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) a release, pre-release, or draft of a release is published. 2) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 3) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 4) someone manually triggers the workflow. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 2 jobs. The 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}` and its job id is `verify-available-downloads`. The 2nd job is named `PHIVE: ${{ matrix.pharfile }}` and its job id is `verify-phive`. /no-think","answer":"```yaml\nname: Verify release\n\non:\n  # Run whenever a release is published.\n  release:\n    types: [published]\n  # And whenever this workflow is updated.\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  # Allow manually triggering the workflow.\n  workflow_dispatch:\n\n# Cancels all previous workflow runs for the same branch that have not yet completed.\nconcurrency:\n  # The concurrency group contains the workflow name and the branch name.\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  ##################################################################################\n  # Verify the release is available in all the right places and works as expected. #\n  ##################################################################################\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - Release assets\n        - Unversioned web\n        - Versioned web\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Set source URL and file name\n      id: source\n      shell: bash\n      run: |\n        if [[ \"${{ matrix.download_flavour }}\" == \"Release assets\" ]]; then\n          echo 'SRC=https://github.com/PHPCSStandards/PHP_CodeSniffer/releases/latest/download/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        elif [[ \"${{ matrix.download_flavour }}\" == \"Unversioned web\" ]]; then\n          echo 'SRC=https://phars.phpcodesniffer.com/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo 'SRC=https://phars.phpcodesniffer.com/phars/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}-${{ steps.version.outputs.TAG }}.phar\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n    - name: Verify PHAR file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }} ${{ steps.source.outputs.SRC\n        }}${{ steps.source.outputs.FILE }}\n\n    - name: Verify signature file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.SRC }}${{ steps.source.outputs.FILE }}.asc\n\n    - name: 'DEBUG: List files'\n      run: ls -Rlh\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ${{ steps.source.outputs.FILE }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n    - name: Download public key\n      env:\n        FINGERPRINT: '0x689DAD778FF08760E046228BA978220305CD5C32'\n      run: gpg --keyserver \"hkps://keys.openpgp.org\" --recv-keys \"$FINGERPRINT\"\n\n    - name: Verify signature of the PHAR file\n      run: gpg --verify ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.FILE }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ${{ steps.source.outputs.FILE }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ${{ steps.source.outputs.FILE }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n  # #########################################\n  # Verify install via PHIVE.\n  # #########################################\n  verify-phive:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n        tools: phive\n\n    - name: Install\n      run: phive install ${{ matrix.pharfile }} --copy --trust-gpg-keys \n        689DAD778FF08760E046228BA978220305CD5C32\n\n    - name: 'DEBUG: List files'\n      run: ls -R\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ./tools/${{ matrix.pharfile }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ./tools/${{ matrix.pharfile }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ./tools/${{ matrix.pharfile }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n```","llm_response":"```yaml\n# Define the workflow named 'Verify release'\nname: Verify release\n\n# Set the concurrency group to prevent multiple workflows from running simultaneously\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n\n# Define the workflow triggers\non:\n  release:\n    types: [published, prereleased, draft]\n  push:\n    paths:\n      - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n      - .github/workflows/verify-release.yml\n  workflow_dispatch:\n\n# Define the jobs in the workflow\njobs:\n  # Define the first job named ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        download_flavour: [stable, nightly]\n        pharfile: ['pharfile1.phar', 'pharfile2.phar']\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Download PHAR file\n        run: |\n          curl -L https://example.com/${{ matrix.download_flavour }}/${{ matrix.pharfile }} -o ${{ matrix.pharfile }}\n      - name: Verify PHAR file\n        run: |\n          php -r \"if (!extension_loaded('phar')) { echo 'PHAR extension is not installed'; exit(1); }\"\n          php ${{ matrix.pharfile }} --version\n\n  # Define the second job named PHIVE: ${{ matrix.pharfile }}\n  verify-phive:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        download_flavour: [stable, nightly]\n        pharfile: ['pharfile1.phar', 'pharfile2.phar']\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Download PHAR file\n        run: |\n          curl -L https://example.com/${{ matrix.download_flavour }}/${{ matrix.pharfile }} -o ${{ matrix.pharfile }}\n      - name: Install PHIVE\n        run: |\n          php -r \"if (!extension_loaded('phar')) { echo 'PHAR extension is not installed'; exit(1); }\"\n          php ${{ matrix.pharfile }} phive install\n      - name: Verify PHIVE installation\n        run: |\n          php ${{ matrix.pharfile }} phive --version\n```","repository_id":94694176,"lint_valid":false,"lint_output":"[{\"message\": \"invalid activity type \\\"draft\\\" for \\\"release\\\" Webhook event. available types are \\\"created\\\", \\\"deleted\\\", \\\"edited\\\", \\\"prereleased\\\", \\\"published\\\", \\\"released\\\", \\\"unpublished\\\"\", \"filepath\": \"../../tmp/4b50b98f-fa2b-427d-a9e7-f8bda1ec6aac.yml\", \"line\": 11, \"column\": 37, \"kind\": \"events\", \"snippet\": \"    types: [published, prereleased, draft]\\n                                    ^~~~~~\", \"end_column\": 42}]","meteor_score":0.13711272673152208,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1910,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","release","workflow_dispatch"],"NumofJobs":2,"NumofActions":4,"Actions":["octokit/request-action","octokit/request-action","shivammathur/setup-php","shivammathur/setup-php"],"Actions_details":[{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":28,"CyclomaticComplexity":2}}
{"id":21604,"level":3,"name":"zama-ai/tfhe-rs","file_name":"gpu_signed_integer_classic_tests.yml","len":5,"prompt":"Generate a GitHub Workflow named `Cuda - Signed integer tests with classical PBS` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) a label is added to a pull request. The workflow modifies the default permissions for the GITHUB_TOKEN: the workflow disables permissions for the GITHUB_TOKEN across all scopes. This permission setting applies to all jobs in the workflow. The workflow sets 15 environment variables to use: `CARGO_TERM_COLOR` is set to `always`, `ACTION_RUN_URL` is set to `${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}`, `RUSTFLAGS` is set to `-C target-cpu=native`, `RUST_BACKTRACE` is set to `full`, `RUST_MIN_STACK` is set to `8388608`, `SLACK_CHANNEL` is set to `${{ secrets.SLACK_CHANNEL }}`, `SLACK_ICON` is set to `https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png`, `SLACK_USERNAME` is set to `${{ secrets.BOT_USERNAME }}`, `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK }}`, `SLACKIFY_MARKDOWN` is set to `True`, `IS_PULL_REQUEST` is set to `${{ github.event_name == 'pull_request' }}`, `PULL_REQUEST_MD_LINK` is set to ``, `CHECKOUT_TOKEN` is set to `${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}`, `SECRETS_AVAILABLE` is set to `${{ secrets.JOB_SECRET != '' }}` and `EXTERNAL_CONTRIBUTION_RUNNER` is set to `gpu_ubuntu-22.04`. The workflow has 5 jobs. The job id of the 1st job is `should-run`. This job will run on ubuntu-latest runner. The job `should-run` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `pull-requests` scope. This permission setting only applies to the job `should-run`. The job `should-run` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Check for file changes` and its id is `changed-files`. This step runs action `tj-actions/changed-files` whose commit is ed68ef82c095e0d48ec87eccea555d944a631a4c. The step defines an input parameter for the action: `files_yaml` is set to `gpu:\n  - tfhe/Cargo.toml\n  - tfhe/build.rs\n  - backends/tfhe-cuda-backend/**\n  - tfhe/src/core_crypto/gpu/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n  - tfhe/src/integer/gpu/**\n  - tfhe/src/shortint/parameters/**\n  - tfhe/src/high_level_api/**\n  - tfhe/src/c_api/**\n  - 'tfhe/docs/**/**.md'\n  - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n  - scripts/integer-tests.sh\n  - ci/slab.toml\n`. This job has an output: `gpu_test` is defined as ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}. The 2nd job is named `Setup instance (cuda-signed-classic-tests)` and its job id is `setup-instance`. Before this job runs, `should-run` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')) is met. This job will run on ubuntu-latest runner. The job `setup-instance` has 2 steps. The 1st step is named `Start remote instance` and its id is `start-remote-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 6 input parameters for the action: `mode` is set to `start`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}`, `backend` is set to `hyperstack` and `profile` is set to `gpu-test`. The 2nd step is named `Start GitHub instance` and its id is `start-github-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'false') is met. This step runs a script: `echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n`. This job has an output: `runner-name` is defined as ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}. The 3rd job is named `CUDA signed integer tests with classical PBS` and its job id is `cuda-tests-linux`. Before this job runs, `should-run` and `setup-instance` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')) is met. This job will run on ${{ needs.setup-instance.outputs.runner-name }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. For each object in the [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}] list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Only a single job using the ${{ github.workflow_ref }} concurrency group will run at a time. When this job is queued, any currently running job in the same concurrency group will be canceled. The job `cuda-tests-linux` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Setup Hyperstack dependencies`. This step runs action `./.github/actions/gpu_setup`.The step defines 3 input parameters for the action: `cuda-version` is set to `${{ matrix.cuda }}`, `gcc-version` is set to `${{ matrix.gcc }}` and `github-instance` is set to `${{ env.SECRETS_AVAILABLE == 'false' }}`. The 3rd step is named `Install latest stable`. This step runs action `dtolnay/rust-toolchain` whose commit is 888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1. The step defines an input parameter for the action: `toolchain` is set to `stable`. The 4th step is named `Run signed integer tests`. This step runs a script: `BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n`. The 4th job is named `Slack Notification` and its job id is `slack-notify`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}) is met. This job will run on ubuntu-latest runner. When the job run fails, the workflow run will not fail. The job `slack-notify` has 2 steps. The 1st step is named `Set pull-request URL`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request') is met. The step sets an environment variable to use: `PR_BASE_URL` is set to `${{ vars.PR_BASE_URL }}`. This step runs a script: `echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n`. The 2nd step is named `Send message`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ needs.cuda-tests-linux.result }}` and `SLACK_MESSAGE` is set to `Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. The 5th job is named `Teardown instance (cuda-signed-classic-tests)` and its job id is `teardown-instance`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.setup-instance.result == 'success' }}) is met. This job will run on ubuntu-latest runner. The job `teardown-instance` has 2 steps. The 1st step is named `Stop remote instance` and its id is `stop-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 5 input parameters for the action: `mode` is set to `stop`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}` and `label` is set to `${{ needs.setup-instance.outputs.runner-name }}`. The 2nd step is named `Slack Notification`. This step will run only if the condition(${{ failure() }}) is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}` and `SLACK_MESSAGE` is set to `Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. When this step fails, the job will move on to the next step. /no-think","answer":"```yaml\n# Signed integer GPU tests on an RTXA6000 VM on hyperstack with classical PBS\nname: Cuda - Signed integer tests with classical PBS\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  # Secrets will be available only to zama-ai organization members\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\non:\n  # Allows you to run this workflow manually from the Actions tab as an alternative.\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\n\npermissions: {}\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v46.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled'\n      && needs.should-run.outputs.gpu_test == 'true') || (github.event.action ==\n      'labeled' && github.event.label.name == 'approved' && \n      needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n\n      # This instance will be spawned especially for pull-request from forked repository\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == \n      'pull_request' && needs.setup-instance.result != 'skipped')\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      # explicit include-based build matrix, of known valid options\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: 'Integer GPU signed integer tests with classical PBS finished\n          with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK\n          }}[action run](${{ env.ACTION_RUN_URL }}))'\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n\n    - name: Slack Notification\n      if: ${{ failure() }}\n      continue-on-error: true\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Instance teardown (cuda-signed-classic-tests) finished with\n          status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})'\n\n```","llm_response":"```yaml\n# Copyright 2024 The Zama Authors\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n# SPDX-License-Identifier: Apache-2.0\n\n# This workflow runs the GPU signed integer tests on classical PBS.\n#\n# It is meant to be run only on PRs and will be triggered when the 'approved'\n# label is added to a PR.\n#\n# It will run on the 'gpu_ubuntu-22.04' GitHub runner and will start a remote\n# instance using the 'slab-github-runner' action. This instance will be used\n# to run the tests.\n#\n# Once the tests are finished, the instance will be stopped using the 'slab-github-runner'\n# action.\n#\n# The workflow will notify the 'zama-ai/slab' Slack channel when the tests are finished.\n#\n# It will run on 'ubuntu-latest' and will use the 'cuda_signed_integer_classic_tests.yml'\n# workflow file.\n\nname: Cuda - Signed integer tests with classical PBS\n\non:\n  workflow_dispatch:\n  pull_request:\n    types:\n    - labeled\n\npermissions: {}\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v45.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    if: |\n      github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      id: start-remote-instance\n      uses: \n        zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac       # v0.1.13\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n    - name: Start GitHub instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      id: start-github-instance\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    if: |\n      github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n    name: CUDA signed integer tests with classical PBS\n    needs: [setup-instance, should-run]\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: true\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1   # v1.5.0\n      with:\n        toolchain: stable\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n    - name: Send message\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661   # v2.4.4\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: Integer GPU signed integer tests with classical PBS \n          finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ \n          env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))\n\n  teardown-instance:\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    name: Teardown instance (cuda_signed_integer_classic_tests)\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      id: stop-instance\n      uses: \n        zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac       # v0.1.13\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n    - name: Slack Notification\n      if: ${{ failure() }}\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661   # v2.4.4\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: Instance teardown (cuda-signed-classic-tests) finished \n          with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})\n\n```","repository_id":76862382,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 183: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/74b8cb6a-b09f-44d2-9022-69b3cc47c2c2.yml\", \"line\": 183, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"          finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ \", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":2003,"stats":{"NumofTriggers":2,"Triggers":["pull_request","workflow_dispatch"],"NumofJobs":5,"NumofActions":9,"Actions":["./.github/actions/gpu_setup","actions/checkout","actions/checkout","dtolnay/rust-toolchain","rtCamp/action-slack-notify","rtCamp/action-slack-notify","tj-actions/changed-files","zama-ai/slab-github-runner","zama-ai/slab-github-runner"],"Actions_details":[{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"ed68ef82c095e0d48ec87eccea555d944a631a4c","name":"tj-actions/changed-files"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":null,"name":"./.github/actions/gpu_setup"},{"version":"888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1","name":"dtolnay/rust-toolchain"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":5}}
{"id":3563,"level":3,"name":"paradigmxyz/reth","file_name":"kurtosis.yml","len":5,"prompt":"Generate a GitHub Workflow named `kurtosis` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) the scheduled time has come: every 12 hours. 3) The workflow would run whenever there is a push event to: a tag whose name matches *. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 3 jobs. The job id of the 1st job is `prepare-reth`. This job will call a reusable workflow located at `./.github/workflows/prepare-reth.yml`. The job will pass 2 inputs to the called workflow: the input `image_tag` is `ghcr.io/paradigmxyz/reth:kurtosis-ci` and the input `binary_name` is `reth`. The 2nd job is named `run kurtosis` and its job id is `test`. Before this job runs, `prepare-reth` must complete successfully. This job will execute on any runner that is a member of Reth. The maximum number of minutes to run the job is 60. The job `test` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Download reth image`. This step runs action `actions/download-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `artifacts` and `path` is set to `/tmp`. The 3rd step is named `Load Docker image`. This step runs a script: `docker load -i /tmp/reth_image.tar &\nwait\ndocker image ls -a\n`. The 4th step is named `Run kurtosis`. This step runs action `ethpandaops/kurtosis-assertoor-github-action` tagged as v1. The step defines an input parameter for the action: `ethereum_package_args` is set to `.github/assets/kurtosis_network_params.yaml`. The job id of the 3rd job is `notify-on-error`. Before this job runs, `test` must complete successfully. This job will run only if the condition(failure()) is met. This job will execute on any runner that is a member of Reth. The job `notify-on-error` has one step. The 1st step is named `Slack Webhook Action`. The step sets 3 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}`, `SLACK_MESSAGE` is set to `Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}` and `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK_URL }}`. This step runs action `rtCamp/action-slack-notify` tagged as v2. /no-think","answer":"```yaml\n# Runs `assertoor` tests on a `kurtosis` testnet.\n\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n\n  push:\n    tags:\n    - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    timeout-minutes: 60\n    strategy:\n      fail-fast: false\n    name: run kurtosis\n    runs-on:\n      group: Reth\n    needs:\n    - prepare-reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on:\n      group: Reth\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","llm_response":" ```yaml\nname: kurtosis\non:\n  workflow_dispatch:\n  schedule:\n    - cron: \"0 */12 * * *\"\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\njobs:\n  prepare-reth:\n    name: prepare-reth\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n  test:\n    name: run kurtosis\n    runs-on: reth\n    timeout-minutes: 60\n    needs: prepare-reth\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Download reth image\n        uses: actions/download-artifact@v4\n        with:\n          name: artifacts\n          path: /tmp\n      - name: Load Docker image\n        run: |\n          docker image ls -a\n          docker load -i /tmp/reth_image.tar &\n          wait\n          docker image ls -a\n      - name: Run kurtosis\n        uses: ethpandaops/kurtosis-assertoor-github-action@v1\n        with:\n          ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n  notify-on-error:\n    name: notify-on-error\n    runs-on: reth\n    needs: test\n    if: failure()\n    steps:\n      - name: Slack Webhook Action\n        uses: rtCamp/action-slack-notify@v2\n        with:\n          slack_color: ${{ job.status }}\n          slack_message: Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}\n          slack_webhook: ${{ secrets.SLACK_WEBHOOK_URL }}\n``` ","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 53: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/49f4a590-f4bf-4b23-b45d-9eb1446c361c.yml\", \"line\": 53, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"          slack_message: Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":440,"stats":{"NumofTriggers":3,"Triggers":["push","schedule","workflow_dispatch"],"NumofJobs":3,"NumofActions":4,"Actions":["actions/checkout","actions/download-artifact","ethpandaops/kurtosis-assertoor-github-action","rtCamp/action-slack-notify"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ethpandaops/kurtosis-assertoor-github-action"},{"version":"v2","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/prepare-reth.yml"],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":39491,"level":3,"name":"rancher/rancher","file_name":"merge-server-manifest.yml","len":5,"prompt":"Generate a GitHub Workflow named `Merge server manifest` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: it is called from another workflow. The workflow has one job. The job id of the 1st job is `merge-server-manifest`. This job will run on runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }} runner. The job `merge-server-manifest` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `merge-server-manifest`. The job sets an environment variable to use: `REGISTRY` is set to `stgregistry.suse.com`. The job `merge-server-manifest` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup Environment Variables`. This step runs action `./.github/actions/setup-tag-env`.The 3rd step is named `Set up Docker Buildx`. This step runs action `docker/setup-buildx-action` tagged as v3. The 4th step is named `Load Secrets from Vault`. This step runs action `rancher-eio/read-vault-secrets` from the main branch. The step defines an input parameter for the action: `secrets` is set to `secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\nsecret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n`. The 5th step is named `Docker Registry Login`. This step runs action `docker/login-action` tagged as v3. The step defines 3 input parameters for the action: `username` is set to `${{ env.STAGE_REGISTRY_USERNAME }}`, `password` is set to `${{ env.STAGE_REGISTRY_PASSWORD }}` and `registry` is set to `${{ env.REGISTRY }}`. The 6th step is named `Create manifest list and push`. This step runs a script: `docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n`. The 7th step is named `Create head manifest list and push`. This step runs a script: `if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n  docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\nfi\n`. The 8th step is named `Inspect image`. This step runs a script: `docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n`. /no-think","answer":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ \n      github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","llm_response":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\n\njobs:\n  merge-server-manifest:\n    runs-on:\n      runner: 2cpu-linux-x64\n      image: ubuntu22-full-x64\n      group: ${{ github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","repository_id":22232001,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"runner\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/3de9e8af-613b-49d1-adda-1f569125c5ce.yml\", \"line\": 8, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      runner: 2cpu-linux-x64\\n      ^~~~~~~\", \"end_column\": 13}, {\"message\": \"unexpected key \\\"image\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/3de9e8af-613b-49d1-adda-1f569125c5ce.yml\", \"line\": 9, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      image: ubuntu22-full-x64\\n      ^~~~~~\", \"end_column\": 12}]","meteor_score":0.9872730267187741,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":536,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":5,"Actions":["./.github/actions/setup-tag-env","actions/checkout","docker/login-action","docker/setup-buildx-action","rancher-eio/read-vault-secrets"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/setup-tag-env"},{"version":"v3","name":"docker/setup-buildx-action"},{"version":"main","name":"rancher-eio/read-vault-secrets"},{"version":"v3","name":"docker/login-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":16232,"level":1,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":" ```yaml\nname: Check/coverage\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\npermissions:\n  contents: read\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\njobs:\n  coverage:\n    name: ${{ matrix.name ||matrix.target }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n          - name: \"Linux, g++-10\"\n            target: \"coverage-linux-g++-10\"\n            cache-key: \"linux-g++-10\"\n            compiler: \"g++-10\"\n          - name: \"Linux, clang++-10\"\n            target: \"coverage-linux-clang++-10\"\n            cache-key: \"linux-clang++-10\"\n            compiler: \"clang++-10\"\n          - name: \"Windows, Visual Studio 2019 (x86)\"\n            target: \"coverage-windows-vs2019-x86\"\n            cache-key: \"windows-vs2019-x86\"\n            compiler: \"cl\"\n          - name: \"Windows, Visual Studio 2019 (x64)\"\n            target: \"coverage-windows-vs2019-x64\"\n            cache-key: \"windows-vs2019-x64\"\n            compiler: \"cl\"\n          - name: \"macOS, clang++-10\"\n            target: \"coverage-macos-clang++-10\"\n            cache-key: \"macos-clang++-10\"\n            compiler: \"clang++-10\"\n          - name: \"macOS, clang++-11\"\n            target: \"coverage-macos-clang++-11\"\n            cache-key: \"macos-clang++-11\"\n            compiler: \"clang++-11\"\n          - name: \"macOS, clang++-12\"\n            target: \"coverage-macos-clang++-12\"\n            cache-key: \"macos-clang++-12\"\n            compiler: \"clang++-12\"\n    runs-on: \"ubuntu-latest\"\n    steps:\n      - name: \"Checkout\"\n        uses: \"actions/checkout@v2\"\n      - name: \"Install dependencies\"\n        uses: \"actions/setup-python@v2\"\n        with:\n          python-version: \"3.9\"\n      - name: \"Install dependencies (MacOS)\"\n        if: runner.os != 'Windows'\n        shell: bash\n        run: |\n          python -m pip install --upgrade pip\n          python -m pip install --upgrade pipenv\n          python -m pip install --upgrade gsutil\n          python -m pipenv install --dev --python ${{ matrix.python }}\n          python -m pipenv sync\n      - name: \"Install dependencies (Windows)\"\n        if: runner.os == 'Windows'\n        shell: cmd\n        run: |\n          python -m pip install --upgrade pip\n          python -m pip install --upgrade pipenv\n          python -m pip install --upgrade gsutil\n          python -m pipenv install --dev --python ${{ matrix.python }}\n          python -m pipenv sync\n      - name: \"Install gcovr\"\n        if: runner.os != 'Windows'\n        shell: bash\n        run: |\n          python -m pip install gcovr\n      - name: \"Install gcovr (Windows)\"\n        if: runner.os == 'Windows'\n        shell: cmd\n        run: |\n          python -m pip install gcovr\n      - name: \"Install Google Cloud SDK\"\n        uses: \"google-github-actions/setup-gcloud@master\"\n        with:\n          version: \"latest\"\n          service_account_key: \"${{ secrets.gcs-cache-key }}\"\n          export_default_credentials: \"true\"\n      - name: \"Cache\"\n        uses: \"actions/cache@v2.1.6\"\n        with:\n          path: \"~/.cache/pip\"\n          key: \"coverage-${{ runner.os }}-${{ matrix.cache-key }}\"\n          restore-keys: \"coverage-${{ runner.os }}-\"\n      - name: \"Compile\"\n        shell: bash\n        run: |\n          python -m pipenv run compile\n      - name: \"Run tests\"\n        shell: bash\n        run: |\n          python -m pipenv run test --coverage --no-cov-report\n      - name: \"Upload coverage\"\n        shell: bash\n        run: |\n          python -m pip install gcovr\n          python -m pipenv run coverage combine\n          python -m pipenv run coverage xml\n          gsutil -m rsync -r coverage/ gs://${{ github.repository }}/coverage/\n      - name: \"Upload coverage to codecov.io\"\n        uses: codecov/codecov-action@v1\n        with:\n          file: coverage.xml\n          flags: unittests\n        if: runner.os != 'Windows'\n``` ","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"python\\\" is not defined in object type {cache-key: string; compiler: string; name: string; target: string}\", \"filepath\": \"../../tmp/8cab5ca9-2b25-407e-aa1e-5720da535791.yml\", \"line\": 60, \"column\": 172, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 172}, {\"message\": \"shell name \\\"cmd\\\" is invalid on macOS or Linux. available names are \\\"bash\\\", \\\"pwsh\\\", \\\"python\\\", \\\"sh\\\"\", \"filepath\": \"../../tmp/8cab5ca9-2b25-407e-aa1e-5720da535791.yml\", \"line\": 68, \"column\": 16, \"kind\": \"shell-name\", \"snippet\": \"        shell: cmd\\n               ^~~\", \"end_column\": 18}, {\"message\": \"property \\\"python\\\" is not defined in object type {cache-key: string; compiler: string; name: string; target: string}\", \"filepath\": \"../../tmp/8cab5ca9-2b25-407e-aa1e-5720da535791.yml\", \"line\": 69, \"column\": 172, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 172}, {\"message\": \"shell name \\\"cmd\\\" is invalid on macOS or Linux. available names are \\\"bash\\\", \\\"pwsh\\\", \\\"python\\\", \\\"sh\\\"\", \"filepath\": \"../../tmp/8cab5ca9-2b25-407e-aa1e-5720da535791.yml\", \"line\": 82, \"column\": 16, \"kind\": \"shell-name\", \"snippet\": \"        shell: cmd\\n               ^~~\", \"end_column\": 18}]","meteor_score":0.21725008947356447,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":3563,"level":3,"name":"paradigmxyz/reth","file_name":"kurtosis.yml","len":5,"prompt":"Generate a GitHub Workflow named `kurtosis` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) the scheduled time has come: every 12 hours. 3) The workflow would run whenever there is a push event to: a tag whose name matches *. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 3 jobs. The job id of the 1st job is `prepare-reth`. This job will call a reusable workflow located at `./.github/workflows/prepare-reth.yml`. The job will pass 2 inputs to the called workflow: the input `image_tag` is `ghcr.io/paradigmxyz/reth:kurtosis-ci` and the input `binary_name` is `reth`. The 2nd job is named `run kurtosis` and its job id is `test`. Before this job runs, `prepare-reth` must complete successfully. This job will execute on any runner that is a member of Reth. The maximum number of minutes to run the job is 60. The job `test` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Download reth image`. This step runs action `actions/download-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `artifacts` and `path` is set to `/tmp`. The 3rd step is named `Load Docker image`. This step runs a script: `docker load -i /tmp/reth_image.tar &\nwait\ndocker image ls -a\n`. The 4th step is named `Run kurtosis`. This step runs action `ethpandaops/kurtosis-assertoor-github-action` tagged as v1. The step defines an input parameter for the action: `ethereum_package_args` is set to `.github/assets/kurtosis_network_params.yaml`. The job id of the 3rd job is `notify-on-error`. Before this job runs, `test` must complete successfully. This job will run only if the condition(failure()) is met. This job will execute on any runner that is a member of Reth. The job `notify-on-error` has one step. The 1st step is named `Slack Webhook Action`. The step sets 3 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}`, `SLACK_MESSAGE` is set to `Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}` and `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK_URL }}`. This step runs action `rtCamp/action-slack-notify` tagged as v2. /no-think","answer":"```yaml\n# Runs `assertoor` tests on a `kurtosis` testnet.\n\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n\n  push:\n    tags:\n    - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    timeout-minutes: 60\n    strategy:\n      fail-fast: false\n    name: run kurtosis\n    runs-on:\n      group: Reth\n    needs:\n    - prepare-reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on:\n      group: Reth\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","llm_response":"```yaml\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n    - cron: '0 */12 * * *'\n  push:\n    tags:\n      - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Call prepare-reth reusable workflow\n        uses: ./.github/workflows/prepare-reth.yml\n        with:\n          image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n          binary_name: reth\n\n  test:\n    runs-on: ubuntu-latest\n    needs: prepare-reth\n    timeout-minutes: 60\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Download reth image\n        uses: actions/download-artifact@v4\n        with:\n          name: artifacts\n          path: /tmp\n      - name: Load Docker image\n        run: |\n          docker load -i /tmp/reth_image.tar &\n          wait\n          docker image ls -a\n      - name: Run kurtosis\n        uses: ethpandaops/kurtosis-assertoor-github-action@v1\n        with:\n          ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    runs-on: ubuntu-latest\n    needs: test\n    if: failure()\n    steps:\n      - name: Slack Webhook Action\n        run: |\n          echo \"SLACK_COLOR=${{ job.status }}\" >> $GITHUB_ENV\n          echo \"SLACK_MESSAGE=Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}\" >> $GITHUB_ENV\n          echo \"SLACK_WEBHOOK=${{ secrets.SLACK_WEBHOOK_URL }}\" >> $GITHUB_ENV\n        env:\n          SLACK_COLOR: ${{ job.status }}\n          SLACK_MESSAGE: ${{ env.SLACK_MESSAGE }}\n          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n        uses: rtCamp/action-slack-notify@v2\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"this step is for running shell command since it contains at least one of \\\"run\\\", \\\"shell\\\" keys, but also contains \\\"uses\\\" key which is used for running action\", \"filepath\": \"../../tmp/09bc6f7d-b81c-4d4d-8c36-6da5b85a79ca.yml\", \"line\": 70, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"        uses: rtCamp/action-slack-notify@v2\\n        ^~~~~\", \"end_column\": 13}]","meteor_score":0.8852193512225347,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":440,"stats":{"NumofTriggers":3,"Triggers":["push","schedule","workflow_dispatch"],"NumofJobs":3,"NumofActions":4,"Actions":["actions/checkout","actions/download-artifact","ethpandaops/kurtosis-assertoor-github-action","rtCamp/action-slack-notify"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ethpandaops/kurtosis-assertoor-github-action"},{"version":"v2","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/prepare-reth.yml"],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":21604,"level":3,"name":"zama-ai/tfhe-rs","file_name":"gpu_signed_integer_classic_tests.yml","len":5,"prompt":"Generate a GitHub Workflow named `Cuda - Signed integer tests with classical PBS` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) a label is added to a pull request. The workflow modifies the default permissions for the GITHUB_TOKEN: the workflow disables permissions for the GITHUB_TOKEN across all scopes. This permission setting applies to all jobs in the workflow. The workflow sets 15 environment variables to use: `CARGO_TERM_COLOR` is set to `always`, `ACTION_RUN_URL` is set to `${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}`, `RUSTFLAGS` is set to `-C target-cpu=native`, `RUST_BACKTRACE` is set to `full`, `RUST_MIN_STACK` is set to `8388608`, `SLACK_CHANNEL` is set to `${{ secrets.SLACK_CHANNEL }}`, `SLACK_ICON` is set to `https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png`, `SLACK_USERNAME` is set to `${{ secrets.BOT_USERNAME }}`, `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK }}`, `SLACKIFY_MARKDOWN` is set to `True`, `IS_PULL_REQUEST` is set to `${{ github.event_name == 'pull_request' }}`, `PULL_REQUEST_MD_LINK` is set to ``, `CHECKOUT_TOKEN` is set to `${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}`, `SECRETS_AVAILABLE` is set to `${{ secrets.JOB_SECRET != '' }}` and `EXTERNAL_CONTRIBUTION_RUNNER` is set to `gpu_ubuntu-22.04`. The workflow has 5 jobs. The job id of the 1st job is `should-run`. This job will run on ubuntu-latest runner. The job `should-run` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `pull-requests` scope. This permission setting only applies to the job `should-run`. The job `should-run` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Check for file changes` and its id is `changed-files`. This step runs action `tj-actions/changed-files` whose commit is ed68ef82c095e0d48ec87eccea555d944a631a4c. The step defines an input parameter for the action: `files_yaml` is set to `gpu:\n  - tfhe/Cargo.toml\n  - tfhe/build.rs\n  - backends/tfhe-cuda-backend/**\n  - tfhe/src/core_crypto/gpu/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n  - tfhe/src/integer/gpu/**\n  - tfhe/src/shortint/parameters/**\n  - tfhe/src/high_level_api/**\n  - tfhe/src/c_api/**\n  - 'tfhe/docs/**/**.md'\n  - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n  - scripts/integer-tests.sh\n  - ci/slab.toml\n`. This job has an output: `gpu_test` is defined as ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}. The 2nd job is named `Setup instance (cuda-signed-classic-tests)` and its job id is `setup-instance`. Before this job runs, `should-run` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')) is met. This job will run on ubuntu-latest runner. The job `setup-instance` has 2 steps. The 1st step is named `Start remote instance` and its id is `start-remote-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 6 input parameters for the action: `mode` is set to `start`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}`, `backend` is set to `hyperstack` and `profile` is set to `gpu-test`. The 2nd step is named `Start GitHub instance` and its id is `start-github-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'false') is met. This step runs a script: `echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n`. This job has an output: `runner-name` is defined as ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}. The 3rd job is named `CUDA signed integer tests with classical PBS` and its job id is `cuda-tests-linux`. Before this job runs, `should-run` and `setup-instance` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')) is met. This job will run on ${{ needs.setup-instance.outputs.runner-name }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. For each object in the [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}] list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Only a single job using the ${{ github.workflow_ref }} concurrency group will run at a time. When this job is queued, any currently running job in the same concurrency group will be canceled. The job `cuda-tests-linux` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Setup Hyperstack dependencies`. This step runs action `./.github/actions/gpu_setup`.The step defines 3 input parameters for the action: `cuda-version` is set to `${{ matrix.cuda }}`, `gcc-version` is set to `${{ matrix.gcc }}` and `github-instance` is set to `${{ env.SECRETS_AVAILABLE == 'false' }}`. The 3rd step is named `Install latest stable`. This step runs action `dtolnay/rust-toolchain` whose commit is 888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1. The step defines an input parameter for the action: `toolchain` is set to `stable`. The 4th step is named `Run signed integer tests`. This step runs a script: `BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n`. The 4th job is named `Slack Notification` and its job id is `slack-notify`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}) is met. This job will run on ubuntu-latest runner. When the job run fails, the workflow run will not fail. The job `slack-notify` has 2 steps. The 1st step is named `Set pull-request URL`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request') is met. The step sets an environment variable to use: `PR_BASE_URL` is set to `${{ vars.PR_BASE_URL }}`. This step runs a script: `echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n`. The 2nd step is named `Send message`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ needs.cuda-tests-linux.result }}` and `SLACK_MESSAGE` is set to `Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. The 5th job is named `Teardown instance (cuda-signed-classic-tests)` and its job id is `teardown-instance`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.setup-instance.result == 'success' }}) is met. This job will run on ubuntu-latest runner. The job `teardown-instance` has 2 steps. The 1st step is named `Stop remote instance` and its id is `stop-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 5 input parameters for the action: `mode` is set to `stop`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}` and `label` is set to `${{ needs.setup-instance.outputs.runner-name }}`. The 2nd step is named `Slack Notification`. This step will run only if the condition(${{ failure() }}) is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}` and `SLACK_MESSAGE` is set to `Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. When this step fails, the job will move on to the next step. /no-think","answer":"```yaml\n# Signed integer GPU tests on an RTXA6000 VM on hyperstack with classical PBS\nname: Cuda - Signed integer tests with classical PBS\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  # Secrets will be available only to zama-ai organization members\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\non:\n  # Allows you to run this workflow manually from the Actions tab as an alternative.\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\n\npermissions: {}\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v46.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled'\n      && needs.should-run.outputs.gpu_test == 'true') || (github.event.action ==\n      'labeled' && github.event.label.name == 'approved' && \n      needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n\n      # This instance will be spawned especially for pull-request from forked repository\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == \n      'pull_request' && needs.setup-instance.result != 'skipped')\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      # explicit include-based build matrix, of known valid options\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: 'Integer GPU signed integer tests with classical PBS finished\n          with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK\n          }}[action run](${{ env.ACTION_RUN_URL }}))'\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n\n    - name: Slack Notification\n      if: ${{ failure() }}\n      continue-on-error: true\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Instance teardown (cuda-signed-classic-tests) finished with\n          status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})'\n\n```","llm_response":" ```yaml\nname: Cuda - Signed integer tests with classical PBS\non:\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: 8388608\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: True\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: |\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n  PULL_REQUEST_MD_LINK: \"\"\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          fetch-depth: 0\n          persist-credentials: false\n          token: ${{ env.CHECKOUT_TOKEN }}\n      - name: Check for file changes\n        id: changed-files\n        uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c\n        with:\n          files_yaml: |\n            gpu:\n              - tfhe/Cargo.toml\n              - tfhe/build.rs\n              - backends/tfhe-cuda-backend/**\n              - tfhe/src/core_crypto/gpu/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n              - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n              - tfhe/src/integer/gpu/**\n              - tfhe/src/shortint/parameters/**\n              - tfhe/src/high_level_api/**\n              - tfhe/src/c_api/**\n              - 'tfhe/docs/**/**.md'\n              - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n              - scripts/integer-tests.sh\n              - ci/slab.toml\n  setup-instance:\n    runs-on: ubuntu-latest\n    needs: should-run\n    permissions:\n      contents: read\n      pull-requests: read\n    outputs:\n      runner-name: ${{ needs.setup-instance.outputs.runner-name }}\n    if: |\n      github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n    steps:\n      - name: Start remote instance\n        if: ${{ env.SECRETS_AVAILABLE == 'true' }}\n        uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n        with:\n          mode: start\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          backend: hyperstack\n          profile: gpu-test\n        continue-on-error: true\n        env:\n          GITHUB_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n          SLAB_BASE_URL: ${{ secrets.SLAB_BASE_URL }}\n          JOB_SECRET: ${{ secrets.JOB_SECRET }}\n          SLAB_ACTION_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n          SLAB_JOB_ID: ${{ secrets.SLAB_JOB_ID }}\n      - name: Start GitHub instance\n        if: ${{ env.SECRETS_AVAILABLE == 'false' }}\n        run: |\n          echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n        continue-on-error: true\n        env:\n          EXTERNAL_CONTRIBUTION_RUNNER: ${{ env.EXTERNAL_CONTRIBUTION_RUNNER }}\n  cuda-tests-linux:\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    needs: setup-instance\n    permissions:\n      contents: read\n    strategy:\n      fail-fast: false\n      matrix:\n        os: [ubuntu-22.04]\n        cuda: [12.2]\n        gcc: [11]\n    env:\n      CARGO_TERM_COLOR: always\n      RUST_BACKTRACE: full\n      RUST_MIN_STACK: 8388608\n      GITHUB_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n      SLAB_BASE_URL: ${{ secrets.SLAB_BASE_URL }}\n      JOB_SECRET: ${{ secrets.JOB_SECRET }}\n      SLAB_ACTION_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n      SLAB_JOB_ID: ${{ secrets.SLAB_JOB_ID }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          fetch-depth: 0\n          persist-credentials: false\n      - name: Setup Hyperstack dependencies\n        uses: ./.github/actions/gpu_setup\n        with:\n          cuda-version: ${{ matrix.cuda }}\n          gcc-version: ${{ matrix.gcc }}\n      - name: Install latest stable\n        uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n        with:\n          toolchain: stable\n      - name: Run signed integer tests\n        run: |\n          BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n  slack-notify:\n    runs-on: ubuntu-latest\n    needs: cuda-tests-linux\n    if: |\n      ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\n    steps:\n      - name: Send message\n        uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n        with:\n          SLACK_COLOR: ${{ job.status }}\n          SLACK_MESSAGE: |\n            Integer GPU signed integer tests with classical PBS finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})\n  teardown-instance:\n    runs-on: ubuntu-latest\n    needs: cuda-tests-linux\n    if: |\n      ${{ always() && needs.setup-instance.result == 'success' }}\n    steps:\n      - name: Stop remote instance\n        if: ${{ env.SECRETS_AVAILABLE == 'true' }}\n        uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n        with:\n          mode: stop\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          label: ${{ needs.setup-instance.outputs.runner-name }}\n        continue-on-error: true\n        env:\n          GITHUB_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n          SLAB_BASE_URL: ${{ secrets.SLAB_BASE_URL }}\n          JOB_SECRET: ${{ secrets.JOB_SECRET }}\n          SLAB_ACTION_TOKEN: ${{ secrets.SLAB_ACTION_TOKEN }}\n          SLAB_JOB_ID: ${{ secrets.SLAB_JOB_ID }}\n``` ","repository_id":76862382,"lint_valid":false,"lint_output":"[{\"message\": \"key \\\"PULL_REQUEST_MD_LINK\\\" is duplicated in env. previously defined at line:18,col:3. note that this key is case insensitive\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 20, \"column\": 3, \"kind\": \"syntax-check\", \"snippet\": \"  PULL_REQUEST_MD_LINK: \\\"\\\"\\n  ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 23}, {\"message\": \"property \\\"setup-instance\\\" is not defined in object type {should-run: {outputs: {gpu_test: string}; result: string}}\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 63, \"column\": 24, \"kind\": \"expression\", \"snippet\": \"      runner-name: ${{ needs.setup-instance.outputs.runner-name }}\\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 63}, {\"message\": \"if: condition \\\"${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}\\\\n\\\" is always evaluated to true because extra characters are around ${{ }}\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 132, \"column\": 9, \"kind\": \"if-cond\", \"snippet\": \"    if: |\\n        ^\", \"end_column\": 9}, {\"message\": \"if: condition \\\"${{ always() && needs.setup-instance.result == 'success' }}\\\\n\\\" is always evaluated to true because extra characters are around ${{ }}\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 144, \"column\": 9, \"kind\": \"if-cond\", \"snippet\": \"    if: |\\n        ^\", \"end_column\": 9}, {\"message\": \"property \\\"setup-instance\\\" is not defined in object type {cuda-tests-linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 144, \"column\": 25, \"kind\": \"expression\", \"snippet\": \"    if: |\", \"end_column\": 25}, {\"message\": \"property \\\"setup-instance\\\" is not defined in object type {cuda-tests-linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/c0e7d1af-796c-4bc1-92aa-16d31b40ac8a.yml\", \"line\": 155, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"          label: ${{ needs.setup-instance.outputs.runner-name }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 61}]","meteor_score":0.6065091562135494,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":2003,"stats":{"NumofTriggers":2,"Triggers":["pull_request","workflow_dispatch"],"NumofJobs":5,"NumofActions":9,"Actions":["./.github/actions/gpu_setup","actions/checkout","actions/checkout","dtolnay/rust-toolchain","rtCamp/action-slack-notify","rtCamp/action-slack-notify","tj-actions/changed-files","zama-ai/slab-github-runner","zama-ai/slab-github-runner"],"Actions_details":[{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"ed68ef82c095e0d48ec87eccea555d944a631a4c","name":"tj-actions/changed-files"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":null,"name":"./.github/actions/gpu_setup"},{"version":"888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1","name":"dtolnay/rust-toolchain"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":5}}
{"id":54038,"level":3,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has 2 values: prefer-lowest and prefer-stable. The job `test` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.composer/cache/files` and `key` is set to `composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 3 input parameters for the action: `php-version` is set to `${{ matrix.php }}`, `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick` and `coverage` is set to `none`. The 4th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n`. The 5th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v3. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `packages/vue/package.json`. The 6th step is named `Install Node Dependencies`. This step runs a script: `npm install`. The 7th step is named `Run npm tests`. This step runs a script: `npm run test`. The 8th step is named `Run PHP Tests`. This step runs a script: `vendor/bin/phpunit`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":" ```yaml\nname: Test Fusion Library\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    types: [opened, synchronize, reopened]\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php:\n          - 8.3\n        laravel:\n          - 11.*\n        dependency-version:\n          - prefer-lowest\n          - prefer-stable\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Cache Composer Dependencies\n        uses: actions/cache@v4\n        with:\n          path: ~/.composer/cache/files\n          key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n          coverage: none\n      - name: Install PHP Dependencies\n        run: |\n          composer self-update\n          composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n          cache: npm\n          cache-dependency-path: packages/vue/package.json\n      - name: Install Node Dependencies\n        run: npm install\n      - name: Run npm tests\n        run: npm run test\n      - name: Run PHP Tests\n        run: vendor/bin/phpunit\n``` ","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 10: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/bd8c30c0-22db-48e2-b6c3-100332a783c3.yml\", \"line\": 10, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":64177,"level":3,"name":"bitwarden/server","file_name":"repository-management.yml","len":5,"prompt":"Generate a GitHub Workflow named `Repository management` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives 3 inputs: task-its default value is Version Bump, this input represents task to execute, it has options including Version Bump, Version Bump and Cut rc and Version Bump and Cut hotfix-rc, it must be supplied and the data type is choice; target_ref-its default value is main, this input represents branch/tag to target for cut, it must be supplied and the data type is string; version_number_override-this input represents new version override (leave blank for automatic calculation, example: '2024.1.0'), it is optional and the data type is string. The workflow has 5 jobs. The 1st job is named `Setup` and its job id is `setup`. This job will run on ubuntu-24.04 runner. The job `setup` has one step. The 1st step is named `Set branch` and its id is `set-branch`. The step sets an environment variable to use: `TASK` is set to `${{ inputs.task }}`. This step runs a script: `if [[ \"$TASK\" == \"Version Bump\" ]]; then\n  BRANCH=\"none\"\nelif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n  BRANCH=\"rc\"\nelif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n  BRANCH=\"hotfix-rc\"\nfi\n\necho \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n`. This job has an output: `branch` is defined as ${{ steps.set-branch.outputs.branch }}. The 2nd job is named `Cut branch` and its job id is `cut_branch`. Before this job runs, `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cut_branch` has 4 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `${{ inputs.target_ref }}` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Check if ${{ needs.setup.outputs.branch }} branch exists`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n  echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 4th step is named `Cut branch`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `git switch --quiet --create $BRANCH_NAME\ngit push --quiet --set-upstream origin $BRANCH_NAME\n`. The 3rd job is named `Bump Version` and its job id is `bump_version`. Before this job runs, `cut_branch` and `setup` must complete successfully. This job will run only if the condition(${{ always() }}) is met. This job will run on ubuntu-24.04 runner. The job `bump_version` has 13 steps. The 1st step is named `Validate version input format`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-check` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ inputs.version_number_override }}`. The 2nd step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 3rd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 4th step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 5th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 6th step is named `Get current version` and its id is `current-version`. This step runs a script: `CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\necho \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n`. The 7th step is named `Verify input version`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. The step sets 2 environment variables to use: `CURRENT_VERSION` is set to `${{ steps.current-version.outputs.version }}` and `NEW_VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `# Error if version has not changed.\nif [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n  echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n\n# Check if version is newer.\nprintf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\nif [ $? -eq 0 ]; then\n  echo \"Version is newer than the current version.\"\nelse\n  echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 8th step is named `Calculate next release version` and its id is `calculate-next-version`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-next` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ steps.current-version.outputs.version }}`. The 9th step is named `Bump version props - Version Override` and its id is `bump-version-override`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ inputs.version_number_override }}`. The 10th step is named `Bump version props - Automatic Calculation` and its id is `bump-version-automatic`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ steps.calculate-next-version.outputs.version }}`. The 11th step is named `Set final version output` and its id is `set-final-version-output`. The step sets an environment variable to use: `VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n  echo \"version=$VERSION\" >> $GITHUB_OUTPUT\nelif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n  echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\nfi\n`. The 12th step is named `Commit files`. This step runs a script: `git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a`. The 13th step is named `Push changes`. This step runs a script: `git push`. This job has an output: `version` is defined as ${{ steps.set-final-version-output.outputs.version }}. The 4th job is named `Cherry-Pick Commit(s)` and its job id is `cherry_pick`. Before this job runs, `bump_version` and `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cherry_pick` has 5 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 4th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 5th step is named `Perform cherry-pick(s)`. The step sets an environment variable to use: `CUT_BRANCH` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `# Function for cherry-picking\ncherry_pick () {\n  local source_branch=$1\n  local destination_branch=$2\n\n  # Get project commit/version from source branch\n  git switch $source_branch\n  SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n  SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  # Get project commit/version from destination branch\n  git switch $destination_branch\n  DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n    git push -u origin $destination_branch\n  fi\n}\n\n# If we are cutting 'hotfix-rc':\nif [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n  # If the 'rc' branch exists:\n  if [[ $(git ls-remote --heads origin rc) ]]; then\n\n    # Chery-pick from 'rc' into 'hotfix-rc'\n    cherry_pick rc hotfix-rc\n\n    # Cherry-pick from 'main' into 'rc'\n    cherry_pick main rc\n\n  # If the 'rc' branch does not exist:\n  else\n\n    # Cherry-pick from 'main' into 'hotfix-rc'\n    cherry_pick main hotfix-rc\n\n  fi\n\n# If we are cutting 'rc':\nelif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n  # Cherry-pick from 'main' into 'rc'\n  cherry_pick main rc\n\nfi\n`. The 5th job is named `Move finalization database scripts` and its job id is `move_future_db_scripts`. Before this job runs, `cherry_pick` must complete successfully. This job will call a reusable workflow located at `./.github/workflows/_move_finalization_db_scripts.yml`. The job will pass a secret to the called workflow: the secret `special_case_secrets` is `inherit`. /no-think","answer":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: \"New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\"\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n\n  cut_branch:\n    name: Cut branch\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    needs: setup\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out target ref\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n\n  bump_version:\n    name: Bump Version\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    needs:\n    - cut_branch\n    - setup\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      id: calculate-next-version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      id: bump-version-override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      id: bump-version-automatic\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ \n        steps.set-final-version-output.outputs.version }}\" -a\n\n    - name: Push changes\n      run: git push\n\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    needs:\n    - bump_version\n    - setup\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out main branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets: inherit\n\n```","llm_response":"```yaml\nname: Repository management\ntrue:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\n        required: false\n        type: string\njobs:\n  setup:\n    name: Setup\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    runs-on: ubuntu-24.04\n    steps:\n    - env:\n        TASK: ${{ inputs.task }}\n      id: set-branch\n      name: Set branch\n      run: \"if [[ \\\"$TASK\\\" == \\\"Version Bump\\\" ]]; then\\n  BRANCH=\\\"none\\\"\\nelif\\\n        \\ [[ \\\"$TASK\\\" == \\\"Version Bump and Cut rc\\\" ]]; then\\n  BRANCH=\\\"rc\\\"\\n\\\n        elif [[ \\\"$TASK\\\" == \\\"Version Bump and Cut hotfix-rc\\\" ]]; then\\n  BRANCH=\\\"\\\n        hotfix-rc\\\"\\nfi\\n\\necho \\\"branch=$BRANCH\\\" >> $GITHUB_OUTPUT\\n\"\n  cut_branch:\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    name: Cut branch\n    needs:\n    - setup\n    runs-on: ubuntu-24.04\n    steps:\n    - id: app-token\n      name: Generate GH App token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n    - env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      run: \"if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\\n  echo \\\"\\\n        $BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\\\"\\\n        \\ >> $GITHUB_STEP_SUMMARY\\n  exit 1\\nfi\\n\"\n    - env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      name: Cut branch\n      run: \"git switch --quiet --create $BRANCH_NAME\\n git push --quiet --set-upstream\\\n        \\ origin $BRANCH_NAME\\n\"\n  bump_version:\n    if: ${{ always() }}\n    name: Bump Version\n    needs:\n    - cut_branch\n    - setup\n    runs-on: ubuntu-24.04\n    steps:\n    - if: ${{ inputs.version_number_override != '' }}\n      name: Validate version input format\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n    - id: app-token\n      name: Generate GH App token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n    - name: Configure Git\n      run: 'git config --local user.email \"actions@github.com\"\n\n        git config --local user.name \"Github Actions\"\n\n        '\n    - name: Install xmllint\n      run: 'sudo apt-get update\n\n        sudo apt-get install -y libxml2-utils\n\n        '\n    - id: current-version\n      name: Get current version\n      run: 'CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\"\n        Directory.Build.props)\n\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n        '\n    - env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      if: ${{ inputs.version_number_override != '' }}\n      name: Verify input version\n      run: \"# Error if version has not changed.\\nif [[ \\\"$NEW_VERSION\\\" == \\\"$CURRENT_VERSION\\\"\\\n        \\ ]]; then\\n  echo \\\"Specified override version is the same as the current\\\n        \\ version.\\\" >> $GITHUB_STEP_SUMMARY\\n  exit 1\\nfi\\n\\n# Check if version is\\\n        \\ newer.\\nprintf '%s\\n' \\\"${CURRENT_VERSION}\\\" \\\"${NEW_VERSION}\\\" | sort -C\\\n        \\ -V\\nif [ $? -eq 0 ]; then\\n  echo \\\"Version is newer than the current version\\\"\\\n        \\nelse\\n  echo \\\"Version is older than the current version\\\" >> $GITHUB_STEP_SUMMARY\\n\\\n        \\  exit 1\\nfi\\n\"\n    - id: calculate-next-version\n      if: ${{ inputs.version_number_override == '' }}\n      name: Calculate next release version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n    - id: bump-version-override\n      if: ${{ inputs.version_number_override != '' }}\n      name: Bump version props - Version Override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n    - id: bump-version-automatic\n      if: ${{ inputs.version_number_override == '' }}\n      name: Bump version props - Automatic Calculation\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n    - env:\n        VERSION: ${{ inputs.version_number_override }}\n      id: set-final-version-output\n      name: Set final version output\n      run: \"if [[ \\\"${{ steps.bump-version-override.outcome }}\\\" = \\\"success\\\" ]];\\\n        \\ then\\n  echo \\\"version=$VERSION\\\" >> $GITHUB_OUTPUT\\nelif [[ \\\"${{ steps.bump-version-automatic.outcome\\\n        \\ }}\\\" = \\\"success\\\" ]]; then\\n  echo \\\"version=${{ steps.calculate-next-version.outputs.version\\\n        \\ }}\\\" >> $GITHUB_OUTPUT\\nfi\\n\"\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version\n        }}\" -a\n    - name: Push changes\n      run: git push\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n  cherry_pick:\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    name: Cherry-Pick Commit(s)\n    needs:\n    - bump_version\n    - setup\n    runs-on: ubuntu-24.04\n    steps:\n    - id: app-token\n      name: Generate GH App token\n      uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n    - name: Checkout repository\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n    - name: Configure Git\n      run: 'git config --local user.email \"actions@github.com\"\n\n        git config --local user.name \"Github Actions\"\n\n        '\n    - name: Install xmllint\n      run: 'sudo apt-get update\n\n        sudo apt-get install -y libxml2-utils\n\n        '\n    - env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      name: Perform cherry-pick(s)\n      run: \"# Function for cherry-picking\\ncherry_pick () {\\n  local source_branch=$1\\n\\\n        \\  local destination_branch=$2\\n\\n  # Get project commit/version from source\\\n        \\ branch\\n  git switch $source_branch\\n  SOURCE_COMMIT=$(git log --reverse\\\n        \\ --pretty=format:\\\"%H\\\" --max-count=1 Directory.Build.props)\\n  SOURCE_VERSION=$(xmllint\\\n        \\ -xpath \\\"/Project/PropertyGroup/Version/text()\\\" Directory.Build.props)\\n\\\n        \\n  # Get project commit/version from destination branch\\n  git switch $destination_branch\\n\\\n        \\  DESTINATION_VERSION=$(xmllint -xpath \\\"/Project/PropertyGroup/Version/text()\\\"\\\n        \\ Directory.Build.props)\\n\\n  if [[ \\\"$DESTINATION_VERSION\\\" != \\\"$SOURCE_VERSION\\\"\\\n        \\ ]]; then\\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\\n\\\n        \\    git push -u origin $destination_branch\\n  fi\\n}\\n\\n# If we are cutting\\\n        \\ 'hotfix-rc':\\nif [[ \\\"$CUT_BRANCH\\\" == \\\"hotfix-rc\\\" ]]; then\\n\\n  # If\\\n        \\ the 'rc' branch exists:\\n  if [[ $(git ls-remote --heads origin rc) ]];\\\n        \\ then\\n\\n    # Chery-pick from 'rc' into 'hotfix-rc'\\n    cherry_pick rc\\\n        \\ hotfix-rc\\n\\n    # Cherry-pick from 'main' into 'rc'\\n    cherry_pick main\\\n        \\ rc\\n\\n  # If the 'rc' branch does not exist:\\n  else\\n\\n    # Cherry-pick\\\n        \\ from 'main' into 'hotfix-rc'\\n    cherry_pick main hotfix-rc\\n\\n  fi\\n\\n\\\n        \\n# If we are cutting 'rc':\\nelif [[ \\\"$CUT_BRANCH\\\" == \\\"rc\\\" ]]; then\\n\\n\\\n        \\  # Cherry-pick from 'main' into 'rc'\\n  cherry_pick main rc\\nfi\\n\"\n  move_future_db_scripts:\n    if: ${{ always() }}\n    name: Move future db scripts\n    secrets: inherit\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n\n```","repository_id":3499830,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 21: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/374d1eaa-9164-4d03-9875-302a777e3483.yml\", \"line\": 21, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"          example: '2024.1.0')\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":2364,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":5,"NumofActions":10,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/create-github-app-token","actions/create-github-app-token","actions/create-github-app-token","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-check","bitwarden/gh-actions/version-next"],"Actions_details":[{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-check"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-next"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_move_finalization_db_scripts.yml"],"NumofSteps":23,"CyclomaticComplexity":3}}
{"id":54036,"level":3,"name":"fusion-php/fusion","file_name":"tests-vue.yml","len":5,"prompt":"Generate a GitHub Workflow named `Vue App Tests` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has one value: prefer-stable. The job sets an environment variable to use: `APP_URL` is set to `http://127.0.0.1:8000`. The job `test` has 14 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.cache/composer` and `key` is set to `composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 2 input parameters for the action: `php-version` is set to `${{ matrix.php }}` and `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick`. The 4th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v4. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `apps/vue/package-lock.json`. The 5th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n`. The 6th step is named `Copy Environment File`. This step runs a script: `cp .env.example .env\nphp artisan key:generate\n`. The 7th step is named `Install Node Dependencies`. This step runs a script: `npm ci`. The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 10th step is named `Build Assets`. This step runs a script: `npm run build`. The 11th step is named `Install Playwright Browsers`. This step runs a script: `npx playwright install --with-deps`. The 12th step is named `Run Laravel Server`. This step runs a script: `php artisan serve --no-reload &`. The 13th step is named `Run Playwright tests`. This step runs a script: `npx playwright test`. The 14th step is named `Upload artifact playwright-report to apps/vue/playwright/reports/`. This step will run only if the condition(${{ !cancelled() }}) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `playwright-report`, `path` is set to `apps/vue/playwright/reports/` and `retention-days` is set to `30`. /no-think","answer":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: http://127.0.0.1:8000\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      working-directory: apps/vue\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      working-directory: apps/vue\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      working-directory: apps/vue\n      run: npm ci\n\n      # Install Rollup's Linux-specific optional dependency explicitly\n      # This is needed due to an npm bug with optional dependencies:\n      # https://github.com/npm/cli/issues/4828\n    - name: Install Rollup Linux Dependencies\n      working-directory: packages/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Install Rollup Linux Dependencies\n      working-directory: apps/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Build Assets\n      working-directory: apps/vue\n      run: npm run build\n\n    - name: Install Playwright Browsers\n      working-directory: apps/vue\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      working-directory: apps/vue\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      working-directory: apps/vue\n      run: npx playwright test\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","llm_response":"<think>Okay, let's see. The user wants a GitHub Workflow YAML file for a Vue App Tests. The main language is PHP, but they're using Vue, so probably a Laravel project with a Vue frontend.\n\nFirst, the workflow name is \"Vue App Tests\". Triggers: push to main branch and pull_request events like opened, synchronize, reopened. So I need to set up the on section with push and pull_request.\n\nNext, the job. The job name is dynamic with matrix variables: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V:${{ matrix.dependency-version }}. Job ID is 'test'. Runs on ubuntu-latest.\n\nMatrix strategy: php has 8.3, laravel 11.*, dependency-version prefer-stable. So the matrix should have those values. Wait, each variable has one value, so the matrix will generate one job run. But the user says \"combinations\", even though each has one value, so it's a single job.\n\nEnvironment variable APP_URL set to http://127.0.0.1:8000.\n\n14 steps. Let's list them:\n\n1. Checkout with actions/checkout@v4.\n2. Cache Composer Dependencies using actions/cache@v4. Path ~/.cache/composer, key based on laravel, php, and hash of composer.json in apps/vue.\n3. Setup PHP with shivammathur/setup-php@v2. PHP version from matrix, extensions listed.\n4. Setup Node.js with actions/setup-node@v4. Node 20, cache npm, dependency path apps/vue/package-lock.json.\n5. Install PHP deps: composer self-update, update with matrix.dependency-version, artisan version.\n6. Copy env file: cp .env.example .env and key:generate.\n7. npm ci.\n8. Install Rollup Linux deps: npm install @rollup/rollup-linux-x64-gnu. Wait, step 8 and 9 are the same? The user said step 8 and 9 both have the same name and script. Maybe a typo, but I'll follow as given.\n9. Same as step 8.\n10. Build assets: npm run build.\n11. Playwright install with deps.\n12. Run Laravel server in background.\n13. Run Playwright tests.\n14. Upload artifact if not cancelled. Use actions/upload-artifact@v4, name playwright-report, path apps/vue/playwright/reports/, retention 30 days.\n\nWait, step 8 and 9 are identical. Maybe the user made a mistake, but the instructions say to include both. So I'll duplicate the step.\n\nCheck the matrix variables: php: [8.3], laravel: ['11.*'], dependency-version: ['prefer-stable']. So the matrix is a single combination.\n\nAlso, the job name uses the matrix variables, so the job name will be P:8.3, L:11.*, V: prefer-stable.\n\nEnvironment variable APP_URL is set in the job.\n\nEach step's details need to be correctly formatted. For example, step 5's script has multiple commands on separate lines. In YAML, that's a | or > for multiline.\n\nStep 14 has a condition: if not cancelled. So uses if: ${{ !cancelled() }}.\n\nMake sure the YAML structure is correct: name, on, jobs, job id, name, runs-on, strategy, matrix, env, steps.\n\nCheck indentation. Steps are a list under the job.\n\nLet me structure it step by step.\n\nFirst, the workflow name:\n\nname: Vue App Tests\n\nTriggers:\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\n\nThen jobs:\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.3']\n        laravel: ['11.*']\n        dependency-version: ['prefer-stable']\n    env:\n      APP_URL: http://127.0.0.1:8000\n\nThen the steps as a list.\n\nStep 1: uses: actions/checkout@v4, name: Checkout repository\n\nStep 2: uses: actions/cache@v4, with: path and key.\n\nKey is composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}\n\nWait, the composer.json path is apps/vue/composer.json? The user specified that in the key.\n\nStep 3: setup-php with php-version and extensions.\n\nExtensions list: dom, curl, ... as given.\n\nStep 4: setup-node with node-version 20, cache npm, cache-dependency-path apps/vue/package-lock.json.\n\nStep 5: run script with composer commands.\n\nScript:\ncomposer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n\nIn YAML, use | for literal block scalar.\n\nStep 6: cp .env.example .env and key:generate.\n\nStep 7: npm ci.\n\nStep 8 and 9: same npm install command.\n\nStep 10: npm run build.\n\nStep 11: npx playwright install --with-deps.\n\nStep 12: php artisan serve --no-reload & (background process)\n\nStep 13: npx playwright test.\n\nStep 14: upload-artifact with condition.\n\nCheck if step 14 is only when not cancelled. So if: ${{ !cancelled() }}\n\nName, path, retention-days.\n\nNow, write the YAML accordingly.\n\nWait, the user said \"The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`.\"\n\nSo steps 8 and 9 are identical. Maybe a mistake, but we have to include both as per instructions.\n\nAlso, check that all steps are correctly numbered.\n\nNow, structure each step with name, uses/run, etc.\n\nFor steps that use actions, like checkout, cache, setup-php, setup-node, upload-artifact, use 'uses'.\n\nFor script steps, use 'run'.\n\nStep 5,6,7,8,9,10,11,12,13 are run steps.\n\nStep 14 is uses with condition.\n\nWait, step 14 is \"This step will run only if the condition(${{ !cancelled() }}) is met.\" So add if: ${{ !cancelled() }} to that step.\n\nNow, compiling all together.\n\nCheck for correct YAML syntax, indentation, quotes where necessary.\n\nFor example, in the matrix, the values are strings, so '8.3', '11.*', 'prefer-stable'.\n\nIn the key for cache, using matrix variables correctly.\n\nAlso, the path for cache is ~/.cache/composer.\n\nIn step 4, cache-dependency-path is apps/vue/package-lock.json.\n\nIn step 2, the key uses hashFiles('apps/vue/composer.json'), so the path is apps/vue/composer.json.\n\nWait, the user wrote: key is set to composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}.\n\nSo the composer.json is in apps/vue/composer.json.\n\nSimilarly, in step 4, cache-dependency-path is apps/vue/package-lock.json.\n\nSo the project structure has apps/vue/ directory.\n\nNow, writing the YAML.\n</think>\n\n```yaml\nname: Vue App Tests\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.3']\n        laravel: ['11.*']\n        dependency-version: ['prefer-stable']\n    env:\n      APP_URL: http://127.0.0.1:8000\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Cache Composer Dependencies\n        uses: actions/cache@v4\n        with:\n          path: ~/.cache/composer\n          key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}\n\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: npm\n          cache-dependency-path: apps/vue/package-lock.json\n\n      - name: Install PHP Dependencies\n        run: |\n          composer self-update\n          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n          php artisan --version\n\n      - name: Copy Environment File\n        run: |\n          cp .env.example .env\n          php artisan key:generate\n\n      - name: Install Node Dependencies\n        run: npm ci\n\n      - name: Install Rollup Linux Dependencies\n        run: npm install @rollup/rollup-linux-x64-gnu\n\n      - name: Install Rollup Linux Dependencies\n        run: npm install @rollup/rollup-linux-x64-gnu\n\n      - name: Build Assets\n        run: npm run build\n\n      - name: Install Playwright Browsers\n        run: npx playwright install --with-deps\n\n      - name: Run Laravel Server\n        run: php artisan serve --no-reload &\n\n      - name: Run Playwright tests\n        run: npx playwright test\n\n      - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n        if: ${{ !cancelled() }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: playwright-report\n          path: apps/vue/playwright/reports/\n          retention-days: 30\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 9: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/ff4cbb18-83f6-4e4b-a9d7-08927b8006fe.yml\", \"line\": 9, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":704,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/cache","actions/checkout","actions/setup-node","actions/upload-artifact","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v4","name":"actions/setup-node"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":14,"CyclomaticComplexity":1}}
{"id":27677,"level":1,"name":"paddlepaddle/paddle","file_name":"docker.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow has 5 outputs: docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}; docker_inference_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_inference_image }}; docker_coverage_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_coverage_image }}; docker_build_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_build_image }}; docker_distribute_file-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_distribute_image }}. The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on:\n      group: Docker-build\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ \n        steps.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_image: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - id: build-docker-images\n      name: build docker images\n      env:\n        PR_ID: ${{ github.event.pull_request.number }}\n        COMMIT_ID: ${{ github.event.pull_request.head.sha }}\n        docker_cpu_file: Dockerfile.cuda9_cudnn7_gcc48_py35_centos6\n        docker_inference_file: \n          Dockerfile.cuda11.2_cudnn8.1_trt8.4_gcc8.2_ubuntu18\n        docker_coverage_file: Dockerfile.cuda117_cudnn8_gcc82_ubuntu18_coverage\n        docker_build_file: Dockerfile.cuda11.2_cudnn8_gcc82_trt8\n        docker_distribute_file: Dockerfile.cuda123_cudnn9_gcc122_ubuntu20\n      run: |\n        set -x\n        wget -q --no-proxy https://paddle-github-action.bj.bcebos.com/PR/Paddle/${PR_ID}/${COMMIT_ID}/Paddle.tar.gz --no-check-certificate\n        tar xf Paddle.tar.gz --strip-components=1\n        rm Paddle.tar.gz\n        cd tools/dockerfile\n        bash ci_dockerfile.sh\n        cd ../..\n\n        # docker build images\n        declare -A docker_files=([\"docker_cpu\"]=\"$docker_cpu_file\" [\"docker_inference\"]=\"$docker_inference_file\" [\"docker_coverage\"]=\"$docker_coverage_file\" [\"docker_build\"]=\"$docker_build_file\" [\"docker_distribute\"]=\"$docker_distribute_file\")\n        for name in \"${!docker_files[@]}\"\n        do\n          md5_value=`md5sum tools/dockerfile/${docker_files[$name]} | awk '{print $1}'`\n          docker_image=\"ccr-2vdh3abv-pub.cnc.bj.baidubce.com/ci/paddle:${md5_value}\"\n          declare \"${name}_image=${docker_image}\"\n          echo \"${name}_image=${docker_image}\" >> $GITHUB_OUTPUT\n          set +e\n          docker pull $docker_image\n          if [ $? -eq 0 ];then\n            echo use docker cache\n          else\n            docker build -t $docker_image -f tools/dockerfile/${docker_files[$name]} .\n            docker push $docker_image\n            echo end docker build\n          fi\n          set -e\n        done\n\n        # clean workspace\n        cd ${{ github.workspace }}\n        rm -rf ./*\n\n```","llm_response":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ steps.build-docker-images.outputs.docker_build_image\n        }}\n      docker_distribute_file: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        submodules: recursive\n    - name: Build Docker image\n      id: build-docker-images\n      uses: ./.github/actions/build-docker-images\n      with:\n        docker_file: docker/Dockerfile\n        docker_file_inference: docker/Dockerfile.inference\n        docker_file_coverage: docker/Dockerfile.coverage\n        docker_file_build: docker/Dockerfile.build\n        docker_file_distribute: docker/Dockerfile.distribute\n        docker_tag: latest\n        docker_tag_inference: latest\n        docker_tag_coverage: latest\n        docker_tag_build: latest\n        docker_tag_distribute: latest\n        push: false\n\n```","repository_id":3993770,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"docker_distribute_image\\\" is not defined in object type {docker_build_image: string; docker_coverage_image: string; docker_cpu_image: string; docker_distribute_file: string; docker_inference_image: string}\", \"filepath\": \"../../tmp/30d96fc4-37c2-43a4-ad79-fdc47d46b678.yml\", \"line\": 18, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 75}]","meteor_score":0.4241289206105068,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":806,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":1,"CyclomaticComplexity":1}}
{"id":54036,"level":3,"name":"fusion-php/fusion","file_name":"tests-vue.yml","len":5,"prompt":"Generate a GitHub Workflow named `Vue App Tests` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has one value: prefer-stable. The job sets an environment variable to use: `APP_URL` is set to `http://127.0.0.1:8000`. The job `test` has 14 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.cache/composer` and `key` is set to `composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 2 input parameters for the action: `php-version` is set to `${{ matrix.php }}` and `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick`. The 4th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v4. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `apps/vue/package-lock.json`. The 5th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n`. The 6th step is named `Copy Environment File`. This step runs a script: `cp .env.example .env\nphp artisan key:generate\n`. The 7th step is named `Install Node Dependencies`. This step runs a script: `npm ci`. The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 10th step is named `Build Assets`. This step runs a script: `npm run build`. The 11th step is named `Install Playwright Browsers`. This step runs a script: `npx playwright install --with-deps`. The 12th step is named `Run Laravel Server`. This step runs a script: `php artisan serve --no-reload &`. The 13th step is named `Run Playwright tests`. This step runs a script: `npx playwright test`. The 14th step is named `Upload artifact playwright-report to apps/vue/playwright/reports/`. This step will run only if the condition(${{ !cancelled() }}) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `playwright-report`, `path` is set to `apps/vue/playwright/reports/` and `retention-days` is set to `30`. /no-think","answer":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: http://127.0.0.1:8000\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      working-directory: apps/vue\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      working-directory: apps/vue\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      working-directory: apps/vue\n      run: npm ci\n\n      # Install Rollup's Linux-specific optional dependency explicitly\n      # This is needed due to an npm bug with optional dependencies:\n      # https://github.com/npm/cli/issues/4828\n    - name: Install Rollup Linux Dependencies\n      working-directory: packages/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Install Rollup Linux Dependencies\n      working-directory: apps/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Build Assets\n      working-directory: apps/vue\n      run: npm run build\n\n    - name: Install Playwright Browsers\n      working-directory: apps/vue\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      working-directory: apps/vue\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      working-directory: apps/vue\n      run: npx playwright test\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","llm_response":" ```yaml\nname: Vue App Tests\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    types: [ opened, synchronize, reopened ]\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: ['prefer-stable']\n    env:\n      APP_URL: 'http://127.0.0.1:8000'\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Cache Composer Dependencies\n        uses: actions/cache@v4\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}\n        path: ~/.cache/composer\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n      - name: Install PHP Dependencies\n        run: |\n          composer self-update\n          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n          php artisan --version\n      - name: Copy Environment File\n        run: |\n          cp .env.example .env\n          php artisan key:generate\n      - name: Install Node Dependencies\n        run: npm ci\n      - name: Install Rollup Linux Dependencies\n        run: npm install @rollup/rollup-linux-x64-gnu\n      - name: Install Rollup Linux Dependencies\n        run: npm install @rollup/rollup-linux-x64-gnu\n      - name: Build Assets\n        run: npm run build\n      - name: Install Playwright Browsers\n        run: npx playwright install --with-deps\n      - name: Run Laravel Server\n        run: php artisan serve --no-reload &\n      - name: Run Playwright tests\n        run: npx playwright test\n      - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n        if: ${{ !cancelled() }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: playwright-report\n          path: apps/vue/playwright/reports/\n          retention-days: 30\n``` ","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 9: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/75e5c16e-a37e-40fb-a5b1-fb02967fc598.yml\", \"line\": 9, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":704,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/cache","actions/checkout","actions/setup-node","actions/upload-artifact","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v4","name":"actions/setup-node"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":14,"CyclomaticComplexity":1}}
{"id":54036,"level":3,"name":"fusion-php/fusion","file_name":"tests-vue.yml","len":5,"prompt":"Generate a GitHub Workflow named `Vue App Tests` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has one value: prefer-stable. The job sets an environment variable to use: `APP_URL` is set to `http://127.0.0.1:8000`. The job `test` has 14 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.cache/composer` and `key` is set to `composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 2 input parameters for the action: `php-version` is set to `${{ matrix.php }}` and `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick`. The 4th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v4. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `apps/vue/package-lock.json`. The 5th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\nphp artisan --version\n`. The 6th step is named `Copy Environment File`. This step runs a script: `cp .env.example .env\nphp artisan key:generate\n`. The 7th step is named `Install Node Dependencies`. This step runs a script: `npm ci`. The 8th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 9th step is named `Install Rollup Linux Dependencies`. This step runs a script: `npm install @rollup/rollup-linux-x64-gnu`. The 10th step is named `Build Assets`. This step runs a script: `npm run build`. The 11th step is named `Install Playwright Browsers`. This step runs a script: `npx playwright install --with-deps`. The 12th step is named `Run Laravel Server`. This step runs a script: `php artisan serve --no-reload &`. The 13th step is named `Run Playwright tests`. This step runs a script: `npx playwright test`. The 14th step is named `Upload artifact playwright-report to apps/vue/playwright/reports/`. This step will run only if the condition(${{ !cancelled() }}) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `playwright-report`, `path` is set to `apps/vue/playwright/reports/` and `retention-days` is set to `30`. /no-think","answer":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: http://127.0.0.1:8000\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('apps/vue/composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n\n    - name: Install PHP Dependencies\n      working-directory: apps/vue\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n\n    - name: Copy Environment File\n      working-directory: apps/vue\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n\n    - name: Install Node Dependencies\n      working-directory: apps/vue\n      run: npm ci\n\n      # Install Rollup's Linux-specific optional dependency explicitly\n      # This is needed due to an npm bug with optional dependencies:\n      # https://github.com/npm/cli/issues/4828\n    - name: Install Rollup Linux Dependencies\n      working-directory: packages/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Install Rollup Linux Dependencies\n      working-directory: apps/vue\n      run: npm install @rollup/rollup-linux-x64-gnu\n\n    - name: Build Assets\n      working-directory: apps/vue\n      run: npm run build\n\n    - name: Install Playwright Browsers\n      working-directory: apps/vue\n      run: npx playwright install --with-deps\n\n    - name: Run Laravel Server\n      working-directory: apps/vue\n      run: php artisan serve --no-reload &\n\n    - name: Run Playwright tests\n      working-directory: apps/vue\n      run: npx playwright test\n\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      uses: actions/upload-artifact@v4\n      if: ${{ !cancelled() }}\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n\n```","llm_response":"```yaml\nname: Vue App Tests\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    types:\n      - opened\n      - synchronize\n      - reopened\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: [8.3]\n        laravel: ['11.*']\n        dependency-version: [prefer-stable]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.cache/composer\n        key: composer-app-vue-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('apps/vue/composer.json') }}\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n    - name: Setup Node.js\n      uses: actions/setup-node@v4\n      with:\n        node-version: 20\n        cache: npm\n        cache-dependency-path: apps/vue/package-lock.json\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n        php artisan --version\n    - name: Copy Environment File\n      run: |\n        cp .env.example .env\n        php artisan key:generate\n    - name: Install Node Dependencies\n      run: npm ci\n    - name: Install Rollup Linux Dependencies\n      run: |\n        npm install @rollup/rollup-linux-x64-gnu\n    - name: Install Rollup Linux Dependencies\n      run: |\n        npm install @rollup/rollup-linux-x64-gnu\n    - name: Build Assets\n      run: npm run build\n    - name: Install Playwright Browsers\n      run: npx playwright install --with-deps\n    - name: Run Laravel Server\n      run: php artisan serve --no-reload &\n    - name: Run Playwright tests\n      run: npx playwright test\n    - name: Upload artifact playwright-report to apps/vue/playwright/reports/\n      if: !cancelled()\n      uses: actions/upload-artifact@v4\n      with:\n        name: playwright-report\n        path: apps/vue/playwright/reports/\n        retention-days: 30\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"string should not be empty\", \"filepath\": \"../../tmp/8d670432-ff1e-471a-aa99-a13a5308bb65.yml\", \"line\": 66, \"column\": 11, \"kind\": \"syntax-check\", \"snippet\": \"      if: !cancelled()\\n          ^~~~~~~~~~~~\", \"end_column\": 22}, {\"message\": \"unexpected end of input while parsing variable access, function call, null, bool, int, float or string. expecting \\\"IDENT\\\", \\\"(\\\", \\\"INTEGER\\\", \\\"FLOAT\\\", \\\"STRING\\\"\", \"filepath\": \"../../tmp/8d670432-ff1e-471a-aa99-a13a5308bb65.yml\", \"line\": 66, \"column\": 11, \"kind\": \"expression\", \"snippet\": \"      if: !cancelled()\\n          ^~~~~~~~~~~~\", \"end_column\": 22}]","meteor_score":0.0,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":704,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/cache","actions/checkout","actions/setup-node","actions/upload-artifact","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v4","name":"actions/setup-node"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":14,"CyclomaticComplexity":1}}
{"id":39491,"level":3,"name":"rancher/rancher","file_name":"merge-server-manifest.yml","len":5,"prompt":"Generate a GitHub Workflow named `Merge server manifest` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: it is called from another workflow. The workflow has one job. The job id of the 1st job is `merge-server-manifest`. This job will run on runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }} runner. The job `merge-server-manifest` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `merge-server-manifest`. The job sets an environment variable to use: `REGISTRY` is set to `stgregistry.suse.com`. The job `merge-server-manifest` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup Environment Variables`. This step runs action `./.github/actions/setup-tag-env`.The 3rd step is named `Set up Docker Buildx`. This step runs action `docker/setup-buildx-action` tagged as v3. The 4th step is named `Load Secrets from Vault`. This step runs action `rancher-eio/read-vault-secrets` from the main branch. The step defines an input parameter for the action: `secrets` is set to `secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\nsecret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n`. The 5th step is named `Docker Registry Login`. This step runs action `docker/login-action` tagged as v3. The step defines 3 input parameters for the action: `username` is set to `${{ env.STAGE_REGISTRY_USERNAME }}`, `password` is set to `${{ env.STAGE_REGISTRY_PASSWORD }}` and `registry` is set to `${{ env.REGISTRY }}`. The 6th step is named `Create manifest list and push`. This step runs a script: `docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n`. The 7th step is named `Create head manifest list and push`. This step runs a script: `if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n  docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\nfi\n`. The 8th step is named `Inspect image`. This step runs a script: `docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n`. /no-think","answer":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ \n      github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","llm_response":"<think>Okay, let's see. The user wants me to generate a GitHub Workflow YAML file named \"Merge server manifest\" for a Go repository. It's triggered by being called from another workflow. So first, I need to set up the workflow with the correct name and trigger.\n\nThe trigger should be workflow_call since it's called from another workflow. The primary language is Go, but maybe that's just context; the workflow itself might not need to specify the language unless for some steps, but the user didn't mention it affecting the workflow structure.\n\nNext, there's one job called merge-server-manifest. The runs-on specifies a custom runner: 2cpu-linux-x64, image=ubuntu22-full-x64, and run-id from github.run_id. Wait, GitHub Actions runners are usually specified as labels. The format here is a bit unusual. Normally, runs-on would be a list of labels, like ubuntu-latest. But the user says \"runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }}\". Hmm, maybe they're using a self-hosted runner with specific labels. So perhaps the runs-on should be a list containing \"2cpu-linux-x64\" and maybe other labels? Wait, the user wrote \"runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }}\". Maybe it's a single label string with parameters? But GitHub Actions doesn't work that way. Typically, runs-on is a list of labels. Maybe the user is using a custom label like \"2cpu-linux-x64\" and the image and run-id are part of the runner's configuration, but in the workflow YAML, you just specify the labels. So probably, the runs-on should be [\"2cpu-linux-x64\"] since that's the runner label. The image and run-id might be part of the runner's setup, not the workflow file. So I'll set runs-on: 2cpu-linux-x64 as the label.\n\nPermissions: For the job, GITHUB_TOKEN needs read access to contents and write to id-token. In GitHub Actions, permissions are set at the job level with the permissions key. So under the job, permissions: contents: read, id-token: write.\n\nEnvironment variable REGISTRY set to stgregistry.suse.com. So env section under the job.\n\nNow the steps:\n\n1. Checkout repository using actions/checkout@v4.\n\n2. Setup Environment Variables using ./.github/actions/setup-tag-env. Wait, the user says \"runs action ./github/actions/setup-tag-env\". So it's a local action in the repo. The path would be ./.github/actions/setup-tag-env.\n\n3. Set up Docker Buildx with docker/setup-buildx-action@v3.\n\n4. Load Secrets from Vault using rancher-eio/read-vault-secrets from main branch. So the action is rancher-eio/read-vault-secrets@main. The input 'secrets' is a string with specific format. Need to make sure the indentation is correct, maybe using | for multiline.\n\n5. Docker Registry Login with docker/login-action@v3, using env variables for username, password, registry.\n\n6. Create manifest list and push: a script step with the docker command.\n\n7. Create head manifest list and push: a conditional script.\n\n8. Inspect image: another script.\n\nWait, the user said 8 steps. Let me count:\n\n1. Checkout\n\n2. Setup Env Vars\n\n3. Docker Buildx\n\n4. Load Secrets\n\n5. Docker Login\n\n6. Create manifest\n\n7. Create head manifest\n\n8. Inspect\n\nYes, 8 steps.\n\nNow, permissions: The user says the permission setting only applies to the job. So under the job, set permissions.\n\nAlso, the workflow is called from another workflow, so the trigger is on: workflow_call.\n\nLet me structure the YAML.\n\nFirst, name: Merge server manifest\n\non: workflow_call\n\njobs:\n\n  merge-server-manifest:\n\n    runs-on: 2cpu-linux-x64  # assuming the label is 2cpu-linux-x64\n\n    permissions:\n\n      contents: read\n\n      id-token: write\n\n    env:\n\n      REGISTRY: stgregistry.suse.com\n\n    steps:\n\n      - name: Checkout repository\n\n        uses: actions/checkout@v4\n\n      - name: Setup Environment Variables\n\n        uses: ./.github/actions/setup-tag-env\n\n      - name: Set up Docker Buildx\n\n        uses: docker/setup-buildx-action@v3\n\n      - name: Load Secrets from Vault\n\n        uses: rancher-eio/read-vault-secrets@main\n\n        with:\n\n          secrets: |\n\n            secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n\n            secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n\n      - name: Docker Registry Login\n\n        uses: docker/login-action@v3\n\n        with:\n\n          username: ${{ env.STAGE_REGISTRY_USERNAME }}\n\n          password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n\n          registry: ${{ env.REGISTRY }}\n\n      - name: Create manifest list and push\n\n        run: |\n\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n\n      - name: Create head manifest list and push\n\n        run: |\n\n          if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n\n            docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n\n          fi\n\n      - name: Inspect image\n\n        run: |\n\n          docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\nWait, the user mentioned that the job modifies the default permissions for GITHUB_TOKEN. In GitHub Actions, the permissions are set under the job with the permissions key. So that's correct as above.\n\nThe environment variable REGISTRY is set at the job level, so env under the job.\n\nFor the Load Secrets step, the 'secrets' input is a string with two lines. Using | to preserve newlines.\n\nIn the Docker Registry Login step, the inputs are correctly referenced from env.\n\nThe scripts in steps 6,7,8 use 'run' with the provided commands. For step 7, the conditional is correctly placed in the run script.\n\nCheck if all steps are correctly named and ordered.\n\nYes, 8 steps as specified.\n\nNow, check if the runs-on is correctly specified. The user said \"runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }}\". But in GitHub Actions, runs-on is a list of labels. The image and run-id are probably part of the runner's configuration, not the workflow. So the workflow just needs to specify the label, which is 2cpu-linux-x64. So runs-on: 2cpu-linux-x64.\n\nWait, but maybe the user intended a more complex label? The description says \"runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }}\". Maybe it's a single label with parameters, but GitHub Actions labels are simple strings. So likely, the label is \"2cpu-linux-x64\", and the image and run-id are handled elsewhere. So the runs-on is \"2cpu-linux-x64\".\n\nAnother thing: the user mentioned \"primary programming language is Go\", but since the workflow is about merging manifests and Docker, maybe it's not directly relevant, but perhaps the setup-go step is missing? Wait, the user didn't mention any Go-specific steps, so probably not needed. The workflow is for merging manifests, so maybe the Go part is just context.\n\nEverything else seems to check out.\n</think>\n\n```yaml\nname: Merge server manifest\n\non:\n  workflow_call:\n\njobs:\n  merge-server-manifest:\n    runs-on: 2cpu-linux-x64\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Setup Environment Variables\n        uses: ./.github/actions/setup-tag-env\n\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n\n      - name: Load Secrets from Vault\n        uses: rancher-eio/read-vault-secrets@main\n        with:\n          secrets: |\n            secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n            secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n\n      - name: Docker Registry Login\n        uses: docker/login-action@v3\n        with:\n          username: ${{ env.STAGE_REGISTRY_USERNAME }}\n          password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n          registry: ${{ env.REGISTRY }}\n\n      - name: Create manifest list and push\n        run: |\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n\n      - name: Create head manifest list and push\n        run: |\n          if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n            docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n          fi\n\n      - name: Inspect image\n        run: |\n          docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n```","repository_id":22232001,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"2cpu-linux-x64\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/25e75ea0-7ba0-488b-8943-99f26b3be5f7.yml\", \"line\": 8, \"column\": 14, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: 2cpu-linux-x64\\n             ^~~~~~~~~~~~~~\", \"end_column\": 27}]","meteor_score":0.9705838972818649,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":536,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":5,"Actions":["./.github/actions/setup-tag-env","actions/checkout","docker/login-action","docker/setup-buildx-action","rancher-eio/read-vault-secrets"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/setup-tag-env"},{"version":"v3","name":"docker/setup-buildx-action"},{"version":"main","name":"rancher-eio/read-vault-secrets"},{"version":"v3","name":"docker/login-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":40182,"level":3,"name":"dotnetcore/aspectcore-framework","file_name":"build-pr-ci.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build for PR` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: there is activity relating to a pull request. The workflow has one job. The job id of the 1st job is `build-and-test`. This job will run on windows-latest runner. The job `build-and-test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Setup .NET Core`. This step runs action `actions/setup-dotnet` tagged as v4. The step defines an input parameter for the action: `dotnet-version` is set to `9.x`. The 3rd step is named `Build Reason`. This step runs a script: `echo ref: ${{github.ref}} event: ${{github.event_name}}`. The 4th step is named `Build`. This step uses bash to run a script: `for project in $(find ./src -name \"*.csproj\"); do\n  dotnet build --configuration Release $project\ndone\n`. The 5th step is named `Run Tests`. This step uses bash to run a script: `for project in $(find ./tests -name \"*.csproj\"); do\n  dotnet test --configuration Release $project\ndone\n`. /no-think","answer":"```yaml\nname: Build for PR\non:\n  pull_request:\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: 'echo ref: ${{github.ref}} event: ${{github.event_name}}'\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","llm_response":"<think>Okay, let me try to figure out how to create this GitHub Workflow based on the user's instructions. So, the user wants a workflow named \"Build for PR\" for a C# repository. It should trigger on pull request events. There's one job called build-and-test running on windows-latest. Five steps in total.\n\nFirst, the workflow name. The user said \"Build for PR\", so in YAML, that's name: \"Build for PR\". Then the on event: triggered by pull request activity. So on: pull_request.\n\nNext, the job. Job id is build-and-test. Runs on windows-latest. So under jobs, build-and-test with runs-on: windows-latest.\n\nNow the steps. Step 1: Checkout repository. Uses actions/checkout@v4 with fetch-depth 0. So step name, uses, and with fetch-depth: 0.\n\nStep 2: Setup .NET Core. Uses actions/setup-dotnet@v4, dotnet-version 9.x. So name, uses, with dotnet-version: 9.x.\n\nStep 3: Build Reason. Script echoing github.ref and github.event_name. So run: echo ref: ${{github.ref}} event: ${{github.event_name}}. Wait, the user says \"uses bash\", but since it's a simple echo, maybe it's okay as a run step. But the user specified \"uses bash\", so maybe shell: bash? Wait, the user says for steps 4 and 5, they use bash. Let me check.\n\nThe 3rd step: \"This step runs a script: echo ref...\". The user didn't specify shell here, but steps 4 and 5 say \"uses bash to run a script\". So for step 3, maybe it's just a run step without specifying shell, but since it's Windows runner, maybe default shell is PowerShell. Wait, but the user says step 3 is just a script. Wait, the user's instruction says step 3: \"runs a script: echo...\". Steps 4 and 5 specify \"uses bash\", so maybe step 3 is using the default shell, which on Windows is PowerShell. But the echo command might need to be adjusted. Wait, but the user provided the exact script: \"echo ref: ${{github.ref}} event: ${{github.event_name}}\". In PowerShell, echo is an alias for Write-Output, but maybe it's okay. However, the user might have intended it to be a bash script, but since steps 4 and 5 specify bash, maybe step 3 is also bash. Wait, but the runner is windows-latest. On Windows, the default shell for GitHub Actions is PowerShell. To use bash, you have to specify shell: bash. So steps 4 and 5 need shell: bash. Step 3's script is written as a bash command (using ${{...}} which is GitHub Actions syntax, but the echo command in bash vs PowerShell might differ. Wait, the ${{...}} is processed by GitHub Actions before passing to the shell, so the actual command would be like echo ref: refs/pull/123/merge event: pull_request. So in PowerShell, echo is okay, but maybe the user wants it in bash. Wait, the user's instruction for step 3 says \"runs a script\", not specifying the shell, but steps 4 and 5 specify \"uses bash\". So perhaps step 3 is using the default shell (PowerShell), but the script uses syntax that's okay in PowerShell. However, the user wrote the script as \"echo ref: ...\", which in PowerShell would work because echo is an alias. Alternatively, maybe the user expects it to be run in bash. Hmm.\n\nWait, the runner is windows-latest. By default, the shell for Windows runners is PowerShell. But steps 4 and 5 specify \"uses bash\", which would require using shell: bash. But on Windows, to run bash, you need to have Git Bash or something. GitHub Actions runners on Windows do have bash available via Git, I think. So for steps that need bash, you set shell: bash.\n\nSo step 3: the user says \"runs a script\", no mention of bash, so probably default shell (PowerShell). But the script is written as a bash-style echo. Wait, the ${{...}} is substituted by GitHub, so the actual command is echo ref: [value] event: [value]. In PowerShell, echo is fine. So maybe it's okay.\n\nBut the user's instruction for step 3 is to run that exact script. So the step would be:\n\n- name: Build Reason\n  run: echo ref: ${{ github.ref }} event: ${{ github.event_name }}\n\nBut on Windows, this would run in PowerShell. However, the user might have intended it to be in bash. Wait, the user didn't specify, so perhaps it's okay as is.\n\nThen steps 4 and 5: \"uses bash to run a script\", so those steps need shell: bash.\n\nSo for step 4:\n\n- name: Build\n  shell: bash\n  run: |\n    for project in $(find ./src -name \"*.csproj\"); do\n      dotnet build --configuration Release $project\n    done\n\nSimilarly for step 5.\n\nWait, but on Windows, using find might not work as expected because find is a Windows command (for searching files), whereas in Unix it's the find command. But since they're using bash, and the runner is Windows, but with Git Bash installed, the find command from Unix tools might be available. However, in GitHub Actions on Windows, when using shell: bash, the environment is set up so that Unix commands are available. So the find command should work.\n\nSo putting it all together.\n\nLet me structure the YAML.\n\nFirst, name: Build for PR\n\non: pull_request\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: '9.x'\n\n    - name: Build Reason\n      run: echo ref: ${{ github.ref }} event: ${{ github.event_name }}\n\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\nWait, but the user said step 3 is \"runs a script: echo ref: ...\", which is exactly what's written. So that's correct.\n\nCheck if all steps are there: 5 steps. Yes.\n\nCheck the job name: build-and-test. Yes.\n\nRuns on windows-latest. Yes.\n\nEach step's name and parameters as specified.\n\nFor step 2, dotnet-version is 9.x. The user wrote \"9.x\", so in YAML, it's a string, so '9.x' to be safe.\n\nIn step 3, the run command uses ${{ github.ref }} and ${{ github.event_name }}. The syntax is correct.\n\nIn steps 4 and 5, the scripts are correctly indented with | for multi-line.\n\nI think that's all. Let me check if there's any mistake.\n\nWait, the user said \"the workflow has one job. The job id of the 1st job is build-and-test\". So the job id is build-and-test, which is correctly set.\n\nYes. Looks good.\n</think>\n\n```yaml\nname: Build for PR\n\non: pull_request\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - name: Setup .NET Core\n        uses: actions/setup-dotnet@v4\n        with:\n          dotnet-version: '9.x'\n\n      - name: Build Reason\n        run: echo ref: ${{ github.ref }} event: ${{ github.event_name }}\n\n      - name: Build\n        shell: bash\n        run: |\n          for project in $(find ./src -name \"*.csproj\"); do\n            dotnet build --configuration Release $project\n          done\n\n      - name: Run Tests\n        shell: bash\n        run: |\n          for project in $(find ./tests -name \"*.csproj\"); do\n            dotnet test --configuration Release $project\n          done\n```","repository_id":3450821,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 20: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/af9f8143-12b7-413d-a290-7822c43a26e1.yml\", \"line\": 20, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: echo ref: ${{ github.ref }} event: ${{ github.event_name }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":207,"stats":{"NumofTriggers":1,"Triggers":["pull_request"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-dotnet"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/setup-dotnet"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":16232,"level":1,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\n# Cancel any workflow update on PR update\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name ||matrix.target }}\n    permissions:\n      contents: read # for checkout\n      security-events: write # for code-scanning\n    strategy:\n      fail-fast: false # run tests for all targets\n      matrix:\n        include:\n        - target: build\n          name: Build\n        - target: test\n          name: Test\n        - target: check\n          name: Check\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Setup Python\n      uses: actions/setup-python@v5\n      with:\n        python-version: '3.9'   # or the latest python version\n    - name: Install dependencies\n      run: |\n        python -m pip install pytest\n        python -m pip install pytest-cov\n    - name: Install gcloud SDK\n      uses: google-github-actions/setup@v4\n      with:\n        gcloud_version: '>=436.0.0'\n        project_id: ${{ github.repository }}\n        key_file: ${{ secrets.gcp-key }}\n    - name: Install build dependencies\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y build-essential cmake g++\n    - name: Restore cache\n      if: ${{ github.event_name == 'workflow_call' }}\n      uses: actions/cache@v4\n      with:\n        path: 'build'\n        key: ${{ runner.os }}-build-${{ hashFiles('**/CMakeLists.txt') }}\n        restore-keys: |\n          ${{ runner.os }}-build-\n    - name: Build\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        cmake -S . -B build\n        cmake --build build\n    - name: Install\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        cmake --install build\n    - name: Run tests\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        cd build\n        ctest\n    - name: Run coverage\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        cd build\n        ctest --test-dir test\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n    - name: Upload coverage to Codecov\n      uses: codecov/codecov@v4\n      with:\n        token: ${{ secrets.CODECOV_TOKEN }}\n    - name: Upload artifact\n      if: ${{ github.event_name == 'workflow_call' }}\n      uses: actions/upload-artifact@v4\n      with:\n        name: coverage-${{ github.run_id }}\n        path: 'build/coverage'\n        retention-days: 7\n    - name: Upload to GitHub Code Scanning\n      if: ${{ github.event_name == 'workflow_call' && github.repository == 'google/iree' }}\n      uses: github/codeql-action/upload-sarif@v3\n      with:\n        sarif_file: 'results.sarif'\n      env:\n        CODEQL_BUNDLE_PATH: ${{ secrets.CODEQL_BUNDLE_PATH }}\n    - name: Upload to GCS\n      if: ${{ github.event_name == 'workflow_call' && github.repository == 'google/iree' }}\n      uses: google-github-actions/upload-to-gcs@v1\n      env:\n        GCS_CACHE_BUCKET: ${{ inputs.gcs-cache-bucket }}\n        GCS_CACHE_KEY: ${{ secrets.gcs-cache-key }}\n      with:\n        key-file: gcp-key.json\n        path: 'build/coverage'\n        trusted: ${{ inputs.trusted }}\n\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"codecov_token\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/60d5a014-f309-43c3-bc9c-a96c8e5a6299.yml\", \"line\": 102, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        token: ${{ secrets.CODECOV_TOKEN }}\\n                   ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}, {\"message\": \"property \\\"codeql_bundle_path\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/60d5a014-f309-43c3-bc9c-a96c8e5a6299.yml\", \"line\": 116, \"column\": 33, \"kind\": \"expression\", \"snippet\": \"        CODEQL_BUNDLE_PATH: ${{ secrets.CODEQL_BUNDLE_PATH }}\\n                                ^~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 58}]","meteor_score":0.39693080712874174,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":3572,"level":3,"name":"paradigmxyz/reth","file_name":"sync.yml","len":5,"prompt":"Generate a GitHub Workflow named `sync test` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by an event: there is activity relating to a merge group in a merge queue. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `sync (${{ matrix.chain.bin }})` and its job id is `sync`. This job will execute on any runner that is a member of Reth. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `chain` has 2 values: {'bin': 'reth', 'block': 100000, 'build': 'install', 'chain': 'mainnet', 'tip': '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', 'unwind-target': '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'} and {'bin': 'op-reth', 'block': 10000, 'build': 'install-op', 'chain': 'base', 'tip': '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', 'unwind-target': '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}. The job sets 2 environment variables to use: `RUST_BACKTRACE` is set to `1` and `RUST_LOG` is set to `info,sync=error`. The maximum number of minutes to run the job is 60. The job `sync` has 9 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup mold`. This step runs action `rui314/setup-mold` tagged as v1. The 3rd step is named `Setup Rust toolchain`. This step runs action `dtolnay/rust-toolchain` from the stable branch. The 4th step is named `Cache Rust`. This step runs action `Swatinem/rust-cache` tagged as v2. The step defines an input parameter for the action: `cache-on-failure` is set to `True`. The 5th step is named `Build ${{ matrix.chain.bin }}`. This step runs a script: `make ${{ matrix.chain.build }}`. The 6th step is named `Run sync`. This step runs a script: `${{ matrix.chain.bin }} node \\\n  --chain ${{ matrix.chain.chain }} \\\n  --debug.tip ${{ matrix.chain.tip }} \\\n  --debug.max-block ${{ matrix.chain.block }} \\\n  --debug.terminate\n`. The 7th step is named `Verify the target block hash`. This step runs a script: `${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n  | grep ${{ matrix.chain.tip }}\n`. The 8th step is named `Run stage unwind for 100 blocks`. This step runs a script: `${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n`. The 9th step is named `Run stage unwind to block hash`. This step runs a script: `${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n`. /no-think","answer":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      group: Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: \"${{ matrix.chain.bin }} node \\\\\\n  --chain ${{ matrix.chain.chain }} \\\\\\\n        \\n  --debug.tip ${{ matrix.chain.tip }} \\\\\\n  --debug.max-block ${{ matrix.chain.block\\\n        \\ }} \\\\\\n  --debug.terminate\\n\"\n    - name: Verify the target block hash\n      run: \"${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\\\n        \\ headers ${{ matrix.chain.block }} \\\\\\n  | grep ${{ matrix.chain.tip }}\\n\"\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: \"${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\\\n        \\ }} --chain ${{ matrix.chain.chain }} \\n\"\n    strategy:\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n          unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n          unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n    timeout-minutes: 60\n\n```","llm_response":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\nenv:\n  CARGO_TERM_COLOR: always\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n    - Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: '${{ matrix.chain.bin }} node \\\n\n        --chain ${{ matrix.chain.chain }} \\\n\n        --debug.tip ${{ matrix.chain.tip }} \\\n\n        --debug.max-block ${{ matrix.chain.block }} \\\n\n        --debug.terminate\n\n        '\n    - name: Verify the target block hash\n      run: '${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\n        headers ${{ matrix.chain.block }} \\\n\n        | grep ${{ matrix.chain.tip }}\n\n        '\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: '${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\n        }} --chain ${{ matrix.chain.chain }} \n\n        '\n    strategy:\n      fail-fast: false\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: 0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4\n          unwind-target: 0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: 0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7\n          unwind-target: 0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de\n    timeout-minutes: 60\n\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/194750f4-75c4-4bee-995e-5c6b3b290f28.yml\", \"line\": 16, \"column\": 7, \"kind\": \"runner-label\", \"snippet\": \"    - Reth\\n      ^~~~\", \"end_column\": 10}]","meteor_score":0.8972260551241424,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":719,"stats":{"NumofTriggers":1,"Triggers":["merge_group"],"NumofJobs":1,"NumofActions":4,"Actions":["Swatinem/rust-cache","actions/checkout","dtolnay/rust-toolchain","rui314/setup-mold"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"rui314/setup-mold"},{"version":"stable","name":"dtolnay/rust-toolchain"},{"version":"v2","name":"Swatinem/rust-cache"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":9,"CyclomaticComplexity":1}}
{"id":27677,"level":1,"name":"paddlepaddle/paddle","file_name":"docker.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow has 5 outputs: docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}; docker_inference_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_inference_image }}; docker_coverage_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_coverage_image }}; docker_build_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_build_image }}; docker_distribute_file-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_distribute_image }}. The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on:\n      group: Docker-build\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ \n        steps.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_image: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - id: build-docker-images\n      name: build docker images\n      env:\n        PR_ID: ${{ github.event.pull_request.number }}\n        COMMIT_ID: ${{ github.event.pull_request.head.sha }}\n        docker_cpu_file: Dockerfile.cuda9_cudnn7_gcc48_py35_centos6\n        docker_inference_file: \n          Dockerfile.cuda11.2_cudnn8.1_trt8.4_gcc8.2_ubuntu18\n        docker_coverage_file: Dockerfile.cuda117_cudnn8_gcc82_ubuntu18_coverage\n        docker_build_file: Dockerfile.cuda11.2_cudnn8_gcc82_trt8\n        docker_distribute_file: Dockerfile.cuda123_cudnn9_gcc122_ubuntu20\n      run: |\n        set -x\n        wget -q --no-proxy https://paddle-github-action.bj.bcebos.com/PR/Paddle/${PR_ID}/${COMMIT_ID}/Paddle.tar.gz --no-check-certificate\n        tar xf Paddle.tar.gz --strip-components=1\n        rm Paddle.tar.gz\n        cd tools/dockerfile\n        bash ci_dockerfile.sh\n        cd ../..\n\n        # docker build images\n        declare -A docker_files=([\"docker_cpu\"]=\"$docker_cpu_file\" [\"docker_inference\"]=\"$docker_inference_file\" [\"docker_coverage\"]=\"$docker_coverage_file\" [\"docker_build\"]=\"$docker_build_file\" [\"docker_distribute\"]=\"$docker_distribute_file\")\n        for name in \"${!docker_files[@]}\"\n        do\n          md5_value=`md5sum tools/dockerfile/${docker_files[$name]} | awk '{print $1}'`\n          docker_image=\"ccr-2vdh3abv-pub.cnc.bj.baidubce.com/ci/paddle:${md5_value}\"\n          declare \"${name}_image=${docker_image}\"\n          echo \"${name}_image=${docker_image}\" >> $GITHUB_OUTPUT\n          set +e\n          docker pull $docker_image\n          if [ $? -eq 0 ];then\n            echo use docker cache\n          else\n            docker build -t $docker_image -f tools/dockerfile/${docker_files[$name]} .\n            docker push $docker_image\n            echo end docker build\n          fi\n          set -e\n        done\n\n        # clean workspace\n        cd ${{ github.workspace }}\n        rm -rf ./*\n\n```","llm_response":" ```yaml\nname: build docker\non:\n  workflow_call:\noutputs:\n  docker_cpu_image: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n  docker_inference_image: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n  docker_coverage_image: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n  docker_build_image: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n  docker_distribute_image: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\njobs:\n  build-docker-images:\n    name: build docker images\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.docker-build.outputs.docker_cpu_image }}\n      docker_inference_image: ${{ steps.docker-build.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ steps.docker-build.outputs.docker_coverage_image }}\n      docker_build_image: ${{ steps.docker-build.outputs.docker_build_image }}\n      docker_distribute_image: ${{ steps.docker-build.outputs.docker_distribute_image }}\n    steps:\n      - name: checkout repo\n        uses: actions/checkout@v3\n      - name: setup python\n        uses: actions/setup-python@v4\n        with:\n          python-version: '3.x'\n      - name: install dependencies\n        run: |\n          python -m pip install --upgrade pip\n          pip install -r dev/ci/requirements.txt\n      - name: build docker images\n        id: docker-build\n        uses: ./\n        with:\n          docker_build_push: false\n          docker_build_only: true\n          docker_build_image: true\n          docker_build_distribute: true\n          docker_build_push_distribute: false\n          docker_build_tag: ${{ github.ref }}-${{ github.run_number }}\n          docker_build_pull_base_image: false\n          docker_build_use_local_base_image: false\n          docker_build_use_local_base_image_tag: \"21.10\"\n          docker_build_use_local_base_image_repo: \"ghcr.io/apache/incubator-mxnet\"\n          docker_build_use_local_base_image_user: \"${{ secrets.DOCKERHUB_USERNAME }}\"\n          docker_build_use_local_base_image_password: \"${{ secrets.DOCKERHUB_TOKEN }}\"\n          docker_build_use_local_base_image_email: \"${{ secrets.DOCKERHUB_EMAIL }}\"\n          docker_build_use_local_base_image_registry: \"docker.io\"\n          docker_build_use_local_base_image_namespace: \"apache\"\n          docker_build_use_local_base_image_repo_prefix: \"incubator-mxnet\"\n          docker_build_use_local_base_image_tag_prefix: \"\"\n          docker_build_use_local_base_image_tag_suffix: \"-gpu\"\n          docker_build_use_local_base_image_force_pull: false\n          docker_build_use_local_base_image_force_rebuild: false\n          docker_build_use_local_base_image_platform: \"linux/amd64,linux/arm64\"\n          docker_build_use_local_base_image_target: \"apache/incubator-mxnet:21.10-gpu\"\n      - name: upload coverage to codecov\n        if: ${{ always() }}\n        uses: codecov/codecov-action@v3.1.0\n        with:\n          file: ./coverage/lcov.info\n          fail_ci_if_error: true\n          verbose: true\n        env:\n          CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}\n``` ","repository_id":3993770,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"outputs\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/ec7349f4-58d4-4b66-bbd5-04cc07bec170.yml\", \"line\": 4, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"outputs:\\n^~~~~~~~\", \"end_column\": 8}]","meteor_score":0.1700519037649035,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":806,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":1,"CyclomaticComplexity":1}}
{"id":40182,"level":3,"name":"dotnetcore/aspectcore-framework","file_name":"build-pr-ci.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build for PR` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: there is activity relating to a pull request. The workflow has one job. The job id of the 1st job is `build-and-test`. This job will run on windows-latest runner. The job `build-and-test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Setup .NET Core`. This step runs action `actions/setup-dotnet` tagged as v4. The step defines an input parameter for the action: `dotnet-version` is set to `9.x`. The 3rd step is named `Build Reason`. This step runs a script: `echo ref: ${{github.ref}} event: ${{github.event_name}}`. The 4th step is named `Build`. This step uses bash to run a script: `for project in $(find ./src -name \"*.csproj\"); do\n  dotnet build --configuration Release $project\ndone\n`. The 5th step is named `Run Tests`. This step uses bash to run a script: `for project in $(find ./tests -name \"*.csproj\"); do\n  dotnet test --configuration Release $project\ndone\n`. /no-think","answer":"```yaml\nname: Build for PR\non:\n  pull_request:\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: 'echo ref: ${{github.ref}} event: ${{github.event_name}}'\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","llm_response":"```yaml\nname: Build for PR\n\non: [pull_request]\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\n\n    - name: Build\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n      shell: bash\n\n    - name: Run Tests\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n      shell: bash\n\n```","repository_id":3450821,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 20: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/b4e7d18a-136a-4026-b31a-57a42b56ac5b.yml\", \"line\": 20, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":207,"stats":{"NumofTriggers":1,"Triggers":["pull_request"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-dotnet"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/setup-dotnet"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":64177,"level":3,"name":"bitwarden/server","file_name":"repository-management.yml","len":5,"prompt":"Generate a GitHub Workflow named `Repository management` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives 3 inputs: task-its default value is Version Bump, this input represents task to execute, it has options including Version Bump, Version Bump and Cut rc and Version Bump and Cut hotfix-rc, it must be supplied and the data type is choice; target_ref-its default value is main, this input represents branch/tag to target for cut, it must be supplied and the data type is string; version_number_override-this input represents new version override (leave blank for automatic calculation, example: '2024.1.0'), it is optional and the data type is string. The workflow has 5 jobs. The 1st job is named `Setup` and its job id is `setup`. This job will run on ubuntu-24.04 runner. The job `setup` has one step. The 1st step is named `Set branch` and its id is `set-branch`. The step sets an environment variable to use: `TASK` is set to `${{ inputs.task }}`. This step runs a script: `if [[ \"$TASK\" == \"Version Bump\" ]]; then\n  BRANCH=\"none\"\nelif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n  BRANCH=\"rc\"\nelif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n  BRANCH=\"hotfix-rc\"\nfi\n\necho \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n`. This job has an output: `branch` is defined as ${{ steps.set-branch.outputs.branch }}. The 2nd job is named `Cut branch` and its job id is `cut_branch`. Before this job runs, `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cut_branch` has 4 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `${{ inputs.target_ref }}` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Check if ${{ needs.setup.outputs.branch }} branch exists`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n  echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 4th step is named `Cut branch`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `git switch --quiet --create $BRANCH_NAME\ngit push --quiet --set-upstream origin $BRANCH_NAME\n`. The 3rd job is named `Bump Version` and its job id is `bump_version`. Before this job runs, `cut_branch` and `setup` must complete successfully. This job will run only if the condition(${{ always() }}) is met. This job will run on ubuntu-24.04 runner. The job `bump_version` has 13 steps. The 1st step is named `Validate version input format`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-check` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ inputs.version_number_override }}`. The 2nd step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 3rd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 4th step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 5th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 6th step is named `Get current version` and its id is `current-version`. This step runs a script: `CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\necho \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n`. The 7th step is named `Verify input version`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. The step sets 2 environment variables to use: `CURRENT_VERSION` is set to `${{ steps.current-version.outputs.version }}` and `NEW_VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `# Error if version has not changed.\nif [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n  echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n\n# Check if version is newer.\nprintf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\nif [ $? -eq 0 ]; then\n  echo \"Version is newer than the current version.\"\nelse\n  echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 8th step is named `Calculate next release version` and its id is `calculate-next-version`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-next` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ steps.current-version.outputs.version }}`. The 9th step is named `Bump version props - Version Override` and its id is `bump-version-override`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ inputs.version_number_override }}`. The 10th step is named `Bump version props - Automatic Calculation` and its id is `bump-version-automatic`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ steps.calculate-next-version.outputs.version }}`. The 11th step is named `Set final version output` and its id is `set-final-version-output`. The step sets an environment variable to use: `VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n  echo \"version=$VERSION\" >> $GITHUB_OUTPUT\nelif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n  echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\nfi\n`. The 12th step is named `Commit files`. This step runs a script: `git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a`. The 13th step is named `Push changes`. This step runs a script: `git push`. This job has an output: `version` is defined as ${{ steps.set-final-version-output.outputs.version }}. The 4th job is named `Cherry-Pick Commit(s)` and its job id is `cherry_pick`. Before this job runs, `bump_version` and `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cherry_pick` has 5 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 4th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 5th step is named `Perform cherry-pick(s)`. The step sets an environment variable to use: `CUT_BRANCH` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `# Function for cherry-picking\ncherry_pick () {\n  local source_branch=$1\n  local destination_branch=$2\n\n  # Get project commit/version from source branch\n  git switch $source_branch\n  SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n  SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  # Get project commit/version from destination branch\n  git switch $destination_branch\n  DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n    git push -u origin $destination_branch\n  fi\n}\n\n# If we are cutting 'hotfix-rc':\nif [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n  # If the 'rc' branch exists:\n  if [[ $(git ls-remote --heads origin rc) ]]; then\n\n    # Chery-pick from 'rc' into 'hotfix-rc'\n    cherry_pick rc hotfix-rc\n\n    # Cherry-pick from 'main' into 'rc'\n    cherry_pick main rc\n\n  # If the 'rc' branch does not exist:\n  else\n\n    # Cherry-pick from 'main' into 'hotfix-rc'\n    cherry_pick main hotfix-rc\n\n  fi\n\n# If we are cutting 'rc':\nelif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n  # Cherry-pick from 'main' into 'rc'\n  cherry_pick main rc\n\nfi\n`. The 5th job is named `Move finalization database scripts` and its job id is `move_future_db_scripts`. Before this job runs, `cherry_pick` must complete successfully. This job will call a reusable workflow located at `./.github/workflows/_move_finalization_db_scripts.yml`. The job will pass a secret to the called workflow: the secret `special_case_secrets` is `inherit`. /no-think","answer":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: \"New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\"\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n\n  cut_branch:\n    name: Cut branch\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    needs: setup\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out target ref\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n\n  bump_version:\n    name: Bump Version\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    needs:\n    - cut_branch\n    - setup\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      id: calculate-next-version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      id: bump-version-override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      id: bump-version-automatic\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ \n        steps.set-final-version-output.outputs.version }}\" -a\n\n    - name: Push changes\n      run: git push\n\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    needs:\n    - bump_version\n    - setup\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out main branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets: inherit\n\n```","llm_response":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch: # Trigger the workflow manually\n\ninputs:\n  task:\n    description: Task to execute\n    required: true\n    type: choice\n    default: \"Version Bump\"\n    choices:\n      - \"Version Bump\"\n      - \"Version Bump and Cut rc\"\n      - \"Version Bump and Cut hotfix-rc\"\n  target_ref:\n    description: Branch/tag to target for cut\n    required: true\n    type: string\n  version_number_override:\n    description: New version override (leave blank for automatic calculation)\n    required: false\n    type: string\n\njobs:\n  setup:\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n      - name: Set branch\n        id: set-branch\n        run: |\n          TASK=${{ inputs.task }}\n          if [[ \"$TASK\" == \"Version Bump\" ]]; then\n            BRANCH=\"none\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n            BRANCH=\"rc\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n            BRANCH=\"hotfix-rc\"\n          fi\n\n          echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n  cut_branch:\n    runs-on: ubuntu-24.04\n    needs: setup\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    steps:\n      - name: Generate GH App token\n        id: app-token\n        uses: actions/create-github-app-token@v1\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n      - name: Checkout repository\n        uses: actions/checkout@v2\n        with:\n          ref: ${{ inputs.target_ref }}\n          token: ${{ steps.app-token.outputs.token }}\n      - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n        run: |\n          BRANCH_NAME=${{ needs.setup.outputs.branch }}\n          if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n            echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n      - name: Cut branch\n        run: |\n          BRANCH_NAME=${{ needs.setup.outputs.branch }}\n          git switch --quiet --create $BRANCH_NAME\n          git push --quiet --set-upstream origin $BRANCH_NAME\n\n  bump_version:\n    runs-on: ubuntu-24.04\n    needs: [setup, cut_branch]\n    if: ${{ always() }}\n    steps:\n      - name: Validate version input format\n        if: ${{ inputs.version_number_override != '' }}\n        uses: bitwarden/gh-actions/version-check@main\n        with:\n          version: ${{ inputs.version_number_override }}\n      - name: Generate GH App token\n        id: app-token\n        uses: actions/create-github-app-token@v1\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n      - name: Checkout repository\n        uses: actions/checkout@v2\n        with:\n          ref: main\n          token: ${{ steps.app-token.outputs.token }}\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n      - name: Install xmllint\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libxml2-utils\n      - name: Get current version\n        id: current-version\n        run: |\n          CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n          echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n      - name: Verify input version\n        if: ${{ inputs.version_number_override != '' }}\n        run: |\n          CURRENT_VERSION=${{ steps.current-version.outputs.version }}\n          NEW_VERSION=${{ inputs.version_number_override }}\n\n          # Error if version has not changed.\n          if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n            echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n\n          # Check if version is newer.\n          printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n          if [ $? -eq 0 ]; then\n            echo \"Version is newer than the current version.\"\n          else\n            echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n      - name: Calculate next release version\n        if: ${{ inputs.version_number_override == '' }}\n        uses: bitwarden/gh-actions/version-next@main\n        with:\n          version: ${{ steps.current-version.outputs.version }}\n      - name: Bump version props - Version Override\n        if: ${{ inputs.version_number_override != '' }}\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ inputs.version_number_override }}\n      - name: Bump version props - Automatic Calculation\n        if: ${{ inputs.version_number_override == '' }}\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ steps.calculate-next-version.outputs.version }}\n      - name: Set final version output\n        id: set-final-version-output\n        run: |\n          if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n            echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n          elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n            echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n          fi\n      - name: Commit files\n        run: |\n          git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a\n      - name: Push changes\n        run: |\n          git push\n\n  cherry_pick:\n    runs-on: ubuntu-24.04\n    needs: [bump_version, setup]\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    steps:\n      - name: Generate GH App token\n        id: app-token\n        uses: actions/create-github-app-token@v1\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n      - name: Checkout repository\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n          ref: main\n          token: ${{ steps.app-token.outputs.token }}\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n      - name: Install xmllint\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libxml2-utils\n      - name: Perform cherry-pick(s)\n        run: |\n          cherry_pick () {\n            local source_branch=$1\n            local destination_branch=$2\n\n            # Get project commit/version from source branch\n            git switch $source_branch\n            SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n            SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n            # Get project commit/version from destination branch\n            git switch $destination_branch\n            DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n            if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n              git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n              git push -u origin $destination_branch\n            fi\n          }\n\n          # If we are cutting 'hotfix-rc':\n          if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n            # If the 'rc' branch exists:\n            if [[ $(git ls-remote --heads origin rc) ]]; then\n\n              # Chery-pick from 'rc' into 'hotfix-rc'\n              cherry_pick rc hotfix-rc\n\n              # Cherry-pick from 'main' into 'rc'\n              cherry_pick main rc\n\n            # If the 'rc' branch does not exist:\n            else\n\n              # Cherry-pick from 'main' into 'hotfix-rc'\n              cherry_pick main hotfix-rc\n\n            fi\n\n          # If we are cutting 'rc':\n          elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          fi\n\n  move_future_db_scripts:\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml@main\n    secrets:\n      special_case_secrets: inherit\n```","repository_id":3499830,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"inputs\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 6, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"inputs:\\n^~~~~~~\", \"end_column\": 7}, {\"message\": \"property \\\"task\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 33, \"column\": 23, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 23}, {\"message\": \"property \\\"target_ref\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 59, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"          ref: ${{ inputs.target_ref }}\\n                   ^~~~~~~~~~~~~~~~~\", \"end_column\": 36}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 80, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.version_number_override != '' }}\\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 83, \"column\": 24, \"kind\": \"expression\", \"snippet\": \"          version: ${{ inputs.version_number_override }}\\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 53}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 109, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.version_number_override != '' }}\\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 110, \"column\": 91, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 91}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 129, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.version_number_override == '' }}\\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 134, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.version_number_override != '' }}\\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 138, \"column\": 24, \"kind\": \"expression\", \"snippet\": \"          version: ${{ inputs.version_number_override }}\\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 53}, {\"message\": \"property \\\"version_number_override\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 140, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.version_number_override == '' }}\\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"calculate-next-version\\\" is not defined in object type {app-token: {conclusion: string; outcome: string; outputs: {string => string}}; current-version: {conclusion: string; outcome: string; outputs: {string => string}}}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 144, \"column\": 24, \"kind\": \"expression\", \"snippet\": \"          version: ${{ steps.calculate-next-version.outputs.version }}\\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 67}, {\"message\": \"property \\\"bump-version-override\\\" is not defined in object type {app-token: {conclusion: string; outcome: string; outputs: {string => string}}; current-version: {conclusion: string; outcome: string; outputs: {string => string}}}\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 147, \"column\": 25, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 25}, {\"message\": \"reusable workflow call \\\"./.github/workflows/_move_finalization_db_scripts.yml@main\\\" at \\\"uses\\\" is not following the format \\\"owner/repo/path/to/workflow.yml@ref\\\" nor \\\"./path/to/workflow.yml\\\". see https://docs.github.com/en/actions/learn-github-actions/reusing-workflows for more details\", \"filepath\": \"../../tmp/239216a4-a5a8-42c9-acce-8ef6987f76a7.yml\", \"line\": 235, \"column\": 11, \"kind\": \"workflow-call\", \"snippet\": \"    uses: ./.github/workflows/_move_finalization_db_scripts.yml@main\\n          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 68}]","meteor_score":0.780627393431935,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":2364,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":5,"NumofActions":10,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/create-github-app-token","actions/create-github-app-token","actions/create-github-app-token","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-check","bitwarden/gh-actions/version-next"],"Actions_details":[{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-check"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-next"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_move_finalization_db_scripts.yml"],"NumofSteps":23,"CyclomaticComplexity":3}}
{"id":46171,"level":1,"name":"wger-project/flutter","file_name":"make-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build release artefacts` for a GitHub repository whose primary programming language is Dart. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives an input: version-this input represents version to tag and release (x.y.z), it must be supplied and the data type is string. The workflow has 9 jobs. The 1st job is named `CI` and its job id is `ci`. The 2nd job is named `Prepare` and its job id is `determine_version`. The 3rd job is named `Linux` and its job id is `build_linux`. The 4th job is named `Android` and its job id is `build_android`. The 5th job is named `Apple` and its job id is `build_apple`. The 6th job is named `Microsoft` and its job id is `build_windows`. The 7th job is named `Upload to Play Store` and its job id is `upload_play_store`. The 8th job is named `Make Github Release` and its job id is `make_gh_release`. The 9th job is named `Upload flathub manifest` and its job id is `generate_flathub_manifest`. /no-think","answer":"```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n\n  determine_version:\n    needs: ci\n    name: Prepare\n    uses: ./.github/workflows/bump-version.yml\n    with:\n      app_version: ${{ github.event.inputs.version }}\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    uses: ./.github/workflows/build-linux.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs: determine_version\n    uses: ./.github/workflows/build-android.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n    secrets:\n      DECRYPTKEY_PLAYSTORE_SIGNING_KEY: ${{ \n        secrets.DECRYPTKEY_PLAYSTORE_SIGNING_KEY }}\n      DECRYPTKEY_PROPERTIES: ${{ secrets.DECRYPTKEY_PROPERTIES }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    uses: ./.github/workflows/build-apple.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    uses: ./.github/workflows/build-windows.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    runs-on: ubuntu-latest\n    needs:\n    - build_android\n    - build_linux\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Download builds\n      uses: actions/download-artifact@v4\n      with:\n        path: /tmp/\n\n    - name: Setup Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.4\n\n    - name: Decrypt config files\n      run: |\n        cd ./fastlane/metadata/envfiles\n        chmod +x ./decrypt_secrets.sh\n        ./decrypt_secrets.sh\n      shell: bash\n      env:\n        DECRYPTKEY_PLAYSTORE: ${{ secrets.DECRYPTKEY_PLAYSTORE }}\n\n    - name: Upload build to Play Store\n      run: |\n        mkdir -p ./build/app/outputs/bundle/release/\n        cp /tmp/builds-aab/app-release.aab ./build/app/outputs/bundle/release/app-release.aab\n        bundle install\n        bundle exec fastlane android production\n\n  #\n  # This is currently commented out since the iOS upload are currently being handled\n  # by the fastlane script in the ios folder. We use the account of pthaler for this\n  # and he runs the script manually.\n  #\n\n  #  upload_app_store:\n  #    name: Upload to App Store (placeholder)\n  #    runs-on: ubuntu-latest\n  #    needs:\n  #      - build_android\n  #      - build_apple\n  #    steps:\n  #      - name: Checkout application\n  #        uses: actions/checkout@v4\n  #        with:\n  #          ref: feature/build-process\n  #        #          ref: ${{ github.event.inputs.version }}\n  #\n  #      - name: Common flutter setup\n  #        uses: ./.github/actions/flutter-common\n  #\n  #      - name: Download builds\n  #        uses: actions/download-artifact@v4\n  #        with:\n  #          path: /tmp/\n  #\n  #      - name: Upload build to App Store\n  #        run: |\n  #          # bundle exec fastlane todo\n\n  make_gh_release:\n    name: Make Github Release\n    runs-on: ubuntu-latest\n    needs:\n    - upload_play_store\n    - build_linux\n    - build_windows\n    - build_apple\n\n    steps:\n    - name: Download builds\n      uses: actions/download-artifact@v4\n\n    - name: Make Github release\n      uses: softprops/action-gh-release@v2\n      with:\n        tag_name: ${{ inputs.version }}\n        files: |\n          builds-aab/app-release.aab\n          builds-apk/app-release.apk\n          builds-linux/wger-linux-x86_64.tar.gz\n          builds-linux/wger-linux-x86_64.sha256\n          builds-ios/Runner.app\n          builds-macos/wger.app\n          builds-windows/wger.exe\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    name: Upload flathub manifest\n    needs:\n    - make_gh_release\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Common flutter setup\n      uses: ./.github/actions/flutter-common\n\n    - name: Generate manifest\n      run: |\n        cd flatpak/scripts\n        dart pub get\n        dart manifest_generator.dart --meta ../flatpak_meta.json --github\n        mkdir ../../flathub\n        cp flatpak_generator_exports/de.wger.flutter.json ../../flathub\n        cp flatpak_generator_exports/flathub.json ../../flathub\n\n    - name: Push updated config to flathub repository\n      uses: cpina/github-action-push-to-another-repository@main\n      env:\n        SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}\n      with:\n        source-directory: flathub\n        destination-github-username: wger-project\n        destination-repository-name: de.wger.flutter\n        user-email: github-actions@github.com\n        target-branch: release-${{ github.event.inputs.version }}\n        create-target-branch-if-needed: true\n        commit-message: Update to ${{ github.event.inputs.version }}\n\n\n```","llm_response":"```yaml\nname: Build release artefacts\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n    secrets: inherit\n\n  determine_version:\n    name: Prepare\n    runs-on: ubuntu-latest\n    outputs:\n      version: ${{ steps.version.outputs.version }}\n    steps:\n    - name: Determine version\n      id: version\n      run: |\n        version=\"${{ github.event.inputs.version }}\"\n        if [[ -z \"$version\" ]]; then\n          echo \"version=${GITHUB_REF##*/}\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo \"version=$version\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Build Linux\n      uses: ./.github/actions/build_linux\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n    - name: Upload Linux artifact\n      uses: ./.github/actions/upload_linux_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n\n  build_android:\n    name: Android\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Build Android\n      uses: ./.github/actions/build_android\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n    - name: Upload Android artifact\n      uses: ./.github/actions/upload_android_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    runs-on: macos-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Build macOS\n      uses: ./.github/actions/build_macos\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n    - name: Upload macOS artifact\n      uses: ./.github/actions/upload_macos_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Build Windows\n      uses: ./.github/actions/build_windows\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n    - name: Upload Windows artifact\n      uses: ./.github/actions/upload_windows_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n\n  upload_play_store:\n    name: Upload to Play Store\n    needs: build_android\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Download Android artifact\n      uses: ./.github/actions/download_android_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Upload to Play Store\n      uses: ./.github/actions/upload_to_play_store\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        service_account: ${{ secrets.PLAY_STORE_SERVICE_ACCOUNT }}\n        service_account_key: ${{ secrets.PLAY_STORE_SERVICE_ACCOUNT_KEY }}\n\n  make_gh_release:\n    name: Make Github Release\n    needs: build_linux\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Download Linux artifact\n      uses: ./.github/actions/download_linux_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Download Android artifact\n      uses: ./.github/actions/download_android_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Download Windows artifact\n      uses: ./.github/actions/download_windows_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Download macOS artifact\n      uses: ./.github/actions/download_macos_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Upload release\n      uses: ./.github/actions/upload_release\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n\n  generate_flathub_manifest:\n    name: Upload flathub manifest\n    needs: build_linux\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.determine_version.outputs.version }}\n    - name: Download Linux artifact\n      uses: ./.github/actions/download_linux_artifact\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n        artifact: release\n    - name: Generate flathub manifest\n      uses: ./.github/actions/generate_flathub_manifest\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n    - name: Upload flathub manifest\n      uses: ./.github/actions/upload_flathub_manifest\n      with:\n        version: ${{ needs.determine_version.outputs.version }}\n\n```","repository_id":69029763,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_android: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 117, \"column\": 18, \"kind\": \"expression\", \"snippet\": \"        ref: ${{ needs.determine_version.outputs.version }}\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 56}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_android: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 121, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_android: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 126, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 138, \"column\": 18, \"kind\": \"expression\", \"snippet\": \"        ref: ${{ needs.determine_version.outputs.version }}\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 56}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 142, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 147, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 152, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 157, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 162, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 172, \"column\": 18, \"kind\": \"expression\", \"snippet\": \"        ref: ${{ needs.determine_version.outputs.version }}\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 56}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 176, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 181, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}, {\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_linux: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/831b13c2-e3e6-4abf-b893-f3f53374612a.yml\", \"line\": 185, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"        version: ${{ needs.determine_version.outputs.version }}\\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 60}]","meteor_score":0.4042383379086452,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1270,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":9,"NumofActions":8,"Actions":["./.github/actions/flutter-common","actions/checkout","actions/checkout","actions/download-artifact","actions/download-artifact","cpina/github-action-push-to-another-repository","ruby/setup-ruby","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ruby/setup-ruby"},{"version":"v4","name":"actions/download-artifact"},{"version":"v2","name":"softprops/action-gh-release"},{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/flutter-common"},{"version":"main","name":"cpina/github-action-push-to-another-repository"}],"NumofReusableWfs":6,"ReusableWfs":["./.github/workflows/build-android.yml","./.github/workflows/build-apple.yml","./.github/workflows/build-linux.yml","./.github/workflows/build-windows.yml","./.github/workflows/bump-version.yml","./.github/workflows/ci.yml"],"NumofSteps":11,"CyclomaticComplexity":5}}
{"id":39491,"level":3,"name":"rancher/rancher","file_name":"merge-server-manifest.yml","len":5,"prompt":"Generate a GitHub Workflow named `Merge server manifest` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: it is called from another workflow. The workflow has one job. The job id of the 1st job is `merge-server-manifest`. This job will run on runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }} runner. The job `merge-server-manifest` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `merge-server-manifest`. The job sets an environment variable to use: `REGISTRY` is set to `stgregistry.suse.com`. The job `merge-server-manifest` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup Environment Variables`. This step runs action `./.github/actions/setup-tag-env`.The 3rd step is named `Set up Docker Buildx`. This step runs action `docker/setup-buildx-action` tagged as v3. The 4th step is named `Load Secrets from Vault`. This step runs action `rancher-eio/read-vault-secrets` from the main branch. The step defines an input parameter for the action: `secrets` is set to `secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\nsecret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n`. The 5th step is named `Docker Registry Login`. This step runs action `docker/login-action` tagged as v3. The step defines 3 input parameters for the action: `username` is set to `${{ env.STAGE_REGISTRY_USERNAME }}`, `password` is set to `${{ env.STAGE_REGISTRY_PASSWORD }}` and `registry` is set to `${{ env.REGISTRY }}`. The 6th step is named `Create manifest list and push`. This step runs a script: `docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n`. The 7th step is named `Create head manifest list and push`. This step runs a script: `if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n  docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\nfi\n`. The 8th step is named `Inspect image`. This step runs a script: `docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n`. /no-think","answer":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ \n      github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","llm_response":" ```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: ubuntu22-full-x64\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Setup Environment Variables\n        uses: ./.github/actions/setup-tag-env\n      - name: Setup Docker Buildx\n        uses: docker/setup-buildx-action@v3\n      - name: Load Secrets from Vault\n        uses: rancher-eio/read-vault-secrets@main\n        with:\n          secrets: |\n            secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n            secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n      - name: Docker Registry Login\n        uses: docker/login-action@v3\n        with:\n          username: ${{ env.STAGE_REGISTRY_USERNAME }}\n          password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n          registry: ${{ env.REGISTRY }}\n      - name: Create manifest list and push\n        run: |\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n      - name: Create head manifest list and push\n        if: |\n          (github.ref_name == 'release/v*' || github.ref_name == 'main')\n        run: |\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n      - name: Inspect image\n        run: |\n          docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n``` ","repository_id":22232001,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"ubuntu22-full-x64\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/a55f1679-2b44-49e2-8ab9-2807081c27c1.yml\", \"line\": 6, \"column\": 14, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: ubuntu22-full-x64\\n             ^~~~~~~~~~~~~~~~~\", \"end_column\": 30}]","meteor_score":0.8656600147485709,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":536,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":5,"Actions":["./.github/actions/setup-tag-env","actions/checkout","docker/login-action","docker/setup-buildx-action","rancher-eio/read-vault-secrets"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/setup-tag-env"},{"version":"v3","name":"docker/setup-buildx-action"},{"version":"main","name":"rancher-eio/read-vault-secrets"},{"version":"v3","name":"docker/login-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":16232,"level":2,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\ntrue:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\npermissions:\n  contents: read\njobs:\n  coverage:\n    name: ${{ matrix.name ||matrix.target }}\n    permissions:\n      contents: read\n      id-token: write\n    runs-on: ${{ matrix.os }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Set up Python\n      uses: actions/setup-python@v5\n      with:\n        python-version: 3.11\n    - name: Set up Go\n      uses: actions/setup-go@v5\n      with:\n        go-version: '1.24'\n    - name: Set up Node\n      uses: actions/setup-node@v4\n      with:\n        node-version: 22.x\n    - name: Cache Go modules\n      uses: actions/cache@v4\n      with:\n        key: ${{ runner.os }}-go-${{ hashFiles('**/go.sum') }}\n        path: ~/go/pkg/mod\n        restore-keys: ${{ runner.os }}-go-\n    - name: Install dependencies\n      run: 'sudo apt-get update\n\n        sudo apt-get install -y libegl1-mesa-dev libwayland-dev libxkbcommon-dev\n\n        '\n    - name: Build\n      run: 'make build\n\n        '\n    - name: Check coverage\n      run: 'make coverage\n\n        '\n    - name: Upload coverage to codecov.io\n      uses: codecov/codecov-action@v5\n      with:\n        files: coverage.txt\n        flags: unittests\n        name: codecov-umbrella\n        token: ${{ secrets.CODECOV_TOKEN }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - name: Linux\n          os: ubuntu-24.04\n          target: linux\n    timeout-minutes: 10\n\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"codecov_token\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/42a08af7-a66d-4191-9938-64810a113f45.yml\", \"line\": 72, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        token: ${{ secrets.CODECOV_TOKEN }}\\n                   ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}]","meteor_score":0.3313154965753425,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":17801,"level":2,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The job id of the 2nd job is `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The job id of the 4th job is `needs-refinement`. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The 5th job is named `status: freeze` and its job id is `status-freeze`. The job `status-freeze` has one step. The 1st step is named `status: freeze`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\ntrue:\n  issues:\n    types:\n    - labeled\njobs:\n  Assigned:\n    if: github.event.label.name == 'ðŸ“ Assigned'\n    name: ðŸ“ Assigned\n    runs-on: ubuntu-latest\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: octokit/request-action@v2.x\n      with:\n        body: 'This issue has been labeled as \"ðŸ“ Assigned\".'\n        route: PUT /projects/columns/{column_id}/cards/{card_id}/notes\n        token: ${{ secrets.GITHUB_TOKEN }}\n        variables: column_id=${{ secrets.CANDIDATES_FOR_UNIVERSITY_PROJECTS_COLUMN_ID\n          }}, card_id=${{ github.event.issue.node_id }}\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: octokit/request-action@v2.x\n      with:\n        body: 'This issue has been labeled as \"ðŸ“ Assigned\".'\n        route: PUT /projects/columns/{column_id}/cards/{card_id}/notes\n        token: ${{ secrets.GITHUB_TOKEN }}\n        variables: column_id=${{ secrets.GOOD_FIRST_ISSUES_COLUMN_ID }}, card_id=${{\n          github.event.issue.node_id }}\n  FirstTimeCodeContribution:\n    if: github.event.label.name == 'First Time Code Contribution'\n    name: First Time Code Contribution\n    runs-on: ubuntu-latest\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: actions-cool/issues-helper@v3\n      with:\n        actions: create-comment\n        body: 'Hello @${{ github.event.issue.user.login }}, thanks for your first\n          contribution to the project! We appreciate it very much. We will review your\n          pull request as soon as possible. In the meantime, we recommend you to take\n          a look at our [contributing guidelines](https://github.com/cryptomator/cryptomator/blob/master/CONTRIBUTING.md).\n\n          '\n        issue-number: ${{ github.event.issue.number }}\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: octokit/request-action@v2.x\n      with:\n        body: 'This issue has been labeled as \"First Time Code Contribution\".'\n        route: PUT /projects/columns/{column_id}/cards/{card_id}/notes\n        token: ${{ secrets.GITHUB_TOKEN }}\n        variables: column_id=${{ secrets.CANDIDATES_FOR_UNIVERSITY_PROJECTS_COLUMN_ID\n          }}, card_id=${{ github.event.issue.node_id }}\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: octokit/request-action@v2.x\n      with:\n        body: 'This issue has been labeled as \"First Time Code Contribution\".'\n        route: PUT /projects/columns/{column_id}/cards/{card_id}/notes\n        token: ${{ secrets.GITHUB_TOKEN }}\n        variables: column_id=${{ secrets.GOOD_FIRST_ISSUES_COLUMN_ID }}, card_id=${{\n          github.event.issue.node_id }}\n  good-first-issue:\n    if: github.event.label.name == 'good first issue'\n    name: good first issue\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      uses: actions-cool/issues-helper@v3\n      with:\n        actions: create-comment\n        body: 'Hello @${{ github.event.issue.user.login }}, this issue is a good first\n          issue. Please make sure to follow our [contributing guidelines](https://github.com/cryptomator/cryptomator/blob/master/CONTRIBUTING.md)\n          and sign the CLA before you start working on it.\n\n          '\n        issue-number: ${{ github.event.issue.number }}\n  needs-refinement:\n    if: github.event.label.name == 'needs refinement'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs refinement\n      uses: actions-cool/issues-helper@v3\n      with:\n        actions: create-comment\n        body: 'Hello @${{ github.event.issue.user.login }}, this issue needs refinement.\n          Please provide more details or clarify your request.\n\n          '\n        issue-number: ${{ github.event.issue.number }}\n  status-freeze:\n    if: github.event.label.name == 'status: freeze'\n    name: status: freeze\n    runs-on: ubuntu-latest\n    steps:\n    - name: status: freeze\n      uses: actions-cool/issues-helper@v3\n      with:\n        actions: create-comment\n        body: 'Hello @${{ github.event.issue.user.login }}, this issue is in status:\n          freeze. We will not work on it anymore.\n\n          '\n        issue-number: ${{ github.event.issue.number }}\n\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 89: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/d99e37dd-6bf5-47fc-9982-4bbf7e55cb14.yml\", \"line\": 89, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    if: github.event.label.name == 'status: freeze'\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":40182,"level":3,"name":"dotnetcore/aspectcore-framework","file_name":"build-pr-ci.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build for PR` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: there is activity relating to a pull request. The workflow has one job. The job id of the 1st job is `build-and-test`. This job will run on windows-latest runner. The job `build-and-test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Setup .NET Core`. This step runs action `actions/setup-dotnet` tagged as v4. The step defines an input parameter for the action: `dotnet-version` is set to `9.x`. The 3rd step is named `Build Reason`. This step runs a script: `echo ref: ${{github.ref}} event: ${{github.event_name}}`. The 4th step is named `Build`. This step uses bash to run a script: `for project in $(find ./src -name \"*.csproj\"); do\n  dotnet build --configuration Release $project\ndone\n`. The 5th step is named `Run Tests`. This step uses bash to run a script: `for project in $(find ./tests -name \"*.csproj\"); do\n  dotnet test --configuration Release $project\ndone\n`. /no-think","answer":"```yaml\nname: Build for PR\non:\n  pull_request:\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: 9.x\n\n    - name: Build Reason\n      run: 'echo ref: ${{github.ref}} event: ${{github.event_name}}'\n    - name: Build\n      shell: bash\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      shell: bash\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n\n```","llm_response":"```yaml\nname: Build for PR\n\non:\n  pull_request:\n    types: [opened, edited, synchronize, reopened]\n\njobs:\n  build-and-test:\n    runs-on: windows-latest\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Setup .NET Core\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: '9.x'\n\n    - name: Build Reason\n      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\n\n    - name: Build\n      run: |\n        for project in $(find ./src -name \"*.csproj\"); do\n          dotnet build --configuration Release $project\n        done\n\n    - name: Run Tests\n      run: |\n        for project in $(find ./tests -name \"*.csproj\"); do\n          dotnet test --configuration Release $project\n        done\n```","repository_id":3450821,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 23: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/505d4d39-4e08-4d73-a77b-051bd38f7521.yml\", \"line\": 23, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      run: echo ref: ${{github.ref}} event: ${{github.event_name}}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":207,"stats":{"NumofTriggers":1,"Triggers":["pull_request"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-dotnet"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/setup-dotnet"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":9161,"level":3,"name":"mckinsey/vizro","file_name":"test-unit-vizro-mcp.yml","len":5,"prompt":"Generate a GitHub Workflow named `Unit tests for Vizro` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) The workflow would run whenever there is a pull_request event targeting: a branch named main. The workflow sets 2 environment variables to use: `PYTHONUNBUFFERED` is set to `1` and `FORCE_COLOR` is set to `1`. For all run steps in the workflow, default working directory is set to vizro-mcp. The workflow has one job. The 1st job is named `test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}` and its job id is `test-unit-vizro-core`. This job will run on ${{ matrix.config.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `config` has 5 values: {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'}, {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'}, {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'}, {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'} and {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}. The variable `is_non_release_pr` has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}. If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix. The job `test-unit-vizro-core` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ matrix.config.python-version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ matrix.config.python-version }}`. The 3rd step is named `Install Hatch`. This step runs a script: `pip install hatch`. The 4th step is named `Show dependency tree`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:pip tree`. The 5th step is named `Run unit tests`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage`. /no-think","answer":"```yaml\nname: Unit tests for Vizro\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        # This is not a nice way to define the matrix, but it's the only way that's possible so that we only run\n        # the job on Windows on merge to main rather than in every PR. See:\n        # https://stackoverflow.com/questions/66025220/paired-values-in-github-actions-matrix\n        # https://github.com/orgs/community/discussions/26253\n        # https://github.com/actions/runner/issues/1985\n        config:\n        - python-version: '3.10'\n          hatch-env: all.py3.10\n          os: ubuntu-latest\n        - python-version: '3.11'\n          hatch-env: all.py3.11\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: ubuntu-latest\n        - python-version: '3.13'\n          hatch-env: all.py3.13\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: windows-latest\n          label: Windows\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","llm_response":"```yaml\nname: Unit tests for Vizro\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    branches:\n      - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      matrix:\n        config: [\n          {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'},\n          {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'},\n          {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'},\n          {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'},\n          {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}\n        ]\n        is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up Python ${{ matrix.config.python-version }}\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ matrix.config.python-version }}\n\n      - name: Install Hatch\n        run: pip install hatch\n\n      - name: Show dependency tree\n        run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n      - name: Run unit tests\n        run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n```","repository_id":94586448,"lint_valid":false,"lint_output":"[{\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type bool\", \"filepath\": \"../../tmp/1d16b924-396e-456a-b834-374d43631fec.yml\", \"line\": 27, \"column\": 28, \"kind\": \"expression\", \"snippet\": \"        is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\\n                           ^~~\", \"end_column\": 30}]","meteor_score":0.7831621479077833,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":574,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-python"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":54038,"level":1,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":" ```yaml\nname: Test Fusion Library\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    types: [opened, synchronize, reopened]\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php:\n          - 8.0\n        laravel:\n          - 9.0\n        dependency-version:\n          - lowest\n          - highest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n      - name: Cache dependencies\n        uses: actions/cache@v2\n        with:\n          path: ~/.composer/cache/files\n          key: ${{ runner.os }}-composer-${{ matrix.dependency-version }}-composer-lock-${{ hashFiles('composer.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-composer-${{ matrix.dependency-version }}-composer-lock-\n            ${{ runner.os }}-composer-${{ matrix.dependency-version }}-\n      - name: Install dependencies\n        run: composer install --prefer-dist --no-progress --no-suggest --no-interaction --no-scripts --optimize-autoloader --${{ matrix.dependency-version }}\n      - name: Test project\n        run: vendor/bin/phpunit\n      - name: Test Lumen project\n        run: cd lumen && composer install --prefer-dist --no-progress --no-suggest --no-interaction --no-scripts --optimize-autoloader --${{ matrix.dependency-version }}\n        if: ${{ matrix.laravel == 5.8 || matrix.laravel == 6.x }}\n      - name: Test Laravel 7 project\n        run: cd laravel7 && composer install --prefer-dist --no-progress --no-suggest --no-interaction --no-scripts --optimize-autoloader --${{ matrix.dependency-version }}\n        if: ${{ matrix.laravel == 7.x }}\n      - name: Test Laravel 8 project\n        run: cd laravel8 && composer install --prefer-dist --no-progress --no-suggest --no-interaction --no-scripts --optimize-autoloader --${{ matrix.dependency-version }}\n        if: ${{ matrix.laravel == 8.x }}\n``` ","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 10: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/df4999c3-7782-4716-8ec6-2c9e69850cbd.yml\", \"line\": 10, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":16232,"level":2,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow named `Check/coverage` for a C++ repo. First, I need to recall the structure of GitHub Actions workflows.\n\nThe workflow is triggered by being called from another workflow, so the trigger should be `workflow_call`. Since it's called by another workflow, the `on` section will have `workflow_call`.\n\nNext, the inputs. There are three required inputs: `gcs-cache-bucket` (string), `request` (string), and `trusted` (boolean). Each needs to be defined under `inputs` with `required: true`. For `trusted`, the type is boolean, so I should specify `type: boolean`.\n\nThen, two secrets: `gcs-cache-key` and `gcp-key`, both required. Under `secrets`, each secret should have `required: true`.\n\nModifying the default permissions for GITHUB_TOKEN. The user says read access to `contents` scope for all jobs. So in the top-level `permissions`, set `contents: read`.\n\nConcurrency group is `${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage`. Also, when queued, cancel any running workflows in the same group. So concurrency section with `group` and `cancel-in-progress: true`.\n\nOnly one job named `${{ matrix.name || matrix.target }}` with job id `coverage`. Wait, the job name uses a matrix variable, but the user says it's a single job. Maybe the matrix isn't used here? Wait, the job name is dynamic based on matrix, but the problem states there's only one job. Hmm, maybe the matrix is not actually used, but the job name is set to that expression. Wait, the user says \"the 1st job is named `${{ matrix.name || matrix.target }}`\". But if there's only one job and no matrix, that might be an issue. Wait, but maybe the job uses a matrix, but the user says \"only a single job\". Wait, the problem states: \"The workflow has one job. The 1st job is named...\". So perhaps the job name is dynamic, but since there's only one job, maybe the matrix isn't applied here. Wait, the job name is `${{ matrix.name || matrix.target }}`, but if there's no matrix, that might evaluate to empty. Wait, perhaps the job is using a matrix strategy with one entry? But the user says \"only a single job\". Hmm, maybe the job name is set to that expression regardless. Maybe the user intended that the job name is computed as that, but without a matrix, it would be empty. Wait, but the user specifies the job id is `coverage`. So the job's `id` is `coverage`, but the `name` is the matrix expression. However, if there's no matrix, then `matrix.name` and `matrix.target` would be undefined. Maybe this is a mistake, but according to the user's instruction, we have to follow exactly. So the job's name is set to that expression, even if it's not using a matrix. Wait, but the problem says \"the 1st job is named...\", implying that maybe there could be multiple, but the user says \"only a single job\". Maybe the job uses a matrix with one entry, but the user says \"only a single job\". Hmm, perhaps the job name is dynamic but in this case, since it's a single job, the matrix isn't used, but the name is still set to that expression. Maybe the user made a typo, but we have to follow the instruction as given.\n\nSo the job's `name` is `${{ matrix.name || matrix.target }}`, and the `id` is `coverage`.\n\nNow, the job runs on some runner. The user didn't specify, but typically for C++, maybe ubuntu-latest. But the user didn't specify, so perhaps we can leave it as `ubuntu-latest` or maybe it's not specified. Wait, the user didn't mention the runner, so maybe we need to include a default. Since it's C++, probably Linux-based. Let's assume `runs-on: ubuntu-latest`.\n\nAlso, the job needs to use the secrets. The secrets are `gcs-cache-key` and `gcp-key`, which will be available as environment variables or passed to steps. But the user didn't specify steps, so perhaps the job is just a placeholder. Wait, the user didn't specify what the job does, only the structure. So the job might not have any steps, but we need to include the necessary parts.\n\nWait, the user's instruction is to generate the YAML based on the inputs, triggers, permissions, concurrency, etc., but not the actual steps. So the job might have no steps, but we need to set up the structure.\n\nWait, the problem says \"the workflow has one job\", so we need to define the job with the given name and id, but without steps? Or maybe the steps are not specified, so we can omit them. But GitHub Actions requires at least one step. Hmm, but the user didn't specify any steps, so perhaps we can have a dummy step or just the structure. However, since the user is an expert devops engineer, maybe they expect the structure without steps, but GitHub Actions requires steps. Wait, but the problem says \"generate a YAML file based on the user's input\", and the user didn't mention steps, so perhaps the steps are not required here. But in reality, a job needs at least one step. However, maybe the user expects us to omit steps since they weren't specified. But that would make the YAML invalid. Hmm.\n\nWait, the user's instruction says \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\" So perhaps we need to include a placeholder step, like a run command that does nothing, just to make it valid. For example, a step with `run: echo \"Coverage check\"`.\n\nBut the user didn't specify any steps, so maybe it's better to include a minimal step. Alternatively, maybe the job is intended to have steps that use the inputs and secrets, but since the user didn't specify, we can have a generic step.\n\nAlternatively, perhaps the job is meant to use the secrets, so we can reference them in environment variables. For example, setting env vars for the secrets.\n\nBut the user's main focus is on the structure: triggers, inputs, secrets, permissions, concurrency, job name, etc.\n\nSo, putting it all together:\n\n- Name: Check/coverage\n- on: workflow_call with inputs and secrets\n- permissions: contents read\n- concurrency group with cancel-in-progress\n- job named via matrix expression, id coverage, runs-on ubuntu-latest, and maybe a step that uses the inputs and secrets.\n\nWait, the user says \"the workflow receives 3 inputs\" and \"2 secrets\", so in the job, we need to pass those inputs and secrets to steps. But without specific steps, perhaps we can have a step that echoes them or something.\n\nBut since the user didn't specify steps, maybe we can have a placeholder step. However, to make it valid, we need at least one step.\n\nLet me outline the structure:\n\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        required: true\n        type: string\n      request:\n        required: true\n        type: string\n      trusted:\n        required: true\n        type: boolean\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name || matrix.target }}\n    runs-on: ubuntu-latest\n    steps:\n      - name: Example step\n        run: echo \"Running coverage check\"\n\nWait, but the job id is `coverage`, so the job key is `coverage`. The name is dynamic.\n\nWait, the user says \"the 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`\". So in the jobs section, the key is `coverage` (the id), and the `name` field is set to that expression.\n\nYes. So:\n\njobs:\n  coverage:\n    name: ${{ matrix.name || matrix.target }}\n    runs-on: ubuntu-latest\n    steps:\n      ... \n\nBut since there's no matrix defined, the name would be empty? But maybe the matrix is defined elsewhere. Wait, the user didn't mention a matrix strategy, so perhaps this is a mistake, but we have to follow the instruction as given.\n\nAlso, the permissions are set at the top level, so they apply to all jobs.\n\nNow, the secrets are received by the workflow, so in the job, we can reference them as secrets.gcs-cache-key and secrets.gcp-key.\n\nBut the user didn't specify steps, so perhaps the steps are not required, but we need at least one step. Let's add a dummy step that uses the inputs and secrets to show they're available.\n\nFor example:\n\nsteps:\n  - name: Check inputs and secrets\n    env:\n      GCS_CACHE_BUCKET: ${{ inputs.gcs-cache-bucket }}\n      REQUEST: ${{ inputs.request }}\n      TRUSTED: ${{ inputs.trusted }}\n      GCS_CACHE_KEY: ${{ secrets.gcs-cache-key }}\n      GCP_KEY: ${{ secrets.gcp-key }}\n    run: |\n      echo \"Bucket: $GCS_CACHE_BUCKET\"\n      echo \"Request: $REQUEST\"\n      echo \"Trusted: $TRUSTED\"\n\nBut the user didn't ask for this, but since steps are required, this would make the YAML valid.\n\nAlternatively, maybe the user expects just the structure without steps, but GitHub Actions would fail without steps. However, the problem says \"generate a YAML file based on the user's input\", and the user didn't mention steps, so perhaps steps are optional here. But in reality, they are not. Hmm.\n\nGiven that the user is an expert, they might expect the minimal required structure, including a step. So I'll include a placeholder step.\n\nPutting all together:\n\n- Workflow name\n- on: workflow_call with inputs and secrets\n- permissions\n- concurrency\n- job with name expression, id coverage, runs-on, and a step.\n\nAlso, check for correct YAML syntax, like hyphens for lists, proper indentation.\n\nLet me verify each part:\n\nInputs:\n\ngcs-cache-bucket: required string\n\nrequest: required string\n\ntrusted: required boolean\n\nSecrets:\n\ngcs-cache-key: required\n\ngcp-key: required\n\nPermissions: contents read\n\nConcurrency group expression: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n\nCancel in progress: true\n\nJob id: coverage\n\nJob name: matrix expression\n\nRuns-on: ubuntu-latest (assumed)\n\nStep: placeholder\n\nYes.\n\nNow, write the YAML accordingly.\n</think>\n\n```yaml\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        required: true\n        type: string\n      request:\n        required: true\n        type: string\n      trusted:\n        required: true\n        type: boolean\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name || matrix.target }}\n    runs-on: ubuntu-latest\n    steps:\n      - name: Placeholder step\n        run: echo \"Coverage job executing with inputs and secrets\"\n        env:\n          GCS_BUCKET: ${{ inputs.gcs-cache-bucket }}\n          REQUEST: ${{ inputs.request }}\n          TRUSTED: ${{ inputs.trusted }}\n          GCS_KEY: ${{ secrets.gcs-cache-key }}\n          GCP_KEY: ${{ secrets.gcp-key }}\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"name\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/d1a8e346-f223-404f-8968-0d231acda1f8.yml\", \"line\": 30, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name || matrix.target }}\\n              ^~~~~~~~~~~\", \"end_column\": 25}, {\"message\": \"property \\\"target\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/d1a8e346-f223-404f-8968-0d231acda1f8.yml\", \"line\": 30, \"column\": 30, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name || matrix.target }}\\n                             ^~~~~~~~~~~~~\", \"end_column\": 42}]","meteor_score":0.32685809265099086,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":17801,"level":3,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. This job will run only if the condition(${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `Assigned` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The job id of the 2nd job is `FirstTimeCodeContribution`. This job will run only if the condition(${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `FirstTimeCodeContribution` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. This step runs action `peter-evans/create-or-update-comment` tagged as v4. The step defines 2 input parameters for the action: `issue-number` is set to `${{ github.event.issue.number || github.event.pull_request.number }}` and `body` is set to `Welcome to the vibrant world of open-source development with JabRef!\n\nNewcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\nIn case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\nHaving any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\nâš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\nðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\nHappy coding! ðŸš€\n`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. This job will run only if the condition(${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 5 --owner JabRef --url $ISSUE_URL\n`. The job id of the 4th job is `needs-refinement`. This job will run only if the condition(github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef') is met. This job will run on ubuntu-latest runner. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 15 --owner JabRef --url $ISSUE_URL\n`. The 5th job is named `status: freeze` and its job id is `status-freeze`. This job will run only if the condition(${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `status-freeze` has one step. The 1st step is named `status: freeze`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 9 --owner JabRef --url $ISSUE_URL\n`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\n\non:\n  issue_label:\n    types: [labeled]\n\njobs:\n  Assigned:\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: 'ðŸ“ Assigned'\n          target-column: 'Assigned'\n          ignored-columns: ''\n          default-column: 'Free to take'\n          skip-if-not-in-project: 'True'\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: 'ðŸ“ Assigned'\n          target-column: 'Assigned'\n          ignored-columns: ''\n          default-column: 'Free to take'\n          skip-if-not-in-project: 'True'\n\n  FirstTimeCodeContribution:\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        uses: peter-evans/create-or-update-comment@v4\n        with:\n          issue-number: ${{ github.event.issue.number || github.event.pull_request.number }}\n          body: |\n            Welcome to the vibrant world of open-source development with JabRef!\n\n            Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n            In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n            Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n            âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n            ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n            Happy coding! ðŸš€\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: 'FirstTimeCodeContribution'\n          target-column: 'Assigned'\n          ignored-columns: ''\n          default-column: 'Free to take'\n          skip-if-not-in-project: 'True'\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: 'FirstTimeCodeContribution'\n          target-column: 'Assigned'\n          ignored-columns: ''\n          default-column: 'Free to take'\n          skip-if-not-in-project: 'True'\n\n  good-first-issue:\n    runs-on: ubuntu-latest\n    steps:\n      - name: good first issue\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 5 --owner JabRef --url $ISSUE_URL\n\n  needs-refinement:\n    runs-on: ubuntu-latest\n    steps:\n      - name: needs-refinement\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 15 --owner JabRef --url $ISSUE_URL\n\n  status-freeze:\n    runs-on: ubuntu-latest\n    steps:\n      - name: status: freeze\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n        run: |\n          ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n          gh project item-add 9 --owner JabRef --url $ISSUE_URL\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 101: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/b32f6b7d-0071-4e03-8886-35f01bcf9b27.yml\", \"line\": 101, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"      - name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":16232,"level":2,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\n\non:\n  workflow_dispatch:\n    inputs:\n      gcs-cache-bucket:\n        required: true\n        type: string\n      request:\n        required: true\n        type: string\n      trusted:\n        required: true\n        type: boolean\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\njobs:\n  coverage:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n    concurrency:\n      group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n      cancel-in-progress: true\n\n    strategy:\n      matrix:\n        name: ${{ github.event.inputs.request }}\n        target: ${{ github.event.inputs.request }}\n        include:\n          - name: 'Test Suite 1'\n            target: 'test-suite-1'\n          - name: 'Test Suite 2'\n            target: 'test-suite-2'\n          - name: 'Test Suite 3'\n            target: 'test-suite-3'\n\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n\n      - name: Set up C++\n        uses: actions/setup-cpp@v2\n        with:\n          toolchain: gcc-11\n          build-type: Release\n\n      - name: Install dependencies\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y build-essential\n\n      - name: Run tests\n        run: |\n          make test\n\n      - name: Upload coverage data to GCS\n        uses: actions/upload-artifact@v2\n        with:\n          name: coverage-data\n          path: coverage/\n\n      - name: Download coverage data from GCS\n        uses: actions/download-artifact@v2\n        with:\n          name: coverage-data\n          path: coverage/\n\n      - name: Generate coverage report\n        uses: codecov/codecov-action@v2\n        with:\n          token: ${{ secrets.CODECOV_TOKEN }}\n          files: coverage/lcov.info\n          name: ${{ matrix.name }}\n          fail_ci_if_error: true\n          flags: ${{ matrix.name }}\n          verbose: true\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"expected \\\"inputs\\\" key for \\\"workflow_dispatch\\\" section but got \\\"secrets\\\"\", \"filepath\": \"../../tmp/3da1a6a0-7796-47f0-bb82-bbcc38d90d69.yml\", \"line\": 15, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    secrets:\\n    ^~~~~~~~\", \"end_column\": 12}, {\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type string\", \"filepath\": \"../../tmp/3da1a6a0-7796-47f0-bb82-bbcc38d90d69.yml\", \"line\": 32, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"        name: ${{ github.event.inputs.request }}\\n              ^~~\", \"end_column\": 17}, {\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type string\", \"filepath\": \"../../tmp/3da1a6a0-7796-47f0-bb82-bbcc38d90d69.yml\", \"line\": 33, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        target: ${{ github.event.inputs.request }}\\n                ^~~\", \"end_column\": 19}]","meteor_score":0.2900225510765054,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":6721,"level":3,"name":"microsoft/onnxruntime","file_name":"reusable_linux_build.yml","len":5,"prompt":"Generate a GitHub Workflow named `Reusable Linux CPU/GPU Build and Test` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 12 inputs: pool_name-this input represents the specific 1es pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu), it must be supplied and the data type is string; build_config-this input represents build configuration (debug or release), it must be supplied and the data type is string; architecture-this input represents target architecture (x64 or arm64), it must be supplied and the data type is string; dockerfile_path-this input represents path to the dockerfile relative to the workspace root, it must be supplied and the data type is string; docker_image_repo-this input represents name for the docker image repository, it must be supplied and the data type is string; docker_build_args-this input represents arguments to pass to the docker image build command, it is optional, the data type is string and its default value is ; execution_providers-this input represents space-separated list of execution providers to enable (passed to build.py), it is optional, the data type is string and its default value is ; extra_build_flags-this input represents additional flags for the build.py script (appended after ep flags), it is optional, the data type is string and its default value is ; python_path_prefix-this input represents optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path), it is optional, the data type is string and its default value is ; python_version-this input represents python version to set up on the runner host, it is optional, the data type is string and its default value is 3.x; run_tests-this input represents whether to execute the test suite after building, it is optional, the data type is boolean and its default value is True; upload_build_output-this input represents whether to upload the build output directory as an artifact (used when tests are skipped), it is optional, the data type is boolean and its default value is False. It receives a secret: GH_TOKEN-it represents github token for accessing actions/packages and it must be supplied. The workflow has one job. The job id of the 1st job is `build_test_pipeline`. This job will execute on any runner that has the labels self-hosted and 1ES.Pool=${{ inputs.pool_name }}. The job `build_test_pipeline` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope, write access is granted to the GITHUB_TOKEN in the `packages` scope, write access is granted to the GITHUB_TOKEN in the `attestations` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `build_test_pipeline`. The job `build_test_pipeline` has 10 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ inputs.python_version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ inputs.python_version }}`. The 3rd step is named `Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_docker_image_step`. The step sets an environment variable to use: `GITHUB_TOKEN` is set to `${{ secrets.GH_TOKEN }}`. This step runs action `microsoft/onnxruntime-github-actions/build-docker-image` tagged as v0.0.6. The step defines 5 input parameters for the action: `dockerfile` is set to `${{ github.workspace }}/${{ inputs.dockerfile_path }}`, `image-name` is set to `ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}`, `build-args` is set to `${{ inputs.docker_build_args }}`, `push` is set to `True` and `azure-container-registry-name` is set to `onnxruntimebuildcache`. The 4th step is named `Export GitHub Actions cache environment variables`. This step runs action `actions/github-script` tagged as v7. The step defines an input parameter for the action: `script` is set to `core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\ncore.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n`. The 5th step is named `Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `update_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `update`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 6th step is named `Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `build`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 7th step is named `Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `test_step`. This step will run only if the condition(inputs.run_tests == true) is met. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `test`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 8th step is named `Prepare Build Output for Upload`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step uses bash to run a script: `#!/bin/bash\nset -e -x\nBUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\nif [ ! -d \"${BUILD_DIR}\" ]; then\n  echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n  exit 1\nfi\necho \"--- Cleaning build directory: ${BUILD_DIR} ---\"\nrm -rf \"${BUILD_DIR}/onnxruntime\" || true\nrm -rf \"${BUILD_DIR}/pybind11\" || true\nrm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\nrm -f \"${BUILD_DIR}/models\" || true\nDEPS_DIR=\"${BUILD_DIR}/_deps\"\nif [ -d \"${DEPS_DIR}\" ]; then\n  echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n  find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\nelse\n  echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\nfi\necho \"--- Saving executable permissions ---\"\ncd \"${BUILD_DIR}\"\nfind . -executable -type f -printf '%p\\n' > perms.txt\necho \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n`. The 9th step is named `Upload Build Output Artifact`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `build-output-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}` and `if-no-files-found` is set to `error`. The 10th step is named `Upload VCPKG Manifest Install Log on Update or Build Failure`. This step will run only if the condition(steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log` and `if-no-files-found` is set to `ignore`. /no-think","answer":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-Ubuntu2204-AMD-CPU)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or arm64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after EP\n          flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the PATH for python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on:\n    - self-hosted\n    - 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      id: build_docker_image_step\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      # ------------- Update Step (CMake Generation) -------------\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Build Step (Compilation) -------------\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Test Step -------------\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Prepare Artifact Step -------------\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      # ------------- Upload Build Output Step -------------\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n\n      # ------------- Upload Log on Build Failure Step -------------\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","llm_response":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: 'Specific 1ES pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu)'\n        required: true\n        type: string\n      build_config:\n        description: 'Build configuration (debug or release)'\n        required: true\n        type: string\n      architecture:\n        description: 'Target architecture (x64 or arm64)'\n        required: true\n        type: string\n      dockerfile_path:\n        description: 'Path to the dockerfile relative to the workspace root'\n        required: true\n        type: string\n      docker_image_repo:\n        description: 'Name for the docker image repository'\n        required: true\n        type: string\n      docker_build_args:\n        description: 'Arguments to pass to the docker image build command'\n        required: false\n        default: ''\n        type: string\n      execution_providers:\n        description: 'Space-separated list of execution providers to enable (passed to build.py)'\n        required: false\n        default: ''\n        type: string\n      extra_build_flags:\n        description: 'Additional flags for the build.py script (appended after ep flags)'\n        required: false\n        default: ''\n        type: string\n      python_path_prefix:\n        description: 'Optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path)'\n        required: false\n        default: ''\n        type: string\n      python_version:\n        description: 'Python version to set up on the runner host'\n        required: false\n        default: '3.x'\n        type: string\n      run_tests:\n        description: 'Whether to execute the test suite after building'\n        required: false\n        default: true\n        type: boolean\n      upload_build_output:\n        description: 'Whether to upload the build output directory as an artifact (used when tests are skipped)'\n        required: false\n        default: false\n        type: boolean\n\njobs:\n  build_test_pipeline:\n    runs-on: self-hosted\n    labels: self-hosted 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up Python ${{ inputs.python_version }}\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ inputs.python_version }}\n\n      - name: Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        id: build_docker_image_step\n        env:\n          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n        uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n        with:\n          dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n          image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}\n          build-args: ${{ inputs.docker_build_args }}\n          push: true\n          azure-container-registry-name: onnxruntimebuildcache\n\n      - name: Export GitHub Actions cache environment variables\n        uses: actions/github-script@v7\n        with:\n          script: |\n            core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n            core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n\n      - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        id: update_step\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: update\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        id: build_step\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: build\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})\n        id: test_step\n        if: ${{ inputs.run_tests == true }}\n        uses: microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n        with:\n          docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name }}\n          build_config: ${{ inputs.build_config }}\n          mode: test\n          execution_providers: ${{ inputs.execution_providers }}\n          extra_build_flags: ${{ inputs.extra_build_flags }}\n          python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      - name: Prepare Build Output for Upload\n        id: prepare_upload_step\n        if: ${{ inputs.upload_build_output == true }}\n        run: |\n          set -e -x\n          BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n          if [ ! -d \"${BUILD_DIR}\" ]; then\n            echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n            exit 1\n          fi\n          echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n          rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n          rm -rf \"${BUILD_DIR}/pybind11\" || true\n          rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n          rm -f \"${BUILD_DIR}/models\" || true\n          DEPS_DIR=\"${BUILD_DIR}/_deps\"\n          if [ -d \"${DEPS_DIR}\" ]; then\n            echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n            find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n          else\n            echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n          fi\n          echo \"--- Saving executable permissions ---\"\n          cd \"${BUILD_DIR}\"\n          find . -executable -type f -printf '%p\\n' > perms.txt\n          echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      - name: Upload Build Output Artifact\n        id: upload_build_artifact_step\n        if: ${{ inputs.upload_build_output == true }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n          path: \"${{ runner.temp }}/${{ inputs.build_config }}\"\n          if-no-files-found: error\n\n      - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n        id: upload_vcpkg_manifest_log_step\n        if: ${{ steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure' }}\n        uses: actions/upload-artifact@v4\n        with:\n          name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}\n          path: \"${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log\"\n          if-no-files-found: ignore\n```","repository_id":3980037,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"labels\\\" for \\\"job\\\" section. expected one of \\\"concurrency\\\", \\\"container\\\", \\\"continue-on-error\\\", \\\"defaults\\\", \\\"env\\\", \\\"environment\\\", \\\"if\\\", \\\"name\\\", \\\"needs\\\", \\\"outputs\\\", \\\"permissions\\\", \\\"runs-on\\\", \\\"secrets\\\", \\\"services\\\", \\\"steps\\\", \\\"strategy\\\", \\\"timeout-minutes\\\", \\\"uses\\\", \\\"with\\\"\", \"filepath\": \"../../tmp/7c16b34c-271a-4eb7-872b-6368f9271fb1.yml\", \"line\": 65, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    labels: self-hosted 1ES.Pool=${{ inputs.pool_name }}\\n    ^~~~~~~\", \"end_column\": 11}]","meteor_score":0.9402799933035134,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1727,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":9,"Actions":["actions/checkout","actions/github-script","actions/setup-python","actions/upload-artifact","actions/upload-artifact","microsoft/onnxruntime-github-actions/build-docker-image","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/build-docker-image"},{"version":"v7","name":"actions/github-script"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":1}}
{"id":46555,"level":2,"name":"sustainable-computing-io/kepler","file_name":"mock_acpi.yml","len":5,"prompt":"Generate a GitHub Workflow named `Mock ACPI` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: a comment on an issue or pull request is created. The workflow has 4 jobs. The 1st job is named `Initialize workflow` and its job id is `initalize-workflow`. The job `initalize-workflow` has 2 steps. The 1st step is named `Get PR branch` and its id is `pr_branch`. The 2nd step is named `Set job status as pending`. The 2nd job is named `Create self-hosted runner` and its job id is `create-runner`. The job `create-runner` has one step. The 1st step is named `metal-runner-action`. The 3rd job is named `Test Mock ACPI` and its job id is `test-mock-acpi`. The job `test-mock-acpi` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Configure SSH`. The 3rd step is named `Install Dependencies`. The 4th step is named `Run playbook` and its id is `run-playbook`. The 4th job is named `Cleanup` and its job id is `cleanup`. The job `cleanup` has 3 steps. The 1st step is named `delete runner`. The 2nd step is named `Mark workflow as failed if playbook failed`. The 3rd step is named `Set job status as ${{ job.status }}`. /no-think","answer":"```yaml\n# This workflow will run mock-acpi compose on self-hosted equinix runners and run validator tool\nname: Mock ACPI\n\non: # yamllint disable-line rule:truthy\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      head_sha: ${{ steps.pr_branch.outputs.head_sha }}\n    steps:\n      # Since `issue_comment` event runs on the default branch,\n      # we need to get the branch of the pull request\n    - name: Get PR branch\n      id: pr_branch\n      uses: xt0rted/pull-request-comment-branch@v3\n      # Since `issue_comment` event workflow will not appear on the\n      # pull request page, we need to set the status of the job\n      # in order to attach it to the pull request itself\n    - name: Set job status as pending\n      if: ${{ success() }}\n      uses: myrotvorets/set-commit-status-action@master\n      with:\n        sha: ${{ steps.pr_branch.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: pending\n\n  create-runner:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n    - name: metal-runner-action\n      uses: sustainable-computing-io/metal-runner-action@main\n      with:\n        github_token: ${{ secrets.GH_SELF_HOSTED_RUNNER_TOKEN }}\n        metal_auth_token: ${{ secrets.EQUINIX_API_TOKEN }}\n        metal_project_id: ${{ secrets.EQUINIX_PROJECT_ID }}\n        metro: da\n        plan: c3.small.x86\n        os: ubuntu_20_04\n        organization: sustainable-computing-io\n\n  test-mock-acpi:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Test Mock ACPI\n    needs: [initalize-workflow, create-runner]\n    continue-on-error: true\n    runs-on: self-hosted\n    outputs:\n      runner-name: ${{ runner.name }}\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.head_sha }}\n\n    - name: Configure SSH\n      if: ${{ success() }}\n      run: |\n        echo \"Configuring SSH for runner\"\n        sudo ssh-keygen -t rsa -b 4096 -f /root/.ssh/ansible_rsa -N ''\n        sudo cat ~/.ssh/ansible_rsa.pub >> ~/.ssh/authorized_keys\n        sudo echo \"StrictHostKeyChecking no\" >> ~/.ssh/config\n\n    - name: Install Dependencies\n      if: ${{ success() }}\n      run: |\n        echo \"Installing Ansible and Docker module\"\n        sudo apt install software-properties-common -y\n        sudo add-apt-repository --yes --update ppa:ansible/ansible\n        sudo apt install -y ansible python3-pip\n        sudo ansible-galaxy collection install community.docker\n\n    - name: Run playbook\n      id: run-playbook\n      if: ${{ success() }}\n      run: |\n        echo \"Setting up the infra\"\n        cd ${GITHUB_WORKSPACE}/ansible\n        ansible-playbook -vv -i inventory.yaml setup.yaml\n        echo \"Launching Mock ACPI compose and running validator\"\n        ansible-playbook -vv -i inventory.yaml mock_acpi_playbook.yaml -e \"pr_number=${{ github.event.issue.number }}\"\n\n  cleanup:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Cleanup\n    needs: [initalize-workflow, test-mock-acpi]\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      uses: sustainable-computing-io/metal-sweeper-action@main\n      with:\n        authToken: ${{ secrets.EQUINIX_API_TOKEN }}\n        projectID: ${{ secrets.EQUINIX_PROJECT_ID }}\n        runnerName: ${{ needs.test-mock-acpi.outputs.runner-name }}\n\n      # Marking the workflow as failed if the playbook fails\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.result == 'failure' }}\n      run: |\n        echo \"Playbook failed, marking workflow as failed\"\n        exit 1\n\n    - name: Set job status as ${{ job.status }}\n      uses: myrotvorets/set-commit-status-action@master\n      if: ${{ always() }}\n      with:\n        sha: ${{ needs.initalize-workflow.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: ${{ job.status }}\n\n```","llm_response":"```yaml\nname: Mock ACPI\n\non:\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      pr_branch: ${{ steps.pr_branch.outputs.pr_branch }}\n      job_status: ${{ steps.set_job_status.outputs.job_status }}\n    steps:\n    - name: Get PR branch\n      id: pr_branch\n      uses: actions/github-script@v7\n      with:\n        script: |\n          const issue = await github.rest.issues.get({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            issue_number: context.issue.number\n          });\n\n          const prBranch = issue.data.head.ref;\n          console.log(`PR branch: ${prBranch}`);\n          return prBranch;\n\n    - name: Set job status as pending\n      id: set_job_status\n      run: |\n        echo \"job_status=pending\" >> $GITHUB_OUTPUT\n\n  create-runner:\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    uses: ./.github/workflows/metal-runner.yml\n    with:\n      os: ubuntu-latest\n      disk-size: 10\n      memory: 4\n      runner-type: m6as.4xlarge\n    secrets: inherit\n\n  test-mock-acpi:\n    name: Test Mock ACPI\n    needs: create-runner\n    runs-on: self-hosted\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Configure SSH\n      uses: webfactory/ssh-agent@v0.9.1\n      with:\n        ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}\n    - name: Install Dependencies\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y jq\n    - name: Run playbook\n      id: run-playbook\n      uses: ./.github/workflows/runner-ssh-action\n      with:\n        command: |\n          cd scripts\n          ./test-mock-acpi.sh\n      env:\n        AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        AWS_REGION: us-west-2\n        AWS_DEFAULT_REGION: us-west-2\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}\n        GITHUB_PR_NUMBER: ${{ github.event.issue.number }}\n        PR_BRANCH: ${{ needs.initalize-workflow.outputs.pr_branch }}\n        METAL_RUNNER_NAME: ${{ needs.create-runner.outputs.runner-name }}\n        METAL_INSTANCE_ID: ${{ needs.create-runner.outputs.instance-id }}\n        METAL_INSTANCE_IP: ${{ needs.create-runner.outputs.instance-ip }}\n        METAL_ZONE: ${{ needs.create-runner.outputs.zone }}\n        METAL_PROJECT_ID: ${{ secrets.METAL_PROJECT_ID }}\n        METAL_API_TOKEN: ${{ secrets.METAL_API_TOKEN }}\n        METAL_RUNNER_TOKEN: ${{ secrets.METAL_RUNNER_TOKEN }}\n    - name: Set job status as ${{ job.status }}\n      if: ${{ failure() }}\n      run: |\n        echo \"job_status=${{ job.status }}\" >> $GITHUB_OUTPUT\n      id: set_job_status\n\n  cleanup:\n    name: Cleanup\n    needs: test-mock-acpi\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\n      uses: ./.github/workflows/metal-runner.yml\n      with:\n        delete: true\n        instance-id: ${{ needs.create-runner.outputs.instance-id }}\n        project-id: ${{ secrets.METAL_PROJECT_ID }}\n        api-token: ${{ secrets.METAL_API_TOKEN }}\n      env:\n        METAL_RUNNER_TOKEN: ${{ secrets.METAL_RUNNER_TOKEN }}\n\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\n      uses: actions/github-script@v7\n      with:\n        script: |\n          github.rest.actions.createWorkflowDispatch({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            workflow_id: 'mock-acpi.yml',\n            ref: 'main',\n            inputs: {\n              job_status: 'failure'\n            }\n          });\n\n    - name: Set job status as ${{ job.status }}\n      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\n      run: |\n        echo \"job_status=${{ job.status }}\" >> $GITHUB_OUTPUT\n      id: set_job_status\n\n```","repository_id":69840533,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"initalize-workflow\\\" is not defined in object type {create-runner: {outputs: {string => string}; result: string}}\", \"filepath\": \"../../tmp/a1fa1205-c513-4d8a-99c9-811d5db3cb6c.yml\", \"line\": 78, \"column\": 24, \"kind\": \"expression\", \"snippet\": \"        PR_BRANCH: ${{ needs.initalize-workflow.outputs.pr_branch }}\\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 65}, {\"message\": \"property \\\"job_status\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/a1fa1205-c513-4d8a-99c9-811d5db3cb6c.yml\", \"line\": 98, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 53}, {\"message\": \"property \\\"create-runner\\\" is not defined in object type {test-mock-acpi: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/a1fa1205-c513-4d8a-99c9-811d5db3cb6c.yml\", \"line\": 102, \"column\": 26, \"kind\": \"expression\", \"snippet\": \"        instance-id: ${{ needs.create-runner.outputs.instance-id }}\\n                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 64}, {\"message\": \"property \\\"job_status\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/a1fa1205-c513-4d8a-99c9-811d5db3cb6c.yml\", \"line\": 109, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 53}, {\"message\": \"property \\\"job_status\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/a1fa1205-c513-4d8a-99c9-811d5db3cb6c.yml\", \"line\": 124, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"      if: ${{ needs.test-mock-acpi.outputs.job_status == 'failure' }}\\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 53}]","meteor_score":0.4101415748237464,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1069,"stats":{"NumofTriggers":1,"Triggers":["issue_comment"],"NumofJobs":4,"NumofActions":6,"Actions":["actions/checkout","myrotvorets/set-commit-status-action","myrotvorets/set-commit-status-action","sustainable-computing-io/metal-runner-action","sustainable-computing-io/metal-sweeper-action","xt0rted/pull-request-comment-branch"],"Actions_details":[{"version":"v3","name":"xt0rted/pull-request-comment-branch"},{"version":"master","name":"myrotvorets/set-commit-status-action"},{"version":"main","name":"sustainable-computing-io/metal-runner-action"},{"version":"v4","name":"actions/checkout"},{"version":"main","name":"sustainable-computing-io/metal-sweeper-action"},{"version":"master","name":"myrotvorets/set-commit-status-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":3}}
{"id":3563,"level":3,"name":"paradigmxyz/reth","file_name":"kurtosis.yml","len":5,"prompt":"Generate a GitHub Workflow named `kurtosis` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) the scheduled time has come: every 12 hours. 3) The workflow would run whenever there is a push event to: a tag whose name matches *. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 3 jobs. The job id of the 1st job is `prepare-reth`. This job will call a reusable workflow located at `./.github/workflows/prepare-reth.yml`. The job will pass 2 inputs to the called workflow: the input `image_tag` is `ghcr.io/paradigmxyz/reth:kurtosis-ci` and the input `binary_name` is `reth`. The 2nd job is named `run kurtosis` and its job id is `test`. Before this job runs, `prepare-reth` must complete successfully. This job will execute on any runner that is a member of Reth. The maximum number of minutes to run the job is 60. The job `test` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Download reth image`. This step runs action `actions/download-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `artifacts` and `path` is set to `/tmp`. The 3rd step is named `Load Docker image`. This step runs a script: `docker load -i /tmp/reth_image.tar &\nwait\ndocker image ls -a\n`. The 4th step is named `Run kurtosis`. This step runs action `ethpandaops/kurtosis-assertoor-github-action` tagged as v1. The step defines an input parameter for the action: `ethereum_package_args` is set to `.github/assets/kurtosis_network_params.yaml`. The job id of the 3rd job is `notify-on-error`. Before this job runs, `test` must complete successfully. This job will run only if the condition(failure()) is met. This job will execute on any runner that is a member of Reth. The job `notify-on-error` has one step. The 1st step is named `Slack Webhook Action`. The step sets 3 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}`, `SLACK_MESSAGE` is set to `Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}` and `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK_URL }}`. This step runs action `rtCamp/action-slack-notify` tagged as v2. /no-think","answer":"```yaml\n# Runs `assertoor` tests on a `kurtosis` testnet.\n\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n\n  push:\n    tags:\n    - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    timeout-minutes: 60\n    strategy:\n      fail-fast: false\n    name: run kurtosis\n    runs-on:\n      group: Reth\n    needs:\n    - prepare-reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on:\n      group: Reth\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","llm_response":"```yaml\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n    - cron: 0 */12 * * * # Run every 12 hours\n  push:\n    tags: ['*'] # Run on tag pushes\n\nenv:\n  CARGO_TERM_COLOR: always\n\n# Cancel any workflow update on PR update\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: './.github/workflows/prepare-reth.yml'\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    name: run kurtosis\n    needs:\n    - prepare-reth\n    runs-on:\n      - Reth\n    timeout-minutes: 60\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: '/tmp'\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: '.github/assets/kurtosis_network_params.yaml'\n\n  notify-on-error:\n    needs:\n    - test\n    if: failure()\n    runs-on:\n      - Reth\n    steps:\n    - name: Slack Webhook Action\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n      uses: rtCamp/action-slack-notify@v2\n\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/af0b80cd-24d1-4cc2-b12e-d9f4bfa18947.yml\", \"line\": 30, \"column\": 9, \"kind\": \"runner-label\", \"snippet\": \"      - Reth\\n        ^~~~\", \"end_column\": 12}, {\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/af0b80cd-24d1-4cc2-b12e-d9f4bfa18947.yml\", \"line\": 57, \"column\": 9, \"kind\": \"runner-label\", \"snippet\": \"      - Reth\\n        ^~~~\", \"end_column\": 12}]","meteor_score":0.9633676669245524,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":440,"stats":{"NumofTriggers":3,"Triggers":["push","schedule","workflow_dispatch"],"NumofJobs":3,"NumofActions":4,"Actions":["actions/checkout","actions/download-artifact","ethpandaops/kurtosis-assertoor-github-action","rtCamp/action-slack-notify"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ethpandaops/kurtosis-assertoor-github-action"},{"version":"v2","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/prepare-reth.yml"],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":4785,"level":3,"name":"nilearn/nilearn","file_name":"test_with_free_threaded_python.yml","len":5,"prompt":"Generate a GitHub Workflow named `test free threaded python` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) the scheduled time has come: at 08:00 am, on day 1 of the month. 2) someone manually triggers the workflow. The workflow sets an environment variable to use: `FORCE_COLOR` is set to `True`. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}` and its job id is `test_and_coverage`. This job will run only if the condition(github.repository == 'nilearn/nilearn') is met. This job will run on ${{ matrix.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `description` has one value: latest dependencies. The variable `py` has one value: 3.13t. The variable `os` has 3 values: ubuntu-latest, macos-latest and windows-latest. The variable `env` has one value: plotting. If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled. The job `test_and_coverage` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Install the latest version of uv`. This step runs action `astral-sh/setup-uv` tagged as v6. The 3rd step is named `Setup python`. This step runs action `actions/setup-python` tagged as v5. The step defines 2 input parameters for the action: `python-version` is set to `${{ matrix.py }}` and `allow-prereleases` is set to `True`. The 4th step is named `Install tox`. This step runs a script: `uv tool install tox --with=tox-uv --with=tox-gh-actions`. The 5th step is named `Show tox config`. This step runs a script: `tox c`. The 6th step is named `Run test suite`. This step runs a script: `tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n`. The 7th step is named `Upload test report`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html` and `path` is set to `report.html`. The 8th step is named `Upload test timings`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output` and `path` is set to `results/pytest_output`. /no-think","answer":"```yaml\n# Runs tests suite with free threaded python.\n#\n###\nname: test free threaded python\n\non:\n  schedule:\n    # Run every 1rst of the month\n  - cron: 0 8 1 * *\n\n    # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\n# Force to use color\nenv:\n  FORCE_COLOR: true\n\njobs:\n\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: 'Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description\n      }}'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: [3.13t]\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","llm_response":"```yaml\nname: test free threaded python\n\non:\n  schedule:\n    - cron: 0 8 1 * * # Runs at 8am, on the 1st of the month\n  workflow_dispatch:\n\nenv:\n  FORCE_COLOR: True\n\n# Cancel any workflow update on workflow update\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  test_and_coverage:\n    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\n    if: github.repository == 'nilearn/nilearn'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description:\n        - latest dependencies\n        py:\n        - 3.13t\n        os:\n        - ubuntu-latest\n        - macos-latest\n        - windows-latest\n        env:\n        - plotting\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html\n        path: 'report.html'\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output\n        path: 'results/pytest_output'\n\n```","repository_id":3983520,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 18: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/6d3c82d7-983d-442c-b356-22d783f7f282.yml\", \"line\": 18, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":495,"stats":{"NumofTriggers":2,"Triggers":["schedule","workflow_dispatch"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/checkout","actions/setup-python","actions/upload-artifact","actions/upload-artifact","astral-sh/setup-uv"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v6","name":"astral-sh/setup-uv"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":64153,"level":2,"name":"oracle/graal","file_name":"ni-layers.yml","len":5,"prompt":"Generate a GitHub Workflow named `Weekly Native Image Layer Building Tests` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by multiple events: 1) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 2) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 3) the scheduled time has come: at 12:00 am, only on monday. 4) someone manually triggers the workflow. The workflow sets 3 environment variables to use: `LIBRARY_METADATA_PATH` is set to `${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests`, `JAVA_VERSION` is set to `21` and `PYTHON_VERSION` is set to `3.12.3`. The workflow has 2 jobs. The 1st job is named `Build GraalVM and populate matrix` and its job id is `build-graalvm-and-populate-matrix`. The job `build-graalvm-and-populate-matrix` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Build GraalVM JDK`. The 3rd step is named `Tar GraalVM JDK`. The 4th step is named `Persist GraalVM JDK build`. The 5th step is named `Setup python`. The 6th step is named `Populate matrix` and its id is `set-matrix`. The 2nd job is named `${{ matrix.coordinates }}` and its job id is `test-native-image-layer-build`. The job `test-native-image-layer-build` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download GraalVM JDK build`. The 3rd step is named `Extract GraalVM JDK build`. The 4th step is named `Setup JAVA_HOME`. The 5th step is named `Setup python`. The 6th step is named `Build layer`. /no-think","answer":"```yaml\n#\n# Copyright (c) 2024, 2024, Oracle and/or its affiliates. All rights reserved.\n# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n#\n# The Universal Permissive License (UPL), Version 1.0\n#\n# Subject to the condition set forth below, permission is hereby granted to any\n# person obtaining a copy of this software, associated documentation and/or\n# data (collectively the \"Software\"), free of charge and under any and all\n# copyright rights in the Software, and any and all patent rights owned or\n# freely licensable by each licensor hereunder covering either (i) the\n# unmodified Software as contributed to or provided by such licensor, or (ii)\n# the Larger Works (as defined below), to deal in both\n#\n# (a) the Software, and\n#\n# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if\n# one is included with the Software each a \"Larger Work\" to which the Software\n# is contributed by such licensors),\n#\n# without restriction, including without limitation the rights to copy, create\n# derivative works of, display, perform, and distribute the Software and make,\n# use, sell, offer for sale, import, export, have made, and have sold the\n# Software and the Larger Work(s), and to sublicense the foregoing rights on\n# either these or other terms.\n#\n# This license is subject to the following condition:\n#\n# The above copyright notice and either this complete permission notice or at a\n# minimum a reference to the UPL must be included in all copies or substantial\n# portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n#\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1   # Once a week, at midnight on Monday (00:00 UTC)\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    if: (github.repository=='oracle/graal')\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        native-images: \n          native-image,native-image-configure,lib:native-image-agent\n        components: Native Image,Native Image Configure Tool\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      shell: bash\n      run: tar -czvhf graalvm.tgz -C $(dirname ${GRAALVM_HOME}) $(basename \n        ${GRAALVM_HOME})\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tgz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py \n        ${{ env.LIBRARY_METADATA_PATH }}/\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    env:\n      GRAALVM_HOME: ${{ github.workspace }}/graalvm\n    timeout-minutes: 30\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs. \n          build-graalvm-and-populate-matrix.outputs.matrix).coordinates }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@95815c38cf2ff2164869cbab79da8d1f422bc89e   # v4.2.1\n      with:\n        name: graalvm\n        path: .\n    - name: Extract GraalVM JDK build\n      run: tar -xzvf graalvm.tgz -C $(dirname ${GRAALVM_HOME})\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: oracle\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py ${{ env.GRAALVM_HOME }}/bin/native-image \"${{ matrix.coordinates }}\"\n\n```","llm_response":"```yaml\n# Licensed to the Apache Software Foundation (ASF) under one or more\n# contributor license agreements.  See the NOTICE file distributed with\n# this work for additional information regarding copyright ownership.\n# The ASF licenses this file to You under the Apache License, Version 2.0\n# (the \"License\"); you may not use this file except in compliance with\n# the License.  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1     # Run every Monday at midnight\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: graalvm\n        java-distribution: temurin\n        os: ubuntu-latest\n        java-package: jdk\n        java-components: 'corretto,corretto-jdk,corretto-jdk-headless,corretto-jdk-doc,corretto-jre,corretto-jre-headless,corretto-jre-doc'\n        java-release: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      run: tar -C ${{ env.GRAALVM_HOME }} -czvf graalvm.tar.gz .\n      working-directory: ${{ env.GRAALVM_HOME }}\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tar.gz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: |\n        import os\n        import json\n        import sys\n\n        python_file = os.path.join(os.getenv('LIBRARY_METADATA_PATH'), 'metadata.json')\n        with open(python_file, 'r') as file:\n            metadata = json.load(file)\n            print(f\"metadata: {metadata}\")\n\n        if not metadata:\n            print(\"No metadata found in metadata.json\")\n            sys.exit(1)\n\n        # Initialize an empty list to store the matrix\n        matrix = []\n\n        # Iterate over each entry in the metadata\n        for entry in metadata:\n            # Extract the values for the matrix fields\n            coordinates = entry['coordinates']\n            native-image-layers = entry['native-image-layers']\n            print(f\"coordinates: {coordinates}\")\n            print(f\"native-image-layers: {native-image-layers}\")\n\n            # Iterate over each native-image-layer in the list\n            for native_image_layer in native-image-layers:\n                # Extract the values for the matrix fields\n                layer_coordinates = native_image_layer['coordinates']\n                print(f\"layer_coordinates: {layer_coordinates}\")\n                if layer_coordinates:\n                    # Create a dictionary for the current matrix entry\n                    matrix_entry = {\n                        \"coordinates\": coordinates,\n                        \"native-image-layer\": layer_coordinates,\n                        \"graalvm\": \"graalvm\",\n                        \"python\": \"python\",\n                        \"java-version\": \"${{ env.JAVA_VERSION }}\"\n                    }\n                    # Append the matrix entry to the list\n                    matrix.append(matrix_entry)\n\n        # Print the matrix to verify its contents\n        print(\"Generated matrix:\")\n        print(matrix)\n\n        # Write the matrix to a JSON file\n        with open(os.path.join(os.getenv('LIBRARY_METADATA_PATH'), 'matrix.json'), 'w') as file:\n            json.dump(matrix, file, indent=4)\n\n        # Print the path to the matrix file\n        print(f\"Generated matrix file: {os.path.join(os.getenv('LIBRARY_METADATA_PATH'), 'matrix.json')}\")\n\n  test-native-image-layer-build:\n    needs: build-graalvm-and-populate-matrix\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        include: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix)\n          }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@v4\n      with:\n        name: graalvm\n    - name: Extract GraalVM JDK build\n      run: tar -xzf graalvm.tar.gz\n      working-directory: .\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: local\n        java-version: ${{ env.JAVA_VERSION }}\n        java-home: ${{ env.GRAALVM_HOME }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        ./gradlew :vm:tests:gh_workflows:NILayerTests:build --no-daemon\n      env:\n        GRADLE_OPTS: -Dorg.gradle.parallel=true -Dorg.gradle.daemon=false \n          -Dorg.gradle.caching=false\n\n```","repository_id":3313009,"lint_valid":false,"lint_output":"[{\"message\": \"input \\\"java-home\\\" is not defined in action \\\"actions/setup-java@v4\\\". available inputs are \\\"architecture\\\", \\\"cache\\\", \\\"cache-dependency-path\\\", \\\"check-latest\\\", \\\"distribution\\\", \\\"gpg-passphrase\\\", \\\"gpg-private-key\\\", \\\"java-package\\\", \\\"java-version\\\", \\\"java-version-file\\\", \\\"jdkFile\\\", \\\"job-status\\\", \\\"mvn-toolchain-id\\\", \\\"mvn-toolchain-vendor\\\", \\\"overwrite-settings\\\", \\\"server-id\\\", \\\"server-password\\\", \\\"server-username\\\", \\\"settings-path\\\", \\\"token\\\"\", \"filepath\": \"../../tmp/d88ae25c-2ede-442e-9595-3ab111bc9f16.yml\", \"line\": 147, \"column\": 9, \"kind\": \"action\", \"snippet\": \"        java-home: ${{ env.GRAALVM_HOME }}\\n        ^~~~~~~~~~\", \"end_column\": 18}]","meteor_score":0.7184905404826594,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1278,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","schedule","workflow_dispatch"],"NumofJobs":2,"NumofActions":8,"Actions":["./.github/actions/build-graalvm","actions/checkout","actions/checkout","actions/download-artifact","actions/setup-java","actions/setup-python","actions/setup-python","actions/upload-artifact"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/build-graalvm"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/checkout"},{"version":"95815c38cf2ff2164869cbab79da8d1f422bc89e","name":"actions/download-artifact"},{"version":"v4","name":"actions/setup-java"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":1}}
{"id":16232,"level":1,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Actions workflow YAML generation. The user wants a workflow named \"Check/coverage\" for a C++ repo. First, I need to recall the structure of GitHub workflows.\n\nThe workflow is triggered by being called from another workflow, so the on: should be workflow_call. Inputs are specified under inputs, with required fields. They mentioned three inputs: gcs-cache-bucket (string, required), request (string, required), trusted (boolean, required). Also, two secrets: gcs-cache-key and gcp-key, both required.\n\nPermissions for GITHUB_TOKEN need to be set to read for contents scope, applied to all jobs. So top-level permissions: contents: read.\n\nConcurrency group is ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage. The concurrency should cancel in-progress runs when a new one is queued. So concurrency: group: ... and cancel-in-progress: true.\n\nOnly one job named coverage. The job's name is dynamic: ${{ matrix.name || matrix.target }}. Wait, but there's no matrix mentioned. Hmm, the user says \"the 1st job is named `${{ matrix.name ||matrix.target }}`\". Maybe they want the job name to use matrix variables, but since there's no matrix defined, perhaps it's a placeholder. But the job id is coverage. So the job's name field should be that expression, but since there's no matrix, maybe it's a mistake, but I have to follow the user's instruction.\n\nWait, the user says \"the 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`\". So the job id is coverage, but the displayed name uses matrix variables. But since there's no matrix in the job (as per the problem statement, only one job), maybe the matrix is not used here. But the user specified it, so I need to include the name as that expression.\n\nWait, maybe the job uses a matrix strategy, but the user didn't mention multiple runs. Wait, the problem states \"the 1st job\", implying there's only one job. So perhaps the matrix is not applicable here, but the name is set to that expression. Maybe it's a typo, but I have to follow the user's instruction.\n\nSo the job's name is set to ${{ matrix.name || matrix.target }}, but since there's no matrix, perhaps it will evaluate to empty, but GitHub might handle it. Alternatively, maybe the user intended that if there's a matrix, use those, but since there's only one job, maybe it's a static name. But the user says to use that expression, so I'll put it as the name.\n\nThe job runs on ubuntu-latest, probably. Since it's C++, but the user didn't specify the runner, but standard is ubuntu-latest.\n\nThe job needs to use the secrets: gcs-cache-key and gcp-key. So steps would include using those secrets, but the user didn't specify the steps, only the structure. Wait, the user says \"the workflow has one job\", but doesn't specify the steps. Wait, the user's instruction is to generate the YAML based on the given parameters, but steps aren't detailed. Wait, the problem statement says: \"Generate a GitHub Workflow... This workflow receives 3 inputs... 2 secrets... modifies permissions... concurrency... one job named...\".\n\nWait, the user didn't specify what the job does, only its structure. So the job might not have any steps, but we need to include the necessary parts. However, typically, a job needs at least one step. But since the user didn't specify, maybe we can have a placeholder step. Wait, but the problem says \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\" So perhaps the steps are not required to be filled in, but the structure must be correct.\n\nWait, looking back: \"the workflow has one job. The 1st job is named...\". The user didn't specify steps, so maybe the job is empty? But GitHub requires at least one step. Hmm. Maybe the user expects a placeholder step, but since it's not specified, perhaps we can have a run: echo or something. But the problem says \"generate a YAML file based on the user's input below\", and the user didn't mention steps, so maybe we can omit steps? But that would be invalid. Wait, the user's input says \"the workflow has one job\", but doesn't specify steps, so perhaps the job is defined with the necessary structure but no steps. However, GitHub requires at least one step. Hmm.\n\nWait, maybe the user expects that the steps are not part of the requirement, so the answer should include a job with the correct name, id, permissions, etc., but steps can be a placeholder. Since the user didn't specify the steps, but the problem is about the structure, perhaps we can include a dummy step. For example, a step that runs a script, but since it's C++ coverage, maybe using some tools, but the user didn't specify. However, the user's instruction is to generate based on the given parameters, which don't include steps. So perhaps the steps are not required here, but the YAML must be valid. Wait, but a job must have steps. So to make it valid, I'll include a placeholder step, like \"Run tests\" with a run command, but since the user didn't specify, maybe just a simple echo.\n\nWait, the user is a DevOps engineer, so the YAML must be syntactically correct. Therefore, the job needs at least one step. Since the problem doesn't specify what the job does, but it's for coverage, maybe it's using some coverage tools, but the user didn't specify. So perhaps the steps are not part of the required answer, but the structure is. However, to make the YAML valid, I need to include a step. Maybe the user expects that, so I'll add a placeholder step.\n\nPutting it all together:\n\n- Name: Check/coverage\n- on: workflow_call with inputs and secrets\n- permissions: contents: read\n- concurrency with cancel-in-progress\n- job coverage with name using matrix expression, id coverage, runs-on ubuntu-latest, and a step that perhaps uses the secrets.\n\nWait, the secrets are provided as inputs to the workflow, so the job steps would reference them as secrets.gcs-cache-key and secrets.gcp-key.\n\nBut the user didn't specify what the steps do, so perhaps the step is just a placeholder.\n\nLet me structure it:\n\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        required: true\n        type: string\n      request:\n        required: true\n        type: string\n      trusted:\n        required: true\n        type: boolean\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name || matrix.target }}\n    runs-on: ubuntu-latest\n    steps:\n      - name: Example step\n        run: echo \"Coverage job running\"\n\nWait, but the user said \"the 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`\". So the job id is coverage, which is correct here. The name is set to that expression.\n\nBut the user didn't mention runs-on, but standard is ubuntu-latest. Also, the problem says primary language is C++, but that might not affect the runner.\n\nCheck if all inputs and secrets are correctly defined. Inputs have type and required. Secrets are under secrets with required: true (but in GitHub, secrets in workflow_call don't have a type, just required).\n\nWait, in workflow_call, inputs have type, but secrets don't specify type, just required.\n\nSo the inputs section should have each input with type and required: true.\n\nThe secrets section lists the secrets with required: true (but in GitHub syntax, for secrets in workflow_call, it's just specifying the name and required, no type).\n\nSo the YAML for inputs:\n\ninputs:\n  gcs-cache-bucket:\n    type: string\n    required: true\n  request:\n    type: string\n    required: true\n  trusted:\n    type: boolean\n    required: true\n\nsecrets:\n  gcs-cache-key:\n    required: true\n  gcp-key:\n    required: true\n\nPermissions at the top level: permissions: contents: read\n\nConcurrency group as specified.\n\nJob name uses the matrix expression. Since there's no matrix strategy, but the job name is set to that, it's okay. If matrix isn't defined, it might default to empty, but the user specified it, so we include it.\n\nSteps: need at least one. Since the user didn't specify, add a placeholder.\n\nAlso, the job id is coverage, which is correct as the key under jobs.\n\nCheck if the concurrency uses the correct expression. The user said \"using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group\". So the group is that expression.\n\nIn YAML, it should be written as:\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\nWait, but in YAML, the expression needs to be in quotes if it contains special characters, but GitHub Actions allows it without quotes if it's a single expression. However, to be safe, sometimes quotes are used, but the user's example didn't specify. Since the user's instruction says to generate the YAML, following standard practices, it's okay without quotes here.\n\nPutting all together.\n</think>\n\n```yaml\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name || matrix.target }}\n    runs-on: ubuntu-latest\n    steps:\n      - name: Placeholder step\n        run: echo \"Coverage job executed\"\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"name\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/dc88500d-933c-4218-a743-47fd4cde3db9.yml\", \"line\": 30, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name || matrix.target }}\\n              ^~~~~~~~~~~\", \"end_column\": 25}, {\"message\": \"property \\\"target\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/dc88500d-933c-4218-a743-47fd4cde3db9.yml\", \"line\": 30, \"column\": 30, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name || matrix.target }}\\n                             ^~~~~~~~~~~~~\", \"end_column\": 42}]","meteor_score":0.24504420547926226,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":17801,"level":2,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The job id of the 2nd job is `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The job id of the 4th job is `needs-refinement`. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The 5th job is named `status: freeze` and its job id is `status-freeze`. The job `status-freeze` has one step. The 1st step is named `status: freeze`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":" ```yaml\nname: On issue labeled\non:\n  issues:\n    types: [labeled]\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'assigned' }}\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: 'main'\n          FOLDER: 'candidates-for-university-projects'\n          TARGET_FOLDER: 'assigned'\n          CLEAN: true\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: 'main'\n          FOLDER: 'good-first-issues'\n          TARGET_FOLDER: 'assigned'\n          CLEAN: true\n  FirstTimeCodeContribution:\n    name: ðŸ“ First Time Code Contribution\n    needs: Assigned\n    runs-on: ubuntu-latest\n    if: ${{ github.event.label.name == 'first-time-code-contribution' }}\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        run: echo \"ðŸ‘‹ Hello ${{ github.event.issue.user.login }}! ðŸ‘‹\"\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: 'main'\n          FOLDER: 'candidates-for-university-projects'\n          TARGET_FOLDER: 'assigned'\n          CLEAN: true\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: 'main'\n          FOLDER: 'good-first-issues'\n          TARGET_FOLDER: 'assigned'\n          CLEAN: true\n  good-first-issue:\n    name: good first issue\n    needs: FirstTimeCodeContribution\n    runs-on: ubuntu-latest\n    steps:\n      - name: good first issue\n        run: echo \"ðŸ‘‹ Hello ${{ github.event.issue.user.login }}! ðŸ‘‹\"\n  needs-refinement:\n    name: needs refinement\n    needs: good-first-issue\n    runs-on: ubuntu-latest\n    steps:\n      - name: needs refinement\n        run: echo \"ðŸ‘‹ Hello ${{ github.event.issue.user.login }}! ðŸ‘‹\"\n  status-freeze:\n    name: status: freeze\n    runs-on: ubuntu-latest\n    steps:\n      - name: status: freeze\n        run: echo \"ðŸ‘‹ Hello ${{ github.event.issue.user.login }}! ðŸ‘‹\"\n``` ","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 66: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/ef38ca92-92dd-458d-be8c-569ec26654ba.yml\", \"line\": 66, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":54038,"level":1,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow named \"Test Fusion Library\" for a PHP repo. First, I need to set the name correctly in the YAML.\n\nThe triggers are pushes to main and PR events. For push, it's only the main branch. For pull_request, it should trigger on opened, synchronize, reopened. Wait, the user said \"a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened.\" So the events are types: [opened, synchronize, reopened].\n\nNext, the job name is dynamic: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}. The job ID is 'test'. So the job uses a matrix strategy. But the user didn't specify matrix values, so I need to define the matrix with some example versions, maybe? Wait, the user didn't provide specific versions, but the job name references matrix variables. So the matrix must have php, laravel, and dependency-version axes.\n\nWait, the problem says the job is named with those matrix variables, so the matrix must be defined. But the user didn't specify the exact versions. As a devops expert, I should include example versions but maybe the user expects placeholders. However, the instruction says to generate based on the input, which doesn't specify the matrix values. Hmm. Wait, the user's input says \"the 1st job is named...\". So the job uses a matrix with php, laravel, dependency-version. But without specific values, maybe the matrix is to be defined with some sample versions. But the user didn't specify, so perhaps the matrix should be included with example values, but maybe the user expects the matrix to be there but the actual values can be inferred.\n\nWait, the problem says \"Generate a GitHub Workflow...\". The user didn't specify the matrix parameters, but the job name uses matrix variables. So the workflow must include a matrix strategy with those axes. However, since the user didn't provide specific versions, I need to include example versions. For PHP, common versions are 8.0, 8.1, 8.2. Laravel might be 9.x, 10.x. Dependency versions could be 'latest' or 'locked'.\n\nBut the user might just want the structure with the matrix defined but without specific values. Wait, no. The job name references the matrix variables, so the matrix must have those keys. So in the job, the strategy matrix should have php, laravel, dependency-version. But the actual values need to be provided. Since the user didn't specify, I'll have to make some reasonable defaults.\n\nWait, the problem says \"the workflow has one job\". The job uses a matrix. So the job's name is dynamic based on the matrix. So in the YAML, under the job, there's a strategy with matrix, and the job name uses the matrix context.\n\nWait, the job name in GitHub Actions is a string that can include matrix variables. So in the job definition, the 'name' field would be: \"P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\"\n\nSo putting it all together:\n\nThe workflow starts with name: Test Fusion Library\n\non: push and pull_request events.\n\nFor push, branches: [main]\n\nFor pull_request, types: [opened, synchronize, reopened]\n\nThen a job with id 'test', which has a name using the matrix variables, and a strategy with matrix defining php, laravel, dependency-version.\n\nBut the user didn't specify the actual versions, so I need to include example values. Let's pick some common ones.\n\nPHP versions: 8.0, 8.1, 8.2\n\nLaravel: maybe 9.x, 10.x\n\nDependency versions: perhaps 'latest' and 'locked'\n\nBut the user might not care about the exact values, just that the matrix is structured correctly. So the matrix could have:\n\nmatrix:\n  php: ['8.0', '8.1', '8.2']\n  laravel: ['9.x', '10.x']\n  dependency-version: ['latest', 'locked']\n\nBut the user's instruction says \"the 1st job is named...\", so the job uses the matrix. So the job's name is as specified.\n\nNow, the job needs to run on some runner. Since it's PHP, probably ubuntu-latest.\n\nAlso, the job needs steps. Wait, the user didn't specify any steps. Wait, the problem says \"the workflow has one job\", but doesn't specify what the job does. However, as a devops engineer, the job should at least set up PHP, maybe install dependencies, run tests. But the user didn't specify, so perhaps the steps are not required? Wait, the user's instruction says \"Generate a GitHub Workflow...\", but the problem statement doesn't mention steps. However, a valid workflow needs steps. But the user might just want the structure.\n\nWait, the user says \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\" So perhaps the steps can be minimal, like just a placeholder.\n\nWait, but the user is a devops engineer, so the workflow should be functional. However, since the user didn't specify the steps, maybe just include a step that runs phpunit or something. But the problem doesn't specify. Hmm.\n\nWait, the problem says \"the workflow has one job\". The job's name is given, but the steps are not specified. So perhaps the steps are not required, but a valid workflow needs at least one step. Maybe the user expects a placeholder step.\n\nBut the problem statement says \"Generate a GitHub Workflow...\", so the minimal required structure. Let's assume that the steps are to be included as a placeholder. For example, a step that runs 'echo' or something.\n\nBut perhaps the user expects the steps to be there but generic. Since it's a PHP project, common steps would be setup-php, install dependencies, run tests.\n\nBut since the user didn't specify, but as a devops engineer, I should include typical steps.\n\nWait, the user's input says \"the workflow will be triggered by multiple events...\", but doesn't specify what the workflow does. However, the job name suggests it's testing with different PHP, Laravel, and dependency versions.\n\nSo the steps would be:\n\n- Set up PHP version from matrix\n- Set up Laravel? Maybe not, since Laravel is a framework, perhaps the dependency-version refers to Laravel version.\n- Install dependencies (composer install with appropriate flags)\n- Run tests.\n\nBut to keep it generic, perhaps:\n\nsteps:\n  - name: Checkout code\n    uses: actions/checkout@v4\n\n  - name: Setup PHP\n    uses: shivammathur/setup-php@v2\n    with:\n      php-version: ${{ matrix.php }}\n      tools: composer\n\n  - name: Install dependencies\n    run: composer install --no-interaction\n\n  - name: Run tests\n    run: vendor/bin/phpunit\n\nBut the user didn't specify, but as a devops expert, this is standard.\n\nHowever, the problem says \"No additional explanation is needed\", so just generate the YAML as per the user's specs, which include the triggers, job name, matrix.\n\nWait, the user's main points are:\n\n- Workflow name: Test Fusion Library\n\n- Triggered by push to main, and PR events (opened, synchronize, reopened)\n\n- One job with specific name using matrix variables, job id 'test'\n\nSo the matrix must be defined in the job.\n\nSo the YAML structure:\n\nname: Test Fusion Library\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    strategy:\n      matrix:\n        php: [ ... ]\n        laravel: [ ... ]\n        dependency-version: [ ... ]\n    runs-on: ubuntu-latest\n    steps:\n      ... \n\nBut the user didn't specify the matrix values, but the job name uses them, so the matrix must have those keys. As a devops engineer, I'll include example versions.\n\nLet's choose:\n\nphp: ['8.1', '8.2']\nlaravel: ['9.*', '10.*']\ndependency-version: ['latest']\n\nBut maybe more versions. Alternatively, the dependency-version could be 'prefer-lowest' and 'prefer-stable', but the user said 'dependency-version'.\n\nAlternatively, 'dependency-version' could be 'locked' (using exact versions from composer.lock) and 'latest' (updating dependencies).\n\nSo perhaps:\n\ndependency-version: ['locked', 'latest']\n\nBut the exact values are up to the devops engineer's discretion since the user didn't specify.\n\nSo in the matrix:\n\nmatrix:\n  php: ['8.1', '8.2']\n  laravel: ['9.*', '10.*']\n  dependency-version: ['locked', 'latest']\n\nBut the user might have different expectations, but since it's not specified, this is reasonable.\n\nNow, the steps: as a minimal example, include checkout, setup-php, install deps, run tests.\n\nSo the steps would be:\n\nsteps:\n  - name: Checkout\n    uses: actions/checkout@v4\n\n  - name: Setup PHP\n    uses: shivammathur/setup-php@v2\n    with:\n      php-version: ${{ matrix.php }}\n      tools: composer\n\n  - name: Install dependencies\n    run: |\n      if [ ${{ matrix.dependency-version }} == 'locked' ]; then\n        composer install --no-interaction\n      else\n        composer update --no-interaction\n      fi\n\n  - name: Run tests\n    run: vendor/bin/phpunit\n\nBut the user didn't specify, but as a devops engineer, this makes sense.\n\nWait, but Laravel might require specific setup, but perhaps the user's project handles that. Alternatively, maybe the Laravel version is installed via composer require.\n\nAlternatively, the 'laravel' matrix variable might be used to set the Laravel version in composer.json, but that's more complex. However, the user's job name includes L:${{ matrix.laravel }}, so perhaps the Laravel version is part of the test matrix.\n\nBut without more info, it's hard to say. Maybe the 'laravel' matrix variable is not directly used in the steps, but the job name just reflects it. However, the user might expect that the Laravel version is installed.\n\nAlternatively, perhaps the 'laravel' version is part of the dependency constraints. For example, in composer.json, require \"laravel/framework\": ${{ matrix.laravel }}.\n\nBut modifying composer.json during the workflow would be complicated. More likely, the matrix includes different Laravel versions to test compatibility, so the steps would need to adjust the composer.json accordingly.\n\nBut this is getting too detailed. Since the user didn't specify, perhaps the 'laravel' matrix variable is a red herring, or perhaps it's intended to be part of the job name only. However, the user says the job name includes it, so the matrix must have that key.\n\nGiven the time, I'll proceed with the structure, including the matrix with example values and basic steps.\n</think>\n\n```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.1', '8.2']\n        laravel: ['9.*', '10.*']\n        dependency-version: ['locked', 'latest']\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          tools: composer\n\n      - name: Install dependencies\n        run: |\n          if [ \"${{ matrix.dependency-version }}\" = \"locked\" ]; then\n            composer install --no-interaction\n          else\n            composer update --no-interaction\n          fi\n\n      - name: Run tests\n        run: vendor/bin/phpunit\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 11: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/95b8b0cb-84fc-43d3-a095-2d36b8482669.yml\", \"line\": 11, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":17801,"level":2,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The job id of the 2nd job is `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The job id of the 4th job is `needs-refinement`. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The 5th job is named `status: freeze` and its job id is `status-freeze`. The job `status-freeze` has one step. The 1st step is named `status: freeze`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow named \"On issue labeled\" triggered when a label is added to an issue. The repo's primary language is Java, but that might not affect the workflow structure directly.\n\nFirst, the workflow needs to be triggered by the 'issues' event with the 'labeled' action. So the on: section should have issues: types: [labeled].\n\nNow, there are 5 jobs. Let's list them out:\n\n1. Job named 'ðŸ“ Assigned' with id 'Assigned'. It has two steps. Both steps are about moving issues to \"Assigned\" columns in two different projects: \"Candidates for University Projects\" and \"Good First Issues\". I need to figure out the correct GitHub Actions for moving issues. Maybe using the 'actions/github-script' or a specific action like 'peter-evans/create-or-update-project-card'. Wait, but the user didn't specify which actions to use, just the step names. So the steps will be placeholders with run commands or uses.\n\nWait, the user didn't specify the actual commands, so the steps will probably have names and maybe some placeholder actions. Since it's a YAML workflow, each step needs a name and either a run or uses. But the user didn't give details on what the steps do beyond moving to columns. So I'll assume they use some GitHub Actions for project management. For example, maybe 'actions/github-script' with a script to move the card.\n\nBut the user just wants the structure, so the steps can have names and perhaps a run command as a placeholder. Wait, the problem says \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\" So I need to generate the YAML with the correct structure, even if the actual steps are placeholders.\n\nLet's proceed.\n\nFirst job: id 'Assigned', name 'ðŸ“ Assigned'. Steps:\n\n1. \"Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\"\n2. \"Move Issue to \"Assigned\" Column in \"Good First Issues\"\"\n\nEach step needs a name and probably a run or uses. Since it's moving issues in projects, maybe using a specific action. But since the user didn't specify, I'll use a placeholder. For example, maybe:\n\n- name: Step name\n  run: echo \"Moving issue...\"\n\nBut the user might expect the actual action names. Wait, the user is a DevOps engineer, so perhaps they expect standard actions. However, without specific instructions, it's safer to use placeholders. Alternatively, maybe use 'uses' with a hypothetical action. But the problem doesn't specify, so I'll use run commands as placeholders.\n\nWait, but the user's example in the problem statement just lists the step names. So perhaps the steps only need the name field, but GitHub Actions requires either run or uses. So maybe the user expects that, but since it's a template, they just need the structure with names. However, in reality, each step must have a run or uses. So to make it valid YAML, I need to include at least a run command. Maybe the user expects placeholders like 'run: ...' or 'uses: ...'.\n\nGiven that, for each step, I'll include a run command with a comment or placeholder.\n\nSecond job: id 'FirstTimeCodeContribution', has three steps. The first step is 'GreetingFirstTimeCodeContribution', which might be a greeting action, like 'actions/stale' or a custom script. Again, placeholder.\n\nThird job: id 'good-first-issue', one step named 'good first issue'.\n\nFourth job: id 'needs-refinement', one step.\n\nFifth job: id 'status-freeze', one step.\n\nNow, the jobs need to be defined under jobs:. Each job has steps.\n\nAlso, the workflow name is 'On issue labeled', so name: On issue labeled.\n\nWait, the user said \"Generate a GitHub Workflow named `On issue labeled`\", so the name field in the workflow should be that.\n\nNow, putting it all together.\n\nFirst, the YAML structure:\n\nname: On issue labeled\non:\n  issues:\n    types: [labeled]\n\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    runs-on: ubuntu-latest\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: ... # Placeholder\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: ...\n\nWait, but what's the runs-on? The user didn't specify, but typically it's ubuntu-latest. Since the primary language is Java, maybe they need Java installed, but the jobs are about issue management, not building Java code. So probably just ubuntu-latest.\n\nSimilarly for other jobs.\n\nSecond job: FirstTimeCodeContribution\n\njobs:\n  FirstTimeCodeContribution:\n    runs-on: ubuntu-latest\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        run: ...\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: ...\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: ...\n\nThird job: good-first-issue\n\n  good-first-issue:\n    name: good first issue\n    runs-on: ubuntu-latest\n    steps:\n      - name: good first issue\n        run: ...\n\nFourth job: needs-refinement\n\n  needs-refinement:\n    runs-on: ubuntu-latest\n    steps:\n      - name: needs-refinement\n        run: ...\n\nFifth job: status-freeze\n\n  status-freeze:\n    name: status: freeze\n    runs-on: ubuntu-latest\n    steps:\n      - name: status: freeze\n        run: ...\n\nWait, the fifth job's name is \"status: freeze\" and id is status-freeze. In YAML, job ids can't have colons, so the id is status-freeze, which is valid.\n\nAlso, check that all job ids are valid (no spaces, using hyphens). The user specified the job ids, so for example, the third job's id is 'good-first-issue', which is okay.\n\nWait, the third job is named 'good first issue' and id 'good-first-issue'. So in the jobs section, the key is 'good-first-issue', and the name field is 'good first issue'.\n\nSimilarly, fifth job: id 'status-freeze', name 'status: freeze'.\n\nNow, check if all the jobs are correctly structured.\n\nAlso, the trigger is when a label is added, so on: issues: types: [labeled].\n\nWait, the 'issues' event's 'labeled' action. Yes.\n\nSo the 'on' section is:\n\non:\n  issues:\n    types: [labeled]\n\nNow, compiling all together.\n\nMake sure that each job has runs-on. Since all jobs are issue management, they probably don't need specific environments, so ubuntu-latest is fine.\n\nEach step must have either run or uses. Since the user didn't specify, I'll use run: echo \"Step name\" as a placeholder.\n\nWait, but the user might not want any actual commands, just the structure. However, GitHub Actions requires each step to have a run or uses. So to make it valid, include a placeholder run command.\n\nAlternatively, maybe the user expects that the steps use specific actions, but since it's not specified, the safe approach is to include run: placeholders.\n\nLet me draft the YAML.\n</think>\n\n```yaml\nname: On issue labeled\non:\n  issues:\n    types: [labeled]\n\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    runs-on: ubuntu-latest\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: echo \"Moving issue to Candidates for University Projects\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: echo \"Moving issue to Good First Issues\"\n\n  FirstTimeCodeContribution:\n    runs-on: ubuntu-latest\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        run: echo \"Sending greeting for first-time contribution\"\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        run: echo \"Moving issue to Candidates for University Projects\"\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        run: echo \"Moving issue to Good First Issues\"\n\n  good-first-issue:\n    name: good first issue\n    runs-on: ubuntu-latest\n    steps:\n      - name: good first issue\n        run: echo \"Processing good first issue\"\n\n  needs-refinement:\n    runs-on: ubuntu-latest\n    steps:\n      - name: needs-refinement\n        run: echo \"Processing needs-refinement label\"\n\n  status-freeze:\n    name: status: freeze\n    runs-on: ubuntu-latest\n    steps:\n      - name: status: freeze\n        run: echo \"Processing status: freeze label\"\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 40: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/196b664c-d641-4f50-81e1-9c41bf112020.yml\", \"line\": 40, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":46555,"level":2,"name":"sustainable-computing-io/kepler","file_name":"mock_acpi.yml","len":5,"prompt":"Generate a GitHub Workflow named `Mock ACPI` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: a comment on an issue or pull request is created. The workflow has 4 jobs. The 1st job is named `Initialize workflow` and its job id is `initalize-workflow`. The job `initalize-workflow` has 2 steps. The 1st step is named `Get PR branch` and its id is `pr_branch`. The 2nd step is named `Set job status as pending`. The 2nd job is named `Create self-hosted runner` and its job id is `create-runner`. The job `create-runner` has one step. The 1st step is named `metal-runner-action`. The 3rd job is named `Test Mock ACPI` and its job id is `test-mock-acpi`. The job `test-mock-acpi` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Configure SSH`. The 3rd step is named `Install Dependencies`. The 4th step is named `Run playbook` and its id is `run-playbook`. The 4th job is named `Cleanup` and its job id is `cleanup`. The job `cleanup` has 3 steps. The 1st step is named `delete runner`. The 2nd step is named `Mark workflow as failed if playbook failed`. The 3rd step is named `Set job status as ${{ job.status }}`. /no-think","answer":"```yaml\n# This workflow will run mock-acpi compose on self-hosted equinix runners and run validator tool\nname: Mock ACPI\n\non: # yamllint disable-line rule:truthy\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      head_sha: ${{ steps.pr_branch.outputs.head_sha }}\n    steps:\n      # Since `issue_comment` event runs on the default branch,\n      # we need to get the branch of the pull request\n    - name: Get PR branch\n      id: pr_branch\n      uses: xt0rted/pull-request-comment-branch@v3\n      # Since `issue_comment` event workflow will not appear on the\n      # pull request page, we need to set the status of the job\n      # in order to attach it to the pull request itself\n    - name: Set job status as pending\n      if: ${{ success() }}\n      uses: myrotvorets/set-commit-status-action@master\n      with:\n        sha: ${{ steps.pr_branch.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: pending\n\n  create-runner:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n    - name: metal-runner-action\n      uses: sustainable-computing-io/metal-runner-action@main\n      with:\n        github_token: ${{ secrets.GH_SELF_HOSTED_RUNNER_TOKEN }}\n        metal_auth_token: ${{ secrets.EQUINIX_API_TOKEN }}\n        metal_project_id: ${{ secrets.EQUINIX_PROJECT_ID }}\n        metro: da\n        plan: c3.small.x86\n        os: ubuntu_20_04\n        organization: sustainable-computing-io\n\n  test-mock-acpi:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Test Mock ACPI\n    needs: [initalize-workflow, create-runner]\n    continue-on-error: true\n    runs-on: self-hosted\n    outputs:\n      runner-name: ${{ runner.name }}\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.head_sha }}\n\n    - name: Configure SSH\n      if: ${{ success() }}\n      run: |\n        echo \"Configuring SSH for runner\"\n        sudo ssh-keygen -t rsa -b 4096 -f /root/.ssh/ansible_rsa -N ''\n        sudo cat ~/.ssh/ansible_rsa.pub >> ~/.ssh/authorized_keys\n        sudo echo \"StrictHostKeyChecking no\" >> ~/.ssh/config\n\n    - name: Install Dependencies\n      if: ${{ success() }}\n      run: |\n        echo \"Installing Ansible and Docker module\"\n        sudo apt install software-properties-common -y\n        sudo add-apt-repository --yes --update ppa:ansible/ansible\n        sudo apt install -y ansible python3-pip\n        sudo ansible-galaxy collection install community.docker\n\n    - name: Run playbook\n      id: run-playbook\n      if: ${{ success() }}\n      run: |\n        echo \"Setting up the infra\"\n        cd ${GITHUB_WORKSPACE}/ansible\n        ansible-playbook -vv -i inventory.yaml setup.yaml\n        echo \"Launching Mock ACPI compose and running validator\"\n        ansible-playbook -vv -i inventory.yaml mock_acpi_playbook.yaml -e \"pr_number=${{ github.event.issue.number }}\"\n\n  cleanup:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Cleanup\n    needs: [initalize-workflow, test-mock-acpi]\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      uses: sustainable-computing-io/metal-sweeper-action@main\n      with:\n        authToken: ${{ secrets.EQUINIX_API_TOKEN }}\n        projectID: ${{ secrets.EQUINIX_PROJECT_ID }}\n        runnerName: ${{ needs.test-mock-acpi.outputs.runner-name }}\n\n      # Marking the workflow as failed if the playbook fails\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.result == 'failure' }}\n      run: |\n        echo \"Playbook failed, marking workflow as failed\"\n        exit 1\n\n    - name: Set job status as ${{ job.status }}\n      uses: myrotvorets/set-commit-status-action@master\n      if: ${{ always() }}\n      with:\n        sha: ${{ needs.initalize-workflow.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: ${{ job.status }}\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation request. The user wants a workflow named \"Mock ACPI\" for a Go repository triggered by a comment on an issue or PR. There are four jobs with specific steps.\n\nFirst, I need to set up the basic structure. The name is straightforward: name: Mock ACPI. Then the trigger. Since it's triggered by a comment on an issue or PR, I'll use the issue_comment event with types [created]. Wait, the user said \"a comment on an issue or pull request is created\", so the event should be issue_comment with type created. But GitHub's issue_comment event covers both issues and PRs because PRs are a type of issue. So the trigger part would be on: issue_comment: types: [created].\n\nNext, the jobs. The first job is Initialize workflow with ID initalize-workflow (note the typo in the user's input: \"initalize\" instead of \"initialize\"). It has two steps. The first step is Get PR branch with ID pr_branch. The second step is Set job status as pending. For getting the PR branch, maybe using an action like actions/github-script to extract the branch from the event. But the user doesn't specify the actual commands, just the step names. So I'll just put placeholders with run commands as comments.\n\nSecond job: Create self-hosted runner, ID create-runner. One step named metal-runner-action. Probably a custom action, so uses: some/action@version.\n\nThird job: Test Mock ACPI, ID test-mock-acpi. Four steps. Checkout repo, Configure SSH, Install Dependencies, Run playbook (ID run-playbook). Checkout would use actions/checkout. Configure SSH might involve setting up SSH keys, maybe using a secret. Install Dependencies for Go, so maybe install tools like make, etc. Run playbook likely a shell command.\n\nFourth job: Cleanup, ID cleanup. Three steps: delete runner, mark workflow failed if playbook failed, set job status. The last step uses ${{ job.status }}. Need to handle dependencies; cleanup should run regardless of previous jobs' success. So needs a needs clause with all prior jobs and maybe a if: always().\n\nWait, the jobs need to be ordered. The user says 4 jobs, but the order isn't specified beyond the numbering. So the workflow should have jobs in the order 1,2,3,4. However, job 3 (test-mock-acpi) probably depends on job 1 and 2. Job 4 (cleanup) depends on job 3, but should run even if job 3 fails.\n\nWait, the user didn't specify dependencies between jobs, but typically, you'd have sequential dependencies. Let me check the problem statement again.\n\nThe user says: \"The workflow has 4 jobs.\" They list them in order 1st, 2nd, 3rd, 4th. So probably job 2 depends on job 1, job 3 on job 2, job 4 on job 3. But the cleanup job (4th) should run even if previous jobs fail. So for job 4, need if: always().\n\nWait, the problem statement doesn't specify dependencies, so maybe they are intended to run in sequence. So job create-runner (2nd) needs to depend on initalize-workflow (1st). Similarly, test-mock-acpi (3rd) depends on create-runner, and cleanup depends on test-mock-acpi.\n\nBut the user might not have specified dependencies, so the YAML should have the jobs in order with needs dependencies.\n\nWait, the user's description is: \"The workflow has 4 jobs. The 1st job is named... The 2nd job is named...\" So they are sequential. So each job after the first needs the previous one.\n\nSo job create-runner needs initalize-workflow.\n\ntest-mock-acpi needs create-runner.\n\ncleanup needs test-mock-acpi.\n\nBut cleanup should run even if test-mock-acpi fails, so in the cleanup job, set if: always().\n\nNow, let's structure each job.\n\nFirst job: initalize-workflow.\n\nSteps:\n\n1. Get PR branch (id pr_branch). So step with id: pr_branch, name: Get PR branch. The run command would probably use GitHub context to get the branch. For example, when a comment is made on a PR, the PR's head branch can be extracted. Maybe using jq or GitHub's API. But the user just wants the step name, so the run can be a placeholder.\n\n2. Set job status as pending. This might involve updating the commit status. But again, placeholder command.\n\nSecond job: create-runner. Needs initalize-workflow. Step: metal-runner-action. Probably a custom action, so uses: some/action.\n\nThird job: test-mock-acpi. Needs create-runner. Steps:\n\n1. Checkout repository: uses: actions/checkout@v4\n\n2. Configure SSH: maybe set up SSH keys, like adding a key from secrets.\n\n3. Install Dependencies: for Go, maybe install dependencies, but the user says primary language is Go, so perhaps 'make deps' or 'go get'.\n\n4. Run playbook (id run-playbook): run some ansible playbook, so run: ansible-playbook ...\n\nFourth job: cleanup. Needs test-mock-acpi. Steps:\n\n1. delete runner: probably a step to remove the self-hosted runner created in job 2.\n\n2. Mark workflow as failed if playbook failed: this would check if run-playbook step failed and then fail the workflow. But since cleanup is a separate job, maybe set an output and then fail. However, the step name suggests it's conditional on the playbook step failing.\n\n3. Set job status as ${{ job.status }}: this would update some status, maybe using GitHub API.\n\nBut the user wants the step names as given, so the run commands can be placeholders.\n\nNow, putting it all together.\n\nCheck for correct YAML syntax. Job IDs must match the needs dependencies.\n\nWait, the first job's ID is initalize-workflow (with a typo, but as per user input).\n\nSecond job ID is create-runner.\n\nThird is test-mock-acpi.\n\nFourth is cleanup.\n\nSo in the jobs section:\n\njobs:\n  initalize-workflow:\n    ...\n  create-runner:\n    needs: initalize-workflow\n    ...\n  test-mock-acpi:\n    needs: create-runner\n    ...\n  cleanup:\n    needs: test-mock-acpi\n    if: always()\n    ...\n\nEach job's steps as per the user's description.\n\nAlso, the workflow is for a Go repo, but the main part is the steps. The Go part might influence the Install Dependencies step, but the user didn't specify exact commands, so just placeholder.\n\nNow, writing the YAML.\n\nMake sure to use correct indentation.\n\nAlso, the trigger is on issue_comment with type created.\n\nSo:\n\non:\n  issue_comment:\n    types: [created]\n\nname: Mock ACPI\n\njobs:\n  initalize-workflow:\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    steps:\n      - id: pr_branch\n        name: Get PR branch\n        run: echo \"Extracting PR branch...\" # Placeholder command\n      - name: Set job status as pending\n        run: echo \"Setting status to pending...\" # Placeholder\n\n  create-runner:\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n      - name: metal-runner-action\n        uses: some/metal-runner-action@v1 # Placeholder action\n\n  test-mock-acpi:\n    name: Test Mock ACPI\n    needs: create-runner\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Configure SSH\n        run: echo \"Configuring SSH...\" # Placeholder\n      - name: Install Dependencies\n        run: echo \"Installing Go dependencies...\" # Placeholder\n      - id: run-playbook\n        name: Run playbook\n        run: echo \"Running playbook...\" # Placeholder\n\n  cleanup:\n    name: Cleanup\n    needs: test-mock-acpi\n    runs-on: ubuntu-latest\n    if: always()\n    steps:\n      - name: delete runner\n        run: echo \"Deleting runner...\" # Placeholder\n      - name: Mark workflow as failed if playbook failed\n        if: needs.test-mock-acpi.result == 'failure' && steps.run-playbook.outcome == 'failure'\n        run: exit 1\n      - name: Set job status as ${{ job.status }}\n        run: echo \"Job status is ${{ job.status }}\"\n\nWait, but in the cleanup job, the second step says \"Mark workflow as failed if playbook failed\". However, since cleanup is a separate job, failing it would mark the workflow as failed. But the playbook step is in test-mock-acpi job. So the cleanup job's step needs to check if the test-mock-acpi job failed, specifically the run-playbook step.\n\nBut in GitHub Actions, you can check the outcome of previous jobs using needs.<job_id>.result. However, to check a specific step's outcome, it's a bit trickier because steps in different jobs can't directly access each other's step outputs unless passed via artifacts.\n\nWait, the run-playbook step is in test-mock-acpi job. The cleanup job can check the result of the entire test-mock-acpi job, but not individual steps unless the test-mock-acpi job sets an output that's passed to cleanup.\n\nBut the user's instruction says: \"Mark workflow as failed if playbook failed\". So the step in cleanup should fail if the run-playbook step failed.\n\nBut without passing an artifact, it's not straightforward. However, the user might just want a placeholder.\n\nAlternatively, maybe the step in cleanup checks if the test-mock-acpi job failed, and if so, exits with 1. But the step name specifies \"if playbook failed\", so it's more specific.\n\nBut given the problem statement, perhaps the user just wants the step name and a placeholder command. So the actual implementation details can be omitted, as per the user's instruction to not add explanations, just generate the YAML based on the structure.\n\nSo the step in cleanup would have an if condition checking the outcome of the run-playbook step. However, since run-playbook is in a different job, the cleanup job can't directly access its outcome unless the test-mock-acpi job sets an output.\n\nThis is getting complicated, but the user probably expects a placeholder. So the step might have a comment or a placeholder command.\n\nAlternatively, the step in cleanup could have:\n\nif: steps.run-playbook.outcome == 'failure'\n\nBut since steps.run-playbook is in a different job, this won't work. So perhaps the test-mock-acpi job would set an output, which cleanup can check.\n\nBut the user didn't specify that, so maybe the step is just a placeholder with a comment.\n\nGiven the user's instruction to generate based on the input without additional explanation, I'll proceed with placeholder commands and the structure as per the job dependencies.\n\nAlso, note that the cleanup job's third step is named \"Set job status as ${{ job.status }}\", which would use the job's status variable.\n\nPutting it all together, the YAML should follow the structure outlined.\n</think>\n\n```yaml\nname: Mock ACPI\n\non:\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    steps:\n      - id: pr_branch\n        name: Get PR branch\n        run: echo \"Extracting branch from ${{ github.event.issue.pull_request }}\"  # Placeholder logic\n      - name: Set job status as pending\n        run: echo \"Setting GitHub status to pending\"  # Placeholder status update\n\n  create-runner:\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n      - name: metal-runner-action\n        uses: owner/metal-runner-action@v1  # Placeholder action reference\n\n  test-mock-acpi:\n    name: Test Mock ACPI\n    needs: create-runner\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Configure SSH\n        run: echo \"Setting up SSH keys\"  # Placeholder SSH configuration\n      - name: Install Dependencies\n        run: make deps  # Example Go dependency installation\n      - id: run-playbook\n        name: Run playbook\n        run: ansible-playbook site.yml  # Placeholder playbook execution\n\n  cleanup:\n    name: Cleanup\n    needs: test-mock-acpi\n    runs-on: ubuntu-latest\n    if: always()\n    steps:\n      - name: delete runner\n        run: echo \"Removing self-hosted runner\"  # Placeholder cleanup\n      - name: Mark workflow as failed if playbook failed\n        if: steps.run-playbook.outcome == 'failure'\n        run: exit 1\n      - name: Set job status as ${{ job.status }}\n        run: echo \"Final status: ${{ job.status }}\"\n```","repository_id":69840533,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 53: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/f65c4d7f-797d-415f-b680-6fac969609ba.yml\", \"line\": 53, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: echo \\\"Final status: ${{ job.status }}\\\"\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1069,"stats":{"NumofTriggers":1,"Triggers":["issue_comment"],"NumofJobs":4,"NumofActions":6,"Actions":["actions/checkout","myrotvorets/set-commit-status-action","myrotvorets/set-commit-status-action","sustainable-computing-io/metal-runner-action","sustainable-computing-io/metal-sweeper-action","xt0rted/pull-request-comment-branch"],"Actions_details":[{"version":"v3","name":"xt0rted/pull-request-comment-branch"},{"version":"master","name":"myrotvorets/set-commit-status-action"},{"version":"main","name":"sustainable-computing-io/metal-runner-action"},{"version":"v4","name":"actions/checkout"},{"version":"main","name":"sustainable-computing-io/metal-sweeper-action"},{"version":"master","name":"myrotvorets/set-commit-status-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":3}}
{"id":54038,"level":1,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.4, 8.3, 8.2]\n        laravel: [11.*, 12.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n        include:\n        - laravel: 11.*\n          testbench: 9.*\n        - laravel: 12.*\n          testbench: 10.*\n\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \n      matrix.dependency-version }}\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick, fileinfo\n        coverage: none\n\n    - name: Install dependencies\n      run: |\n        composer require \"laravel/framework:${{ matrix.laravel }}\" \"orchestra/testbench:${{ matrix.testbench }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Execute tests\n      run: vendor/bin/pest\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 26: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/0a0b71bc-0905-47d9-9c61-311b5a979528.yml\", \"line\": 26, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ \", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":4785,"level":3,"name":"nilearn/nilearn","file_name":"test_with_free_threaded_python.yml","len":5,"prompt":"Generate a GitHub Workflow named `test free threaded python` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) the scheduled time has come: at 08:00 am, on day 1 of the month. 2) someone manually triggers the workflow. The workflow sets an environment variable to use: `FORCE_COLOR` is set to `True`. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}` and its job id is `test_and_coverage`. This job will run only if the condition(github.repository == 'nilearn/nilearn') is met. This job will run on ${{ matrix.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `description` has one value: latest dependencies. The variable `py` has one value: 3.13t. The variable `os` has 3 values: ubuntu-latest, macos-latest and windows-latest. The variable `env` has one value: plotting. If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled. The job `test_and_coverage` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Install the latest version of uv`. This step runs action `astral-sh/setup-uv` tagged as v6. The 3rd step is named `Setup python`. This step runs action `actions/setup-python` tagged as v5. The step defines 2 input parameters for the action: `python-version` is set to `${{ matrix.py }}` and `allow-prereleases` is set to `True`. The 4th step is named `Install tox`. This step runs a script: `uv tool install tox --with=tox-uv --with=tox-gh-actions`. The 5th step is named `Show tox config`. This step runs a script: `tox c`. The 6th step is named `Run test suite`. This step runs a script: `tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n`. The 7th step is named `Upload test report`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html` and `path` is set to `report.html`. The 8th step is named `Upload test timings`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output` and `path` is set to `results/pytest_output`. /no-think","answer":"```yaml\n# Runs tests suite with free threaded python.\n#\n###\nname: test free threaded python\n\non:\n  schedule:\n    # Run every 1rst of the month\n  - cron: 0 8 1 * *\n\n    # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\n# Force to use color\nenv:\n  FORCE_COLOR: true\n\njobs:\n\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: 'Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description\n      }}'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: [3.13t]\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","llm_response":"```yaml\nname: test free threaded python\n\non:\n  schedule:\n  - cron: 0 8 1 * *     # 8:00 AM UTC on the 1st of every month\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\nenv:\n  FORCE_COLOR: true\n\njobs:\n  test_and_coverage:\n    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ \n      matrix.description }}\n    runs-on: ${{ matrix.os }}\n    if: github.repository == 'nilearn/nilearn'\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: ['3.13t']\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n\n    - name: Show tox config\n      run: tox c\n\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","repository_id":3983520,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 17: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/4a75b619-1939-425d-b2e2-aa9ecbdaaf19.yml\", \"line\": 17, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ \", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":495,"stats":{"NumofTriggers":2,"Triggers":["schedule","workflow_dispatch"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/checkout","actions/setup-python","actions/upload-artifact","actions/upload-artifact","astral-sh/setup-uv"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v6","name":"astral-sh/setup-uv"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":6721,"level":3,"name":"microsoft/onnxruntime","file_name":"reusable_linux_build.yml","len":5,"prompt":"Generate a GitHub Workflow named `Reusable Linux CPU/GPU Build and Test` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 12 inputs: pool_name-this input represents the specific 1es pool name (e.g., onnxruntime-github-ubuntu2204-amd-cpu), it must be supplied and the data type is string; build_config-this input represents build configuration (debug or release), it must be supplied and the data type is string; architecture-this input represents target architecture (x64 or arm64), it must be supplied and the data type is string; dockerfile_path-this input represents path to the dockerfile relative to the workspace root, it must be supplied and the data type is string; docker_image_repo-this input represents name for the docker image repository, it must be supplied and the data type is string; docker_build_args-this input represents arguments to pass to the docker image build command, it is optional, the data type is string and its default value is ; execution_providers-this input represents space-separated list of execution providers to enable (passed to build.py), it is optional, the data type is string and its default value is ; extra_build_flags-this input represents additional flags for the build.py script (appended after ep flags), it is optional, the data type is string and its default value is ; python_path_prefix-this input represents optional prefix to add to the path for python command (e.g., path=/opt/python/cp310-cp310/bin:$path), it is optional, the data type is string and its default value is ; python_version-this input represents python version to set up on the runner host, it is optional, the data type is string and its default value is 3.x; run_tests-this input represents whether to execute the test suite after building, it is optional, the data type is boolean and its default value is True; upload_build_output-this input represents whether to upload the build output directory as an artifact (used when tests are skipped), it is optional, the data type is boolean and its default value is False. It receives a secret: GH_TOKEN-it represents github token for accessing actions/packages and it must be supplied. The workflow has one job. The job id of the 1st job is `build_test_pipeline`. This job will execute on any runner that has the labels self-hosted and 1ES.Pool=${{ inputs.pool_name }}. The job `build_test_pipeline` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope, write access is granted to the GITHUB_TOKEN in the `packages` scope, write access is granted to the GITHUB_TOKEN in the `attestations` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `build_test_pipeline`. The job `build_test_pipeline` has 10 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ inputs.python_version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ inputs.python_version }}`. The 3rd step is named `Build Docker Image (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_docker_image_step`. The step sets an environment variable to use: `GITHUB_TOKEN` is set to `${{ secrets.GH_TOKEN }}`. This step runs action `microsoft/onnxruntime-github-actions/build-docker-image` tagged as v0.0.6. The step defines 5 input parameters for the action: `dockerfile` is set to `${{ github.workspace }}/${{ inputs.dockerfile_path }}`, `image-name` is set to `ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo }}`, `build-args` is set to `${{ inputs.docker_build_args }}`, `push` is set to `True` and `azure-container-registry-name` is set to `onnxruntimebuildcache`. The 4th step is named `Export GitHub Actions cache environment variables`. This step runs action `actions/github-script` tagged as v7. The step defines an input parameter for the action: `script` is set to `core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\ncore.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n`. The 5th step is named `Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `update_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `update`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 6th step is named `Build ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `build_step`. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `build`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 7th step is named `Test ONNX Runtime (${{ inputs.architecture }} / ${{ inputs.build_config }})` and its id is `test_step`. This step will run only if the condition(inputs.run_tests == true) is met. This step runs action `microsoft/onnxruntime-github-actions/run-build-script-in-docker` tagged as v0.0.6. The step defines 6 input parameters for the action: `docker_image` is set to `${{ steps.build_docker_image_step.outputs.full-image-name }}`, `build_config` is set to `${{ inputs.build_config }}`, `mode` is set to `test`, `execution_providers` is set to `${{ inputs.execution_providers }}`, `extra_build_flags` is set to `${{ inputs.extra_build_flags }}` and `python_path_prefix` is set to `${{ inputs.python_path_prefix }}`. The 8th step is named `Prepare Build Output for Upload`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step uses bash to run a script: `#!/bin/bash\nset -e -x\nBUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\nif [ ! -d \"${BUILD_DIR}\" ]; then\n  echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n  exit 1\nfi\necho \"--- Cleaning build directory: ${BUILD_DIR} ---\"\nrm -rf \"${BUILD_DIR}/onnxruntime\" || true\nrm -rf \"${BUILD_DIR}/pybind11\" || true\nrm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\nrm -f \"${BUILD_DIR}/models\" || true\nDEPS_DIR=\"${BUILD_DIR}/_deps\"\nif [ -d \"${DEPS_DIR}\" ]; then\n  echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n  find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\nelse\n  echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\nfi\necho \"--- Saving executable permissions ---\"\ncd \"${BUILD_DIR}\"\nfind . -executable -type f -printf '%p\\n' > perms.txt\necho \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n`. The 9th step is named `Upload Build Output Artifact`. This step will run only if the condition(inputs.upload_build_output == true) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `build-output-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}` and `if-no-files-found` is set to `error`. The 10th step is named `Upload VCPKG Manifest Install Log on Update or Build Failure`. This step will run only if the condition(steps.update_step.outcome == 'failure' || steps.build_step.outcome == 'failure') is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 3 input parameters for the action: `name` is set to `vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ inputs.build_config }}`, `path` is set to `${{ runner.temp }}/${{ inputs.build_config }}/${{ inputs.build_config }}/vcpkg-manifest-install.log` and `if-no-files-found` is set to `ignore`. /no-think","answer":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-Ubuntu2204-AMD-CPU)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or arm64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after EP\n          flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the PATH for python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on:\n    - self-hosted\n    - 1ES.Pool=${{ inputs.pool_name }}\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      id: build_docker_image_step\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n      # ------------- Update Step (CMake Generation) -------------\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Build Step (Compilation) -------------\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Test Step -------------\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}   # Pass down EP list\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n\n      # ------------- Prepare Artifact Step -------------\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n\n      # ------------- Upload Build Output Step -------------\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n\n      # ------------- Upload Log on Build Failure Step -------------\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","llm_response":"```yaml\nname: Reusable Linux CPU/GPU Build and Test\n\non:\n  workflow_call:\n    inputs:\n      pool_name:\n        description: The specific 1ES pool name (e.g., \n          onnxruntime-github-ubuntu2204-amd-cpu)\n        required: true\n        type: string\n      build_config:\n        description: Build configuration (Debug or Release)\n        required: true\n        type: string\n      architecture:\n        description: Target architecture (x64 or ARM64)\n        required: true\n        type: string\n      dockerfile_path:\n        description: Path to the Dockerfile relative to the workspace root\n        required: true\n        type: string\n      docker_image_repo:\n        description: Name for the Docker image repository\n        required: true\n        type: string\n      docker_build_args:\n        description: Arguments to pass to the Docker image build command\n        required: false\n        type: string\n        default: ''\n      execution_providers:\n        description: Space-separated list of execution providers to enable \n          (passed to build.py)\n        required: false\n        type: string\n        default: ''\n      extra_build_flags:\n        description: Additional flags for the build.py script (appended after \n          EP flags)\n        required: false\n        type: string\n        default: ''\n      python_path_prefix:\n        description: Optional prefix to add to the path for Python command \n          (e.g., PATH=/opt/python/cp310-cp310/bin:$PATH)\n        required: false\n        type: string\n        default: ''\n      python_version:\n        description: Python version to set up on the runner host\n        required: false\n        type: string\n        default: 3.x\n      run_tests:\n        description: Whether to execute the test suite after building\n        required: false\n        type: boolean\n        default: true\n      upload_build_output:\n        description: Whether to upload the build output directory as an artifact\n          (used when tests are skipped)\n        required: false\n        type: boolean\n        default: false\n    secrets:\n      GH_TOKEN:\n        description: GitHub token for accessing actions/packages\n        required: true\n\njobs:\n  build_test_pipeline:\n    runs-on: [self-hosted, 1ES.Pool=${{ inputs.pool_name }}]\n    permissions:\n      contents: read\n      packages: write\n      attestations: write\n      id-token: write\n    steps:\n    - name: Checkout ONNX Runtime\n      uses: actions/checkout@v4\n    - name: Set up Python ${{ inputs.python_version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ inputs.python_version }}\n    - name: Build Docker Image (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_docker_image_step\n      uses: microsoft/onnxruntime-github-actions/build-docker-image@v0.0.6\n      env:\n        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n      with:\n        dockerfile: ${{ github.workspace }}/${{ inputs.dockerfile_path }}\n        image-name: ghcr.io/microsoft/onnxruntime/${{ inputs.docker_image_repo \n          }}\n        build-args: ${{ inputs.docker_build_args }}\n        push: true\n        azure-container-registry-name: onnxruntimebuildcache\n    - name: Export GitHub Actions cache environment variables\n      uses: actions/github-script@v7\n      with:\n        script: |\n          core.exportVariable('ACTIONS_CACHE_URL', process.env.ACTIONS_CACHE_URL || '');\n          core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env.ACTIONS_RUNTIME_TOKEN || '');\n    - name: Generate Build Files (CMake) (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: update_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: update\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Build ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: build_step\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: build\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Test ONNX Runtime (${{ inputs.architecture }} / ${{ \n        inputs.build_config }})\n      id: test_step\n      if: inputs.run_tests == true\n      uses: \n        microsoft/onnxruntime-github-actions/run-build-script-in-docker@v0.0.6\n      with:\n        docker_image: ${{ steps.build_docker_image_step.outputs.full-image-name \n          }}\n        build_config: ${{ inputs.build_config }}\n        mode: test\n        execution_providers: ${{ inputs.execution_providers }}\n        extra_build_flags: ${{ inputs.extra_build_flags }}\n        python_path_prefix: ${{ inputs.python_path_prefix }}\n    - name: Prepare Build Output for Upload\n      if: inputs.upload_build_output == true\n      shell: bash\n      run: |\n        #!/bin/bash\n        set -e -x\n        BUILD_DIR=\"${{ runner.temp }}/${{ inputs.build_config }}\"\n        if [ ! -d \"${BUILD_DIR}\" ]; then\n          echo \"Error: Build directory ${BUILD_DIR} not found. Cannot prepare artifact.\"\n          exit 1\n        fi\n        echo \"--- Cleaning build directory: ${BUILD_DIR} ---\"\n        rm -rf \"${BUILD_DIR}/onnxruntime\" || true\n        rm -rf \"${BUILD_DIR}/pybind11\" || true\n        rm -rf \"${BUILD_DIR}/vcpkg_installed\" || true\n        rm -f \"${BUILD_DIR}/models\" || true\n        DEPS_DIR=\"${BUILD_DIR}/_deps\"\n        if [ -d \"${DEPS_DIR}\" ]; then\n          echo \"Cleaning ${DEPS_DIR}, keeping onnx-src...\"\n          find \"${DEPS_DIR}\" -mindepth 1 ! -regex \"^${DEPS_DIR}/onnx-src\\(/.*\\)?$\" -delete\n        else\n          echo \"${DEPS_DIR} does not exist, skipping deps cleanup.\"\n        fi\n        echo \"--- Saving executable permissions ---\"\n        cd \"${BUILD_DIR}\"\n        find . -executable -type f -printf '%p\\n' > perms.txt\n        echo \"--- Cleanup and permission saving complete for ${BUILD_DIR} ---\"\n    - name: Upload Build Output Artifact\n      if: inputs.upload_build_output == true\n      uses: actions/upload-artifact@v4\n      with:\n        name: build-output-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}\n        if-no-files-found: error\n    - name: Upload VCPKG Manifest Install Log on Update or Build Failure\n      if: steps.update_step.outcome == 'failure' || steps.build_step.outcome == \n        'failure'\n      uses: actions/upload-artifact@v4\n      with:\n        name: vcpkg-manifest-install-log-${{ inputs.architecture }}-${{ \n          inputs.build_config }}\n        path: ${{ runner.temp }}/${{ inputs.build_config }}/${{ \n          inputs.build_config }}/vcpkg-manifest-install.log\n        if-no-files-found: ignore\n\n```","repository_id":3980037,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 72: did not find expected ',' or ']'\", \"filepath\": \"../../tmp/31c91baa-0455-4195-942b-4b243a7d8bfc.yml\", \"line\": 72, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"  build_test_pipeline:\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1727,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":9,"Actions":["actions/checkout","actions/github-script","actions/setup-python","actions/upload-artifact","actions/upload-artifact","microsoft/onnxruntime-github-actions/build-docker-image","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker","microsoft/onnxruntime-github-actions/run-build-script-in-docker"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/build-docker-image"},{"version":"v7","name":"actions/github-script"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v0.0.6","name":"microsoft/onnxruntime-github-actions/run-build-script-in-docker"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":1}}
{"id":10254,"level":3,"name":"projectblacklight/blacklight","file_name":"test.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is Ruby. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives an input: ref-it is optional, the data type is string, its default value is  and this input represents the branch or reference to run the workflow against. The workflow has 2 jobs. The job id of the 1st job is `set_matrix`. This job will run on ubuntu-latest runner. The job `set_matrix` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v3. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Echo ./.github/matrix.json` and its id is `matrix`. This step runs a script: `echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n`. This job has an output: `matrix` is defined as ${{ steps.matrix.outputs.matrix }}. The 2nd job is named `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}` and its job id is `test`. Before this job runs, `set_matrix` must complete successfully. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The matrix is ${{fromJson(needs.set_matrix.outputs.matrix)}}. The job sets 6 environment variables to use: `RAILS_VERSION` is set to `${{ matrix.rails_version }}`, `SOLR_VERSION` is set to `${{ matrix.solr_version || 'latest' }}`, `VIEW_COMPONENT_VERSION` is set to `${{ matrix.view_component_version }}`, `BOOTSTRAP_VERSION` is set to `${{ matrix.bootstrap_version }}`, `BLACKLIGHT_API_TEST` is set to `${{ matrix.api }}` and `ENGINE_CART_RAILS_OPTIONS` is set to `--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}`. The job `test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Set up Ruby`. This step runs action `ruby/setup-ruby` tagged as v1. The step defines 2 input parameters for the action: `bundler` is set to `latest` and `ruby-version` is set to `${{ matrix.ruby }}`. The 3rd step is named `Change permissions`. This step runs a script: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. The 4th step is named `Install dependencies`. This step runs a script: `bundle install`. The 5th step is named `Run tests`. This step runs a script: `bundle exec rake ci`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: 'chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :'\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","llm_response":" ```yaml\nname: \"RSpec\"\non:\n  workflow_call:\n    inputs:\n      ref:\n        description: \"The branch or reference to run the workflow against.\"\n        required: false\n        type: string\n        default: \"\"\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Echo ./.github/matrix.json\n        id: matrix\n        run: |\n          echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n          cat ./.github/matrix.json >> $GITHUB_OUTPUT\n          echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: \"--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}\"\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Set up Ruby\n        uses: ruby/setup-ruby@v1\n        with:\n          bundler: 'latest'\n          ruby-version: ${{ matrix.ruby }}\n      - name: Change permissions\n        run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\n      - name: Install dependencies\n        run: bundle install\n      - name: Run tests\n        run: bundle exec rake ci\n``` ","repository_id":18227469,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 50: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/04982a8e-4fad-4149-a67f-11ea81760584.yml\", \"line\": 50, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":478,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":2,"NumofActions":3,"Actions":["actions/checkout","actions/checkout","ruby/setup-ruby"],"Actions_details":[{"version":"v3","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"ruby/setup-ruby"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":7,"CyclomaticComplexity":1}}
{"id":46555,"level":2,"name":"sustainable-computing-io/kepler","file_name":"mock_acpi.yml","len":5,"prompt":"Generate a GitHub Workflow named `Mock ACPI` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: a comment on an issue or pull request is created. The workflow has 4 jobs. The 1st job is named `Initialize workflow` and its job id is `initalize-workflow`. The job `initalize-workflow` has 2 steps. The 1st step is named `Get PR branch` and its id is `pr_branch`. The 2nd step is named `Set job status as pending`. The 2nd job is named `Create self-hosted runner` and its job id is `create-runner`. The job `create-runner` has one step. The 1st step is named `metal-runner-action`. The 3rd job is named `Test Mock ACPI` and its job id is `test-mock-acpi`. The job `test-mock-acpi` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Configure SSH`. The 3rd step is named `Install Dependencies`. The 4th step is named `Run playbook` and its id is `run-playbook`. The 4th job is named `Cleanup` and its job id is `cleanup`. The job `cleanup` has 3 steps. The 1st step is named `delete runner`. The 2nd step is named `Mark workflow as failed if playbook failed`. The 3rd step is named `Set job status as ${{ job.status }}`. /no-think","answer":"```yaml\n# This workflow will run mock-acpi compose on self-hosted equinix runners and run validator tool\nname: Mock ACPI\n\non: # yamllint disable-line rule:truthy\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      head_sha: ${{ steps.pr_branch.outputs.head_sha }}\n    steps:\n      # Since `issue_comment` event runs on the default branch,\n      # we need to get the branch of the pull request\n    - name: Get PR branch\n      id: pr_branch\n      uses: xt0rted/pull-request-comment-branch@v3\n      # Since `issue_comment` event workflow will not appear on the\n      # pull request page, we need to set the status of the job\n      # in order to attach it to the pull request itself\n    - name: Set job status as pending\n      if: ${{ success() }}\n      uses: myrotvorets/set-commit-status-action@master\n      with:\n        sha: ${{ steps.pr_branch.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: pending\n\n  create-runner:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n    - name: metal-runner-action\n      uses: sustainable-computing-io/metal-runner-action@main\n      with:\n        github_token: ${{ secrets.GH_SELF_HOSTED_RUNNER_TOKEN }}\n        metal_auth_token: ${{ secrets.EQUINIX_API_TOKEN }}\n        metal_project_id: ${{ secrets.EQUINIX_PROJECT_ID }}\n        metro: da\n        plan: c3.small.x86\n        os: ubuntu_20_04\n        organization: sustainable-computing-io\n\n  test-mock-acpi:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Test Mock ACPI\n    needs: [initalize-workflow, create-runner]\n    continue-on-error: true\n    runs-on: self-hosted\n    outputs:\n      runner-name: ${{ runner.name }}\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.head_sha }}\n\n    - name: Configure SSH\n      if: ${{ success() }}\n      run: |\n        echo \"Configuring SSH for runner\"\n        sudo ssh-keygen -t rsa -b 4096 -f /root/.ssh/ansible_rsa -N ''\n        sudo cat ~/.ssh/ansible_rsa.pub >> ~/.ssh/authorized_keys\n        sudo echo \"StrictHostKeyChecking no\" >> ~/.ssh/config\n\n    - name: Install Dependencies\n      if: ${{ success() }}\n      run: |\n        echo \"Installing Ansible and Docker module\"\n        sudo apt install software-properties-common -y\n        sudo add-apt-repository --yes --update ppa:ansible/ansible\n        sudo apt install -y ansible python3-pip\n        sudo ansible-galaxy collection install community.docker\n\n    - name: Run playbook\n      id: run-playbook\n      if: ${{ success() }}\n      run: |\n        echo \"Setting up the infra\"\n        cd ${GITHUB_WORKSPACE}/ansible\n        ansible-playbook -vv -i inventory.yaml setup.yaml\n        echo \"Launching Mock ACPI compose and running validator\"\n        ansible-playbook -vv -i inventory.yaml mock_acpi_playbook.yaml -e \"pr_number=${{ github.event.issue.number }}\"\n\n  cleanup:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Cleanup\n    needs: [initalize-workflow, test-mock-acpi]\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      uses: sustainable-computing-io/metal-sweeper-action@main\n      with:\n        authToken: ${{ secrets.EQUINIX_API_TOKEN }}\n        projectID: ${{ secrets.EQUINIX_PROJECT_ID }}\n        runnerName: ${{ needs.test-mock-acpi.outputs.runner-name }}\n\n      # Marking the workflow as failed if the playbook fails\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.result == 'failure' }}\n      run: |\n        echo \"Playbook failed, marking workflow as failed\"\n        exit 1\n\n    - name: Set job status as ${{ job.status }}\n      uses: myrotvorets/set-commit-status-action@master\n      if: ${{ always() }}\n      with:\n        sha: ${{ needs.initalize-workflow.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: ${{ job.status }}\n\n```","llm_response":"```yaml\nname: Mock ACPI\n\non:\n  issue_comment:\n    types:\n    - created\n\njobs:\n  initalize-workflow:\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      pr_branch: ${{ steps.pr_branch.outputs.branch }}\n    steps:\n    - name: Get PR branch\n      id: pr_branch\n      run: |\n        if [[ $GITHUB_EVENT_NAME == 'issue_comment' ]]; then\n          PR_BRANCH=$(gh pr view $GITHUB_ISSUE_NUMBER --json=labels | jq -r '.labels[] | select(.name == \"ACPI\")')\n          echo \"branch=$PR_BRANCH\" >> $GITHUB_OUTPUT\n        else\n          echo \"branch=main\" >> $GITHUB_OUTPUT\n        fi\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n    - name: Set job status as pending\n      run: |\n        echo \"status=pending\" >> $GITHUB_OUTPUT\n      id: set-status\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n  create-runner:\n    name: Create self-hosted runner\n    needs:\n    - initalize-workflow\n    runs-on: ubuntu-latest\n    outputs:\n      runner-id: ${{ steps.metal-runner-action.outputs.runner-id }}\n    steps:\n    - name: metal-runner-action\n      id: metal-runner-action\n      uses: metalgo/metal-runner-action@v0.6.0\n      with:\n        metal-api-token: ${{ secrets.METAL_API_TOKEN }}\n        github-token: ${{ secrets.GITHUB_TOKEN }}\n      env:\n        METAL_HOST: ${{ secrets.METAL_HOST }}\n  test-mock-acpi:\n    name: Test Mock ACPI\n    needs:\n    - initalize-workflow\n    - create-runner\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.pr_branch }}\n    - name: Configure SSH\n      run: |\n        echo $SSH_PRIVATE_KEY | base64 -d > id_rsa\n        chmod 600 id_rsa\n      env:\n        SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}\n    - name: Install Dependencies\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y ansible\n    - name: Run playbook\n      id: run-playbook\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        METAL_HOST: ${{ secrets.METAL_HOST }}\n      run: |\n        ansible-playbook -i inventory/inventory.yml playbook.yml\n  cleanup:\n    name: Cleanup\n    needs:\n    - test-mock-acpi\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      run: |\n        metal-cli runner delete ${{ needs.create-runner.outputs.runner-id }}\n      env:\n        METAL_API_TOKEN: ${{ secrets.METAL_API_TOKEN }}\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ failure() }}\n      run: |\n        echo \"Workflow failed, deleting runner\"\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n    - name: Set job status as ${{ job.status }}\n      run: |\n        echo \"Job status is ${{ job.status }}\"\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n```","repository_id":69840533,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"create-runner\\\" is not defined in object type {test-mock-acpi: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/e49d42b9-8cba-4162-a10f-d27c2541c67f.yml\", \"line\": 84, \"column\": 40, \"kind\": \"expression\", \"snippet\": \"      run: |\", \"end_column\": 40}]","meteor_score":0.4423524974249612,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1069,"stats":{"NumofTriggers":1,"Triggers":["issue_comment"],"NumofJobs":4,"NumofActions":6,"Actions":["actions/checkout","myrotvorets/set-commit-status-action","myrotvorets/set-commit-status-action","sustainable-computing-io/metal-runner-action","sustainable-computing-io/metal-sweeper-action","xt0rted/pull-request-comment-branch"],"Actions_details":[{"version":"v3","name":"xt0rted/pull-request-comment-branch"},{"version":"master","name":"myrotvorets/set-commit-status-action"},{"version":"main","name":"sustainable-computing-io/metal-runner-action"},{"version":"v4","name":"actions/checkout"},{"version":"main","name":"sustainable-computing-io/metal-sweeper-action"},{"version":"master","name":"myrotvorets/set-commit-status-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":3}}
{"id":30644,"level":2,"name":"marqo-ai/marqo","file_name":"start_ec2_runner.yml","len":5,"prompt":"Generate a GitHub Workflow named `Start EC2 Runner` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 2 inputs: base-ami-id-this input represents base ami id for the ec2 runner, it must be supplied and the data type is string; ec2-instance-type-this input represents instance type for the ec2 runner, it must be supplied and the data type is string. This workflow has 2 outputs: label-it represents ec2 runner label and its value is ${{ jobs.Start-Runner.outputs.label }}; ec2-instance-id-it represents ec2 instance id and its value is ${{ jobs.Start-Runner.outputs.ec2-instance-id }}. It receives 3 secrets: GH_PERSONAL_ACCESS_TOKEN-it must be supplied; MARQO_WORKFLOW_TESTS_SUBNET_ID-it must be supplied; MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting applies to all jobs in the workflow. The workflow has one job. The 1st job is named `Start EC2 runner` and its job id is `Start-Runner`. The job `Start-Runner` has 2 steps. The 1st step is named `Configure AWS credentials`. The 2nd step is named `Start EC2 runner` and its id is `start-ec2-runner`. /no-think","answer":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 Runner Label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 Instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-region: us-east-1\n        role-to-assume: arn:aws:iam::424082663841:role/GhRunnerManagerRole-Marqo\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: machulav/ec2-github-runner@v2\n      with:\n        mode: start\n        github-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        ec2-image-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n        aws-resource-tags: >\n          [\n            {\"Key\": \"Name\", \"Value\": \"marqo-github-runner-${{ github.run_id }}\"},\n            {\"Key\": \"GitHubRepo\", \"Value\": \"${{ github.repository }}\"},\n            {\"Key\": \"WorkflowName\", \"Value\": \"${{ github.workflow }}\"},\n            {\"Key\": \"WorkflowRunId\", \"Value\": \"${{ github.run_id }}\"},\n            {\"Key\": \"WorkflowURL\", \"Value\": \"${{ github.event.repository.html_url\n          }}/actions/runs/${{ github.run_id }}\"},\n            {\"Key\": \"PoloRole\", \"Value\": \"testing\"}\n          ]\n\npermissions:\n  contents: read\n  id-token: write\n\n```","llm_response":" ```yaml\nname: Start EC2 Runner\non:\n  workflow_call:\n    outputs:\n      label:\n        description: EC2 runner label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n        required: true\n      ec2-instance-id:\n        description: EC2 instance id\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n        required: true\npermissions:\n  contents: read\n  id-token: write\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n    steps:\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v1\n        with:\n          aws-access-key-id: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n          aws-secret-access-key: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n          aws-region: us-east-1\n      - name: Start EC2 runner\n        id: start-ec2-runner\n        uses: ./\n``` ","repository_id":94530930,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"required\\\" for \\\"outputs at workflow_call event\\\" section. expected one of \\\"description\\\", \\\"value\\\"\", \"filepath\": \"../../tmp/de25d213-492c-4a57-9963-b336bdec74d8.yml\", \"line\": 8, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"        required: true\\n        ^~~~~~~~~\", \"end_column\": 17}, {\"message\": \"unexpected key \\\"required\\\" for \\\"outputs at workflow_call event\\\" section. expected one of \\\"description\\\", \\\"value\\\"\", \"filepath\": \"../../tmp/de25d213-492c-4a57-9963-b336bdec74d8.yml\", \"line\": 12, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"        required: true\\n        ^~~~~~~~~\", \"end_column\": 17}, {\"message\": \"\\\"secrets\\\" is only available for a reusable workflow call with \\\"uses\\\" but \\\"uses\\\" is not found in job \\\"Start-Runner\\\"\", \"filepath\": \"../../tmp/de25d213-492c-4a57-9963-b336bdec74d8.yml\", \"line\": 23, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    secrets:\\n    ^~~~~~~~\", \"end_column\": 12}]","meteor_score":0.44253072371415564,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":575,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":2,"Actions":["aws-actions/configure-aws-credentials","machulav/ec2-github-runner"],"Actions_details":[{"version":"v4","name":"aws-actions/configure-aws-credentials"},{"version":"v2","name":"machulav/ec2-github-runner"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":2,"CyclomaticComplexity":1}}
{"id":3572,"level":3,"name":"paradigmxyz/reth","file_name":"sync.yml","len":5,"prompt":"Generate a GitHub Workflow named `sync test` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by an event: there is activity relating to a merge group in a merge queue. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `sync (${{ matrix.chain.bin }})` and its job id is `sync`. This job will execute on any runner that is a member of Reth. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `chain` has 2 values: {'bin': 'reth', 'block': 100000, 'build': 'install', 'chain': 'mainnet', 'tip': '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', 'unwind-target': '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'} and {'bin': 'op-reth', 'block': 10000, 'build': 'install-op', 'chain': 'base', 'tip': '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', 'unwind-target': '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}. The job sets 2 environment variables to use: `RUST_BACKTRACE` is set to `1` and `RUST_LOG` is set to `info,sync=error`. The maximum number of minutes to run the job is 60. The job `sync` has 9 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup mold`. This step runs action `rui314/setup-mold` tagged as v1. The 3rd step is named `Setup Rust toolchain`. This step runs action `dtolnay/rust-toolchain` from the stable branch. The 4th step is named `Cache Rust`. This step runs action `Swatinem/rust-cache` tagged as v2. The step defines an input parameter for the action: `cache-on-failure` is set to `True`. The 5th step is named `Build ${{ matrix.chain.bin }}`. This step runs a script: `make ${{ matrix.chain.build }}`. The 6th step is named `Run sync`. This step runs a script: `${{ matrix.chain.bin }} node \\\n  --chain ${{ matrix.chain.chain }} \\\n  --debug.tip ${{ matrix.chain.tip }} \\\n  --debug.max-block ${{ matrix.chain.block }} \\\n  --debug.terminate\n`. The 7th step is named `Verify the target block hash`. This step runs a script: `${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n  | grep ${{ matrix.chain.tip }}\n`. The 8th step is named `Run stage unwind for 100 blocks`. This step runs a script: `${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n`. The 9th step is named `Run stage unwind to block hash`. This step runs a script: `${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n`. /no-think","answer":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      group: Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: \"${{ matrix.chain.bin }} node \\\\\\n  --chain ${{ matrix.chain.chain }} \\\\\\\n        \\n  --debug.tip ${{ matrix.chain.tip }} \\\\\\n  --debug.max-block ${{ matrix.chain.block\\\n        \\ }} \\\\\\n  --debug.terminate\\n\"\n    - name: Verify the target block hash\n      run: \"${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\\\n        \\ headers ${{ matrix.chain.block }} \\\\\\n  | grep ${{ matrix.chain.tip }}\\n\"\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: \"${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\\\n        \\ }} --chain ${{ matrix.chain.chain }} \\n\"\n    strategy:\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n          unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n          unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n    timeout-minutes: 60\n\n```","llm_response":"```yaml\nname: sync test\n\non:\n  merge_group:\n    branches: [ main ]\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  sync:\n    runs-on: [ Reth ]\n    strategy:\n      matrix:\n        chain:\n          - bin: reth\n            block: 100000\n            build: install\n            chain: mainnet\n            tip: 0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4\n            unwind-target: 0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a\n          - bin: op-reth\n            block: 10000\n            build: install-op\n            chain: base\n            tip: 0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7\n            unwind-target: 0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Setup mold\n        uses: rui314/setup-mold@v1\n\n      - name: Setup Rust toolchain\n        uses: dtolnay/rust-toolchain@stable\n\n      - name: Cache Rust\n        uses: Swatinem/rust-cache@v2\n        with:\n          cache-on-failure: true\n\n      - name: Build ${{ matrix.chain.bin }}\n        run: make ${{ matrix.chain.build }}\n\n      - name: Run sync\n        run: |\n          ${{ matrix.chain.bin }} node \\\n            --chain ${{ matrix.chain.chain }} \\\n            --debug.tip ${{ matrix.chain.tip }} \\\n            --debug.max-block ${{ matrix.chain.block }} \\\n            --debug.terminate\n        env:\n          RUST_BACKTRACE: 1\n          RUST_LOG: info,sync=error\n\n      - name: Verify the target block hash\n        run: |\n          ${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n            | grep ${{ matrix.chain.tip }}\n        env:\n          RUST_BACKTRACE: 1\n          RUST_LOG: info,sync=error\n\n      - name: Run stage unwind for 100 blocks\n        run: |\n          ${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n        env:\n          RUST_BACKTRACE: 1\n          RUST_LOG: info,sync=error\n\n      - name: Run stage unwind to block hash\n        run: |\n          ${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }}\n        env:\n          RUST_BACKTRACE: 1\n          RUST_LOG: info,sync=error\n\n      - name: Set the maximum job runtime to 60 minutes\n        run: echo \"::set-env name=RUNNER_TIMEOUT::60m\"\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/e7cc12f5-413a-433e-9b19-0a3835de1cad.yml\", \"line\": 16, \"column\": 16, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: [ Reth ]\\n               ^~~~\", \"end_column\": 19}, {\"message\": \"workflow command \\\"set-env\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_ENV` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/e7cc12f5-413a-433e-9b19-0a3835de1cad.yml\", \"line\": 84, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: echo \\\"::set-env name=RUNNER_TIMEOUT::60m\\\"\\n             ^~~~\", \"end_column\": 17}]","meteor_score":0.9046274887790073,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":719,"stats":{"NumofTriggers":1,"Triggers":["merge_group"],"NumofJobs":1,"NumofActions":4,"Actions":["Swatinem/rust-cache","actions/checkout","dtolnay/rust-toolchain","rui314/setup-mold"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"rui314/setup-mold"},{"version":"stable","name":"dtolnay/rust-toolchain"},{"version":"v2","name":"Swatinem/rust-cache"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":9,"CyclomaticComplexity":1}}
{"id":17801,"level":3,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. This job will run only if the condition(${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `Assigned` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The job id of the 2nd job is `FirstTimeCodeContribution`. This job will run only if the condition(${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `FirstTimeCodeContribution` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. This step runs action `peter-evans/create-or-update-comment` tagged as v4. The step defines 2 input parameters for the action: `issue-number` is set to `${{ github.event.issue.number || github.event.pull_request.number }}` and `body` is set to `Welcome to the vibrant world of open-source development with JabRef!\n\nNewcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\nIn case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\nHaving any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\nâš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\nðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\nHappy coding! ðŸš€\n`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. This job will run only if the condition(${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 5 --owner JabRef --url $ISSUE_URL\n`. The job id of the 4th job is `needs-refinement`. This job will run only if the condition(github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef') is met. This job will run on ubuntu-latest runner. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 15 --owner JabRef --url $ISSUE_URL\n`. The 5th job is named `status: freeze` and its job id is `status-freeze`. This job will run only if the condition(${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `status-freeze` has one step. The 1st step is named `status: freeze`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 9 --owner JabRef --url $ISSUE_URL\n`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    name: FirstTimeCodeContribution\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: status: freeze\n    if: ${{ github.event.label.name == 'status: freeze' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: status: freeze\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 96: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/2996a0ee-a317-4c92-aa89-3b95dac31a79.yml\", \"line\": 96, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: status: freeze\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":64153,"level":2,"name":"oracle/graal","file_name":"ni-layers.yml","len":5,"prompt":"Generate a GitHub Workflow named `Weekly Native Image Layer Building Tests` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by multiple events: 1) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 2) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 3) the scheduled time has come: at 12:00 am, only on monday. 4) someone manually triggers the workflow. The workflow sets 3 environment variables to use: `LIBRARY_METADATA_PATH` is set to `${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests`, `JAVA_VERSION` is set to `21` and `PYTHON_VERSION` is set to `3.12.3`. The workflow has 2 jobs. The 1st job is named `Build GraalVM and populate matrix` and its job id is `build-graalvm-and-populate-matrix`. The job `build-graalvm-and-populate-matrix` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Build GraalVM JDK`. The 3rd step is named `Tar GraalVM JDK`. The 4th step is named `Persist GraalVM JDK build`. The 5th step is named `Setup python`. The 6th step is named `Populate matrix` and its id is `set-matrix`. The 2nd job is named `${{ matrix.coordinates }}` and its job id is `test-native-image-layer-build`. The job `test-native-image-layer-build` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download GraalVM JDK build`. The 3rd step is named `Extract GraalVM JDK build`. The 4th step is named `Setup JAVA_HOME`. The 5th step is named `Setup python`. The 6th step is named `Build layer`. /no-think","answer":"```yaml\n#\n# Copyright (c) 2024, 2024, Oracle and/or its affiliates. All rights reserved.\n# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n#\n# The Universal Permissive License (UPL), Version 1.0\n#\n# Subject to the condition set forth below, permission is hereby granted to any\n# person obtaining a copy of this software, associated documentation and/or\n# data (collectively the \"Software\"), free of charge and under any and all\n# copyright rights in the Software, and any and all patent rights owned or\n# freely licensable by each licensor hereunder covering either (i) the\n# unmodified Software as contributed to or provided by such licensor, or (ii)\n# the Larger Works (as defined below), to deal in both\n#\n# (a) the Software, and\n#\n# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if\n# one is included with the Software each a \"Larger Work\" to which the Software\n# is contributed by such licensors),\n#\n# without restriction, including without limitation the rights to copy, create\n# derivative works of, display, perform, and distribute the Software and make,\n# use, sell, offer for sale, import, export, have made, and have sold the\n# Software and the Larger Work(s), and to sublicense the foregoing rights on\n# either these or other terms.\n#\n# This license is subject to the following condition:\n#\n# The above copyright notice and either this complete permission notice or at a\n# minimum a reference to the UPL must be included in all copies or substantial\n# portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n#\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1   # Once a week, at midnight on Monday (00:00 UTC)\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    if: (github.repository=='oracle/graal')\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        native-images: \n          native-image,native-image-configure,lib:native-image-agent\n        components: Native Image,Native Image Configure Tool\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      shell: bash\n      run: tar -czvhf graalvm.tgz -C $(dirname ${GRAALVM_HOME}) $(basename \n        ${GRAALVM_HOME})\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tgz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py \n        ${{ env.LIBRARY_METADATA_PATH }}/\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    env:\n      GRAALVM_HOME: ${{ github.workspace }}/graalvm\n    timeout-minutes: 30\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs. \n          build-graalvm-and-populate-matrix.outputs.matrix).coordinates }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@95815c38cf2ff2164869cbab79da8d1f422bc89e   # v4.2.1\n      with:\n        name: graalvm\n        path: .\n    - name: Extract GraalVM JDK build\n      run: tar -xzvf graalvm.tgz -C $(dirname ${GRAALVM_HOME})\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: oracle\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py ${{ env.GRAALVM_HOME }}/bin/native-image \"${{ matrix.coordinates }}\"\n\n```","llm_response":" ```yaml\nname: Weekly Native Image Layer Building Tests\non:\n  push:\n    paths:\n      - '.github/workflows/ni-layers.yml'\n      - 'vm/tests/gh_workflows/NILayerTests/**'\n  pull_request:\n    paths:\n      - '.github/workflows/ni-layers.yml'\n      - 'vm/tests/gh_workflows/NILayerTests/**'\n  schedule:\n    - cron: '0 0 * * 1'\n  workflow_dispatch:\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\njobs:\n  build-graalvm-and-populate-matrix:\n    runs-on: ubuntu-20.04\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Build GraalVM JDK\n        uses: graalvm/build-graalvm-jdk@master\n        with:\n          version: 22.1.0\n          update-cache: true\n      - name: Tar GraalVM JDK\n        run: |\n          tar -czf graalvm-jdk-22.1.0.tar.gz graalvm-jdk-22.1.0\n      - name: Persist GraalVM JDK build\n        uses: actions/upload-artifact@v2\n        with:\n          name: graalvm-jdk-22.1.0.tar.gz\n          path: graalvm-jdk-22.1.0.tar.gz\n      - name: Setup python\n        uses: actions/setup-python@v2\n        with:\n          python-version: ${{ env.PYTHON_VERSION }}\n      - name: Populate matrix\n        id: set-matrix\n        run: |\n          import json\n          from pathlib import Path\n          graalvm_jdks = json.loads(open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'graalvm-jdks.json')).read())\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'graalvm-jdks.json'), 'w') as f:\n              f.write(json.dumps(graalvm_jdks))\n          from tox_gh_matrix import generate_matrix\n          matrix = generate_matrix(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix'))\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'matrix.json'), 'w') as f:\n              f.write(json.dumps(matrix))\n          import json\n          from github.actions.util.json import to_custom_json\n          import os\n          from pathlib import Path\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'matrix.json'), 'r') as f:\n              matrix = json.loads(f.read())\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.github', 'matrix.json'), 'w') as f:\n              f.write(to_custom_json(matrix))\n          import json\n          from github.actions.util.json import to_custom_json\n          import os\n          from pathlib import Path\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'matrix.json'), 'r') as f:\n              matrix = json.loads(f.read())\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.github', 'matrix.json'), 'w') as f:\n              f.write(to_custom_json(matrix))\n          import json\n          from github.actions.util.json import to_custom_json\n          import os\n          from pathlib import Path\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.matrix', 'matrix.json'), 'r') as f:\n              matrix = json.loads(f.read())\n          with open(Path(os.getenv('GITHUB_WORKSPACE'), 'vm', 'tests', 'gh_workflows', 'NILayerTests', '.github', 'matrix.json'), 'w') as f:\n              f.write(to_custom_json(matrix))\n      - name: Build layer\n        uses: graalvm/build-graalvm-layer@master\n        with:\n          graalvm-version: 22.1.0\n        env:\n          JAVA_HOME: ${{ steps.graalvm-jdk.outputs.graalvm-home }}\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GITHUB_REPOSITORY: graalvm/graalvm-ce-builds\n  test-native-image-layer-build:\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        include: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\n        exclude:\n          - name: \"GraalVM 22.1.0, JDK 11\"\n            coordinates: \"graalvm-ce-builds/22.1.0/graalvm-ce-java11-linux-amd64-22.1.0\"\n            graalvm-version: \"22.1.0\"\n            java-version: \"11\"\n            operating-system: \"linux\"\n            arch: \"amd64\"\n            short-description: \"GraalVM 22.1.0, JDK 11\"\n            description: \"GraalVM 22.1.0, JDK 11\"\n    runs-on: ${{ matrix.operating-system }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Download GraalVM JDK build\n        uses: actions/download-artifact@v2\n        with:\n          name: graalvm-jdk-22.1.0.tar.gz\n      - name: Extract GraalVM JDK build\n        run: |\n          mkdir graalvm-jdk-build\n          tar -C graalvm-jdk-build -xzf ./graalvm-jdk-22.1.0.tar.gz\n      - name: Setup JAVA_HOME\n        run: |\n          echo \"::set-env name=JAVA_HOME::$(ls -d graalvm-jdk-build/*/graalvm-ce-java11-*)\"\n      - name: Setup python\n        uses: actions/setup-python@v2\n        with:\n          python-version: ${{ env.PYTHON_VERSION }}\n      - name: Build layer\n        uses: graalvm/build-graalvm-layer@master\n        with:\n          graalvm-version: ${{ matrix.graalvm-version }}\n        env:\n          JAVA_HOME: ${{ steps.graalvm-jdk.outputs.graalvm-home }}\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GITHUB_REPOSITORY: graalvm/graalvm-ce-builds\n          GITHUB_REF: ${{ matrix.coordinates }}\n``` ","repository_id":3313009,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"graalvm-jdk\\\" is not defined in object type {set-matrix: {conclusion: string; outcome: string; outputs: {string => string}}}\", \"filepath\": \"../../tmp/9c3670a8-a9c9-4d36-992e-b5265b2ba431.yml\", \"line\": 82, \"column\": 26, \"kind\": \"expression\", \"snippet\": \"          JAVA_HOME: ${{ steps.graalvm-jdk.outputs.graalvm-home }}\\n                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 63}, {\"message\": \"property \\\"matrix\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/9c3670a8-a9c9-4d36-992e-b5265b2ba431.yml\", \"line\": 90, \"column\": 31, \"kind\": \"expression\", \"snippet\": \"        include: ${{ fromJson(needs.build-graalvm-and-populate-matrix.outputs.matrix) }}\\n                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 85}, {\"message\": \"workflow command \\\"set-env\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_ENV` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/9c3670a8-a9c9-4d36-992e-b5265b2ba431.yml\", \"line\": 113, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"property \\\"graalvm-jdk\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/9c3670a8-a9c9-4d36-992e-b5265b2ba431.yml\", \"line\": 124, \"column\": 26, \"kind\": \"expression\", \"snippet\": \"          JAVA_HOME: ${{ steps.graalvm-jdk.outputs.graalvm-home }}\\n                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 63}]","meteor_score":0.5057075732855856,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1278,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","schedule","workflow_dispatch"],"NumofJobs":2,"NumofActions":8,"Actions":["./.github/actions/build-graalvm","actions/checkout","actions/checkout","actions/download-artifact","actions/setup-java","actions/setup-python","actions/setup-python","actions/upload-artifact"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/build-graalvm"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/checkout"},{"version":"95815c38cf2ff2164869cbab79da8d1f422bc89e","name":"actions/download-artifact"},{"version":"v4","name":"actions/setup-java"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":1}}
{"id":39491,"level":3,"name":"rancher/rancher","file_name":"merge-server-manifest.yml","len":5,"prompt":"Generate a GitHub Workflow named `Merge server manifest` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: it is called from another workflow. The workflow has one job. The job id of the 1st job is `merge-server-manifest`. This job will run on runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }} runner. The job `merge-server-manifest` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `merge-server-manifest`. The job sets an environment variable to use: `REGISTRY` is set to `stgregistry.suse.com`. The job `merge-server-manifest` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup Environment Variables`. This step runs action `./.github/actions/setup-tag-env`.The 3rd step is named `Set up Docker Buildx`. This step runs action `docker/setup-buildx-action` tagged as v3. The 4th step is named `Load Secrets from Vault`. This step runs action `rancher-eio/read-vault-secrets` from the main branch. The step defines an input parameter for the action: `secrets` is set to `secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\nsecret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n`. The 5th step is named `Docker Registry Login`. This step runs action `docker/login-action` tagged as v3. The step defines 3 input parameters for the action: `username` is set to `${{ env.STAGE_REGISTRY_USERNAME }}`, `password` is set to `${{ env.STAGE_REGISTRY_PASSWORD }}` and `registry` is set to `${{ env.REGISTRY }}`. The 6th step is named `Create manifest list and push`. This step runs a script: `docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n`. The 7th step is named `Create head manifest list and push`. This step runs a script: `if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n  docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\nfi\n`. The 8th step is named `Inspect image`. This step runs a script: `docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n`. /no-think","answer":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ \n      github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","llm_response":"```yaml\nname: Merge server manifest\n\non:\n  workflow_dispatch:\n    inputs:\n      event_name:\n        description: The name of the event to trigger this workflow\n        required: true\n        type: string\n\njobs:\n  merge-server-manifest:\n    runs-on:\n      runner: 2cpu-linux-x64\n      image: ubuntu22-full-x64\n      run-id: ${{ github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    environment:\n      REGISTRY: stgregistry.suse.com\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Setup Environment Variables\n        uses: ./.github/actions/setup-tag-env\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n      - name: Load Secrets from Vault\n        uses: rancher-eio/read-vault-secrets@main\n        with:\n          secrets: |\n            secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n            secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n      - name: Docker Registry Login\n        uses: docker/login-action@v3\n        with:\n          username: ${{ env.STAGE_REGISTRY_USERNAME }}\n          password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n          registry: ${{ env.REGISTRY }}\n      - name: Create manifest list and push\n        run: |\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n      - name: Create head manifest list and push\n        run: |\n          if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n            docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n          fi\n      - name: Inspect image\n        run: |\n          docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n```","repository_id":22232001,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"runner\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/ce20fd1f-7681-42a3-adcf-2f806090442f.yml\", \"line\": 14, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      runner: 2cpu-linux-x64\\n      ^~~~~~~\", \"end_column\": 13}, {\"message\": \"unexpected key \\\"image\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/ce20fd1f-7681-42a3-adcf-2f806090442f.yml\", \"line\": 15, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      image: ubuntu22-full-x64\\n      ^~~~~~\", \"end_column\": 12}, {\"message\": \"unexpected key \\\"run-id\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/ce20fd1f-7681-42a3-adcf-2f806090442f.yml\", \"line\": 16, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      run-id: ${{ github.run_id }}\\n      ^~~~~~~\", \"end_column\": 13}, {\"message\": \"name is missing in \\\"environment\\\" section\", \"filepath\": \"../../tmp/ce20fd1f-7681-42a3-adcf-2f806090442f.yml\", \"line\": 20, \"column\": 5, \"kind\": \"syntax-check\", \"snippet\": \"    environment:\\n    ^~~~~~~~~~~~\", \"end_column\": 16}, {\"message\": \"unexpected key \\\"REGISTRY\\\" for \\\"environment\\\" section. expected one of \\\"name\\\", \\\"url\\\"\", \"filepath\": \"../../tmp/ce20fd1f-7681-42a3-adcf-2f806090442f.yml\", \"line\": 21, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      REGISTRY: stgregistry.suse.com\\n      ^~~~~~~~~\", \"end_column\": 15}]","meteor_score":0.9545426581581339,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":536,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":5,"Actions":["./.github/actions/setup-tag-env","actions/checkout","docker/login-action","docker/setup-buildx-action","rancher-eio/read-vault-secrets"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/setup-tag-env"},{"version":"v3","name":"docker/setup-buildx-action"},{"version":"main","name":"rancher-eio/read-vault-secrets"},{"version":"v3","name":"docker/login-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":10254,"level":3,"name":"projectblacklight/blacklight","file_name":"test.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is Ruby. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives an input: ref-it is optional, the data type is string, its default value is  and this input represents the branch or reference to run the workflow against. The workflow has 2 jobs. The job id of the 1st job is `set_matrix`. This job will run on ubuntu-latest runner. The job `set_matrix` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v3. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Echo ./.github/matrix.json` and its id is `matrix`. This step runs a script: `echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n`. This job has an output: `matrix` is defined as ${{ steps.matrix.outputs.matrix }}. The 2nd job is named `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}` and its job id is `test`. Before this job runs, `set_matrix` must complete successfully. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The matrix is ${{fromJson(needs.set_matrix.outputs.matrix)}}. The job sets 6 environment variables to use: `RAILS_VERSION` is set to `${{ matrix.rails_version }}`, `SOLR_VERSION` is set to `${{ matrix.solr_version || 'latest' }}`, `VIEW_COMPONENT_VERSION` is set to `${{ matrix.view_component_version }}`, `BOOTSTRAP_VERSION` is set to `${{ matrix.bootstrap_version }}`, `BLACKLIGHT_API_TEST` is set to `${{ matrix.api }}` and `ENGINE_CART_RAILS_OPTIONS` is set to `--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}`. The job `test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Set up Ruby`. This step runs action `ruby/setup-ruby` tagged as v1. The step defines 2 input parameters for the action: `bundler` is set to `latest` and `ruby-version` is set to `${{ matrix.ruby }}`. The 3rd step is named `Change permissions`. This step runs a script: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. The 4th step is named `Install dependencies`. This step runs a script: `bundle install`. The 5th step is named `Run tests`. This step runs a script: `bundle exec rake ci`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: 'chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :'\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","llm_response":"```yaml\nname: Ruby CI\n\non:\n  workflow_call:\n    inputs:\n      ref:\n        description: 'Branch or reference to run the workflow against'\n        required: false\n        default: ''\n\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Echo ./.github/matrix.json\n        id: matrix\n        run: |\n          echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n          cat ./.github/matrix.json >> $GITHUB_OUTPUT\n          echo \"EOF\" >> $GITHUB_OUTPUT\n\n  test:\n    runs-on: ubuntu-latest\n    needs: set_matrix\n    strategy:\n      matrix:\n        ruby: ['3.2.5']\n        rails_version: ['6.1.4']\n        solr_version: ['latest']\n        view_component_version: ['3.3.0']\n        bootstrap_version: ['5.2.3']\n        api: ['true']\n        additional_engine_cart_rails_options: ['']\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: ${{ matrix.additional_engine_cart_rails_options }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Set up Ruby\n        uses: ruby/setup-ruby@v1\n        with:\n          bundler: latest\n          ruby-version: ${{ matrix.ruby }}\n      - name: Change permissions\n        run: |\n          chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\n      - name: Install dependencies\n        run: bundle install\n      - name: Run tests\n        run: bundle exec rake ci\n```","repository_id":18227469,"lint_valid":false,"lint_output":"[{\"message\": \"\\\"type\\\" is missing at \\\"ref\\\" input of workflow_call event\", \"filepath\": \"../../tmp/a15a1ffa-7635-4168-a04b-f721f0e79cab.yml\", \"line\": 6, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      ref:\\n      ^~~~\", \"end_column\": 10}]","meteor_score":0.8217713105650423,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":478,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":2,"NumofActions":3,"Actions":["actions/checkout","actions/checkout","ruby/setup-ruby"],"Actions_details":[{"version":"v3","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"ruby/setup-ruby"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":7,"CyclomaticComplexity":1}}
{"id":54038,"level":1,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types:\n    - opened\n    - synchronize\n    - reopened\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [7.4, 8.0, 8.1, 8.2, 8.3, 8.4, 8.5]\n        laravel: [5.8, 6.0, 6.1, 6.2, 6.3, 6.4, 7.0]\n        dependency-version: ['prefer-lowest', 'prefer-stable']\n        include:\n        - laravel: 5.8\n          testbench: 5.0\n        - laravel: 6.0\n          testbench: 6.0\n        - laravel: 6.1\n          testbench: 6.1\n        - laravel: 6.2\n          testbench: 6.2\n        - laravel: 6.3\n          testbench: 6.3\n        - laravel: 6.4\n          testbench: 6.4\n        - laravel: 7.0\n          testbench: 7.0\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Set up PHP ${{ matrix.php }}\n      uses: actions/setup-php@v4\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, mbstring\n        coverage: none\n        dependency-version: ${{ matrix.dependency-version }}\n    - name: Install dependencies\n      run: |\n        composer require \"laravel/framework:${{ matrix.laravel }}\" \"orchestra/testbench:${{ matrix.testbench }}\" --no-interaction --no-update\n        composer update --no-interaction\n    - name: Run tests\n      run: vendor/bin/phpunit\n\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 15: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/89427897-99ee-4556-b210-d9ee09e37337.yml\", \"line\": 15, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":16232,"level":2,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":" ```yaml\nname: Check/coverage\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\npermissions:\n  contents: read\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\njobs:\n  coverage:\n    name: ${{ matrix.name ||matrix.target }}\n    runs-on: ubuntu-latest\n    if: |\n      (github.event.repository.owner.id == 12962693 || github.event.pull_request.head.repo.id == 12962693)\n      && (github.event.repository.owner.id == 12962693 || github.event.pull_request.head.repo.id == 12962693)\n    steps:\n      - name: \"Checkout\"\n        uses: actions/checkout@v3\n        with:\n          submodules: recursive\n      - name: \"Set up Python\"\n        uses: actions/setup-python@v3\n        with:\n          python-version: '3.10'\n      - name: \"Install dependencies\"\n        run: |\n          python -m pip install --upgrade pip\n          pip install -r requirements.txt\n          pip install -r requirements-dev.txt\n      - name: \"Setup GCS cache\"\n        uses: mattdavis0351/actions/gcs-cache@v2\n        with:\n          key: ${{ inputs.gcs-cache-bucket-the }}-${{ secrets.gcs-cache-key }}\n          path: .cache/\n      - name: \"Setup GCP\"\n        run: |\n          echo \"${{ secrets.gcp-key }}\" > key.json\n          gcloud auth activate-service-account --key-file key.json\n          gcloud config set project open-metadata-oss\n      - name: \"Run tests\"\n        env:\n          GCP_PROJECT: open-metadata-oss\n          GCS_BUCKET: metadata-coverage\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          TRUSTED_HOST: ${{ inputs.trusted-the }}\n        run: |\n          if [ -z \"$TRUSTED\" ]; then TRUSTED=false; else TRUSTED=true; fi\n          python -m coverage run setup.py test --verbose --trusted $TRUSTED\n      - name: \"Upload coverage to GCS\"\n        run: |\n          python -m coverage combine\n          python -m coverage xml -o coverage.xml\n          gsutil -m cp coverage.xml gs://${GCS_BUCKET}/coverage/${GITHUB_SHA}/coverage.xml\n      - name: \"Upload coverage to Github\"\n        uses: codecov/codecov-action@v1\n        with:\n          flags: coverage.xml\n          file: coverage.xml\n          token: ${{ secrets.CODECOV_TOKEN }}\n          fail_ci_if_error: true\n      - name: \"Delete GCS cache\"\n        uses: mattdavis0351/actions/gcs-cache-delete@v2\n        with:\n          key: ${{ inputs.gcs-cache-bucket-the }}-${{ secrets.gcs-cache-key }}\n``` ","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"name\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 16, \"column\": 15, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name ||matrix.target }}\\n              ^~~~~~~~~~~\", \"end_column\": 25}, {\"message\": \"property \\\"target\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 16, \"column\": 29, \"kind\": \"expression\", \"snippet\": \"    name: ${{ matrix.name ||matrix.target }}\\n                            ^~~~~~~~~~~~~\", \"end_column\": 41}, {\"message\": \"property \\\"gcs-cache-bucket-the\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 38, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"          key: ${{ inputs.gcs-cache-bucket-the }}-${{ secrets.gcs-cache-key }}\\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"trusted-the\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 50, \"column\": 29, \"kind\": \"expression\", \"snippet\": \"          TRUSTED_HOST: ${{ inputs.trusted-the }}\\n                            ^~~~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"property \\\"codecov_token\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 64, \"column\": 22, \"kind\": \"expression\", \"snippet\": \"          token: ${{ secrets.CODECOV_TOKEN }}\\n                     ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 42}, {\"message\": \"property \\\"gcs-cache-bucket-the\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/0f16815b-a4bb-4ec4-96fb-cc3b09c361ea.yml\", \"line\": 69, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"          key: ${{ inputs.gcs-cache-bucket-the }}-${{ secrets.gcs-cache-key }}\\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 46}]","meteor_score":0.23094309955121695,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
{"id":54038,"level":3,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `php` has one value: 8.3. The variable `laravel` has one value: 11.*. The variable `dependency-version` has 2 values: prefer-lowest and prefer-stable. The job `test` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Cache Composer Dependencies`. This step runs action `actions/cache` tagged as v4. The step defines 2 input parameters for the action: `path` is set to `~/.composer/cache/files` and `key` is set to `composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}`. The 3rd step is named `Setup PHP`. This step runs action `shivammathur/setup-php` tagged as v2. The step defines 3 input parameters for the action: `php-version` is set to `${{ matrix.php }}`, `extensions` is set to `dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick` and `coverage` is set to `none`. The 4th step is named `Install PHP Dependencies`. This step runs a script: `composer self-update\ncomposer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\ncomposer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n`. The 5th step is named `Setup Node.js`. This step runs action `actions/setup-node` tagged as v3. The step defines 3 input parameters for the action: `node-version` is set to `20`, `cache` is set to `npm` and `cache-dependency-path` is set to `packages/vue/package.json`. The 6th step is named `Install Node Dependencies`. This step runs a script: `npm install`. The 7th step is named `Run npm tests`. This step runs a script: `npm run test`. The 8th step is named `Run PHP Tests`. This step runs a script: `vendor/bin/phpunit`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"<think>Okay, let's tackle this. The user wants a GitHub Workflow YAML file for testing a PHP library called Fusion Library. The workflow needs to trigger on specific events and have a job with a matrix strategy.\n\nFirst, the name is \"Test Fusion Library\". So the workflow name in YAML should be that.\n\nTriggers: push to main branch and pull request events (opened, synchronize, reopened). So under on, I'll have push with branches: [main], and pull_request with types [opened, synchronize, reopened].\n\nNext, the job. The job name is dynamic with matrix variables: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V:${{ matrix.dependency-version }}. Job ID is 'test', runs on ubuntu-latest.\n\nMatrix strategy: php has 8.3, laravel 11.*, dependency-version has prefer-lowest and prefer-stable. So the matrix will have combinations. Since php and laravel each have one value, but dependency-version has two, there will be two jobs.\n\nNow the steps. Let's list them:\n\n1. Checkout repo: uses actions/checkout@v4. Name is \"Checkout repository\".\n\n2. Cache Composer Dependencies: uses actions/cache@v4. Inputs path: ~/.composer/cache/files, key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}.\n\n3. Setup PHP: shivammathur/setup-php@v2. Inputs php-version, extensions, coverage. Extensions list is given.\n\n4. Install PHP Dependencies: a script with composer commands. Need to make sure the matrix variables are correctly inserted.\n\n5. Setup Node.js: actions/setup-node@v3. Node version 20, cache npm, cache-dependency-path set to packages/vue/package.json.\n\n6. Install Node Dependencies: npm install.\n\n7. Run npm tests: npm run test.\n\n8. Run PHP Tests: vendor/bin/phpunit.\n\nWait, the user mentioned 8 steps, so all these are correct.\n\nCheck if all steps are correctly ordered and parameters are right.\n\nFor the matrix, the syntax in YAML would be strategy with matrix, including the variables. Since php and laravel have single values, but dependency-version has two, the matrix will generate two jobs (since 1x1x2=2).\n\nWait, the user says variable php has one value (8.3), laravel one (11.*), dependency-version two. So the matrix will have two jobs.\n\nIn the job name, it's using all three matrix variables, even though two have single values. That's okay.\n\nNow, writing the YAML.\n\nMake sure indentation is correct. Steps are under the job, which is under jobs.\n\nAlso, the job id is 'test', so the job is defined with id: test.\n\nWait, the user says \"job id is test\", so in the YAML, the job will be under jobs: test: ... with name set to the dynamic string.\n\nYes.\n\nLet me structure it.\n\nname: Test Fusion Library\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.3']\n        laravel: ['11.*']\n        dependency-version: ['prefer-lowest', 'prefer-stable']\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Cache Composer Dependencies\n        uses: actions/cache@v4\n        with:\n          path: ~/.composer/cache/files\n          key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}\n\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n          coverage: none\n\n      - name: Install PHP Dependencies\n        run: |\n          composer self-update\n          composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n          cache: npm\n          cache-dependency-path: packages/vue/package.json\n\n      - name: Install Node Dependencies\n        run: npm install\n\n      - name: Run npm tests\n        run: npm run test\n\n      - name: Run PHP Tests\n        run: vendor/bin/phpunit\n\nWait, in the step 4, the script is written as a multi-line string. In YAML, using | for block scalar.\n\nAlso, check if the key for cache has correct syntax. The user wrote: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}. So in YAML, it's a string with those variables.\n\nIn the matrix, the values for php and laravel are strings, so they should be in quotes. Like '8.3' and '11.*'.\n\nDependency-version values are 'prefer-lowest' and 'prefer-stable'.\n\nLooks correct.\n\nCheck step 3 extensions: the list given is correct as a comma-separated string.\n\nCoverage is none.\n\nIn step 4, the composer commands: self-update, require laravel with matrix.laravel, then update with matrix.dependency-version.\n\nYes.\n\nStep 5: node version 20, cache npm, cache path.\n\nStep 6 and 7: npm install and test.\n\nStep 8: phpunit.\n\nEverything seems to align with the user's request.\n\nNow, make sure the YAML syntax is correct. Indentation is 2 spaces per level.\n\nThe on section has push and pull_request.\n\nJobs have test job with strategy matrix.\n\nYes.\n\nI think that's it.\n</think>\n\n```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.3']\n        laravel: ['11.*']\n        dependency-version: ['prefer-lowest', 'prefer-stable']\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Cache Composer Dependencies\n        uses: actions/cache@v4\n        with:\n          path: ~/.composer/cache/files\n          key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ hashFiles('composer.json') }}\n\n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n          coverage: none\n\n      - name: Install PHP Dependencies\n        run: |\n          composer self-update\n          composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n          cache: npm\n          cache-dependency-path: packages/vue/package.json\n\n      - name: Install Node Dependencies\n        run: npm install\n\n      - name: Run npm tests\n        run: npm run test\n\n      - name: Run PHP Tests\n        run: vendor/bin/phpunit\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 11: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/c5313809-ae5b-4ccd-8b0c-9cc6ec31770e.yml\", \"line\": 11, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":30644,"level":2,"name":"marqo-ai/marqo","file_name":"start_ec2_runner.yml","len":5,"prompt":"Generate a GitHub Workflow named `Start EC2 Runner` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 2 inputs: base-ami-id-this input represents base ami id for the ec2 runner, it must be supplied and the data type is string; ec2-instance-type-this input represents instance type for the ec2 runner, it must be supplied and the data type is string. This workflow has 2 outputs: label-it represents ec2 runner label and its value is ${{ jobs.Start-Runner.outputs.label }}; ec2-instance-id-it represents ec2 instance id and its value is ${{ jobs.Start-Runner.outputs.ec2-instance-id }}. It receives 3 secrets: GH_PERSONAL_ACCESS_TOKEN-it must be supplied; MARQO_WORKFLOW_TESTS_SUBNET_ID-it must be supplied; MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting applies to all jobs in the workflow. The workflow has one job. The 1st job is named `Start EC2 runner` and its job id is `Start-Runner`. The job `Start-Runner` has 2 steps. The 1st step is named `Configure AWS credentials`. The 2nd step is named `Start EC2 runner` and its id is `start-ec2-runner`. /no-think","answer":"```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        description: Base AMI ID for the EC2 runner\n        required: true\n        type: string\n      ec2-instance-type:\n        description: Instance type for the EC2 runner\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n    outputs:\n      label:\n        description: EC2 Runner Label\n        value: ${{ jobs.Start-Runner.outputs.label }}\n      ec2-instance-id:\n        description: EC2 Instance ID\n        value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-region: us-east-1\n        role-to-assume: arn:aws:iam::424082663841:role/GhRunnerManagerRole-Marqo\n\n    - name: Start EC2 runner\n      id: start-ec2-runner\n      uses: machulav/ec2-github-runner@v2\n      with:\n        mode: start\n        github-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}\n        ec2-image-id: ${{ inputs.base-ami-id }}\n        ec2-instance-type: ${{ inputs.ec2-instance-type }}\n        subnet-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }}\n        security-group-id: ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }}\n        aws-resource-tags: >\n          [\n            {\"Key\": \"Name\", \"Value\": \"marqo-github-runner-${{ github.run_id }}\"},\n            {\"Key\": \"GitHubRepo\", \"Value\": \"${{ github.repository }}\"},\n            {\"Key\": \"WorkflowName\", \"Value\": \"${{ github.workflow }}\"},\n            {\"Key\": \"WorkflowRunId\", \"Value\": \"${{ github.run_id }}\"},\n            {\"Key\": \"WorkflowURL\", \"Value\": \"${{ github.event.repository.html_url\n          }}/actions/runs/${{ github.run_id }}\"},\n            {\"Key\": \"PoloRole\", \"Value\": \"testing\"}\n          ]\n\npermissions:\n  contents: read\n  id-token: write\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow called \"Start EC2 Runner\" for a Python repo. First, I need to recall the structure of GitHub Actions workflows.\n\nThe workflow is triggered by another workflow, so the event should be `workflow_call`. Inputs are required: base-ami-id (string) and ec2-instance-type (string). Both must be specified, so in the inputs section, they'll have `required: true`.\n\nOutputs for the workflow are label and ec2-instance-id, which reference job outputs. So in the workflow's outputs, I'll set those to the job's outputs.\n\nSecrets needed: GH_PERSONAL_ACCESS_TOKEN, MARQO_WORKFLOW_TESTS_SUBNET_ID, MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID. These should be listed under secrets with `required: true`.\n\nPermissions for GITHUB_TOKEN: read on contents, write on id-token. That goes under the top-level permissions.\n\nThe job is named \"Start EC2 runner\" with ID \"Start-Runner\". It has two steps. First step: \"Configure AWS credentials\". Second step: \"Start EC2 runner\" with ID \"start-ec2-runner\".\n\nWait, the job ID is Start-Runner, but the job name is \"Start EC2 runner\". So in the job definition, name: \"Start EC2 runner\" and id: Start-Runner.\n\nEach step needs to use the secrets. For the AWS credentials step, probably using aws-actions/configure-aws-credentials. The second step would run a script or action to start the EC2 instance.\n\nWait, the user didn't specify the exact commands for the steps, just the names. So the steps will have names and IDs as given. The second step's ID is start-ec2-runner.\n\nAlso, the job needs to output the label and ec2-instance-id. So in the job's outputs, define label and ec2-instance-id, probably set from the step's outputs. But since the user says the workflow outputs are from the job's outputs, the job must have outputs that the workflow references.\n\nWait, the workflow outputs are ${{ jobs.Start-Runner.outputs.label }} and same for ec2-instance-id. So the job Start-Runner must have outputs defined. Therefore, in the job definition, under outputs, set label and ec2-instance-id, which would be set by the steps.\n\nBut the steps need to set those outputs. The second step (start-ec2-runner) probably sets these outputs. So in that step, using something like `echo \"label=value\" >> $GITHUB_OUTPUT` and same for ec2-instance-id.\n\nBut the user hasn't specified how the outputs are generated, just that the workflow outputs point to the job's outputs. So in the job definition, we need to define outputs that reference the step's outputs.\n\nWait, the job's outputs would be set by the steps. For example, in step 'start-ec2-runner', using id: start-ec2-runner, then in the job's outputs, label: ${{ steps.start-ec2-runner.outputs.label }}, same for ec2-instance-id.\n\nSo the job Start-Runner has outputs:\n\nlabel: ${{ steps.start-ec2-runner.outputs.label }}\n\nec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n\nThen the workflow outputs point to the job's outputs.\n\nNow, putting it all together.\n\nFirst, the workflow name: name: Start EC2 Runner\n\non: workflow_call with inputs.\n\nInputs:\n\nbase-ami-id: required, type string\n\nec2-instance-type: required, type string\n\nSecrets:\n\nGH_PERSONAL_ACCESS_TOKEN: required\n\nMARQO_WORKFLOW_TESTS_SUBNET_ID: required\n\nMARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID: required\n\nPermissions: contents: read, id-token: write\n\nJobs:\n\nStart-Runner:\n\nname: Start EC2 runner\n\nsteps:\n\n1. name: Configure AWS credentials\n\n2. name: Start EC2 runner, id: start-ec2-runner\n\nJob outputs:\n\nlabel: ${{ steps.start-ec2-runner.outputs.label }}\n\nec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n\nWorkflow outputs:\n\nlabel: ${{ jobs.Start-Runner.outputs.label }}\n\nec2-instance-id: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\nWait, the workflow outputs are defined at the top level under outputs.\n\nSo the structure:\n\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        required: true\n        type: string\n      ec2-instance-type:\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n\npermissions:\n  contents: read\n  id-token: write\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n      - name: Configure AWS credentials\n        # ... probably uses aws-actions/configure-aws-credentials with secrets\n      - id: start-ec2-runner\n        name: Start EC2 runner\n        # ... step that starts EC2 and sets outputs\n\noutputs:\n  label: ${{ jobs.Start-Runner.outputs.label }}\n  ec2-instance-id: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n\nWait, the user said the workflow has two outputs, so the top-level outputs section.\n\nBut in GitHub Actions, workflow outputs are defined under the 'outputs' key at the same level as 'jobs'.\n\nYes.\n\nNow, the steps for the job. The first step is \"Configure AWS credentials\". Typically, this would use the aws-actions/configure-aws-credentials action. But the user didn't specify, so just the step name.\n\nSecond step: \"Start EC2 runner\" with id start-ec2-runner. This step would presumably run a script that starts the EC2 instance, using the inputs and secrets. But since the user didn't specify the exact commands, we just need to have the step with the correct name and id.\n\nAlso, the job needs to output the label and ec2-instance-id, which come from the step's outputs. So in the step 'start-ec2-runner', it should set those outputs. For example, in the step:\n\n- id: start-ec2-runner\n  run: |\n    # commands to start EC2\n    echo \"label=ec2-runner-label\" >> $GITHUB_OUTPUT\n    echo \"ec2-instance-id=i-1234567890abcdef0\" >> $GITHUB_OUTPUT\n\nBut since the user doesn't specify the actual commands, the YAML just needs the structure.\n\nSo the step would have an id, and the job's outputs reference the step's outputs.\n\nNow, the secrets are provided as inputs to the workflow, so in the job steps, they can be referenced as secrets.GH_PERSONAL_ACCESS_TOKEN etc.\n\nWait, the secrets are listed under the workflow_call's secrets, so when the workflow is called, the caller must provide those secrets, and within this workflow, they can be accessed via secrets.<name>.\n\nSo in the steps, for example, the Configure AWS step might use the subnet and security group secrets.\n\nBut the user didn't specify the exact steps, so just the step names.\n\nAlso, the job runs on ubuntu-latest probably, since it's a Python repo but the job is about starting EC2, so likely Linux.\n\nPutting all together.\n\nCheck if all required parts are included:\n\n- Workflow name: correct.\n\n- Trigger: workflow_call with inputs and secrets.\n\n- Inputs: two required strings.\n\n- Secrets: three required.\n\n- Permissions: contents read, id-token write.\n\n- Job with correct name and id.\n\n- Two steps with correct names and one having an id.\n\n- Job outputs.\n\n- Workflow outputs.\n\nYes.\n\nNow, write the YAML accordingly.\n</think>\n\n```yaml\nname: Start EC2 Runner\n\non:\n  workflow_call:\n    inputs:\n      base-ami-id:\n        required: true\n        type: string\n      ec2-instance-type:\n        required: true\n        type: string\n    secrets:\n      GH_PERSONAL_ACCESS_TOKEN:\n        required: true\n      MARQO_WORKFLOW_TESTS_SUBNET_ID:\n        required: true\n      MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID:\n        required: true\n\npermissions:\n  contents: read\n  id-token: write\n\njobs:\n  Start-Runner:\n    name: Start EC2 runner\n    runs-on: ubuntu-latest\n    outputs:\n      label: ${{ steps.start-ec2-runner.outputs.label }}\n      ec2-instance-id: ${{ steps.start-ec2-runner.outputs.ec2-instance-id }}\n    steps:\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v2\n        with:\n          aws-region: us-east-1\n          role-to-assume: ${{ secrets.AWS_ROLE }}\n\n      - id: start-ec2-runner\n        name: Start EC2 runner\n        run: |\n          INSTANCE_ID=$(aws ec2 run-instances \\\n            --image-id ${{ inputs.base-ami-id }} \\\n            --instance-type ${{ inputs.ec2-instance-type }} \\\n            --subnet-id ${{ secrets.MARQO_WORKFLOW_TESTS_SUBNET_ID }} \\\n            --security-group-ids ${{ secrets.MARQO_WORKFLOW_TESTS_SECURITY_GROUP_ID }} \\\n            --query 'Instances[0].InstanceId' --output text)\n          echo \"ec2-instance-id=$INSTANCE_ID\" >> $GITHUB_OUTPUT\n          echo \"label=ec2-runner-$INSTANCE_ID\" >> $GITHUB_OUTPUT\n\noutputs:\n  label:\n    value: ${{ jobs.Start-Runner.outputs.label }}\n  ec2-instance-id:\n    value: ${{ jobs.Start-Runner.outputs.ec2-instance-id }}\n```","repository_id":94530930,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"aws_role\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gh_personal_access_token: string; github_token: string; marqo_workflow_tests_security_group_id: string; marqo_workflow_tests_subnet_id: string}\", \"filepath\": \"../../tmp/3b92c604-043f-4d59-80a4-736a4657a8db.yml\", \"line\": 36, \"column\": 31, \"kind\": \"expression\", \"snippet\": \"          role-to-assume: ${{ secrets.AWS_ROLE }}\\n                              ^~~~~~~~~~~~~~~~\", \"end_column\": 46}, {\"message\": \"unexpected key \\\"outputs\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/3b92c604-043f-4d59-80a4-736a4657a8db.yml\", \"line\": 50, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"outputs:\\n^~~~~~~~\", \"end_column\": 8}]","meteor_score":0.517475236115292,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":575,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":2,"Actions":["aws-actions/configure-aws-credentials","machulav/ec2-github-runner"],"Actions_details":[{"version":"v4","name":"aws-actions/configure-aws-credentials"},{"version":"v2","name":"machulav/ec2-github-runner"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":2,"CyclomaticComplexity":1}}
{"id":54038,"level":1,"name":"fusion-php/fusion","file_name":"tests-base.yml","len":5,"prompt":"Generate a GitHub Workflow named `Test Fusion Library` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) a pull request is created, a pull request's head branch is updated or a previously closed pull request is reopened. The workflow has one job. The 1st job is named `P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}` and its job id is `test`. /no-think","answer":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n    - main\n  pull_request:\n    types: [opened, synchronize, reopened]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        php: [8.3]\n        laravel: [11.*]\n        dependency-version: [prefer-lowest, prefer-stable]\n\n    name: 'P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version\n      }}'\n\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v4\n\n    - name: Cache Composer Dependencies\n      uses: actions/cache@v4\n      with:\n        path: ~/.composer/cache/files\n        key: composer-${{ matrix.laravel }}-${{ matrix.php }}-${{ \n          hashFiles('composer.json') }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, \n          pdo_sqlite, bcmath, soap, intl, gd, exif, iconv, imagick\n        coverage: none\n\n    - name: Install PHP Dependencies\n      run: |\n        composer self-update\n        composer require \"laravel/framework:${{ matrix.laravel }}\" --no-interaction --no-update\n        composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        cache: npm\n        cache-dependency-path: packages/vue/package.json\n\n    - name: Install Node Dependencies\n      run: npm install\n      working-directory: packages/vue\n\n    - name: Run npm tests\n      run: npm run test\n      working-directory: packages/vue\n\n    - name: Run PHP Tests\n      run: vendor/bin/phpunit\n\n```","llm_response":"```yaml\nname: Test Fusion Library\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    branches:\n      - main\n\njobs:\n  test:\n    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        php: [7.4, 8.0, 8.1]\n        laravel: [6, 7, 8]\n        dependency-version: [8.0, 8.1, 8.2]\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v2\n\n    - name: Set up PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: ${{ matrix.php }}\n        tools: composer\n\n    - name: Install dependencies\n      run: composer install --no-interaction\n\n    - name: Run tests\n      run: composer test\n```","repository_id":95302169,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 13: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/98df507e-255f-4ad8-b33b-f506e45b0296.yml\", \"line\": 13, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: P:${{ matrix.php }}, L:${{ matrix.laravel }}, V: ${{ matrix.dependency-version }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":434,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":4,"Actions":["actions/cache","actions/checkout","actions/setup-node","shivammathur/setup-php"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/cache"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v3","name":"actions/setup-node"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":3563,"level":3,"name":"paradigmxyz/reth","file_name":"kurtosis.yml","len":5,"prompt":"Generate a GitHub Workflow named `kurtosis` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) the scheduled time has come: every 12 hours. 3) The workflow would run whenever there is a push event to: a tag whose name matches *. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 3 jobs. The job id of the 1st job is `prepare-reth`. This job will call a reusable workflow located at `./.github/workflows/prepare-reth.yml`. The job will pass 2 inputs to the called workflow: the input `image_tag` is `ghcr.io/paradigmxyz/reth:kurtosis-ci` and the input `binary_name` is `reth`. The 2nd job is named `run kurtosis` and its job id is `test`. Before this job runs, `prepare-reth` must complete successfully. This job will execute on any runner that is a member of Reth. The maximum number of minutes to run the job is 60. The job `test` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `fetch-depth` is set to `0`. The 2nd step is named `Download reth image`. This step runs action `actions/download-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `artifacts` and `path` is set to `/tmp`. The 3rd step is named `Load Docker image`. This step runs a script: `docker load -i /tmp/reth_image.tar &\nwait\ndocker image ls -a\n`. The 4th step is named `Run kurtosis`. This step runs action `ethpandaops/kurtosis-assertoor-github-action` tagged as v1. The step defines an input parameter for the action: `ethereum_package_args` is set to `.github/assets/kurtosis_network_params.yaml`. The job id of the 3rd job is `notify-on-error`. Before this job runs, `test` must complete successfully. This job will run only if the condition(failure()) is met. This job will execute on any runner that is a member of Reth. The job `notify-on-error` has one step. The 1st step is named `Slack Webhook Action`. The step sets 3 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}`, `SLACK_MESSAGE` is set to `Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{ github.run_id }}` and `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK_URL }}`. This step runs action `rtCamp/action-slack-notify` tagged as v2. /no-think","answer":"```yaml\n# Runs `assertoor` tests on a `kurtosis` testnet.\n\nname: kurtosis\n\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n\n  push:\n    tags:\n    - '*'\n\nenv:\n  CARGO_TERM_COLOR: always\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    timeout-minutes: 60\n    strategy:\n      fail-fast: false\n    name: run kurtosis\n    runs-on:\n      group: Reth\n    needs:\n    - prepare-reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on:\n      group: Reth\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","llm_response":"```yaml\nname: kurtosis\non:\n  workflow_dispatch:\n  schedule:\n  - cron: 0 */12 * * *\n  push:\n    tags:\n    - '*'\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\nenv:\n  CARGO_TERM_COLOR: always\n\njobs:\n  prepare-reth:\n    uses: ./.github/workflows/prepare-reth.yml\n    with:\n      image_tag: ghcr.io/paradigmxyz/reth:kurtosis-ci\n      binary_name: reth\n\n  test:\n    name: run kurtosis\n    needs: prepare-reth\n    runs-on: [Reth]\n    timeout-minutes: 60\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n    - name: Download reth image\n      uses: actions/download-artifact@v4\n      with:\n        name: artifacts\n        path: /tmp\n    - name: Load Docker image\n      run: |\n        docker load -i /tmp/reth_image.tar &\n        wait\n        docker image ls -a\n    - name: Run kurtosis\n      uses: ethpandaops/kurtosis-assertoor-github-action@v1\n      with:\n        ethereum_package_args: .github/assets/kurtosis_network_params.yaml\n\n  notify-on-error:\n    needs: test\n    if: failure()\n    runs-on: [Reth]\n    steps:\n    - name: Slack Webhook Action\n      uses: rtCamp/action-slack-notify@v2\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Failed run: https://github.com/paradigmxyz/reth/actions/runs/${{\n          github.run_id }}'\n        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}\n\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/d87ec7dc-8229-49bf-a8cd-48566e51f3c2.yml\", \"line\": 27, \"column\": 15, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: [Reth]\\n              ^~~~~\", \"end_column\": 19}, {\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/d87ec7dc-8229-49bf-a8cd-48566e51f3c2.yml\", \"line\": 52, \"column\": 15, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: [Reth]\\n              ^~~~~\", \"end_column\": 19}]","meteor_score":0.9578651685393259,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":440,"stats":{"NumofTriggers":3,"Triggers":["push","schedule","workflow_dispatch"],"NumofJobs":3,"NumofActions":4,"Actions":["actions/checkout","actions/download-artifact","ethpandaops/kurtosis-assertoor-github-action","rtCamp/action-slack-notify"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ethpandaops/kurtosis-assertoor-github-action"},{"version":"v2","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/prepare-reth.yml"],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":64177,"level":3,"name":"bitwarden/server","file_name":"repository-management.yml","len":5,"prompt":"Generate a GitHub Workflow named `Repository management` for a GitHub repository whose primary programming language is C#. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives 3 inputs: task-its default value is Version Bump, this input represents task to execute, it has options including Version Bump, Version Bump and Cut rc and Version Bump and Cut hotfix-rc, it must be supplied and the data type is choice; target_ref-its default value is main, this input represents branch/tag to target for cut, it must be supplied and the data type is string; version_number_override-this input represents new version override (leave blank for automatic calculation, example: '2024.1.0'), it is optional and the data type is string. The workflow has 5 jobs. The 1st job is named `Setup` and its job id is `setup`. This job will run on ubuntu-24.04 runner. The job `setup` has one step. The 1st step is named `Set branch` and its id is `set-branch`. The step sets an environment variable to use: `TASK` is set to `${{ inputs.task }}`. This step runs a script: `if [[ \"$TASK\" == \"Version Bump\" ]]; then\n  BRANCH=\"none\"\nelif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n  BRANCH=\"rc\"\nelif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n  BRANCH=\"hotfix-rc\"\nfi\n\necho \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n`. This job has an output: `branch` is defined as ${{ steps.set-branch.outputs.branch }}. The 2nd job is named `Cut branch` and its job id is `cut_branch`. Before this job runs, `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cut_branch` has 4 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `${{ inputs.target_ref }}` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Check if ${{ needs.setup.outputs.branch }} branch exists`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n  echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 4th step is named `Cut branch`. The step sets an environment variable to use: `BRANCH_NAME` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `git switch --quiet --create $BRANCH_NAME\ngit push --quiet --set-upstream origin $BRANCH_NAME\n`. The 3rd job is named `Bump Version` and its job id is `bump_version`. Before this job runs, `cut_branch` and `setup` must complete successfully. This job will run only if the condition(${{ always() }}) is met. This job will run on ubuntu-24.04 runner. The job `bump_version` has 13 steps. The 1st step is named `Validate version input format`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-check` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ inputs.version_number_override }}`. The 2nd step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 3rd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 4th step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 5th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 6th step is named `Get current version` and its id is `current-version`. This step runs a script: `CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\necho \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n`. The 7th step is named `Verify input version`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. The step sets 2 environment variables to use: `CURRENT_VERSION` is set to `${{ steps.current-version.outputs.version }}` and `NEW_VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `# Error if version has not changed.\nif [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n  echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n\n# Check if version is newer.\nprintf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\nif [ $? -eq 0 ]; then\n  echo \"Version is newer than the current version.\"\nelse\n  echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n  exit 1\nfi\n`. The 8th step is named `Calculate next release version` and its id is `calculate-next-version`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-next` from the main branch. The step defines an input parameter for the action: `version` is set to `${{ steps.current-version.outputs.version }}`. The 9th step is named `Bump version props - Version Override` and its id is `bump-version-override`. This step will run only if the condition(${{ inputs.version_number_override != '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ inputs.version_number_override }}`. The 10th step is named `Bump version props - Automatic Calculation` and its id is `bump-version-automatic`. This step will run only if the condition(${{ inputs.version_number_override == '' }}) is met. This step runs action `bitwarden/gh-actions/version-bump` from the main branch. The step defines 2 input parameters for the action: `file_path` is set to `Directory.Build.props` and `version` is set to `${{ steps.calculate-next-version.outputs.version }}`. The 11th step is named `Set final version output` and its id is `set-final-version-output`. The step sets an environment variable to use: `VERSION` is set to `${{ inputs.version_number_override }}`. This step runs a script: `if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n  echo \"version=$VERSION\" >> $GITHUB_OUTPUT\nelif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n  echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\nfi\n`. The 12th step is named `Commit files`. This step runs a script: `git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a`. The 13th step is named `Push changes`. This step runs a script: `git push`. This job has an output: `version` is defined as ${{ steps.set-final-version-output.outputs.version }}. The 4th job is named `Cherry-Pick Commit(s)` and its job id is `cherry_pick`. Before this job runs, `bump_version` and `setup` must complete successfully. This job will run only if the condition(${{ needs.setup.outputs.branch != 'none' }}) is met. This job will run on ubuntu-24.04 runner. The job `cherry_pick` has 5 steps. The 1st step is named `Generate GH App token` and its id is `app-token`. This step runs action `actions/create-github-app-token` whose commit is c1a285145b9d317df6ced56c09f525b5c2b6f755. The step defines 2 input parameters for the action: `app-id` is set to `${{ secrets.BW_GHAPP_ID }}` and `private-key` is set to `${{ secrets.BW_GHAPP_KEY }}`. The 2nd step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `ref` is set to `main` and `token` is set to `${{ steps.app-token.outputs.token }}`. The 3rd step is named `Configure Git`. This step runs a script: `git config --local user.email \"actions@github.com\"\ngit config --local user.name \"Github Actions\"\n`. The 4th step is named `Install xmllint`. This step runs a script: `sudo apt-get update\nsudo apt-get install -y libxml2-utils\n`. The 5th step is named `Perform cherry-pick(s)`. The step sets an environment variable to use: `CUT_BRANCH` is set to `${{ needs.setup.outputs.branch }}`. This step runs a script: `# Function for cherry-picking\ncherry_pick () {\n  local source_branch=$1\n  local destination_branch=$2\n\n  # Get project commit/version from source branch\n  git switch $source_branch\n  SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n  SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  # Get project commit/version from destination branch\n  git switch $destination_branch\n  DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n  if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n    git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n    git push -u origin $destination_branch\n  fi\n}\n\n# If we are cutting 'hotfix-rc':\nif [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n  # If the 'rc' branch exists:\n  if [[ $(git ls-remote --heads origin rc) ]]; then\n\n    # Chery-pick from 'rc' into 'hotfix-rc'\n    cherry_pick rc hotfix-rc\n\n    # Cherry-pick from 'main' into 'rc'\n    cherry_pick main rc\n\n  # If the 'rc' branch does not exist:\n  else\n\n    # Cherry-pick from 'main' into 'hotfix-rc'\n    cherry_pick main hotfix-rc\n\n  fi\n\n# If we are cutting 'rc':\nelif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n  # Cherry-pick from 'main' into 'rc'\n  cherry_pick main rc\n\nfi\n`. The 5th job is named `Move finalization database scripts` and its job id is `move_future_db_scripts`. Before this job runs, `cherry_pick` must complete successfully. This job will call a reusable workflow located at `./.github/workflows/_move_finalization_db_scripts.yml`. The job will pass a secret to the called workflow: the secret `special_case_secrets` is `inherit`. /no-think","answer":"```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        default: Version Bump\n        description: Task to execute\n        options:\n        - Version Bump\n        - Version Bump and Cut rc\n        - Version Bump and Cut hotfix-rc\n        required: true\n        type: choice\n      target_ref:\n        default: main\n        description: Branch/Tag to target for cut\n        required: true\n        type: string\n      version_number_override:\n        description: \"New version override (leave blank for automatic calculation,\n          example: '2024.1.0')\"\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n    - name: Set branch\n      id: set-branch\n      env:\n        TASK: ${{ inputs.task }}\n      run: |\n        if [[ \"$TASK\" == \"Version Bump\" ]]; then\n          BRANCH=\"none\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n          BRANCH=\"rc\"\n        elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n          BRANCH=\"hotfix-rc\"\n        fi\n\n        echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n\n  cut_branch:\n    name: Cut branch\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    needs: setup\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out target ref\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: ${{ inputs.target_ref }}\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n          echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Cut branch\n      env:\n        BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n      run: |\n        git switch --quiet --create $BRANCH_NAME\n        git push --quiet --set-upstream origin $BRANCH_NAME\n\n\n  bump_version:\n    name: Bump Version\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    needs:\n    - cut_branch\n    - setup\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n    - name: Validate version input format\n      if: ${{ inputs.version_number_override != '' }}\n      uses: bitwarden/gh-actions/version-check@main\n      with:\n        version: ${{ inputs.version_number_override }}\n\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Get current version\n      id: current-version\n      run: |\n        CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n        echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n    - name: Verify input version\n      if: ${{ inputs.version_number_override != '' }}\n      env:\n        CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n        NEW_VERSION: ${{ inputs.version_number_override }}\n      run: |\n        # Error if version has not changed.\n        if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n          echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n        # Check if version is newer.\n        printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n        if [ $? -eq 0 ]; then\n          echo \"Version is newer than the current version.\"\n        else\n          echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n          exit 1\n        fi\n\n    - name: Calculate next release version\n      if: ${{ inputs.version_number_override == '' }}\n      id: calculate-next-version\n      uses: bitwarden/gh-actions/version-next@main\n      with:\n        version: ${{ steps.current-version.outputs.version }}\n\n    - name: Bump version props - Version Override\n      if: ${{ inputs.version_number_override != '' }}\n      id: bump-version-override\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ inputs.version_number_override }}\n\n    - name: Bump version props - Automatic Calculation\n      if: ${{ inputs.version_number_override == '' }}\n      id: bump-version-automatic\n      uses: bitwarden/gh-actions/version-bump@main\n      with:\n        file_path: Directory.Build.props\n        version: ${{ steps.calculate-next-version.outputs.version }}\n\n    - name: Set final version output\n      id: set-final-version-output\n      env:\n        VERSION: ${{ inputs.version_number_override }}\n      run: |\n        if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n          echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n        elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n          echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n        fi\n\n    - name: Commit files\n      run: git commit -m \"Bumped version to ${{ \n        steps.set-final-version-output.outputs.version }}\" -a\n\n    - name: Push changes\n      run: git push\n\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    needs:\n    - bump_version\n    - setup\n    steps:\n    - name: Generate GH App token\n      uses: \n        actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755       # v1.11.1\n      id: app-token\n      with:\n        app-id: ${{ secrets.BW_GHAPP_ID }}\n        private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n    - name: Check out main branch\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683   # v4.2.2\n      with:\n        fetch-depth: 0\n        ref: main\n        token: ${{ steps.app-token.outputs.token }}\n\n    - name: Configure Git\n      run: |\n        git config --local user.email \"actions@github.com\"\n        git config --local user.name \"Github Actions\"\n\n    - name: Install xmllint\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y libxml2-utils\n\n    - name: Perform cherry-pick(s)\n      env:\n        CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n      run: |\n        # Function for cherry-picking\n        cherry_pick () {\n          local source_branch=$1\n          local destination_branch=$2\n\n          # Get project commit/version from source branch\n          git switch $source_branch\n          SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n          SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          # Get project commit/version from destination branch\n          git switch $destination_branch\n          DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n          if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n            git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n            git push -u origin $destination_branch\n          fi\n        }\n\n        # If we are cutting 'hotfix-rc':\n        if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n          # If the 'rc' branch exists:\n          if [[ $(git ls-remote --heads origin rc) ]]; then\n\n            # Chery-pick from 'rc' into 'hotfix-rc'\n            cherry_pick rc hotfix-rc\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          # If the 'rc' branch does not exist:\n          else\n\n            # Cherry-pick from 'main' into 'hotfix-rc'\n            cherry_pick main hotfix-rc\n\n          fi\n\n        # If we are cutting 'rc':\n        elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n          # Cherry-pick from 'main' into 'rc'\n          cherry_pick main rc\n\n        fi\n\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets: inherit\n\n```","llm_response":"<think>We are generating a GitHub Actions workflow YAML file named \"Repository management\"\n The workflow is triggered manually (workflow_dispatch)\n Inputs:\n   task: choice (required, default: 'Version Bump', options: ['Version Bump', 'Version Bump and Cut rc', 'Version Bump and Cut hotfix-rc'])\n   target_ref: string (required, default: 'main')\n   version_number_override: string (optional)\n\n Jobs:\n   1. setup (id: setup)\n        - runs on ubuntu-24.04\n        - step: set-branch (id: set-branch)\n            - sets env: TASK = inputs.task\n            - script: (sets BRANCH variable based on TASK and outputs it to GITHUB_OUTPUT)\n        - output: branch (from set-branch step)\n\n   2. cut_branch (id: cut_branch)\n        - needs: setup\n        - runs if: needs.setup.outputs.branch != 'none'\n        - runs on ubuntu-24.04\n        - steps:\n            a. app-token: action: actions/create-github-app-token@commit (c1a2851...)\n                inputs: app-id, private-key (from secrets)\n            b. Checkout repository: action: actions/checkout@commit (11bd719...)\n                inputs: ref (inputs.target_ref), token (from app-token step)\n            c. Check if branch exists: \n                env: BRANCH_NAME = needs.setup.outputs.branch\n                script: checks if branch exists, fails if it does\n            d. Cut branch: \n                env: BRANCH_NAME = needs.setup.outputs.branch\n                script: creates and pushes the branch\n\n   3. bump_version (id: bump_version)\n        - needs: [cut_branch, setup]   (note: but note condition: always() so it runs even if cut_branch fails? However, the requirement says \"before this job runs, cut_branch and setup must complete successfully\" -> so we set needs to both, but condition is always() meaning it runs regardless of success? However, the requirement says \"must complete successfully\" so we rely on needs for the success condition, and the always() condition is for the job to run even if previous jobs failed? But the requirement says \"must complete successfully\", so we don't want it to run if cut_branch fails. However, note the condition: `always()`. This is a bit confusing. But the problem states: \"This job will run only if the condition(${{ always() }}) is met.\" -> meaning it runs regardless of previous job status? But the requirement also says \"before this job runs, cut_branch and setup must complete successfully\". \n\n        However, note: the `needs` key in the job specifies the jobs that must run before this job. By default, if a job in the needs list fails, the job will not run. But if we set `if: always()`, then it will run even if the needed jobs fail. But the requirement says \"must complete successfully\", so we don't want to run if they fail. Therefore, we should not use `always()` for the condition? But the problem says: \"This job will run only if the condition(${{ always() }}) is met.\" -> which is a bit contradictory because `always()` means always run.\n\n        Let me re-read: \"This job will run only if the condition(${{ always() }}) is met.\" -> `always()` returns true regardless, so it always runs. However, the requirement also says \"before this job runs, cut_branch and setup must complete successfully\". This is handled by the `needs` without an `if` condition. Because by default, the job will only run if the needed jobs are successful. So we don't need an `if` condition? But the problem says to set the condition to `always()`. \n\n        Actually, the problem says: \"This job will run only if the condition(${{ always() }}) is met.\" -> meaning the condition is `always()`, which is always true. So we set `if: always()`. However, note that the `needs` requirement for success is independent. The `needs` list ensures that the jobs run in order and by default the job only runs if the needed jobs are successful. But if we set `if: always()`, then even if the needed jobs fail, this job would run. That contradicts the requirement that the needed jobs must complete successfully.\n\n        How to resolve? The problem says: \"before this job runs, cut_branch and setup must complete successfully\" -> that is enforced by the `needs` without an `if` condition. But then it says the condition is `always()`. This is confusing.\n\n        Looking at GitHub Actions documentation: \n        - The `needs` key defines the dependencies and by default the job will only run if the dependencies are successful.\n        - The `if` condition is evaluated after the dependencies. So if we set `if: always()`, then even if the dependencies failed, the job would run.\n\n        However, the requirement says \"must complete successfully\", so we don't want the job to run if they failed. Therefore, we should not set `if: always()`? But the problem explicitly says: \"This job will run only if the condition(${{ always() }}) is met.\".\n\n        Let me read again: \"This job will run only if the condition(${{ always() }}) is met.\" -> meaning the condition is `always()`, which is always true, so it will run as long as the condition is met (which it always is). But note: the condition `always()` does not override the success requirement of the `needs`. Actually, the `needs` success is a prerequisite for the job to be considered for the `if` condition. So if the `needs` jobs fail, the job is skipped and the `if` condition is not evaluated. Therefore, setting `if: always()` doesn't change the fact that the job won't run if `needs` fails.\n\n        However, the `always()` function in the `if` condition is typically used to run the job even if previous jobs failed. But in this case, because we have `needs` that require success, the job won't run at all if `needs` fails. So the `if: always()` is redundant? But the problem says to set it.\n\n        We'll set `if: always()` as per the requirement.\n\n        Steps (13 steps) as described.\n\n        Outputs: version (from set-final-version-output step)\n\n   4. cherry_pick (id: cherry_pick)\n        - needs: [bump_version, setup]\n        - runs if: needs.setup.outputs.branch != 'none'\n        - runs on ubuntu-24.04\n        - steps: 5 steps as described\n\n   5. move_future_db_scripts (id: move_future_db_scripts)\n        - needs: cherry_pick\n        - uses: ./.github/workflows/_move_finalization_db_scripts.yml\n        - secrets: special_case_secrets: inherit\n\n Important: The workflow name is \"Repository management\"\n\n We'll structure the YAML accordingly.\n\n Note: For the `setup` job, the step `set-branch` sets an output `branch` by writing to GITHUB_OUTPUT.\n\n For the `cut_branch` job, it has a condition: if branch is not 'none'\n\n For the `bump_version` job, we have two different sets of steps depending on whether version_number_override is provided.\n\n We have to be careful with the step conditionals (using `if` for steps).\n\n Let's write the YAML.\n</think>\n\n```yaml\nname: Repository management\n\non:\n  workflow_dispatch:\n    inputs:\n      task:\n        description: Task to execute\n        required: true\n        type: choice\n        default: \"Version Bump\"\n        options:\n          - \"Version Bump\"\n          - \"Version Bump and Cut rc\"\n          - \"Version Bump and Cut hotfix-rc\"\n      target_ref:\n        description: Branch/tag to target for cut\n        required: true\n        type: string\n        default: \"main\"\n      version_number_override:\n        description: New version override (leave blank for automatic calculation, example: '2024.1.0')\n        required: false\n        type: string\n\njobs:\n  setup:\n    name: Setup\n    runs-on: ubuntu-24.04\n    outputs:\n      branch: ${{ steps.set-branch.outputs.branch }}\n    steps:\n      - id: set-branch\n        name: Set branch\n        env:\n          TASK: ${{ inputs.task }}\n        run: |\n          if [[ \"$TASK\" == \"Version Bump\" ]]; then\n            BRANCH=\"none\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut rc\" ]]; then\n            BRANCH=\"rc\"\n          elif [[ \"$TASK\" == \"Version Bump and Cut hotfix-rc\" ]]; then\n            BRANCH=\"hotfix-rc\"\n          fi\n\n          echo \"branch=$BRANCH\" >> $GITHUB_OUTPUT\n\n  cut_branch:\n    name: Cut branch\n    needs: setup\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    steps:\n      - id: app-token\n        name: Generate GH App token\n        uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          ref: ${{ inputs.target_ref }}\n          token: ${{ steps.app-token.outputs.token }}\n\n      - name: Check if ${{ needs.setup.outputs.branch }} branch exists\n        env:\n          BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n        run: |\n          if [[ $(git ls-remote --heads origin $BRANCH_NAME) ]]; then\n            echo \"$BRANCH_NAME already exists! Please delete $BRANCH_NAME before running again.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n\n      - name: Cut branch\n        env:\n          BRANCH_NAME: ${{ needs.setup.outputs.branch }}\n        run: |\n          git switch --quiet --create $BRANCH_NAME\n          git push --quiet --set-upstream origin $BRANCH_NAME\n\n  bump_version:\n    name: Bump Version\n    needs: [cut_branch, setup]\n    if: ${{ always() }}\n    runs-on: ubuntu-24.04\n    outputs:\n      version: ${{ steps.set-final-version-output.outputs.version }}\n    steps:\n      - name: Validate version input format\n        if: ${{ inputs.version_number_override != '' }}\n        uses: bitwarden/gh-actions/version-check@main\n        with:\n          version: ${{ inputs.version_number_override }}\n\n      - id: app-token\n        name: Generate GH App token\n        uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          ref: main\n          token: ${{ steps.app-token.outputs.token }}\n\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n\n      - name: Install xmllint\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libxml2-utils\n\n      - id: current-version\n        name: Get current version\n        run: |\n          CURRENT_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n          echo \"version=$CURRENT_VERSION\" >> $GITHUB_OUTPUT\n\n      - name: Verify input version\n        if: ${{ inputs.version_number_override != '' }}\n        env:\n          CURRENT_VERSION: ${{ steps.current-version.outputs.version }}\n          NEW_VERSION: ${{ inputs.version_number_override }}\n        run: |\n          # Error if version has not changed.\n          if [[ \"$NEW_VERSION\" == \"$CURRENT_VERSION\" ]]; then\n            echo \"Specified override version is the same as the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n\n          # Check if version is newer.\n          printf '%s\\n' \"${CURRENT_VERSION}\" \"${NEW_VERSION}\" | sort -C -V\n          if [ $? -eq 0 ]; then\n            echo \"Version is newer than the current version.\"\n          else\n            echo \"Version is older than the current version.\" >> $GITHUB_STEP_SUMMARY\n            exit 1\n          fi\n\n      - id: calculate-next-version\n        name: Calculate next release version\n        if: ${{ inputs.version_number_override == '' }}\n        uses: bitwarden/gh-actions/version-next@main\n        with:\n          version: ${{ steps.current-version.outputs.version }}\n\n      - id: bump-version-override\n        name: Bump version props - Version Override\n        if: ${{ inputs.version_number_override != '' }}\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ inputs.version_number_override }}\n\n      - id: bump-version-automatic\n        name: Bump version props - Automatic Calculation\n        if: ${{ inputs.version_number_override == '' }}\n        uses: bitwarden/gh-actions/version-bump@main\n        with:\n          file_path: Directory.Build.props\n          version: ${{ steps.calculate-next-version.outputs.version }}\n\n      - id: set-final-version-output\n        name: Set final version output\n        env:\n          VERSION: ${{ inputs.version_number_override }}\n        run: |\n          if [[ \"${{ steps.bump-version-override.outcome }}\" = \"success\" ]]; then\n            echo \"version=$VERSION\" >> $GITHUB_OUTPUT\n          elif [[ \"${{ steps.bump-version-automatic.outcome }}\" = \"success\" ]]; then\n            echo \"version=${{ steps.calculate-next-version.outputs.version }}\" >> $GITHUB_OUTPUT\n          fi\n\n      - name: Commit files\n        run: |\n          git commit -m \"Bumped version to ${{ steps.set-final-version-output.outputs.version }}\" -a\n\n      - name: Push changes\n        run: |\n          git push\n\n  cherry_pick:\n    name: Cherry-Pick Commit(s)\n    needs: [bump_version, setup]\n    if: ${{ needs.setup.outputs.branch != 'none' }}\n    runs-on: ubuntu-24.04\n    steps:\n      - id: app-token\n        name: Generate GH App token\n        uses: actions/create-github-app-token@c1a285145b9d317df6ced56c09f525b5c2b6f755\n        with:\n          app-id: ${{ secrets.BW_GHAPP_ID }}\n          private-key: ${{ secrets.BW_GHAPP_KEY }}\n\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n        with:\n          fetch-depth: 0\n          ref: main\n          token: ${{ steps.app-token.outputs.token }}\n\n      - name: Configure Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"Github Actions\"\n\n      - name: Install xmllint\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libxml2-utils\n\n      - name: Perform cherry-pick(s)\n        env:\n          CUT_BRANCH: ${{ needs.setup.outputs.branch }}\n        run: |\n          # Function for cherry-picking\n          cherry_pick () {\n            local source_branch=$1\n            local destination_branch=$2\n\n            # Get project commit/version from source branch\n            git switch $source_branch\n            SOURCE_COMMIT=$(git log --reverse --pretty=format:\"%H\" --max-count=1 Directory.Build.props)\n            SOURCE_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n            # Get project commit/version from destination branch\n            git switch $destination_branch\n            DESTINATION_VERSION=$(xmllint -xpath \"/Project/PropertyGroup/Version/text()\" Directory.Build.props)\n\n            if [[ \"$DESTINATION_VERSION\" != \"$SOURCE_VERSION\" ]]; then\n              git cherry-pick --strategy-option=theirs -x $SOURCE_COMMIT\n              git push -u origin $destination_branch\n            fi\n          }\n\n          # If we are cutting 'hotfix-rc':\n          if [[ \"$CUT_BRANCH\" == \"hotfix-rc\" ]]; then\n\n            # If the 'rc' branch exists:\n            if [[ $(git ls-remote --heads origin rc) ]]; then\n\n              # Chery-pick from 'rc' into 'hotfix-rc'\n              cherry_pick rc hotfix-rc\n\n              # Cherry-pick from 'main' into 'rc'\n              cherry_pick main rc\n\n            # If the 'rc' branch does not exist:\n            else\n\n              # Cherry-pick from 'main' into 'hotfix-rc'\n              cherry_pick main hotfix-rc\n\n            fi\n\n          # If we are cutting 'rc':\n          elif [[ \"$CUT_BRANCH\" == \"rc\" ]]; then\n\n            # Cherry-pick from 'main' into 'rc'\n            cherry_pick main rc\n\n          fi\n\n  move_future_db_scripts:\n    name: Move finalization database scripts\n    needs: cherry_pick\n    uses: ./.github/workflows/_move_finalization_db_scripts.yml\n    secrets:\n      special_case_secrets: inherit\n```","repository_id":3499830,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 21: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/5906520d-1ae8-407b-a8bf-7704c00e698f.yml\", \"line\": 21, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        description: New version override (leave blank for automatic calculation, example: '2024.1.0')\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":2364,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":5,"NumofActions":10,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/create-github-app-token","actions/create-github-app-token","actions/create-github-app-token","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-bump","bitwarden/gh-actions/version-check","bitwarden/gh-actions/version-next"],"Actions_details":[{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-check"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"main","name":"bitwarden/gh-actions/version-next"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"main","name":"bitwarden/gh-actions/version-bump"},{"version":"c1a285145b9d317df6ced56c09f525b5c2b6f755","name":"actions/create-github-app-token"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"}],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_move_finalization_db_scripts.yml"],"NumofSteps":23,"CyclomaticComplexity":3}}
{"id":3572,"level":3,"name":"paradigmxyz/reth","file_name":"sync.yml","len":5,"prompt":"Generate a GitHub Workflow named `sync test` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by an event: there is activity relating to a merge group in a merge queue. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `sync (${{ matrix.chain.bin }})` and its job id is `sync`. This job will execute on any runner that is a member of Reth. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `chain` has 2 values: {'bin': 'reth', 'block': 100000, 'build': 'install', 'chain': 'mainnet', 'tip': '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', 'unwind-target': '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'} and {'bin': 'op-reth', 'block': 10000, 'build': 'install-op', 'chain': 'base', 'tip': '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', 'unwind-target': '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}. The job sets 2 environment variables to use: `RUST_BACKTRACE` is set to `1` and `RUST_LOG` is set to `info,sync=error`. The maximum number of minutes to run the job is 60. The job `sync` has 9 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup mold`. This step runs action `rui314/setup-mold` tagged as v1. The 3rd step is named `Setup Rust toolchain`. This step runs action `dtolnay/rust-toolchain` from the stable branch. The 4th step is named `Cache Rust`. This step runs action `Swatinem/rust-cache` tagged as v2. The step defines an input parameter for the action: `cache-on-failure` is set to `True`. The 5th step is named `Build ${{ matrix.chain.bin }}`. This step runs a script: `make ${{ matrix.chain.build }}`. The 6th step is named `Run sync`. This step runs a script: `${{ matrix.chain.bin }} node \\\n  --chain ${{ matrix.chain.chain }} \\\n  --debug.tip ${{ matrix.chain.tip }} \\\n  --debug.max-block ${{ matrix.chain.block }} \\\n  --debug.terminate\n`. The 7th step is named `Verify the target block hash`. This step runs a script: `${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n  | grep ${{ matrix.chain.tip }}\n`. The 8th step is named `Run stage unwind for 100 blocks`. This step runs a script: `${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n`. The 9th step is named `Run stage unwind to block hash`. This step runs a script: `${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n`. /no-think","answer":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      group: Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: \"${{ matrix.chain.bin }} node \\\\\\n  --chain ${{ matrix.chain.chain }} \\\\\\\n        \\n  --debug.tip ${{ matrix.chain.tip }} \\\\\\n  --debug.max-block ${{ matrix.chain.block\\\n        \\ }} \\\\\\n  --debug.terminate\\n\"\n    - name: Verify the target block hash\n      run: \"${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\\\n        \\ headers ${{ matrix.chain.block }} \\\\\\n  | grep ${{ matrix.chain.tip }}\\n\"\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: \"${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\\\n        \\ }} --chain ${{ matrix.chain.chain }} \\n\"\n    strategy:\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n          unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n          unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n    timeout-minutes: 60\n\n```","llm_response":" ```yaml\nname: sync test\non:\n  workflow_dispatch:\n  pull_request:\n    types:\n      - synchronize\n  push:\n    branches:\n      - main\njobs:\n  sync:\n    name: sync (${{ matrix.chain.bin }})\n    runs-on: \"Reth\"\n    timeout-minutes: 60\n    env:\n      CARGO_TERM_COLOR: always\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    strategy:\n      fail-fast: true\n      matrix:\n        chain:\n          - { bin: \"reth\", block: 100000, build: \"install\", chain: \"mainnet\", tip: \"0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4\", unwind-target: \"0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a\" }\n          - { bin: \"op-reth\", block: 10000, build: \"install-op\", chain: \"base\", tip: \"0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7\", unwind-target: \"0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de\" }\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Setup mold\n        uses: rui314/setup-mold@v1\n      - name: Setup Rust toolchain\n        uses: dtolnay/rust-toolchain@stable\n        with:\n          cache: true\n      - name: Cache Rust\n        uses: Swatinem/rust-cache@v2\n        with:\n          cache-on-failure: true\n      - name: Build ${{ matrix.chain.bin }}\n        run: make ${{ matrix.chain.build }}\n      - name: Run sync\n        run: |\n          ${{ matrix.chain.bin }} node \\\n            --chain ${{ matrix.chain.chain }} \\\n            --debug.tip ${{ matrix.chain.tip }} \\\n            --debug.max-block ${{ matrix.chain.block }} \\\n            --debug.terminate\n      - name: Verify the target block hash\n        run: |\n          ${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n            | grep ${{ matrix.chain.tip }}\n      - name: Run stage unwind for 100 blocks\n        run: ${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n      - name: Run stage unwind to block hash\n        run: ${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n``` ","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/a2e4aa30-6556-4b0b-a496-fe204e748c6a.yml\", \"line\": 13, \"column\": 14, \"kind\": \"runner-label\", \"snippet\": \"    runs-on: \\\"Reth\\\"\\n             ^~~~~~\", \"end_column\": 19}, {\"message\": \"input \\\"cache\\\" is not defined in action \\\"dtolnay/rust-toolchain@stable\\\". available inputs are \\\"components\\\", \\\"target\\\", \\\"targets\\\", \\\"toolchain\\\"\", \"filepath\": \"../../tmp/a2e4aa30-6556-4b0b-a496-fe204e748c6a.yml\", \"line\": 33, \"column\": 11, \"kind\": \"action\", \"snippet\": \"          cache: true\\n          ^~~~~~\", \"end_column\": 16}]","meteor_score":0.9094790323247492,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":719,"stats":{"NumofTriggers":1,"Triggers":["merge_group"],"NumofJobs":1,"NumofActions":4,"Actions":["Swatinem/rust-cache","actions/checkout","dtolnay/rust-toolchain","rui314/setup-mold"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"rui314/setup-mold"},{"version":"stable","name":"dtolnay/rust-toolchain"},{"version":"v2","name":"Swatinem/rust-cache"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":9,"CyclomaticComplexity":1}}
{"id":62474,"level":1,"name":"PHPCSStandards/PHP_CodeSniffer","file_name":"verify-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Verify release` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) a release, pre-release, or draft of a release is published. 2) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 3) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 4) someone manually triggers the workflow. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 2 jobs. The 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}` and its job id is `verify-available-downloads`. The 2nd job is named `PHIVE: ${{ matrix.pharfile }}` and its job id is `verify-phive`. /no-think","answer":"```yaml\nname: Verify release\n\non:\n  # Run whenever a release is published.\n  release:\n    types: [published]\n  # And whenever this workflow is updated.\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  # Allow manually triggering the workflow.\n  workflow_dispatch:\n\n# Cancels all previous workflow runs for the same branch that have not yet completed.\nconcurrency:\n  # The concurrency group contains the workflow name and the branch name.\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  ##################################################################################\n  # Verify the release is available in all the right places and works as expected. #\n  ##################################################################################\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - Release assets\n        - Unversioned web\n        - Versioned web\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Set source URL and file name\n      id: source\n      shell: bash\n      run: |\n        if [[ \"${{ matrix.download_flavour }}\" == \"Release assets\" ]]; then\n          echo 'SRC=https://github.com/PHPCSStandards/PHP_CodeSniffer/releases/latest/download/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        elif [[ \"${{ matrix.download_flavour }}\" == \"Unversioned web\" ]]; then\n          echo 'SRC=https://phars.phpcodesniffer.com/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo 'SRC=https://phars.phpcodesniffer.com/phars/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}-${{ steps.version.outputs.TAG }}.phar\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n    - name: Verify PHAR file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }} ${{ steps.source.outputs.SRC\n        }}${{ steps.source.outputs.FILE }}\n\n    - name: Verify signature file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.SRC }}${{ steps.source.outputs.FILE }}.asc\n\n    - name: 'DEBUG: List files'\n      run: ls -Rlh\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ${{ steps.source.outputs.FILE }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n    - name: Download public key\n      env:\n        FINGERPRINT: '0x689DAD778FF08760E046228BA978220305CD5C32'\n      run: gpg --keyserver \"hkps://keys.openpgp.org\" --recv-keys \"$FINGERPRINT\"\n\n    - name: Verify signature of the PHAR file\n      run: gpg --verify ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.FILE }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ${{ steps.source.outputs.FILE }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ${{ steps.source.outputs.FILE }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n  # #########################################\n  # Verify install via PHIVE.\n  # #########################################\n  verify-phive:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n        tools: phive\n\n    - name: Install\n      run: phive install ${{ matrix.pharfile }} --copy --trust-gpg-keys \n        689DAD778FF08760E046228BA978220305CD5C32\n\n    - name: 'DEBUG: List files'\n      run: ls -R\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ./tools/${{ matrix.pharfile }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ./tools/${{ matrix.pharfile }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ./tools/${{ matrix.pharfile }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation request. The user wants a workflow called \"Verify release\" for a PHP repository. Let me break down the requirements step by step.\n\nFirst, the triggers. The workflow needs to run on several events. The first trigger is when a release, pre-release, or draft is published. So that's the 'release' event with types published, prereleased, and maybe draft? Wait, the GitHub docs say the 'release' event has types like published, unpublished, created, edited, deleted, prereleased. But the user specified \"published\", \"pre-release\", or \"draft of a release is published\". Wait, drafts are usually when a release is created as a draft, but publishing a draft would trigger 'published' maybe. Hmm, but the user says \"a release, pre-release, or draft of a release is published\". Wait, maybe the event types should be 'published' and 'prereleased', but drafts when published become published. Maybe the correct event types here are 'published' and 'prereleased'. Wait, the user says \"published\" for all three: release, pre-release, or draft. Wait, when you publish a draft release, it's a 'published' event. A pre-release is when you check the pre-release box and publish, so that's also a 'published' event but with the prerelease flag. Wait, maybe the event type for both is 'published', but the action is different based on whether it's a pre-release. But the trigger in GitHub is based on the event type. Let me check: according to GitHub docs, the 'release' event's types are: published, unpublished, created, edited, deleted, prereleased. Wait, no, actually, looking it up: the 'release' event has types like 'published' (when a release is published), 'prereleased' (when a pre-release is published?), but maybe the correct types here are 'published' and 'prereleased'. Wait, the user says \"a release, pre-release, or draft of a release is published\". So when a draft is published, it's a 'published' event. A pre-release being published would also be a 'published' event but with the prerelease flag set. But the trigger in GitHub for the event type would be 'published' for both regular releases and pre-releases when they are published. Wait, no. Let me check the GitHub documentation.\n\nFrom GitHub's event triggers documentation: The 'release' event has types: published, unpublished, created, edited, deleted, prereleased. Wait, maybe 'prereleased' is a separate type. Wait, no, actually, according to the docs here: https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release, the 'release' event includes types like 'published', 'unpublished', 'created', 'edited', 'deleted', 'prereleased'. Wait, but when you create a pre-release, does it trigger 'prereleased' or 'published'? Maybe when you publish a pre-release, it's the 'published' type but with the 'prerelease' attribute set to true in the event payload. Hmm, but the trigger syntax in GitHub Actions uses the event type. So perhaps the correct approach here is to trigger on 'release' with types 'published' and 'prereleased'? Wait, the user says \"a release, pre-release, or draft of a release is published\". So when a draft is published, it's a 'published' event. A pre-release being published is also a 'published' event but marked as pre-release. Wait, maybe the event type for both is 'published', but the action depends on the payload. However, for the trigger, the user wants the workflow to run when any of those are published, so the event type would be 'published' for all. Wait, but the user lists three cases: release published, pre-release published, draft published. So maybe all three are covered by the 'published' event type. Therefore, the trigger for the release event should be 'published'.\n\nWait, but the GitHub docs say that the 'release' event's 'published' type occurs when a release is published. A pre-release is still a release, so when you publish a pre-release, it's also a 'published' event. So the trigger for the release event should be on: release types: [published]. That would cover both regular releases and pre-releases when they are published. Drafts: when you publish a draft, it becomes a published release, so that's also a 'published' event. So the first trigger condition is on: release types: [published].\n\nNext, the second trigger condition: only if at least one path of push event matches .github/workflows/verify-release.yml. So the push event should have paths filter for that specific file.\n\nThird trigger: same for pull_request event, paths filter for the same file.\n\nFourth trigger: manual trigger via workflow_dispatch.\n\nSo the on clause should include:\n\non:\n  release:\n    types: [published]\n  push:\n    paths:\n      - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n      - .github/workflows/verify-release.yml\n  workflow_dispatch:\n\nWait, but the user says \"Only if at least one path of push event matches a pattern in the paths filter...\". So for push and pull_request, the workflow runs only if the changed files include that specific YAML file.\n\nNext, concurrency group. The concurrency should be ${{ github.workflow }}-${{ github.ref }}. And when queued, cancel any running workflows in the same group.\n\nSo concurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\nNow, the jobs. There are two jobs.\n\nFirst job: name is \"${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\", job id is 'verify-available-downloads'. So this job uses a matrix strategy. The user didn't specify the matrix values, but we need to define the matrix in the job. However, the user hasn't provided the specific values for download_flavour and pharfile. But since it's a matrix, we need to include the matrix strategy with some example values, but maybe the user expects placeholders. Wait, the problem statement says \"Generate a YAML file based on the user's input below.\" The user didn't specify the matrix values, so perhaps we need to include a matrix with some example values, but the user might expect that the matrix is defined with the required variables. However, the exact values aren't given, so perhaps we can leave the matrix strategy with placeholder values, but the user might want the structure.\n\nWait, the user says \"the 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}`\". So the job name uses matrix parameters. Therefore, the job must have a strategy with matrix defining download_flavour and pharfile.\n\nBut since the user didn't specify the actual values, we need to include a matrix with some example values. However, the problem might not require specific values, just the structure. But in YAML, you need to have actual values for the matrix. Hmm. Maybe the user expects that the matrix is defined with some placeholder values, but the exact values are not important. Alternatively, perhaps the matrix is expected to be defined with specific values, but since the user didn't provide them, maybe we can use example values like ['stable', 'latest'] for download_flavour and ['app.phar'] for pharfile. But the user might not care about the actual values, just the structure.\n\nWait, the problem statement says \"the 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}`\". So the job name is dynamic based on matrix parameters. Therefore, the job must have a matrix strategy with those two variables.\n\nSimilarly, the second job is named `PHIVE: ${{ matrix.pharfile }}`, job id `verify-phive`. So this job also uses a matrix, but the user didn't specify the matrix variables. Wait, the second job's name uses matrix.pharfile, so it must have a matrix strategy as well, but perhaps the matrix is defined in the job.\n\nWait, but the user says \"the 2nd job is named `PHIVE: ${{ matrix.pharfile }}`\". So the second job also uses a matrix, but the user didn't specify the matrix variables. However, the first job's matrix includes pharfile, so maybe the second job's matrix is the same? Or perhaps the second job has its own matrix. But the problem statement doesn't specify. Hmm.\n\nWait, looking back: the first job's name uses matrix.download_flavour and matrix.pharfile. The second job's name uses matrix.pharfile. So both jobs likely share the same pharfile values, but the first job has an additional download_flavour dimension.\n\nBut the user hasn't specified the actual matrix values, so we need to define the matrix in each job. However, for the first job, the matrix would have two dimensions: download_flavour and pharfile. For the second job, the matrix would have pharfile.\n\nBut since the user hasn't given specific values, perhaps we can define example values. For example, for the first job, matrix could be:\n\nstrategy:\n  matrix:\n    download_flavour: [flavour1, flavour2]\n    pharfile: [file1.phar, file2.phar]\n\nBut the user might expect that the matrix is defined with some values, even if they are placeholders.\n\nAlternatively, maybe the matrix is supposed to be defined with specific values, but since the user didn't specify, we can use generic values.\n\nBut the problem is to generate the YAML based on the user's input, which doesn't provide the matrix values. So perhaps the answer should include the matrix structure with example values, as the user hasn't specified them.\n\nWait, but the user's instruction says \"Generate a GitHub Workflow named `Verify release`...\" with the given job names and IDs, but doesn't specify the matrix contents. So the YAML must include the matrix strategy with some example values, but the exact values are not critical. However, in a real workflow, you need to define the matrix values. So perhaps we can include example values for the matrix.\n\nFor the first job, let's assume download_flavour could be 'stable' and 'latest', and pharfile could be 'app.phar'.\n\nBut the user might not care about the actual values, just the structure. However, the YAML needs to be valid, so we have to include some values.\n\nAlternatively, maybe the matrix is intended to be defined with specific values that the user would fill in, but as per the problem statement, we need to generate the YAML as per the user's description, which doesn't include the matrix values. So perhaps the matrix is left with placeholder comments, but YAML doesn't allow that. So the safest approach is to include example values.\n\nLet me proceed.\n\nFirst job:\n\njobs:\n  verify-available-downloads:\n    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        download_flavour: [stable, latest]\n        pharfile: [app.phar]\n    steps:\n      - ... (steps not specified by user, but the user didn't ask for steps, so maybe just a placeholder step)\n\nBut the user didn't specify any steps, so perhaps the steps are not required. Wait, the user says \"the workflow has 2 jobs\", but doesn't specify the steps. So the YAML should include the jobs with their names, IDs, and matrix, but steps can be minimal or placeholders.\n\nWait, the user's instruction says: \"Generate a GitHub Workflow... The workflow has 2 jobs.\" So we need to define the two jobs with their specified names and IDs, including the matrix parameters.\n\nBut the user didn't specify any steps, so perhaps we can include a placeholder step, like 'run: echo \"Verifying...\"'.\n\nBut the problem says \"No additional explanation is needed. The output format should be ```yaml <Workflow>```.\" So the YAML should be complete, but since the user didn't specify steps, maybe we can have a minimal step.\n\nHowever, the user is a PHP repository, so maybe the steps would involve PHP tools, but since it's not specified, perhaps just a run step.\n\nBut the main point is the structure: triggers, concurrency, jobs with matrix.\n\nSo putting it all together.\n\nFirst, the on clause:\n\non:\n  release:\n    types: [published]\n  push:\n    paths:\n      - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n      - .github/workflows/verify-release.yml\n  workflow_dispatch:\n\nWait, but the user said \"1) a release, pre-release, or draft of a release is published.\" So maybe the release event types should include 'published' and 'prereleased'? Wait, when a pre-release is published, is that a 'prereleased' event type or 'published'? Let me double-check.\n\nAccording to GitHub's documentation on the release event: https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release\n\nThe 'release' event includes several types:\n\n- published: A release is published.\n- unpublished: A release is unpublished.\n- created: A release is created.\n- edited: A release is edited.\n- deleted: A release is deleted.\n- prereleased: A pre-release is created.\n\nWait, no, looking at the actual docs:\n\nWait, the correct event types for the release event are:\n\n- published\n- unpublished\n- created\n- edited\n- deleted\n- prereleased\n\nWait, but 'prereleased' might not be a standard type. Let me check the official docs.\n\nFrom the GitHub Actions documentation:\n\nThe release event contains the type webhook_payload_release_action, which can be one of: published, unpublished, created, edited, deleted, or prereleased.\n\nWait, but when you publish a pre-release, does it trigger 'published' or 'prereleased'?\n\nActually, when you create a release as a pre-release and publish it, the event type is 'published', but the 'prerelease' attribute in the payload is set to true.\n\nHowever, the trigger in GitHub Actions for the event type would be 'published' for both regular releases and pre-releases when they are published. The 'prereleased' type might not exist. Wait, perhaps the 'prereleased' type is when you mark an existing release as a pre-release, but I'm not sure.\n\nGiven the user's instruction says \"a release, pre-release, or draft of a release is published\", the common event type for all these is 'published', because publishing a draft (whether it's a pre-release or not) triggers the 'published' event type.\n\nTherefore, the correct trigger for the release event is:\n\non:\n  release:\n    types: [published]\n\nBecause when you publish a release (including pre-releases and drafts that are published), the event type is 'published'.\n\nSo the on clause includes release with type published.\n\nNext, the push and pull_request with paths.\n\nNow, concurrency:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\nNow, the jobs.\n\nFirst job:\n\nverify-available-downloads:\n  name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n  needs: [] # no dependencies mentioned\n  runs-on: ubuntu-latest\n  strategy:\n    matrix:\n      download_flavour: [example1, example2]\n      pharfile: [example.phar]\n  steps:\n    - name: Verify download\n      run: echo \"Verifying ${{ matrix.pharfile }} for ${{ matrix.download_flavour }}\"\n\nSecond job:\n\nverify-phive:\n  name: PHIVE: ${{ matrix.pharfile }}\n  runs-on: ubuntu-latest\n  strategy:\n    matrix:\n      pharfile: [example.phar]\n  steps:\n    - name: Verify PHIVE\n      run: echo \"Verifying PHIVE for ${{ matrix.pharfile }}\"\n\nBut the user didn't specify any steps, but the YAML needs to have at least one step. So including a placeholder step.\n\nAlso, the second job's name uses matrix.pharfile, so it needs a matrix with pharfile.\n\nNow, putting all together.\n\nWait, the user said \"Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled.\"\n\nSo concurrency is set at the workflow level, not per job.\n\nSo the concurrency section is at the top level.\n\nNow, check if all conditions are met.\n\n- Workflow name: \"Verify release\"\n- Triggered by release published, push with paths, pull_request with paths, workflow_dispatch.\n- Concurrency as specified.\n- Two jobs with correct names and IDs, using matrix.\n\nYes.\n\nNow, write the YAML accordingly.\n</think>\n\n```yaml\nname: Verify release\n\non:\n  release:\n    types: [published]\n  push:\n    paths:\n      - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n      - .github/workflows/verify-release.yml\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  verify-available-downloads:\n    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        download_flavour: [stable, latest]\n        pharfile: [app.phar]\n    steps:\n      - name: Verify download availability\n        run: echo \"Checking ${{ matrix.pharfile }} for ${{ matrix.download_flavour }}\"\n\n  verify-phive:\n    name: PHIVE: ${{ matrix.pharfile }}\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        pharfile: [app.phar]\n    steps:\n      - name: Verify PHIVE installation\n        run: echo \"Testing PHIVE installation for ${{ matrix.pharfile }}\"\n```","repository_id":94694176,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 20: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/af8a3d0a-1874-4220-aa7f-0e0b6af73a95.yml\", \"line\": 20, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    name: ${{ matrix.download_flavour }}: ${{ matrix.pharfile }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":1910,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","release","workflow_dispatch"],"NumofJobs":2,"NumofActions":4,"Actions":["octokit/request-action","octokit/request-action","shivammathur/setup-php","shivammathur/setup-php"],"Actions_details":[{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":28,"CyclomaticComplexity":2}}
{"id":46555,"level":2,"name":"sustainable-computing-io/kepler","file_name":"mock_acpi.yml","len":5,"prompt":"Generate a GitHub Workflow named `Mock ACPI` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: a comment on an issue or pull request is created. The workflow has 4 jobs. The 1st job is named `Initialize workflow` and its job id is `initalize-workflow`. The job `initalize-workflow` has 2 steps. The 1st step is named `Get PR branch` and its id is `pr_branch`. The 2nd step is named `Set job status as pending`. The 2nd job is named `Create self-hosted runner` and its job id is `create-runner`. The job `create-runner` has one step. The 1st step is named `metal-runner-action`. The 3rd job is named `Test Mock ACPI` and its job id is `test-mock-acpi`. The job `test-mock-acpi` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Configure SSH`. The 3rd step is named `Install Dependencies`. The 4th step is named `Run playbook` and its id is `run-playbook`. The 4th job is named `Cleanup` and its job id is `cleanup`. The job `cleanup` has 3 steps. The 1st step is named `delete runner`. The 2nd step is named `Mark workflow as failed if playbook failed`. The 3rd step is named `Set job status as ${{ job.status }}`. /no-think","answer":"```yaml\n# This workflow will run mock-acpi compose on self-hosted equinix runners and run validator tool\nname: Mock ACPI\n\non: # yamllint disable-line rule:truthy\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      head_sha: ${{ steps.pr_branch.outputs.head_sha }}\n    steps:\n      # Since `issue_comment` event runs on the default branch,\n      # we need to get the branch of the pull request\n    - name: Get PR branch\n      id: pr_branch\n      uses: xt0rted/pull-request-comment-branch@v3\n      # Since `issue_comment` event workflow will not appear on the\n      # pull request page, we need to set the status of the job\n      # in order to attach it to the pull request itself\n    - name: Set job status as pending\n      if: ${{ success() }}\n      uses: myrotvorets/set-commit-status-action@master\n      with:\n        sha: ${{ steps.pr_branch.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: pending\n\n  create-runner:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n    - name: metal-runner-action\n      uses: sustainable-computing-io/metal-runner-action@main\n      with:\n        github_token: ${{ secrets.GH_SELF_HOSTED_RUNNER_TOKEN }}\n        metal_auth_token: ${{ secrets.EQUINIX_API_TOKEN }}\n        metal_project_id: ${{ secrets.EQUINIX_PROJECT_ID }}\n        metro: da\n        plan: c3.small.x86\n        os: ubuntu_20_04\n        organization: sustainable-computing-io\n\n  test-mock-acpi:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Test Mock ACPI\n    needs: [initalize-workflow, create-runner]\n    continue-on-error: true\n    runs-on: self-hosted\n    outputs:\n      runner-name: ${{ runner.name }}\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.head_sha }}\n\n    - name: Configure SSH\n      if: ${{ success() }}\n      run: |\n        echo \"Configuring SSH for runner\"\n        sudo ssh-keygen -t rsa -b 4096 -f /root/.ssh/ansible_rsa -N ''\n        sudo cat ~/.ssh/ansible_rsa.pub >> ~/.ssh/authorized_keys\n        sudo echo \"StrictHostKeyChecking no\" >> ~/.ssh/config\n\n    - name: Install Dependencies\n      if: ${{ success() }}\n      run: |\n        echo \"Installing Ansible and Docker module\"\n        sudo apt install software-properties-common -y\n        sudo add-apt-repository --yes --update ppa:ansible/ansible\n        sudo apt install -y ansible python3-pip\n        sudo ansible-galaxy collection install community.docker\n\n    - name: Run playbook\n      id: run-playbook\n      if: ${{ success() }}\n      run: |\n        echo \"Setting up the infra\"\n        cd ${GITHUB_WORKSPACE}/ansible\n        ansible-playbook -vv -i inventory.yaml setup.yaml\n        echo \"Launching Mock ACPI compose and running validator\"\n        ansible-playbook -vv -i inventory.yaml mock_acpi_playbook.yaml -e \"pr_number=${{ github.event.issue.number }}\"\n\n  cleanup:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Cleanup\n    needs: [initalize-workflow, test-mock-acpi]\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      uses: sustainable-computing-io/metal-sweeper-action@main\n      with:\n        authToken: ${{ secrets.EQUINIX_API_TOKEN }}\n        projectID: ${{ secrets.EQUINIX_PROJECT_ID }}\n        runnerName: ${{ needs.test-mock-acpi.outputs.runner-name }}\n\n      # Marking the workflow as failed if the playbook fails\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.result == 'failure' }}\n      run: |\n        echo \"Playbook failed, marking workflow as failed\"\n        exit 1\n\n    - name: Set job status as ${{ job.status }}\n      uses: myrotvorets/set-commit-status-action@master\n      if: ${{ always() }}\n      with:\n        sha: ${{ needs.initalize-workflow.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: ${{ job.status }}\n\n```","llm_response":" ```yaml\nname: Mock ACPI\non:\n  issue_comment:\n    types: [created]\njobs:\n  inialize-workflow:\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    if: ${{ startsWith(github.event.comment.body, '/mock-acpi') }}\n    steps:\n      - name: Get PR branch\n        id: pr_branch\n        shell: bash\n        run: |\n          echo \"::set-output name=pr_branch::$(echo ${{ github.event.comment.body }} | sed 's/^\\/mock-acpi //g')\"\n      - name: Set job status as pending\n        uses: bjw-s/status-action@v0.1.0\n        with:\n          job_status: pending\n  create-runner:\n    name: Create self-hosted runner\n    needs: inialize-workflow\n    runs-on: ubuntu-latest\n    environment: self-hosted\n    steps:\n      - name: metal-runner-action\n        uses: bjw-s/metal-runner-action@v0.1.0\n        with:\n          token: ${{ secrets.METAL_PROJECT_TOKEN }}\n          project_id: ${{ secrets.METAL_PROJECT_ID }}\n  test-mock-acpi:\n    name: Test Mock ACPI\n    needs: create-runner\n    runs-on: self-hosted\n    environment: self-hosted\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Configure SSH\n        uses: superbrothers/ssh-agent@v0.2.0\n        with:\n          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}\n      - name: Install Dependencies\n        run: sudo apt-get update && sudo apt-get install -y qemu-system-x86\n      - name: Run playbook\n        id: run-playbook\n        run: sudo ansible-playbook -i 'localhost,' mock-acpi.yml\n  cleanup:\n    name: Cleanup\n    needs: test-mock-acpi\n    runs-on: self-hosted\n    environment: self-hosted\n    steps:\n      - name: delete runner\n        uses: superbrothers/metal-delete-runner@v0.2.0\n        with:\n          token: ${{ secrets.METAL_PROJECT_TOKEN }}\n          project_id: ${{ secrets.METAL_PROJECT_ID }}\n          runner_id: ${{ needs.create-runner.outputs.runner_id }}\n      - name: Mark workflow as failed if playbook failed\n        if: ${{ failure() }}\n        uses: bjw-s/status-action@v0.1.0\n        with:\n          job_status: failed\n      - name: Set job status as ${{ job.status }}\n        uses: bjw-s/status-action@v0.1.0\n        with:\n          job_status: ${{ job.status }}\n``` ","repository_id":69840533,"lint_valid":false,"lint_output":"[{\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/568fcb94-ce99-4b5a-b7de-364321a05842.yml\", \"line\": 14, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"\\\"github.event.comment.body\\\" is potentially untrusted. avoid using it directly in inline scripts. instead, pass it through an environment variable. see https://docs.github.com/en/actions/security-for-github-actions/security-guides/security-hardening-for-github-actions for more details\", \"filepath\": \"../../tmp/568fcb94-ce99-4b5a-b7de-364321a05842.yml\", \"line\": 14, \"column\": 60, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 60}, {\"message\": \"property \\\"create-runner\\\" is not defined in object type {test-mock-acpi: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/568fcb94-ce99-4b5a-b7de-364321a05842.yml\", \"line\": 59, \"column\": 26, \"kind\": \"expression\", \"snippet\": \"          runner_id: ${{ needs.create-runner.outputs.runner_id }}\\n                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 62}]","meteor_score":0.3829163568094573,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":1069,"stats":{"NumofTriggers":1,"Triggers":["issue_comment"],"NumofJobs":4,"NumofActions":6,"Actions":["actions/checkout","myrotvorets/set-commit-status-action","myrotvorets/set-commit-status-action","sustainable-computing-io/metal-runner-action","sustainable-computing-io/metal-sweeper-action","xt0rted/pull-request-comment-branch"],"Actions_details":[{"version":"v3","name":"xt0rted/pull-request-comment-branch"},{"version":"master","name":"myrotvorets/set-commit-status-action"},{"version":"main","name":"sustainable-computing-io/metal-runner-action"},{"version":"v4","name":"actions/checkout"},{"version":"main","name":"sustainable-computing-io/metal-sweeper-action"},{"version":"master","name":"myrotvorets/set-commit-status-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":3}}
{"id":9161,"level":3,"name":"mckinsey/vizro","file_name":"test-unit-vizro-mcp.yml","len":5,"prompt":"Generate a GitHub Workflow named `Unit tests for Vizro` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a branch named main. 2) The workflow would run whenever there is a pull_request event targeting: a branch named main. The workflow sets 2 environment variables to use: `PYTHONUNBUFFERED` is set to `1` and `FORCE_COLOR` is set to `1`. For all run steps in the workflow, default working directory is set to vizro-mcp. The workflow has one job. The 1st job is named `test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}` and its job id is `test-unit-vizro-core`. This job will run on ${{ matrix.config.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `config` has 5 values: {'python-version': '3.10', 'hatch-env': 'all.py3.10', 'os': 'ubuntu-latest'}, {'python-version': '3.11', 'hatch-env': 'all.py3.11', 'os': 'ubuntu-latest'}, {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'ubuntu-latest'}, {'python-version': '3.13', 'hatch-env': 'all.py3.13', 'os': 'ubuntu-latest'} and {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}. The variable `is_non_release_pr` has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}. If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix. The job `test-unit-vizro-core` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Set up Python ${{ matrix.config.python-version }}`. This step runs action `actions/setup-python` tagged as v5. The step defines an input parameter for the action: `python-version` is set to `${{ matrix.config.python-version }}`. The 3rd step is named `Install Hatch`. This step runs a script: `pip install hatch`. The 4th step is named `Show dependency tree`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:pip tree`. The 5th step is named `Run unit tests`. This step runs a script: `hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage`. /no-think","answer":"```yaml\nname: Unit tests for Vizro\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches:\n    - main\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ \n      matrix.config.label }}\n\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      fail-fast: false\n      matrix:\n        # This is not a nice way to define the matrix, but it's the only way that's possible so that we only run\n        # the job on Windows on merge to main rather than in every PR. See:\n        # https://stackoverflow.com/questions/66025220/paired-values-in-github-actions-matrix\n        # https://github.com/orgs/community/discussions/26253\n        # https://github.com/actions/runner/issues/1985\n        config:\n        - python-version: '3.10'\n          hatch-env: all.py3.10\n          os: ubuntu-latest\n        - python-version: '3.11'\n          hatch-env: all.py3.11\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: ubuntu-latest\n        - python-version: '3.13'\n          hatch-env: all.py3.13\n          os: ubuntu-latest\n        - python-version: '3.12'\n          hatch-env: all.py3.12\n          os: windows-latest\n          label: Windows\n        is_non_release_pr:\n        - ${{ github.event_name == 'pull_request' && \n          !startsWith(github.head_ref, 'release')}}\n        exclude:\n        - is_non_release_pr: true\n          config:\n            python-version: '3.12'\n            hatch-env: all.py3.12\n            os: windows-latest\n            label: Windows\n\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n\n    - name: Set up Python ${{ matrix.config.python-version }}\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.config.python-version }}\n\n    - name: Install Hatch\n      run: pip install hatch\n\n    - name: Show dependency tree\n      run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n    - name: Run unit tests\n      run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\n```","llm_response":"<think>Okay, let's tackle this GitHub Workflow YAML generation. The user wants a workflow named \"Unit tests for Vizro\" triggered by pushes to main and pull requests targeting main. First, I need to set up the triggers correctly. The on section should have push with branches: [main] and pull_request with branches: [main].\n\nNext, environment variables. They specified PYTHONUNBUFFERED=1 and FORCE_COLOR=1. These should be under env at the workflow level so all jobs inherit them.\n\nThe default working directory is vizro-mcp. That goes under defaults: run: working-directory.\n\nNow the job. The job name is dynamic: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}. Job ID is test-unit-vizro-core. It runs on matrix.config.os. The matrix strategy has 5 config entries. Wait, the user listed 5 values for config. Let me check: four Ubuntu with Python 3.10-3.13, and one Windows with 3.12. But the fifth entry has a label 'Windows'. Also, there's a variable is_non_release_pr which is a boolean based on the event.\n\nWait, the matrix has a config variable with those 5 entries, and is_non_release_pr has one value. But the exclusion condition is when combinations match {'is_non_release_pr': True, config: {...Windows...}}. So we need to exclude that specific combination when it's a non-release PR.\n\nSo the matrix should include all the config entries, but exclude the Windows one if it's a non-release PR. The user says: \"If combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {...}}], exclude from matrix.\"\n\nSo the matrix will have the 5 config entries, and is_non_release_pr as a variable. But since is_non_release_pr is a single value (the expression), the matrix will generate combinations. Wait, the user says \"the variable is_non_release_pr has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}\". So it's a single value computed at runtime. But in the matrix, how does that work?\n\nWait, the matrix strategy in GitHub Actions can have include/exclude. The exclusion is when is_non_release_pr is true AND the config is the Windows one. So the exclude should target that specific config entry when is_non_release_pr is true.\n\nWait, the user says: \"combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {'python-version': '3.12', 'hatch-env': 'all.py3.12', 'os': 'windows-latest', 'label': 'Windows'}}], combinations should be excluded from the matrix.\"\n\nSo the matrix will generate all combinations of config and is_non_release_pr. But whenever the combination has is_non_release_pr: true and config matching that Windows entry, exclude it.\n\nBut how to represent this in YAML. The matrix strategy should have the config as the main array, and then is_non_release_pr as another variable? Wait, the user says the variable 'config' has 5 values, and 'is_non_release_pr' has one value. Wait, no: \"The variable config has 5 values: [...] and the variable is_non_release_pr has one value: [...]\". So the matrix is over config (5 entries) and is_non_release_pr (1 value), but the exclusion applies when both conditions are met.\n\nWait, but is_non_release_pr is a single value computed as a boolean. So for each config entry, is_non_release_pr is either true or false. But since it's a single value (the expression), it's the same for all matrix runs. Wait, no: the expression depends on the event. For a push event, github.event_name is 'push', so is_non_release_pr would be false. For a PR event, it's true only if the head_ref doesn't start with 'release'.\n\nBut the matrix is built at the time the workflow is triggered. So for each run (push or PR), the is_non_release_pr value is determined. However, the matrix is constructed based on the variables. The problem is that the exclusion depends on the value of is_non_release_pr.\n\nWait, the user's instruction says: \"combinations of variables partially match one of the objects [...] should be excluded\". So the matrix should include all config entries, but when is_non_release_pr is true, exclude the specific config entry (Windows 3.12).\n\nBut how to model this in GitHub Actions. The matrix can have an exclude section. So the matrix strategy would have the 5 config entries, and then an exclude for the Windows config when is_non_release_pr is true.\n\nWait, but in GitHub Actions, the exclude condition can reference the matrix variables. So the matrix would have:\n\nstrategy:\n  matrix:\n    config: [ ...5 entries... ]\n    is_non_release_pr: [ ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }} ]\n  exclude:\n    - config:\n        python-version: '3.12'\n        hatch-env: 'all.py3.12'\n        os: 'windows-latest'\n        label: 'Windows'\n      is_non_release_pr: true\n\nWait, but the user says \"combinations of variables partially match one of the objects [{'is_non_release_pr': True, 'config': {...}}]\". So the exclude should be when config matches that specific entry and is_non_release_pr is true.\n\nBut in the matrix, the config is an object, so the exclude would need to match the exact config object. However, the label is part of the config in the fifth entry. So the exclude entry should have the same config object.\n\nBut in the matrix, the config variable is an array of objects. So the exclude would specify the exact config object to exclude when is_non_release_pr is true.\n\nWait, but the is_non_release_pr is a separate variable in the matrix. Wait, the user says the variable 'config' has 5 values, and 'is_non_release_pr' has one value. So the matrix is the cross product of config (5) and is_non_release_pr (1), but since is_non_release_pr is a single value (the expression), it's actually 5 combinations where is_non_release_pr is either true or false depending on the event.\n\nWait, no. The is_non_release_pr is a single value computed once, not per matrix. Wait, the user says \"the variable is_non_release_pr has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}\". So it's a single boolean value for the entire workflow run. Therefore, it's not part of the matrix. Wait, but the user says \"the job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable config has 5 values [...] and the variable is_non_release_pr has one value [...]\".\n\nHmm, this is confusing. Maybe the is_non_release_pr is intended to be part of the matrix, but it's a single value (the expression). However, in GitHub Actions, matrix variables are static, but the expression would be evaluated at runtime. Wait, no. The matrix is defined at the time the workflow is triggered, so expressions in the matrix would be evaluated then.\n\nWait, the user says \"the variable is_non_release_pr has one value: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release')}}\". So it's a single value, which is a boolean. So the matrix would have 5 (config) * 1 (is_non_release_pr) = 5 combinations. But the exclusion is when is_non_release_pr is true and config is the Windows one.\n\nBut how to express that in the matrix. The matrix strategy can have an exclude section that removes specific combinations.\n\nSo the matrix config would include all 5 config entries, and then exclude the Windows one when is_non_release_pr is true.\n\nWait, but is_non_release_pr is part of the matrix variables. So the matrix would be:\n\nstrategy:\n  matrix:\n    config: [ ...5 entries... ]\n    is_non_release_pr: [ ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }} ]\n  exclude:\n    - config:\n        python-version: '3.12'\n        hatch-env: 'all.py3.12'\n        os: 'windows-latest'\n        label: 'Windows'\n      is_non_release_pr: true\n\nBut in GitHub Actions, the exclude conditions must exactly match the matrix variables. However, the is_non_release_pr here is a boolean, so when the expression evaluates to true, the exclude applies.\n\nWait, but the matrix variables are defined as:\n\nconfig: [list of 5 objects]\nis_non_release_pr: [expression that evaluates to a boolean]\n\nSo for each config entry, the is_non_release_pr is the same value (either true or false for the entire run). Therefore, if is_non_release_pr is true, then the exclude will remove the Windows config entry. If it's false, the exclude doesn't apply.\n\nYes, that makes sense. So the matrix will generate 5 jobs (one for each config), but if is_non_release_pr is true, then the Windows job is excluded.\n\nNow, constructing the YAML.\n\nFirst, the workflow name:\n\nname: Unit tests for Vizro\n\nTriggers:\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\nEnvironment variables:\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\nDefaults for run steps:\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\nJobs section:\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      matrix:\n        config:\n          - {python-version: '3.10', hatch-env: 'all.py3.10', os: 'ubuntu-latest'}\n          - {python-version: '3.11', hatch-env: 'all.py3.11', os: 'ubuntu-latest'}\n          - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'ubuntu-latest'}\n          - {python-version: '3.13', hatch-env: 'all.py3.13', os: 'ubuntu-latest'}\n          - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'windows-latest', label: 'Windows'}\n        is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\n      exclude:\n        - config:\n            python-version: '3.12'\n            hatch-env: 'all.py3.12'\n            os: 'windows-latest'\n            label: 'Windows'\n          is_non_release_pr: true\n\nWait, but in GitHub Actions, the exclude must match the exact values. However, the is_non_release_pr in the matrix is a single value (the expression), but in the exclude, we're setting it to true. Wait, the matrix's is_non_release_pr is a boolean, so when the expression evaluates to true, the exclude condition is met.\n\nBut how does GitHub Actions handle the exclude? The exclude section lists the combinations to exclude. So if the matrix has a row where config is the Windows entry and is_non_release_pr is true, then exclude it.\n\nYes. So the exclude entry is correct.\n\nNow, the steps:\n\n1. Checkout repository: uses actions/checkout@v4\n2. Set up Python: uses actions/setup-python@v5 with python-version from matrix\n3. Install Hatch: run pip install hatch\n4. Show dependency tree: run hatch run ...:pip tree\n5. Run unit tests: run hatch run ...:test-unit-coverage\n\nAll steps are in the job, under steps.\n\nAlso, note that the working directory is set to vizro-mcp via defaults, so all run steps will be in that directory.\n\nWait, the user said \"For all run steps in the workflow, default working directory is set to vizro-mcp.\" So the defaults: run: working-directory: vizro-mcp is correct.\n\nNow, check if the job name uses matrix.config.label. The fifth config entry has label: 'Windows', others don't. So for the Windows job, the name will include 'Windows', others will have an empty string for label? Wait, but in the other entries, label is not present. So when matrix.config.label is not defined, it would be null or empty. But the job name is \"test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\". For the first four entries, label is not set, so that part would be empty. But the user's example includes the label only for Windows.\n\nIn YAML, when a key is not present in a matrix entry, referencing it would result in an empty string or null. But GitHub Actions might handle it as empty. So the job name for non-Windows would be \"test-unit-vizro-mcp on Py3.10 \" (with a trailing space), but maybe it's better to have the label only when present. However, the user specified the job name exactly as given, so we have to include it as is.\n\nNow, putting it all together.\n\nWait, the user said the job id is test-unit-vizro-core, which is the key under jobs.\n\nLet me structure the YAML.\n\nCheck if the exclude is correctly formatted. In GitHub Actions, the exclude is a list of objects that match the matrix variables to exclude.\n\nYes.\n\nNow, the is_non_release_pr in the matrix: the user says it's a variable with one value, which is the expression. So in the matrix, it's defined as:\n\nis_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\n\nBut in YAML, this would be a string, but GitHub Actions will evaluate the expression. Wait, no. In the matrix, variables can be expressions. Wait, according to GitHub Actions documentation, you can use expressions in the matrix strategy. So the value of is_non_release_pr would be evaluated to true or false when the workflow is triggered.\n\nYes. So the matrix will have is_non_release_pr as a boolean value (true or false) for the entire run.\n\nTherefore, the exclude condition will work as intended.\n\nNow, the steps:\n\n- name: Checkout repository\n  uses: actions/checkout@v4\n\n- name: Set up Python ${{ matrix.config.python-version }}\n  uses: actions/setup-python@v5\n  with:\n    python-version: ${{ matrix.config.python-version }}\n\n- name: Install Hatch\n  run: pip install hatch\n\n- name: Show dependency tree\n  run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n- name: Run unit tests\n  run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n\nAll steps are under the job's steps.\n\nNow, check if all details are covered.\n\nThe workflow name is correct.\n\nTriggers: push to main, PR to main.\n\nEnv variables set.\n\nDefault working directory.\n\nJob name uses matrix variables.\n\nMatrix config entries correct.\n\nExclude condition correct.\n\nSteps correct.\n\nLooks good.\n</think>\n\n```yaml\nname: Unit tests for Vizro\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\nenv:\n  PYTHONUNBUFFERED: 1\n  FORCE_COLOR: 1\n\ndefaults:\n  run:\n    working-directory: vizro-mcp\n\njobs:\n  test-unit-vizro-core:\n    name: test-unit-vizro-mcp on Py${{ matrix.config.python-version }} ${{ matrix.config.label }}\n    runs-on: ${{ matrix.config.os }}\n    strategy:\n      matrix:\n        config:\n          - {python-version: '3.10', hatch-env: 'all.py3.10', os: 'ubuntu-latest'}\n          - {python-version: '3.11', hatch-env: 'all.py3.11', os: 'ubuntu-latest'}\n          - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'ubuntu-latest'}\n          - {python-version: '3.13', hatch-env: 'all.py3.13', os: 'ubuntu-latest'}\n          - {python-version: '3.12', hatch-env: 'all.py3.12', os: 'windows-latest', label: 'Windows'}\n        is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\n      exclude:\n        - config:\n            python-version: '3.12'\n            hatch-env: 'all.py3.12'\n            os: 'windows-latest'\n            label: 'Windows'\n          is_non_release_pr: true\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up Python ${{ matrix.config.python-version }}\n        uses: actions/setup-python@v5\n        with:\n          python-version: ${{ matrix.config.python-version }}\n\n      - name: Install Hatch\n        run: pip install hatch\n\n      - name: Show dependency tree\n        run: hatch run ${{ matrix.config.hatch-env }}:pip tree\n\n      - name: Run unit tests\n        run: hatch run ${{ matrix.config.hatch-env }}:test-unit-coverage\n```","repository_id":94586448,"lint_valid":false,"lint_output":"[{\"message\": \"type of expression at \\\"matrix row\\\" must be array but found type bool\", \"filepath\": \"../../tmp/d07275b5-ecea-49be-b89f-907cd0e058f3.yml\", \"line\": 29, \"column\": 28, \"kind\": \"expression\", \"snippet\": \"        is_non_release_pr: ${{ github.event_name == 'pull_request' && !startsWith(github.head_ref, 'release') }}\\n                           ^~~\", \"end_column\": 30}, {\"message\": \"unexpected key \\\"exclude\\\" for \\\"strategy\\\" section. expected one of \\\"fail-fast\\\", \\\"matrix\\\", \\\"max-parallel\\\"\", \"filepath\": \"../../tmp/d07275b5-ecea-49be-b89f-907cd0e058f3.yml\", \"line\": 30, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      exclude:\\n      ^~~~~~~~\", \"end_column\": 14}]","meteor_score":0.9225781384310743,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":574,"stats":{"NumofTriggers":2,"Triggers":["pull_request","push"],"NumofJobs":1,"NumofActions":2,"Actions":["actions/checkout","actions/setup-python"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":5,"CyclomaticComplexity":1}}
{"id":27677,"level":1,"name":"paddlepaddle/paddle","file_name":"docker.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow has 5 outputs: docker_cpu_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_cpu_image }}; docker_inference_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_inference_image }}; docker_coverage_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_coverage_image }}; docker_build_image-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_build_image }}; docker_distribute_file-it represents generate images for all ci usage and its value is ${{ jobs.build-docker-images.outputs.docker_distribute_image }}. The workflow has one job. The 1st job is named `build docker` and its job id is `build-docker-images`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n\n      docker_inference_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n\n      docker_coverage_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n\n      docker_build_image:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n\n      docker_distribute_file:\n        description: Generate images for all CI usage\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on:\n      group: Docker-build\n    outputs:\n      docker_cpu_image: ${{ steps.build-docker-images.outputs.docker_cpu_image \n        }}\n      docker_inference_image: ${{ \n        steps.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image: ${{ \n        steps.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image: ${{ \n        steps.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_image: ${{ \n        steps.build-docker-images.outputs.docker_distribute_image }}\n    steps:\n    - id: build-docker-images\n      name: build docker images\n      env:\n        PR_ID: ${{ github.event.pull_request.number }}\n        COMMIT_ID: ${{ github.event.pull_request.head.sha }}\n        docker_cpu_file: Dockerfile.cuda9_cudnn7_gcc48_py35_centos6\n        docker_inference_file: \n          Dockerfile.cuda11.2_cudnn8.1_trt8.4_gcc8.2_ubuntu18\n        docker_coverage_file: Dockerfile.cuda117_cudnn8_gcc82_ubuntu18_coverage\n        docker_build_file: Dockerfile.cuda11.2_cudnn8_gcc82_trt8\n        docker_distribute_file: Dockerfile.cuda123_cudnn9_gcc122_ubuntu20\n      run: |\n        set -x\n        wget -q --no-proxy https://paddle-github-action.bj.bcebos.com/PR/Paddle/${PR_ID}/${COMMIT_ID}/Paddle.tar.gz --no-check-certificate\n        tar xf Paddle.tar.gz --strip-components=1\n        rm Paddle.tar.gz\n        cd tools/dockerfile\n        bash ci_dockerfile.sh\n        cd ../..\n\n        # docker build images\n        declare -A docker_files=([\"docker_cpu\"]=\"$docker_cpu_file\" [\"docker_inference\"]=\"$docker_inference_file\" [\"docker_coverage\"]=\"$docker_coverage_file\" [\"docker_build\"]=\"$docker_build_file\" [\"docker_distribute\"]=\"$docker_distribute_file\")\n        for name in \"${!docker_files[@]}\"\n        do\n          md5_value=`md5sum tools/dockerfile/${docker_files[$name]} | awk '{print $1}'`\n          docker_image=\"ccr-2vdh3abv-pub.cnc.bj.baidubce.com/ci/paddle:${md5_value}\"\n          declare \"${name}_image=${docker_image}\"\n          echo \"${name}_image=${docker_image}\" >> $GITHUB_OUTPUT\n          set +e\n          docker pull $docker_image\n          if [ $? -eq 0 ];then\n            echo use docker cache\n          else\n            docker build -t $docker_image -f tools/dockerfile/${docker_files[$name]} .\n            docker push $docker_image\n            echo end docker build\n          fi\n          set -e\n        done\n\n        # clean workspace\n        cd ${{ github.workspace }}\n        rm -rf ./*\n\n```","llm_response":"```yaml\non:\n  workflow_call:\n    outputs:\n      docker_cpu_image:\n        description: 'Generate images for all CI usage'\n        value: ${{ jobs.build-docker-images.outputs.docker_cpu_image }}\n      docker_inference_image:\n        description: 'Generate images for all CI usage'\n        value: ${{ jobs.build-docker-images.outputs.docker_inference_image }}\n      docker_coverage_image:\n        description: 'Generate images for all CI usage'\n        value: ${{ jobs.build-docker-images.outputs.docker_coverage_image }}\n      docker_build_image:\n        description: 'Generate images for all CI usage'\n        value: ${{ jobs.build-docker-images.outputs.docker_build_image }}\n      docker_distribute_file:\n        description: 'Generate images for all CI usage'\n        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\n\n\njobs:\n  build-docker-images:\n    name: build docker\n    runs-on: ubuntu-latest\n    outputs:\n      docker_cpu_image: ${{ steps.docker_cpu_image.outputs.image }}\n      docker_inference_image: ${{ steps.docker_inference_image.outputs.image }}\n      docker_coverage_image: ${{ steps.docker_coverage_image.outputs.image }}\n      docker_build_image: ${{ steps.docker_build_image.outputs.image }}\n      docker_distribute_file: ${{ steps.docker_distribute_image.outputs.image }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Set up Docker buildx\n      uses: docker/setup-buildx-action@v15\n    - name: Login to DockerHub\n      uses: docker/login-action@v3\n      with:\n        username: ${{ secrets.DOCKERHUB_USERNAME }}\n        password: ${{ secrets.DOCKERHUB_TOKEN }}\n    - name: Extract metadata (tags, labels) for Docker\n      id: meta\n      uses: docker/metadata-action@v4\n      with:\n        images: 'openmmlab/medsim'\n    - name: Build and push Docker CPU image\n      id: docker_cpu_image\n      uses: docker/build-push-action@v6\n      with:\n        context: .\n        file: ./Dockerfile\n        push: true\n        platforms: 'linux/amd64,linux/arm64'\n        tags: ${{ steps.meta.outputs.tags }}\n        labels: ${{ steps.meta.outputs.labels }}\n    - name: Build and push Docker inference image\n      id: docker_inference_image\n      uses: docker/build-push-action@v6\n      with:\n        context: .\n        file: ./Dockerfile\n        push: true\n        platforms: 'linux/amd64,linux/arm64'\n        tags: ${{ steps.meta.outputs.tags }}-inference\n        labels: ${{ steps.meta.outputs.labels }}\n    - name: Build and push Docker coverage image\n      id: docker_coverage_image\n      uses: docker/build-push-action@v6\n      with:\n        context: .\n        file: ./Dockerfile\n        push: true\n        platforms: 'linux/amd64,linux/arm64'\n        tags: ${{ steps.meta.outputs.tags }}-coverage\n        labels: ${{ steps.meta.outputs.labels }}\n    - name: Build and push Docker build image\n      id: docker_build_image\n      uses: docker/build-push-action@v6\n      with:\n        context: .\n        file: ./Dockerfile\n        push: true\n        platforms: 'linux/amd64,linux/arm64'\n        tags: ${{ steps.meta.outputs.tags }}-build\n        labels: ${{ steps.meta.outputs.labels }}\n    - name: Build and push Docker distribute file image\n      id: docker_distribute_image\n      uses: docker/build-push-action@v6\n      with:\n        context: .\n        file: ./Dockerfile\n        push: true\n        platforms: 'linux/amd64,linux/arm64'\n        tags: ${{ steps.meta.outputs.tags }}-distribute\n        labels: ${{ steps.meta.outputs.labels }}\n\n```","repository_id":3993770,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"docker_distribute_image\\\" is not defined in object type {docker_build_image: string; docker_coverage_image: string; docker_cpu_image: string; docker_distribute_file: string; docker_inference_image: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 18, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        value: ${{ jobs.build-docker-images.outputs.docker_distribute_image }}\\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 75}, {\"message\": \"property \\\"image\\\" is not defined in object type {digest: string; imageid: string; metadata: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 26, \"column\": 29, \"kind\": \"expression\", \"snippet\": \"      docker_cpu_image: ${{ steps.docker_cpu_image.outputs.image }}\\n                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 64}, {\"message\": \"property \\\"image\\\" is not defined in object type {digest: string; imageid: string; metadata: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 27, \"column\": 35, \"kind\": \"expression\", \"snippet\": \"      docker_inference_image: ${{ steps.docker_inference_image.outputs.image }}\\n                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 76}, {\"message\": \"property \\\"image\\\" is not defined in object type {digest: string; imageid: string; metadata: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 28, \"column\": 34, \"kind\": \"expression\", \"snippet\": \"      docker_coverage_image: ${{ steps.docker_coverage_image.outputs.image }}\\n                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 74}, {\"message\": \"property \\\"image\\\" is not defined in object type {digest: string; imageid: string; metadata: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 29, \"column\": 31, \"kind\": \"expression\", \"snippet\": \"      docker_build_image: ${{ steps.docker_build_image.outputs.image }}\\n                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 68}, {\"message\": \"property \\\"image\\\" is not defined in object type {digest: string; imageid: string; metadata: string}\", \"filepath\": \"../../tmp/46c8cabe-4825-41ff-9008-98150c1e22b9.yml\", \"line\": 30, \"column\": 35, \"kind\": \"expression\", \"snippet\": \"      docker_distribute_file: ${{ steps.docker_distribute_image.outputs.image }}\\n                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 77}]","meteor_score":0.40434305815070093,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":806,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":1,"CyclomaticComplexity":1}}
{"id":46171,"level":1,"name":"wger-project/flutter","file_name":"make-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build release artefacts` for a GitHub repository whose primary programming language is Dart. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives an input: version-this input represents version to tag and release (x.y.z), it must be supplied and the data type is string. The workflow has 9 jobs. The 1st job is named `CI` and its job id is `ci`. The 2nd job is named `Prepare` and its job id is `determine_version`. The 3rd job is named `Linux` and its job id is `build_linux`. The 4th job is named `Android` and its job id is `build_android`. The 5th job is named `Apple` and its job id is `build_apple`. The 6th job is named `Microsoft` and its job id is `build_windows`. The 7th job is named `Upload to Play Store` and its job id is `upload_play_store`. The 8th job is named `Make Github Release` and its job id is `make_gh_release`. The 9th job is named `Upload flathub manifest` and its job id is `generate_flathub_manifest`. /no-think","answer":"```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n\n  determine_version:\n    needs: ci\n    name: Prepare\n    uses: ./.github/workflows/bump-version.yml\n    with:\n      app_version: ${{ github.event.inputs.version }}\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    uses: ./.github/workflows/build-linux.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs: determine_version\n    uses: ./.github/workflows/build-android.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n    secrets:\n      DECRYPTKEY_PLAYSTORE_SIGNING_KEY: ${{ \n        secrets.DECRYPTKEY_PLAYSTORE_SIGNING_KEY }}\n      DECRYPTKEY_PROPERTIES: ${{ secrets.DECRYPTKEY_PROPERTIES }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    uses: ./.github/workflows/build-apple.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    uses: ./.github/workflows/build-windows.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    runs-on: ubuntu-latest\n    needs:\n    - build_android\n    - build_linux\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Download builds\n      uses: actions/download-artifact@v4\n      with:\n        path: /tmp/\n\n    - name: Setup Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.4\n\n    - name: Decrypt config files\n      run: |\n        cd ./fastlane/metadata/envfiles\n        chmod +x ./decrypt_secrets.sh\n        ./decrypt_secrets.sh\n      shell: bash\n      env:\n        DECRYPTKEY_PLAYSTORE: ${{ secrets.DECRYPTKEY_PLAYSTORE }}\n\n    - name: Upload build to Play Store\n      run: |\n        mkdir -p ./build/app/outputs/bundle/release/\n        cp /tmp/builds-aab/app-release.aab ./build/app/outputs/bundle/release/app-release.aab\n        bundle install\n        bundle exec fastlane android production\n\n  #\n  # This is currently commented out since the iOS upload are currently being handled\n  # by the fastlane script in the ios folder. We use the account of pthaler for this\n  # and he runs the script manually.\n  #\n\n  #  upload_app_store:\n  #    name: Upload to App Store (placeholder)\n  #    runs-on: ubuntu-latest\n  #    needs:\n  #      - build_android\n  #      - build_apple\n  #    steps:\n  #      - name: Checkout application\n  #        uses: actions/checkout@v4\n  #        with:\n  #          ref: feature/build-process\n  #        #          ref: ${{ github.event.inputs.version }}\n  #\n  #      - name: Common flutter setup\n  #        uses: ./.github/actions/flutter-common\n  #\n  #      - name: Download builds\n  #        uses: actions/download-artifact@v4\n  #        with:\n  #          path: /tmp/\n  #\n  #      - name: Upload build to App Store\n  #        run: |\n  #          # bundle exec fastlane todo\n\n  make_gh_release:\n    name: Make Github Release\n    runs-on: ubuntu-latest\n    needs:\n    - upload_play_store\n    - build_linux\n    - build_windows\n    - build_apple\n\n    steps:\n    - name: Download builds\n      uses: actions/download-artifact@v4\n\n    - name: Make Github release\n      uses: softprops/action-gh-release@v2\n      with:\n        tag_name: ${{ inputs.version }}\n        files: |\n          builds-aab/app-release.aab\n          builds-apk/app-release.apk\n          builds-linux/wger-linux-x86_64.tar.gz\n          builds-linux/wger-linux-x86_64.sha256\n          builds-ios/Runner.app\n          builds-macos/wger.app\n          builds-windows/wger.exe\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    name: Upload flathub manifest\n    needs:\n    - make_gh_release\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Common flutter setup\n      uses: ./.github/actions/flutter-common\n\n    - name: Generate manifest\n      run: |\n        cd flatpak/scripts\n        dart pub get\n        dart manifest_generator.dart --meta ../flatpak_meta.json --github\n        mkdir ../../flathub\n        cp flatpak_generator_exports/de.wger.flutter.json ../../flathub\n        cp flatpak_generator_exports/flathub.json ../../flathub\n\n    - name: Push updated config to flathub repository\n      uses: cpina/github-action-push-to-another-repository@main\n      env:\n        SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}\n      with:\n        source-directory: flathub\n        destination-github-username: wger-project\n        destination-repository-name: de.wger.flutter\n        user-email: github-actions@github.com\n        target-branch: release-${{ github.event.inputs.version }}\n        create-target-branch-if-needed: true\n        commit-message: Update to ${{ github.event.inputs.version }}\n\n\n```","llm_response":"```yaml\nname: Build release artefacts\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: 'Version to tag and release (x.y.z)'\n        required: true\n        type: string\n\njobs:\n  ci:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Run tests\n        run: dart test\n\n  determine_version:\n    runs-on: ubuntu-latest\n    needs: ci\n    outputs:\n      version: ${{ steps.set_version.outputs.version }}\n    steps:\n      - name: Set version\n        id: set_version\n        run: echo \"::set-output name=version::${{ github.event.inputs.version }}\"\n\n  build_linux:\n    runs-on: ubuntu-latest\n    needs: determine_version\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Build Linux\n        run: dart pub get && dart run build_runner build --release\n\n  build_android:\n    runs-on: ubuntu-latest\n    needs: determine_version\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Build Android\n        run: dart pub get && dart run build_runner build --release\n\n  build_apple:\n    runs-on: macos-latest\n    needs: determine_version\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Build Apple\n        run: dart pub get && dart run build_runner build --release\n\n  build_windows:\n    runs-on: windows-latest\n    needs: determine_version\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Build Windows\n        run: dart pub get && dart run build_runner build --release\n\n  upload_play_store:\n    runs-on: ubuntu-latest\n    needs: build_android\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Upload to Play Store\n        run: dart pub get && dart run build_runner build --release\n\n  make_gh_release:\n    runs-on: ubuntu-latest\n    needs: build_linux, build_android, build_apple, build_windows, upload_play_store\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Make GitHub Release\n        run: dart pub get && dart run build_runner build --release\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    needs: build_linux, build_android, build_apple, build_windows, upload_play_store\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Set up Dart\n        uses: dart-lang/setup-dart@v3\n        with:\n          dart-version: 'latest'\n      - name: Generate Flathub Manifest\n        run: dart pub get && dart run build_runner build --release\n```","repository_id":69029763,"lint_valid":false,"lint_output":"[{\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/4618dd09-f304-4dbb-877f-e00ad686115f.yml\", \"line\": 32, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: echo \\\"::set-output name=version::${{ github.event.inputs.version }}\\\"\\n             ^~~~\", \"end_column\": 17}, {\"message\": \"job \\\"make_gh_release\\\" needs job \\\"build_linux, build_android, build_apple, build_windows, upload_play_store\\\" which does not exist in this workflow\", \"filepath\": \"../../tmp/4618dd09-f304-4dbb-877f-e00ad686115f.yml\", \"line\": 99, \"column\": 3, \"kind\": \"job-needs\", \"snippet\": \"  make_gh_release:\\n  ^~~~~~~~~~~~~~~~\", \"end_column\": 18}, {\"message\": \"invalid job ID \\\"build_linux, build_android, build_apple, build_windows, upload_play_store\\\". job ID must start with a letter or _ and contain only alphanumeric characters, -, or _\", \"filepath\": \"../../tmp/4618dd09-f304-4dbb-877f-e00ad686115f.yml\", \"line\": 101, \"column\": 12, \"kind\": \"id\", \"snippet\": \"    needs: build_linux, build_android, build_apple, build_windows, upload_play_store\\n           ^~~~~~~~~~~~\", \"end_column\": 23}, {\"message\": \"job \\\"generate_flathub_manifest\\\" needs job \\\"build_linux, build_android, build_apple, build_windows, upload_play_store\\\" which does not exist in this workflow\", \"filepath\": \"../../tmp/4618dd09-f304-4dbb-877f-e00ad686115f.yml\", \"line\": 112, \"column\": 3, \"kind\": \"job-needs\", \"snippet\": \"  generate_flathub_manifest:\\n  ^~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 28}, {\"message\": \"invalid job ID \\\"build_linux, build_android, build_apple, build_windows, upload_play_store\\\". job ID must start with a letter or _ and contain only alphanumeric characters, -, or _\", \"filepath\": \"../../tmp/4618dd09-f304-4dbb-877f-e00ad686115f.yml\", \"line\": 114, \"column\": 12, \"kind\": \"id\", \"snippet\": \"    needs: build_linux, build_android, build_apple, build_windows, upload_play_store\\n           ^~~~~~~~~~~~\", \"end_column\": 23}]","meteor_score":0.3504884048062491,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1270,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":9,"NumofActions":8,"Actions":["./.github/actions/flutter-common","actions/checkout","actions/checkout","actions/download-artifact","actions/download-artifact","cpina/github-action-push-to-another-repository","ruby/setup-ruby","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ruby/setup-ruby"},{"version":"v4","name":"actions/download-artifact"},{"version":"v2","name":"softprops/action-gh-release"},{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/flutter-common"},{"version":"main","name":"cpina/github-action-push-to-another-repository"}],"NumofReusableWfs":6,"ReusableWfs":["./.github/workflows/build-android.yml","./.github/workflows/build-apple.yml","./.github/workflows/build-linux.yml","./.github/workflows/build-windows.yml","./.github/workflows/bump-version.yml","./.github/workflows/ci.yml"],"NumofSteps":11,"CyclomaticComplexity":5}}
{"id":65428,"level":2,"name":"elementsproject/lightning","file_name":"release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Release ðŸš€` for a GitHub repository whose primary programming language is C. This workflow will be triggered by multiple events: 1) The workflow would run whenever there is a push event to: a tag whose name matches v[0-9]+.[0-9]+, a tag whose name matches v[0-9]+.[0-9]+.[0-9]+ or a tag whose name matches v[0-9]+.[0-9]+[0-9a-z]+. 2) someone manually triggers the workflow. This workflow receives 2 inputs: version-this input represents release version and it must be supplied; create_release-this input represents create a draft release, its default value is False, the data type is choice and it has options including True and False. The workflow has 4 jobs. The 1st job is named `Check` and its job id is `check`. The job `check` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Determine version`. The 3rd step is named `Validate release`. The 4th step is named `Catpure version output` and its id is `capture`. The 2nd job is named `Releases` and its job id is `releases`. The job `releases` has 5 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Prepare base environment`. The 3rd step is named `Build environment setup`. The 4th step is named `Build release`. The 5th step is named `Upload target artifacts`. The 3rd job is named `Construct release artifact` and its job id is `artifact`. The job `artifact` has one step. The 1st step is named `Merge artifacts`. The 4th job is named `Sign and prepare release draft` and its job id is `release`. The job `release` has 8 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download artifact`. The 3rd step is named `Import GPG keys` and its id is `gpg`. The 4th step is named `Set default GPG key`. The 5th step is named `Sign release`. The 6th step is named `Upload signed artifact`. The 7th step is named `Determine release data` and its id is `release_data`. The 8th step is named `Prepare release draft`. /no-think","answer":"```yaml\n# https://docs.corelightning.org/docs/release-checklist\nname: Release ðŸš€\non:\n  push:\n    tags:\n    - v[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+.[0-9]+\n    - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Release version\n        required: true\n      create_release:\n        description: Create a draft release\n        default: no\n        type: choice\n        options:\n        - yes\n        - no\n\njobs:\n  check:\n    name: Check\n    outputs:\n      version: ${{ steps.capture.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n        fetch-depth: 0\n        fetch-tags: true\n\n    - name: Determine version\n      run: |\n        if [[ \"${{ github.event.inputs.version }}\" != \"\" ]]; then\n          VERSION=\"${{ github.event.inputs.version }}\"\n        elif [ \"${{ github.ref_type }}\" == \"tag\" ]; then\n          VERSION=\"${{ github.ref_name }}\"\n        else\n          echo \"No release version provided and no tag found.\"\n          exit 1\n        fi\n        echo \"VERSION=$VERSION\" >> \"$GITHUB_ENV\"\n        echo \"Determined version: $VERSION\"\n\n    - name: Validate release\n      run: tools/check-release.sh --version=${VERSION}\n\n    - name: Catpure version output\n      id: capture\n      run: echo \"version=${VERSION}\" >> \"$GITHUB_OUTPUT\"\n\n  releases:\n    name: Releases\n    needs: check\n    runs-on: ubuntu-24.04\n    strategy:\n      fail-fast: false    # Let each build finish.\n      matrix:\n        target:\n        - bin-Fedora\n        - bin-Ubuntu-focal\n        - bin-Ubuntu-jammy\n        - bin-Ubuntu-noble\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n      # tools/build-release.sh requires lowdown\n    - name: Prepare base environment\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n\n    - name: Build environment setup\n      run: |\n        distribution=$(echo ${{ matrix.target }} | cut -d'-' -f3)\n        echo \"Building base image for ${distribution}\"\n        sudo docker run --rm -v $(pwd):/build ubuntu:${distribution} bash -c \"\\\n            apt-get update && \\\n            apt-get install -y debootstrap && \\\n            debootstrap ${distribution} /build/${distribution}\"\n        sudo tar -C ${distribution} -c . | docker import - ${distribution}\n\n        # Build Docker image\n        docker build -t cl-repro-${distribution} - < contrib/reprobuild/Dockerfile.${distribution}\n      if: contains(matrix.target, 'Ubuntu')\n\n    - name: Build release\n      run: tools/build-release.sh ${{ matrix.target }}\n\n    - name: Upload target artifacts\n      uses: actions/upload-artifact@v4\n      with:\n        path: release/\n        name: ${{ matrix.target }}\n        if-no-files-found: error\n\n  artifact:\n    name: Construct release artifact\n    needs:\n    - check\n    - releases\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Merge artifacts\n      uses: actions/upload-artifact/merge@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        pattern: bin-*\n        delete-merged: true\n\n  release:\n    name: Sign and prepare release draft\n    needs:\n    - check\n    - artifact\n    env:\n      version: ${{ needs.check.outputs.version }}\n    runs-on: ubuntu-24.04\n    steps:\n    - name: Git checkout\n      uses: actions/checkout@v4\n      with:\n        fetch-tags: true\n\n    - name: Download artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        path: release/\n\n    - name: Import GPG keys\n      id: gpg\n      uses: crazy-max/ghaction-import-gpg@v6\n      with:\n        gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}\n        passphrase: ${{ secrets.GPG_PASSPHRASE }}\n        trust_level: 5\n\n    - name: Set default GPG key\n      run: echo \"default-key ${{ steps.gpg.outputs.keyid }}\" >> \n        ~/.gnupg/gpg.conf\n\n    - name: Sign release\n      run: |\n        sudo apt-get install -y lowdown\n        ./configure\n        tools/build-release.sh --without-zip sign\n        mv release/SHA256SUMS.asc${{ steps.gpg.outputs.keyid  }} release/SHA256SUMS.asc\n\n    - name: Upload signed artifact\n      uses: actions/upload-artifact@v4\n      with:\n        name: c-lightning-${{ env.version }}\n        overwrite: true\n        path: release/\n\n    - name: Determine release data\n      id: release_data\n      run: |\n        VERSION=${{ env.version }}\n        CHANGELOG_VERSION=${VERSION#v}\n        echo \"CHANGELOG_VERSION=$CHANGELOG_VERSION\"\n        echo \"changelog_version=$CHANGELOG_VERSION\" >> \"$GITHUB_OUTPUT\"\n\n        CHANGELOG_TITLE=$(grep \"## \\[${CHANGELOG_VERSION}\\]\" CHANGELOG.md)\n        echo \"CHANGELOG_TITLE=$CHANGELOG_TITLE\"\n        echo \"changelog_title=$CHANGELOG_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n        RELEASE_TITLE=$(echo $CHANGELOG_TITLE | cut -d'\"' -f2)\n        echo \"RELEASE_TITLE=$RELEASE_TITLE\"\n        echo \"release_title=$RELEASE_TITLE\" >> \"$GITHUB_OUTPUT\"\n\n    - name: Prepare release draft\n      if: github.event_name == 'push' || (github.event_name == \n        'workflow_dispatch' && github.event.inputs.create_release == 'yes')\n      uses: softprops/action-gh-release@v2\n      with:\n        name: ${{ env.version }} ${{ steps.release_data.outputs.release_title }}\n        tag_name: ${{ env.version }}\n        draft: true\n        prerelease: contains(env.version, \"-rc\")\n        files: release/*\n        fail_on_unmatched_files: true\n\n```","llm_response":"```yaml\nname: Release ðŸš€\n\non:\n  push:\n    tags:\n      - v[0-9]+.[0-9]+\n      - v[0-9]+.[0-9]+.[0-9]+\n      - v[0-9]+.[0-9]+[0-9a-z]+\n  workflow_dispatch:\n\ninputs:\n  version:\n    description: 'Release version'\n    required: true\n    type: string\n  create_release:\n    description: 'Create a draft release'\n    required: false\n    default: 'False'\n    type: choice\n    options:\n      - True\n      - False\n\njobs:\n  check:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Determine version\n        id: determine_version\n        run: |\n          echo \"version: ${{ inputs.version }}\" >> $GITHUB_ENV\n      - name: Validate release\n        if: ${{ inputs.create_release == 'True' }}\n        run: |\n          echo \"Validating release...\"\n          # Add validation logic here\n      - name: Capture version output\n        id: capture\n        run: |\n          echo \"Version captured: ${{ env.version }}\" >> $GITHUB_ENV\n\n  releases:\n    runs-on: ubuntu-latest\n    needs: check\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Prepare base environment\n        run: |\n          echo \"Preparing base environment...\"\n          # Add base environment setup logic here\n      - name: Build environment setup\n        run: |\n          echo \"Building environment setup...\"\n          # Add environment setup logic here\n      - name: Build release\n        run: |\n          echo \"Building release...\"\n          # Add build logic here\n      - name: Upload target artifacts\n        run: |\n          echo \"Uploading target artifacts...\"\n          # Add artifact upload logic here\n\n  artifact:\n    runs-on: ubuntu-latest\n    needs: check\n    steps:\n      - name: Merge artifacts\n        run: |\n          echo \"Merging artifacts...\"\n          # Add artifact merging logic here\n\n  release:\n    runs-on: ubuntu-latest\n    needs: check\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Download artifact\n        run: |\n          echo \"Downloading artifact...\"\n          # Add artifact download logic here\n      - name: Import GPG keys\n        id: gpg\n        run: |\n          echo \"Importing GPG keys...\"\n          # Add GPG key import logic here\n      - name: Set default GPG key\n        run: |\n          echo \"Setting default GPG key...\"\n          # Add default GPG key setting logic here\n      - name: Sign release\n        run: |\n          echo \"Signing release...\"\n          # Add signing logic here\n      - name: Upload signed artifact\n        run: |\n          echo \"Uploading signed artifact...\"\n          # Add signed artifact upload logic here\n      - name: Determine release data\n        id: release_data\n        run: |\n          echo \"Determining release data...\"\n          # Add release data determination logic here\n      - name: Prepare release draft\n        run: |\n          echo \"Preparing release draft...\"\n          # Add release draft preparation logic here\n```","repository_id":3976044,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"inputs\\\" for \\\"workflow\\\" section. expected one of \\\"concurrency\\\", \\\"defaults\\\", \\\"env\\\", \\\"jobs\\\", \\\"name\\\", \\\"on\\\", \\\"permissions\\\", \\\"run-name\\\"\", \"filepath\": \"../../tmp/86be0915-b993-4389-a38e-bda58c2d4e29.yml\", \"line\": 11, \"column\": 1, \"kind\": \"syntax-check\", \"snippet\": \"inputs:\\n^~~~~~~\", \"end_column\": 7}, {\"message\": \"property \\\"version\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/86be0915-b993-4389-a38e-bda58c2d4e29.yml\", \"line\": 33, \"column\": 33, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 33}, {\"message\": \"property \\\"create_release\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/86be0915-b993-4389-a38e-bda58c2d4e29.yml\", \"line\": 36, \"column\": 17, \"kind\": \"expression\", \"snippet\": \"        if: ${{ inputs.create_release == 'True' }}\\n                ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 37}]","meteor_score":0.24065458636944417,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1416,"stats":{"NumofTriggers":2,"Triggers":["push","workflow_dispatch"],"NumofJobs":4,"NumofActions":9,"Actions":["actions/checkout","actions/checkout","actions/checkout","actions/download-artifact","actions/upload-artifact","actions/upload-artifact","actions/upload-artifact/merge","crazy-max/ghaction-import-gpg","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact/merge"},{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v6","name":"crazy-max/ghaction-import-gpg"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v2","name":"softprops/action-gh-release"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":18,"CyclomaticComplexity":3}}
{"id":46555,"level":2,"name":"sustainable-computing-io/kepler","file_name":"mock_acpi.yml","len":5,"prompt":"Generate a GitHub Workflow named `Mock ACPI` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: a comment on an issue or pull request is created. The workflow has 4 jobs. The 1st job is named `Initialize workflow` and its job id is `initalize-workflow`. The job `initalize-workflow` has 2 steps. The 1st step is named `Get PR branch` and its id is `pr_branch`. The 2nd step is named `Set job status as pending`. The 2nd job is named `Create self-hosted runner` and its job id is `create-runner`. The job `create-runner` has one step. The 1st step is named `metal-runner-action`. The 3rd job is named `Test Mock ACPI` and its job id is `test-mock-acpi`. The job `test-mock-acpi` has 4 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Configure SSH`. The 3rd step is named `Install Dependencies`. The 4th step is named `Run playbook` and its id is `run-playbook`. The 4th job is named `Cleanup` and its job id is `cleanup`. The job `cleanup` has 3 steps. The 1st step is named `delete runner`. The 2nd step is named `Mark workflow as failed if playbook failed`. The 3rd step is named `Set job status as ${{ job.status }}`. /no-think","answer":"```yaml\n# This workflow will run mock-acpi compose on self-hosted equinix runners and run validator tool\nname: Mock ACPI\n\non: # yamllint disable-line rule:truthy\n  issue_comment:\n    types: [created]\n\njobs:\n  initalize-workflow:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Initialize workflow\n    runs-on: ubuntu-latest\n    outputs:\n      head_sha: ${{ steps.pr_branch.outputs.head_sha }}\n    steps:\n      # Since `issue_comment` event runs on the default branch,\n      # we need to get the branch of the pull request\n    - name: Get PR branch\n      id: pr_branch\n      uses: xt0rted/pull-request-comment-branch@v3\n      # Since `issue_comment` event workflow will not appear on the\n      # pull request page, we need to set the status of the job\n      # in order to attach it to the pull request itself\n    - name: Set job status as pending\n      if: ${{ success() }}\n      uses: myrotvorets/set-commit-status-action@master\n      with:\n        sha: ${{ steps.pr_branch.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: pending\n\n  create-runner:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Create self-hosted runner\n    needs: initalize-workflow\n    runs-on: ubuntu-latest\n    steps:\n    - name: metal-runner-action\n      uses: sustainable-computing-io/metal-runner-action@main\n      with:\n        github_token: ${{ secrets.GH_SELF_HOSTED_RUNNER_TOKEN }}\n        metal_auth_token: ${{ secrets.EQUINIX_API_TOKEN }}\n        metal_project_id: ${{ secrets.EQUINIX_PROJECT_ID }}\n        metro: da\n        plan: c3.small.x86\n        os: ubuntu_20_04\n        organization: sustainable-computing-io\n\n  test-mock-acpi:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Test Mock ACPI\n    needs: [initalize-workflow, create-runner]\n    continue-on-error: true\n    runs-on: self-hosted\n    outputs:\n      runner-name: ${{ runner.name }}\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ needs.initalize-workflow.outputs.head_sha }}\n\n    - name: Configure SSH\n      if: ${{ success() }}\n      run: |\n        echo \"Configuring SSH for runner\"\n        sudo ssh-keygen -t rsa -b 4096 -f /root/.ssh/ansible_rsa -N ''\n        sudo cat ~/.ssh/ansible_rsa.pub >> ~/.ssh/authorized_keys\n        sudo echo \"StrictHostKeyChecking no\" >> ~/.ssh/config\n\n    - name: Install Dependencies\n      if: ${{ success() }}\n      run: |\n        echo \"Installing Ansible and Docker module\"\n        sudo apt install software-properties-common -y\n        sudo add-apt-repository --yes --update ppa:ansible/ansible\n        sudo apt install -y ansible python3-pip\n        sudo ansible-galaxy collection install community.docker\n\n    - name: Run playbook\n      id: run-playbook\n      if: ${{ success() }}\n      run: |\n        echo \"Setting up the infra\"\n        cd ${GITHUB_WORKSPACE}/ansible\n        ansible-playbook -vv -i inventory.yaml setup.yaml\n        echo \"Launching Mock ACPI compose and running validator\"\n        ansible-playbook -vv -i inventory.yaml mock_acpi_playbook.yaml -e \"pr_number=${{ github.event.issue.number }}\"\n\n  cleanup:\n    if: github.event.issue.pull_request && github.event.comment.body == \n      '/test-acpi'\n    name: Cleanup\n    needs: [initalize-workflow, test-mock-acpi]\n    runs-on: ubuntu-latest\n    steps:\n    - name: delete runner\n      if: ${{ always() }}\n      uses: sustainable-computing-io/metal-sweeper-action@main\n      with:\n        authToken: ${{ secrets.EQUINIX_API_TOKEN }}\n        projectID: ${{ secrets.EQUINIX_PROJECT_ID }}\n        runnerName: ${{ needs.test-mock-acpi.outputs.runner-name }}\n\n      # Marking the workflow as failed if the playbook fails\n    - name: Mark workflow as failed if playbook failed\n      if: ${{ needs.test-mock-acpi.result == 'failure' }}\n      run: |\n        echo \"Playbook failed, marking workflow as failed\"\n        exit 1\n\n    - name: Set job status as ${{ job.status }}\n      uses: myrotvorets/set-commit-status-action@master\n      if: ${{ always() }}\n      with:\n        sha: ${{ needs.initalize-workflow.outputs.head_sha }}\n        token: ${{ secrets.GITHUB_TOKEN }}\n        status: ${{ job.status }}\n\n```","llm_response":"```yaml\nname: Mock ACPI\n\non:\n  issue_comment:\n    types: [created]\n\njobs:\n  initialize-workflow:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Get PR branch\n        id: pr_branch\n        run: echo \"PR branch is ${{ github.event.issue.pull_request.head.ref }}\"\n      - name: Set job status as pending\n        run: echo \"::set-output name=status::pending\"\n\n  create-runner:\n    runs-on: ubuntu-latest\n    steps:\n      - name: metal-runner-action\n        uses: metal3-io/metal3-dev-env/actions@v1\n\n  test-mock-acpi:\n    runs-on: ubuntu-latest\n    needs: [initialize-workflow, create-runner]\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Configure SSH\n        uses: appleboy/ssh-action@v0.1.8\n        with:\n          host: <metal3-dev-env-host>\n          key: ${{ secrets.METAL3_DEV_ENV_SSH_KEY }}\n          username: <metal3-dev-env-username>\n      - name: Install Dependencies\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y ansible\n      - name: Run playbook\n        id: run-playbook\n        run: ansible-playbook playbook.yml\n\n  cleanup:\n    runs-on: ubuntu-latest\n    needs: [test-mock-acpi]\n    steps:\n      - name: delete runner\n        run: |\n          echo \"Deleting runner...\"\n          # Add command to delete the runner\n      - name: Mark workflow as failed if playbook failed\n        if: ${{ failure() }}\n        run: |\n          echo \"::set-output name=status::failed\"\n      - name: Set job status as ${{ job.status }}\n        run: |\n          echo \"::set-output name=status::${{ job.status }}\"\n```","repository_id":69840533,"lint_valid":false,"lint_output":"[{\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/c0d12266-2674-47e3-a366-05ca61e7a84b.yml\", \"line\": 15, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: echo \\\"::set-output name=status::pending\\\"\\n             ^~~~\", \"end_column\": 17}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/c0d12266-2674-47e3-a366-05ca61e7a84b.yml\", \"line\": 53, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/c0d12266-2674-47e3-a366-05ca61e7a84b.yml\", \"line\": 56, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}]","meteor_score":0.29345316533018184,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1069,"stats":{"NumofTriggers":1,"Triggers":["issue_comment"],"NumofJobs":4,"NumofActions":6,"Actions":["actions/checkout","myrotvorets/set-commit-status-action","myrotvorets/set-commit-status-action","sustainable-computing-io/metal-runner-action","sustainable-computing-io/metal-sweeper-action","xt0rted/pull-request-comment-branch"],"Actions_details":[{"version":"v3","name":"xt0rted/pull-request-comment-branch"},{"version":"master","name":"myrotvorets/set-commit-status-action"},{"version":"main","name":"sustainable-computing-io/metal-runner-action"},{"version":"v4","name":"actions/checkout"},{"version":"main","name":"sustainable-computing-io/metal-sweeper-action"},{"version":"master","name":"myrotvorets/set-commit-status-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":10,"CyclomaticComplexity":3}}
{"id":62474,"level":1,"name":"PHPCSStandards/PHP_CodeSniffer","file_name":"verify-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Verify release` for a GitHub repository whose primary programming language is PHP. This workflow will be triggered by multiple events: 1) a release, pre-release, or draft of a release is published. 2) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 3) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/verify-release.yml), the workflow runs. 4) someone manually triggers the workflow. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has 2 jobs. The 1st job is named `${{ matrix.download_flavour }}: ${{ matrix.pharfile }}` and its job id is `verify-available-downloads`. The 2nd job is named `PHIVE: ${{ matrix.pharfile }}` and its job id is `verify-phive`. /no-think","answer":"```yaml\nname: Verify release\n\non:\n  # Run whenever a release is published.\n  release:\n    types: [published]\n  # And whenever this workflow is updated.\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  # Allow manually triggering the workflow.\n  workflow_dispatch:\n\n# Cancels all previous workflow runs for the same branch that have not yet completed.\nconcurrency:\n  # The concurrency group contains the workflow name and the branch name.\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  ##################################################################################\n  # Verify the release is available in all the right places and works as expected. #\n  ##################################################################################\n  verify-available-downloads:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour:\n        - Release assets\n        - Unversioned web\n        - Versioned web\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Set source URL and file name\n      id: source\n      shell: bash\n      run: |\n        if [[ \"${{ matrix.download_flavour }}\" == \"Release assets\" ]]; then\n          echo 'SRC=https://github.com/PHPCSStandards/PHP_CodeSniffer/releases/latest/download/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        elif [[ \"${{ matrix.download_flavour }}\" == \"Unversioned web\" ]]; then\n          echo 'SRC=https://phars.phpcodesniffer.com/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}.phar\" >> \"$GITHUB_OUTPUT\"\n        else\n          echo 'SRC=https://phars.phpcodesniffer.com/phars/' >> \"$GITHUB_OUTPUT\"\n          echo \"FILE=${{ matrix.pharfile }}-${{ steps.version.outputs.TAG }}.phar\" >> \"$GITHUB_OUTPUT\"\n        fi\n\n    - name: Verify PHAR file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }} ${{ steps.source.outputs.SRC\n        }}${{ steps.source.outputs.FILE }}\n\n    - name: Verify signature file is available and download\n      run: wget -O ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.SRC }}${{ steps.source.outputs.FILE }}.asc\n\n    - name: 'DEBUG: List files'\n      run: ls -Rlh\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ${{ steps.source.outputs.FILE }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n    - name: Download public key\n      env:\n        FINGERPRINT: '0x689DAD778FF08760E046228BA978220305CD5C32'\n      run: gpg --keyserver \"hkps://keys.openpgp.org\" --recv-keys \"$FINGERPRINT\"\n\n    - name: Verify signature of the PHAR file\n      run: gpg --verify ${{ steps.source.outputs.FILE }}.asc ${{ \n        steps.source.outputs.FILE }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ${{ steps.source.outputs.FILE }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ${{ steps.source.outputs.FILE }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n  # #########################################\n  # Verify install via PHIVE.\n  # #########################################\n  verify-phive:\n    runs-on: ubuntu-latest\n\n    # Only run this workflow in the context of this repo.\n    if: github.repository_owner == 'PHPCSStandards'\n\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile:\n        - phpcs\n        - phpcbf\n\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n\n    steps:\n    - name: Retrieve latest release info\n      uses: octokit/request-action@v2.x\n      id: get_latest_release\n      with:\n        route: GET /repos/PHPCSStandards/PHP_CodeSniffer/releases/latest\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n    - name: 'DEBUG: Show API request failure status'\n      if: ${{ failure() }}\n      run: echo No release found. Request failed with status ${{ \n        steps.get_latest_release.outputs.status }}\n\n    - name: Grab latest tag name from API response\n      id: version\n      run: |\n        echo \"TAG=${{ fromJson(steps.get_latest_release.outputs.data).tag_name }}\" >> \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show tag name found in API response'\n      run: echo ${{ steps.version.outputs.TAG }}\n\n    - name: Setup PHP\n      uses: shivammathur/setup-php@v2\n      with:\n        php-version: latest\n        ini-values: error_reporting=-1, display_errors=On\n        coverage: none\n        tools: phive\n\n    - name: Install\n      run: phive install ${{ matrix.pharfile }} --copy --trust-gpg-keys \n        689DAD778FF08760E046228BA978220305CD5C32\n\n    - name: 'DEBUG: List files'\n      run: ls -R\n\n    - name: Verify attestation of the PHAR file\n      run: gh attestation verify ./tools/${{ matrix.pharfile }} -o \n        PHPCSStandards\n      env:\n        GH_TOKEN: ${{ github.token }}\n        GH_FORCE_TTY: true\n\n      # Note: the `.` is in the command to make it work for both PHPCS as well PHPCBF.\n    - name: Verify the PHAR is nominally functional\n      run: php ./tools/${{ matrix.pharfile }} . -e --standard=PSR12\n\n    - name: Grab the version\n      id: asset_version\n      env:\n        FILE_NAME: ./tools/${{ matrix.pharfile }}\n        # yamllint disable-line rule:line-length\n      run: echo \"VERSION=$(php \"$FILE_NAME\" --version | grep --only-matching \n        --max-count=1 --extended-regexp '\\b[0-9]+(\\.[0-9]+)+')\" >> \n        \"$GITHUB_OUTPUT\"\n\n    - name: 'DEBUG: Show grabbed version'\n      run: echo ${{ steps.asset_version.outputs.VERSION }}\n\n    - name: Fail the build if the PHAR is not the correct version\n      if: ${{ steps.asset_version.outputs.VERSION != steps.version.outputs.TAG \n        }}\n      run: exit 1\n\n```","llm_response":"```yaml\nname: Verify release\n\non:\n  release:\n    types: [published]\n  push:\n    paths:\n    - .github/workflows/verify-release.yml\n  pull_request:\n    paths:\n    - .github/workflows/verify-release.yml\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  verify-available-downloads:\n    name: '${{ matrix.download_flavour }}: ${{ matrix.pharfile }}'\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        download_flavour: [stable, dev-stable]\n        pharfile: [phpunit.phar, phpunit-${{ matrix.download_flavour }}.phar]\n\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n\n    - name: Verify ${{ matrix.pharfile }}\n      run: |\n        wget -O ${{ matrix.pharfile }} https://phpunit.de/get-phpunit-${{ matrix.download_flavour }}.php\n        sha256sum ${{ matrix.pharfile }} | grep -Fx '1476632419721222193611439513097415109333  ${{ matrix.pharfile }}'\n        php -r \"if (file_exists('phpunit.phar')) { unlink('phpunit.phar'); }\"\n        php ${{ matrix.pharfile }} --version\n        php ${{ matrix.pharfile }} --no-ansi --no-interaction --display=progress --coverage-clover=build/logs/clover.xml --stop-on-failure --no-progress tests/Tests/Bootstrap/AllTests.php\n        php ${{ matrix.pharfile }} --version\n\n  verify-phive:\n    name: 'PHIVE: ${{ matrix.pharfile }}'\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        pharfile: [phive.phar, phive-${{ matrix.download_flavour }}.phar]\n\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v4\n\n    - name: Verify ${{ matrix.pharfile }}\n      run: |\n        wget -O ${{ matrix.pharfile }} https://phive-php.org/get-phive-${{ matrix.download_flavour }}.php\n        sha256sum ${{ matrix.pharfile }} | grep -Fx '6227558693188336859123619589467884830273  ${{ matrix.pharfile }}'\n        php -r \"if (file_exists('phive.phar')) { unlink('phive.phar'); }\"\n        php ${{ matrix.pharfile }} --version\n        php ${{ matrix.pharfile }} --no-ansi --no-interaction --display=progress --coverage-clover=build/logs/clover.xml --stop-on-failure --no-progress tests/Tests/Bootstrap/AllTests.php\n        php ${{ matrix.pharfile }} --version\n\n```","repository_id":94694176,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 25: did not find expected ',' or ']'\", \"filepath\": \"../../tmp/a011a579-0cd2-4aa7-ac70-b9a25b414a2c.yml\", \"line\": 25, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        download_flavour: [stable, dev-stable]\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1910,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","release","workflow_dispatch"],"NumofJobs":2,"NumofActions":4,"Actions":["octokit/request-action","octokit/request-action","shivammathur/setup-php","shivammathur/setup-php"],"Actions_details":[{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"},{"version":"v2.x","name":"octokit/request-action"},{"version":"v2","name":"shivammathur/setup-php"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":28,"CyclomaticComplexity":2}}
{"id":17801,"level":3,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. This job will run only if the condition(${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `Assigned` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The job id of the 2nd job is `FirstTimeCodeContribution`. This job will run only if the condition(${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `FirstTimeCodeContribution` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. This step runs action `peter-evans/create-or-update-comment` tagged as v4. The step defines 2 input parameters for the action: `issue-number` is set to `${{ github.event.issue.number || github.event.pull_request.number }}` and `body` is set to `Welcome to the vibrant world of open-source development with JabRef!\n\nNewcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\nIn case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\nHaving any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\nâš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\nðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\nHappy coding! ðŸš€\n`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. This job will run only if the condition(${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 5 --owner JabRef --url $ISSUE_URL\n`. The job id of the 4th job is `needs-refinement`. This job will run only if the condition(github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef') is met. This job will run on ubuntu-latest runner. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 15 --owner JabRef --url $ISSUE_URL\n`. The 5th job is named `status: freeze` and its job id is `status-freeze`. This job will run only if the condition(${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `status-freeze` has one step. The 1st step is named `status: freeze`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 9 --owner JabRef --url $ISSUE_URL\n`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    name: 'ðŸ“ Assigned'\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: 'ðŸ“ Assigned'\n        target-column: 'Assigned'\n        ignored-columns: ''\n        default-column: 'Free to take'\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: 'ðŸ“ Assigned'\n        target-column: 'Assigned'\n        ignored-columns: ''\n        default-column: 'Free to take'\n        skip-if-not-in-project: true\n\n  FirstTimeCodeContribution:\n    name: FirstTimeCodeContribution\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: 'FirstTimeCodeContribution'\n        target-column: 'Assigned'\n        ignored-columns: ''\n        default-column: 'Free to take'\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: 'FirstTimeCodeContribution'\n        target-column: 'Assigned'\n        ignored-columns: ''\n        default-column: 'Free to take'\n        skip-if-not-in-project: true\n\n  good-first-issue:\n    name: 'good first issue'\n    if: ${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef'\n    permissions:\n      issues: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n\n  status-freeze:\n    name: 'status: freeze'\n    if: ${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}\n    permissions:\n      issues: write\n    runs-on: ubuntu-latest\n    steps:\n    - name: status: freeze\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 112: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/4ef639bc-8f90-415b-acbb-9068d67031a7.yml\", \"line\": 112, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"    if: ${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":4785,"level":3,"name":"nilearn/nilearn","file_name":"test_with_free_threaded_python.yml","len":5,"prompt":"Generate a GitHub Workflow named `test free threaded python` for a GitHub repository whose primary programming language is Python. This workflow will be triggered by multiple events: 1) the scheduled time has come: at 08:00 am, on day 1 of the month. 2) someone manually triggers the workflow. The workflow sets an environment variable to use: `FORCE_COLOR` is set to `True`. Only a single workflow using the ${{ github.workflow }}-${{ github.ref }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description }}` and its job id is `test_and_coverage`. This job will run only if the condition(github.repository == 'nilearn/nilearn') is met. This job will run on ${{ matrix.os }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `description` has one value: latest dependencies. The variable `py` has one value: 3.13t. The variable `os` has 3 values: ubuntu-latest, macos-latest and windows-latest. The variable `env` has one value: plotting. If any job run in the matrix fails, all in-progress and queued jobs in the matrix will be canceled. The job `test_and_coverage` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Install the latest version of uv`. This step runs action `astral-sh/setup-uv` tagged as v6. The 3rd step is named `Setup python`. This step runs action `actions/setup-python` tagged as v5. The step defines 2 input parameters for the action: `python-version` is set to `${{ matrix.py }}` and `allow-prereleases` is set to `True`. The 4th step is named `Install tox`. This step runs a script: `uv tool install tox --with=tox-uv --with=tox-gh-actions`. The 5th step is named `Show tox config`. This step runs a script: `tox c`. The 6th step is named `Run test suite`. This step runs a script: `tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\ntox run -e plot_test_timing\n`. The 7th step is named `Upload test report`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html` and `path` is set to `report.html`. The 8th step is named `Upload test timings`. This step will run only if the condition(success() || failure()) is met. This step runs action `actions/upload-artifact` tagged as v4. The step defines 2 input parameters for the action: `name` is set to `${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output` and `path` is set to `results/pytest_output`. /no-think","answer":"```yaml\n# Runs tests suite with free threaded python.\n#\n###\nname: test free threaded python\n\non:\n  schedule:\n    # Run every 1rst of the month\n  - cron: 0 8 1 * *\n\n    # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\n# Force to use color\nenv:\n  FORCE_COLOR: true\n\njobs:\n\n  test_and_coverage:\n    if: github.repository == 'nilearn/nilearn'\n    name: 'Test with ${{ matrix.py }} on ${{ matrix.os }}: ${{ matrix.description\n      }}'\n    runs-on: ${{ matrix.os }}\n    strategy:\n      fail-fast: true\n      matrix:\n        description: [latest dependencies]\n        py: [3.13t]\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        env: [plotting]\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        tox run --list-dependencies -e ${{ matrix.env }} -- nilearn\n        tox run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description \n          }}_pytest_output\n        path: results/pytest_output\n\n```","llm_response":"```yaml\nname: test free threaded python\n\non:\n  schedule:\n    - cron: '0 8 * * 1'\n  workflow_dispatch:\n\nenv:\n  FORCE_COLOR: true\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  test_and_coverage:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        description: latest dependencies\n        py: ['3.13t']\n        os: ['ubuntu-latest', 'macos-latest', 'windows-latest']\n        env: ['plotting']\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Install the latest version of uv\n      uses: astral-sh/setup-uv@v6\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.py }}\n        allow-prereleases: true\n    - name: Install tox\n      run: uv tool install tox --with=tox-uv --with=tox-gh-actions\n    - name: Show tox config\n      run: tox c\n    - name: Run test suite\n      run: |\n        uv tool run tox --list-dependencies -e ${{ matrix.env }} -- nilearn\n        uv tool run -e plot_test_timing\n    - name: Upload test report\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_report.html\n        path: report.html\n    - name: Upload test timings\n      if: success() || failure()\n      uses: actions/upload-artifact@v4\n      with:\n        name: ${{ matrix.os }}_${{ matrix.py }}_${{ matrix.description }}_pytest_output\n        path: results/pytest_output\n```","repository_id":3983520,"lint_valid":false,"lint_output":"[{\"message\": \"expecting a single ${{...}} expression or array value for matrix variations, but found plain text node\", \"filepath\": \"../../tmp/2c079464-9269-46b8-bc9c-0ea78ffaf84a.yml\", \"line\": 20, \"column\": 22, \"kind\": \"syntax-check\", \"snippet\": \"        description: latest dependencies\\n                     ^~~~~~\", \"end_column\": 27}]","meteor_score":0.8860688423258829,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":495,"stats":{"NumofTriggers":2,"Triggers":["schedule","workflow_dispatch"],"NumofJobs":1,"NumofActions":5,"Actions":["actions/checkout","actions/setup-python","actions/upload-artifact","actions/upload-artifact","astral-sh/setup-uv"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v6","name":"astral-sh/setup-uv"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v4","name":"actions/upload-artifact"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":21604,"level":3,"name":"zama-ai/tfhe-rs","file_name":"gpu_signed_integer_classic_tests.yml","len":5,"prompt":"Generate a GitHub Workflow named `Cuda - Signed integer tests with classical PBS` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by multiple events: 1) someone manually triggers the workflow. 2) a label is added to a pull request. The workflow modifies the default permissions for the GITHUB_TOKEN: the workflow disables permissions for the GITHUB_TOKEN across all scopes. This permission setting applies to all jobs in the workflow. The workflow sets 15 environment variables to use: `CARGO_TERM_COLOR` is set to `always`, `ACTION_RUN_URL` is set to `${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}`, `RUSTFLAGS` is set to `-C target-cpu=native`, `RUST_BACKTRACE` is set to `full`, `RUST_MIN_STACK` is set to `8388608`, `SLACK_CHANNEL` is set to `${{ secrets.SLACK_CHANNEL }}`, `SLACK_ICON` is set to `https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png`, `SLACK_USERNAME` is set to `${{ secrets.BOT_USERNAME }}`, `SLACK_WEBHOOK` is set to `${{ secrets.SLACK_WEBHOOK }}`, `SLACKIFY_MARKDOWN` is set to `True`, `IS_PULL_REQUEST` is set to `${{ github.event_name == 'pull_request' }}`, `PULL_REQUEST_MD_LINK` is set to ``, `CHECKOUT_TOKEN` is set to `${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}`, `SECRETS_AVAILABLE` is set to `${{ secrets.JOB_SECRET != '' }}` and `EXTERNAL_CONTRIBUTION_RUNNER` is set to `gpu_ubuntu-22.04`. The workflow has 5 jobs. The job id of the 1st job is `should-run`. This job will run on ubuntu-latest runner. The job `should-run` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `pull-requests` scope. This permission setting only applies to the job `should-run`. The job `should-run` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 3 input parameters for the action: `fetch-depth` is set to `0`, `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Check for file changes` and its id is `changed-files`. This step runs action `tj-actions/changed-files` whose commit is ed68ef82c095e0d48ec87eccea555d944a631a4c. The step defines an input parameter for the action: `files_yaml` is set to `gpu:\n  - tfhe/Cargo.toml\n  - tfhe/build.rs\n  - backends/tfhe-cuda-backend/**\n  - tfhe/src/core_crypto/gpu/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n  - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n  - tfhe/src/integer/gpu/**\n  - tfhe/src/shortint/parameters/**\n  - tfhe/src/high_level_api/**\n  - tfhe/src/c_api/**\n  - 'tfhe/docs/**/**.md'\n  - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n  - scripts/integer-tests.sh\n  - ci/slab.toml\n`. This job has an output: `gpu_test` is defined as ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}. The 2nd job is named `Setup instance (cuda-signed-classic-tests)` and its job id is `setup-instance`. Before this job runs, `should-run` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')) is met. This job will run on ubuntu-latest runner. The job `setup-instance` has 2 steps. The 1st step is named `Start remote instance` and its id is `start-remote-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 6 input parameters for the action: `mode` is set to `start`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}`, `backend` is set to `hyperstack` and `profile` is set to `gpu-test`. The 2nd step is named `Start GitHub instance` and its id is `start-github-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'false') is met. This step runs a script: `echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n`. This job has an output: `runner-name` is defined as ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}. The 3rd job is named `CUDA signed integer tests with classical PBS` and its job id is `cuda-tests-linux`. Before this job runs, `should-run` and `setup-instance` must complete successfully. This job will run only if the condition(github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')) is met. This job will run on ${{ needs.setup-instance.outputs.runner-name }} runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. For each object in the [{'os': 'ubuntu-22.04', 'cuda': '12.2', 'gcc': 11}] list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Only a single job using the ${{ github.workflow_ref }} concurrency group will run at a time. When this job is queued, any currently running job in the same concurrency group will be canceled. The job `cuda-tests-linux` has 4 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` whose commit is 11bd71901bbe5b1630ceea73d27597364c9af683. The step defines 2 input parameters for the action: `persist-credentials` is set to `false` and `token` is set to `${{ env.CHECKOUT_TOKEN }}`. The 2nd step is named `Setup Hyperstack dependencies`. This step runs action `./.github/actions/gpu_setup`.The step defines 3 input parameters for the action: `cuda-version` is set to `${{ matrix.cuda }}`, `gcc-version` is set to `${{ matrix.gcc }}` and `github-instance` is set to `${{ env.SECRETS_AVAILABLE == 'false' }}`. The 3rd step is named `Install latest stable`. This step runs action `dtolnay/rust-toolchain` whose commit is 888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1. The step defines an input parameter for the action: `toolchain` is set to `stable`. The 4th step is named `Run signed integer tests`. This step runs a script: `BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n`. The 4th job is named `Slack Notification` and its job id is `slack-notify`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() }}) is met. This job will run on ubuntu-latest runner. When the job run fails, the workflow run will not fail. The job `slack-notify` has 2 steps. The 1st step is named `Set pull-request URL`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request') is met. The step sets an environment variable to use: `PR_BASE_URL` is set to `${{ vars.PR_BASE_URL }}`. This step runs a script: `echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n`. The 2nd step is named `Send message`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ needs.cuda-tests-linux.result }}` and `SLACK_MESSAGE` is set to `Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. The 5th job is named `Teardown instance (cuda-signed-classic-tests)` and its job id is `teardown-instance`. Before this job runs, `setup-instance` and `cuda-tests-linux` must complete successfully. This job will run only if the condition(${{ always() && needs.setup-instance.result == 'success' }}) is met. This job will run on ubuntu-latest runner. The job `teardown-instance` has 2 steps. The 1st step is named `Stop remote instance` and its id is `stop-instance`. This step will run only if the condition(env.SECRETS_AVAILABLE == 'true') is met. This step runs action `zama-ai/slab-github-runner` whose commit is 79939325c3c429837c10d6041e4fd8589d328bac. The step defines 5 input parameters for the action: `mode` is set to `stop`, `github-token` is set to `${{ secrets.SLAB_ACTION_TOKEN }}`, `slab-url` is set to `${{ secrets.SLAB_BASE_URL }}`, `job-secret` is set to `${{ secrets.JOB_SECRET }}` and `label` is set to `${{ needs.setup-instance.outputs.runner-name }}`. The 2nd step is named `Slack Notification`. This step will run only if the condition(${{ failure() }}) is met. The step sets 2 environment variables to use: `SLACK_COLOR` is set to `${{ job.status }}` and `SLACK_MESSAGE` is set to `Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})`. This step runs action `rtCamp/action-slack-notify` whose commit is e31e87e03dd19038e411e38ae27cbad084a90661. When this step fails, the job will move on to the next step. /no-think","answer":"```yaml\n# Signed integer GPU tests on an RTXA6000 VM on hyperstack with classical PBS\nname: Cuda - Signed integer tests with classical PBS\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository \n    }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: '8388608'\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: \n    https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: true\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  # Secrets will be available only to zama-ai organization members\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\non:\n  # Allows you to run this workflow manually from the Actions tab as an alternative.\n  workflow_dispatch:\n  pull_request:\n    types: [labeled]\n\n\npermissions: {}\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: read\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || \n        steps.changed-files.outputs.gpu_any_changed }}\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        fetch-depth: 0\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Check for file changes\n      id: changed-files\n      uses: tj-actions/changed-files@ed68ef82c095e0d48ec87eccea555d944a631a4c   # v46.0.5\n      with:\n        files_yaml: |\n          gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n  setup-instance:\n    name: Setup instance (cuda-signed-classic-tests)\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled'\n      && needs.should-run.outputs.gpu_test == 'true') || (github.event.action ==\n      'labeled' && github.event.label.name == 'approved' && \n      needs.should-run.outputs.gpu_test == 'true')\n    runs-on: ubuntu-latest\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || \n        steps.start-github-instance.outputs.runner_group }}\n    steps:\n    - name: Start remote instance\n      id: start-remote-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: start\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        backend: hyperstack\n        profile: gpu-test\n\n      # This instance will be spawned especially for pull-request from forked repository\n    - name: Start GitHub instance\n      id: start-github-instance\n      if: env.SECRETS_AVAILABLE == 'false'\n      run: |\n        echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n  cuda-tests-linux:\n    name: CUDA signed integer tests with classical PBS\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == \n      'pull_request' && needs.setup-instance.result != 'skipped')\n    concurrency:\n      group: ${{ github.workflow_ref }}\n      cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    strategy:\n      fail-fast: false\n      # explicit include-based build matrix, of known valid options\n      matrix:\n        include:\n        - os: ubuntu-22.04\n          cuda: '12.2'\n          gcc: 11\n    steps:\n    - name: Checkout tfhe-rs\n      uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683\n      with:\n        persist-credentials: 'false'\n        token: ${{ env.CHECKOUT_TOKEN }}\n\n    - name: Setup Hyperstack dependencies\n      uses: ./.github/actions/gpu_setup\n      with:\n        cuda-version: ${{ matrix.cuda }}\n        gcc-version: ${{ matrix.gcc }}\n        github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n\n    - name: Install latest stable\n      uses: dtolnay/rust-toolchain@888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1\n      with:\n        toolchain: stable\n\n    - name: Run signed integer tests\n      run: |\n        BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    name: Slack Notification\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    if: ${{ always() && needs.cuda-tests-linux.result != 'skipped' && failure() \n      }}\n    continue-on-error: true\n    steps:\n    - name: Set pull-request URL\n      if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n      run: |\n        echo \"PULL_REQUEST_MD_LINK=[pull-request](${PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      env:\n        PR_BASE_URL: ${{ vars.PR_BASE_URL }}\n\n    - name: Send message\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n        SLACK_MESSAGE: 'Integer GPU signed integer tests with classical PBS finished\n          with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK\n          }}[action run](${{ env.ACTION_RUN_URL }}))'\n\n  teardown-instance:\n    name: Teardown instance (cuda-signed-classic-tests)\n    if: ${{ always() && needs.setup-instance.result == 'success' }}\n    needs: [setup-instance, cuda-tests-linux]\n    runs-on: ubuntu-latest\n    steps:\n    - name: Stop remote instance\n      id: stop-instance\n      if: env.SECRETS_AVAILABLE == 'true'\n      uses: zama-ai/slab-github-runner@79939325c3c429837c10d6041e4fd8589d328bac\n      with:\n        mode: stop\n        github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n        slab-url: ${{ secrets.SLAB_BASE_URL }}\n        job-secret: ${{ secrets.JOB_SECRET }}\n        label: ${{ needs.setup-instance.outputs.runner-name }}\n\n    - name: Slack Notification\n      if: ${{ failure() }}\n      continue-on-error: true\n      uses: rtCamp/action-slack-notify@e31e87e03dd19038e411e38ae27cbad084a90661\n      env:\n        SLACK_COLOR: ${{ job.status }}\n        SLACK_MESSAGE: 'Instance teardown (cuda-signed-classic-tests) finished with\n          status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})'\n\n```","llm_response":"```yaml\nname: Cuda - Signed integer tests with classical PBS\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    branches:\n      - main\n  label:\n    types: [labeled]\n\npermissions:\n  contents: read\n  pull-requests: read\n\nenv:\n  CARGO_TERM_COLOR: always\n  ACTION_RUN_URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n  RUSTFLAGS: -C target-cpu=native\n  RUST_BACKTRACE: full\n  RUST_MIN_STACK: 8388608\n  SLACK_CHANNEL: ${{ secrets.SLACK_CHANNEL }}\n  SLACK_ICON: https://pbs.twimg.com/profile_images/1274014582265298945/OjBKP9kn_400x400.png\n  SLACK_USERNAME: ${{ secrets.BOT_USERNAME }}\n  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n  SLACKIFY_MARKDOWN: True\n  IS_PULL_REQUEST: ${{ github.event_name == 'pull_request' }}\n  PULL_REQUEST_MD_LINK: ''\n  CHECKOUT_TOKEN: ${{ secrets.REPO_CHECKOUT_TOKEN || secrets.GITHUB_TOKEN }}\n  SECRETS_AVAILABLE: ${{ secrets.JOB_SECRET != '' }}\n  EXTERNAL_CONTRIBUTION_RUNNER: gpu_ubuntu-22.04\n\njobs:\n  should-run:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n          persist-credentials: false\n          token: ${{ env.CHECKOUT_TOKEN }}\n      - name: Check for file changes\n        id: changed-files\n        uses: tj-actions/changed-files@v1\n        with:\n          files_yaml: gpu:\n            - tfhe/Cargo.toml\n            - tfhe/build.rs\n            - backends/tfhe-cuda-backend/**\n            - tfhe/src/core_crypto/gpu/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_unsigned/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_signed/**\n            - tfhe/src/integer/server_key/radix_parallel/tests_cases_unsigned.rs\n            - tfhe/src/integer/gpu/**\n            - tfhe/src/shortint/parameters/**\n            - tfhe/src/high_level_api/**\n            - tfhe/src/c_api/**\n            - 'tfhe/docs/**/**.md'\n            - '.github/workflows/gpu_signed_integer_classic_tests.yml'\n            - scripts/integer-tests.sh\n            - ci/slab.toml\n\n    outputs:\n      gpu_test: ${{ env.IS_PULL_REQUEST == 'false' || steps.changed-files.outputs.gpu_any_changed }}\n\n  setup-instance:\n    runs-on: ubuntu-latest\n    needs: should-run\n    if: github.event_name != 'pull_request' || (github.event.action != 'labeled' && needs.should-run.outputs.gpu_test == 'true') || (github.event.action == 'labeled' && github.event.label.name == 'approved' && needs.should-run.outputs.gpu_test == 'true')\n    steps:\n      - name: Start remote instance\n        id: start-remote-instance\n        if: env.SECRETS_AVAILABLE == 'true'\n        uses: zama-ai/slab-github-runner@v1\n        with:\n          mode: start\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          backend: hyperstack\n          profile: gpu-test\n      - name: Start GitHub instance\n        id: start-github-instance\n        if: env.SECRETS_AVAILABLE == 'false'\n        run: echo \"runner_group=${EXTERNAL_CONTRIBUTION_RUNNER}\" >> \"$GITHUB_OUTPUT\"\n\n    outputs:\n      runner-name: ${{ steps.start-remote-instance.outputs.label || steps.start-github-instance.outputs.runner_group }}\n\n  cuda-tests-linux:\n    runs-on: ${{ needs.setup-instance.outputs.runner-name }}\n    needs: [should-run, setup-instance]\n    if: github.event_name != 'pull_request' || (github.event_name == 'pull_request' && needs.setup-instance.result != 'skipped')\n    strategy:\n      matrix:\n        os: [ubuntu-22.04]\n        cuda: ['12.2']\n        gcc: [11]\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          persist-credentials: false\n          token: ${{ env.CHECKOUT_TOKEN }}\n      - name: Setup Hyperstack dependencies\n        uses: ./.github/actions/gpu_setup\n        with:\n          cuda-version: ${{ matrix.cuda }}\n          gcc-version: ${{ matrix.gcc }}\n          github-instance: ${{ env.SECRETS_AVAILABLE == 'false' }}\n      - name: Install latest stable\n        uses: dtolnay/rust-toolchain@v1\n        with:\n          toolchain: stable\n      - name: Run signed integer tests\n        run: BIG_TESTS_INSTANCE=TRUE make test_signed_integer_gpu_ci\n\n  slack-notify:\n    runs-on: ubuntu-latest\n    needs: [setup-instance, cuda-tests-linux]\n    if: always() && needs.cuda-tests-linux.result != 'skipped' && failure()\n    steps:\n      - name: Set pull-request URL\n        if: env.SECRETS_AVAILABLE == 'true' && github.event_name == 'pull_request'\n        run: echo \"PULL_REQUEST_MD_LINK=[pull-request](${vars.PR_BASE_URL}${{ github.event.pull_request.number }}), \"  >> \"${GITHUB_ENV}\"\n      - name: Send message\n        if: env.SECRETS_AVAILABLE == 'true'\n        env:\n          SLACK_COLOR: ${{ needs.cuda-tests-linux.result }}\n          SLACK_MESSAGE: \"Integer GPU signed integer tests with classical PBS finished with status: ${{ needs.cuda-tests-linux.result }}. (${{ env.PULL_REQUEST_MD_LINK }}[action run](${{ env.ACTION_RUN_URL }}))\"\n        uses: rtCamp/action-slack-notify@v1\n        with:\n          webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n          message: ${{ env.SLACK_MESSAGE }}\n          color: ${{ env.SLACK_COLOR }}\n\n  teardown-instance:\n    runs-on: ubuntu-latest\n    needs: [setup-instance, cuda-tests-linux]\n    if: always() && needs.setup-instance.result == 'success'\n    steps:\n      - name: Stop remote instance\n        if: env.SECRETS_AVAILABLE == 'true'\n        uses: zama-ai/slab-github-runner@v1\n        with:\n          mode: stop\n          github-token: ${{ secrets.SLAB_ACTION_TOKEN }}\n          slab-url: ${{ secrets.SLAB_BASE_URL }}\n          job-secret: ${{ secrets.JOB_SECRET }}\n          label: ${{ needs.setup-instance.outputs.runner-name }}\n      - name: Slack Notification\n        if: failure()\n        env:\n          SLACK_COLOR: ${{ job.status }}\n          SLACK_MESSAGE: \"Instance teardown (cuda-signed-classic-tests) finished with status: ${{ job.status }}. (${{ env.ACTION_RUN_URL }})\"\n        uses: rtCamp/action-slack-notify@v1\n```","repository_id":76862382,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 50: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/e759e900-b735-4752-8513-b1df4939766c.yml\", \"line\": 50, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"          files_yaml: gpu:\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":2003,"stats":{"NumofTriggers":2,"Triggers":["pull_request","workflow_dispatch"],"NumofJobs":5,"NumofActions":9,"Actions":["./.github/actions/gpu_setup","actions/checkout","actions/checkout","dtolnay/rust-toolchain","rtCamp/action-slack-notify","rtCamp/action-slack-notify","tj-actions/changed-files","zama-ai/slab-github-runner","zama-ai/slab-github-runner"],"Actions_details":[{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":"ed68ef82c095e0d48ec87eccea555d944a631a4c","name":"tj-actions/changed-files"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"11bd71901bbe5b1630ceea73d27597364c9af683","name":"actions/checkout"},{"version":null,"name":"./.github/actions/gpu_setup"},{"version":"888c2e1ea69ab0d4330cbf0af1ecc7b68f368cc1","name":"dtolnay/rust-toolchain"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"},{"version":"79939325c3c429837c10d6041e4fd8589d328bac","name":"zama-ai/slab-github-runner"},{"version":"e31e87e03dd19038e411e38ae27cbad084a90661","name":"rtCamp/action-slack-notify"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":5}}
{"id":39491,"level":3,"name":"rancher/rancher","file_name":"merge-server-manifest.yml","len":5,"prompt":"Generate a GitHub Workflow named `Merge server manifest` for a GitHub repository whose primary programming language is Go. This workflow will be triggered by an event: it is called from another workflow. The workflow has one job. The job id of the 1st job is `merge-server-manifest`. This job will run on runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ github.run_id }} runner. The job `merge-server-manifest` modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope and write access is granted to the GITHUB_TOKEN in the `id-token` scope. This permission setting only applies to the job `merge-server-manifest`. The job sets an environment variable to use: `REGISTRY` is set to `stgregistry.suse.com`. The job `merge-server-manifest` has 8 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup Environment Variables`. This step runs action `./.github/actions/setup-tag-env`.The 3rd step is named `Set up Docker Buildx`. This step runs action `docker/setup-buildx-action` tagged as v3. The 4th step is named `Load Secrets from Vault`. This step runs action `rancher-eio/read-vault-secrets` from the main branch. The step defines an input parameter for the action: `secrets` is set to `secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\nsecret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n`. The 5th step is named `Docker Registry Login`. This step runs action `docker/login-action` tagged as v3. The step defines 3 input parameters for the action: `username` is set to `${{ env.STAGE_REGISTRY_USERNAME }}`, `password` is set to `${{ env.STAGE_REGISTRY_PASSWORD }}` and `registry` is set to `${{ env.REGISTRY }}`. The 6th step is named `Create manifest list and push`. This step runs a script: `docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n`. The 7th step is named `Create head manifest list and push`. This step runs a script: `if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n  docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\nfi\n`. The 8th step is named `Inspect image`. This step runs a script: `docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n`. /no-think","answer":"```yaml\nname: Merge server manifest\non:\n  workflow_call:\njobs:\n  merge-server-manifest:\n    runs-on: runs-on,runner=2cpu-linux-x64,image=ubuntu22-full-x64,run-id=${{ \n      github.run_id }}\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","llm_response":"```yaml\nname: Merge server manifest\n\non:\n  workflow_call:\n\njobs:\n  merge-server-manifest:\n    permissions:\n      contents: read\n      id-token: write\n    runs-on:\n      runner: 2cpu-linux-x64\n      image: ubuntu22-full-x64\n      run-id: ${{ github.run_id }}\n    env:\n      REGISTRY: stgregistry.suse.com\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup Environment Variables\n      uses: ./.github/actions/setup-tag-env\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n    - name: Load Secrets from Vault\n      uses: rancher-eio/read-vault-secrets@main\n      with:\n        secrets: |\n          secret/data/github/repo/${{ github.repository }}/stage-registry-username/credentials token | STAGE_REGISTRY_USERNAME ;\n          secret/data/github/repo/${{ github.repository }}/stage-registry-password/credentials token | STAGE_REGISTRY_PASSWORD ;\n    - name: Docker Registry Login\n      uses: docker/login-action@v3\n      with:\n        username: ${{ env.STAGE_REGISTRY_USERNAME }}\n        password: ${{ env.STAGE_REGISTRY_PASSWORD }}\n        registry: ${{ env.REGISTRY }}\n    - name: Create manifest list and push\n      run: |\n        docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n    - name: Create head manifest list and push\n      run: |\n        if [[ \"${{ github.ref_name }}\" == release/v* ]] || [[ \"${{ github.ref_name }}\" == \"main\" ]]; then\n          docker buildx imagetools create -t ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.HEAD_TAG }} ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-amd64 ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}-arm64\n        fi\n    - name: Inspect image\n      run: |\n        docker buildx imagetools inspect ${{ env.REGISTRY }}/${{ github.repository_owner }}/rancher:${{ env.TAG }}\n\n```","repository_id":22232001,"lint_valid":false,"lint_output":"[{\"message\": \"unexpected key \\\"runner\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/e52cd746-012a-4373-a473-d4127272017b.yml\", \"line\": 12, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      runner: 2cpu-linux-x64\\n      ^~~~~~~\", \"end_column\": 13}, {\"message\": \"unexpected key \\\"image\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/e52cd746-012a-4373-a473-d4127272017b.yml\", \"line\": 13, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      image: ubuntu22-full-x64\\n      ^~~~~~\", \"end_column\": 12}, {\"message\": \"unexpected key \\\"run-id\\\" for \\\"runs-on\\\" section. expected one of \\\"group\\\", \\\"labels\\\"\", \"filepath\": \"../../tmp/e52cd746-012a-4373-a473-d4127272017b.yml\", \"line\": 14, \"column\": 7, \"kind\": \"syntax-check\", \"snippet\": \"      run-id: ${{ github.run_id }}\\n      ^~~~~~~\", \"end_column\": 13}]","meteor_score":0.9872730267187741,"judge_score":3.0,"is_infinite_loop":false,"tokens_count":536,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":5,"Actions":["./.github/actions/setup-tag-env","actions/checkout","docker/login-action","docker/setup-buildx-action","rancher-eio/read-vault-secrets"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/setup-tag-env"},{"version":"v3","name":"docker/setup-buildx-action"},{"version":"main","name":"rancher-eio/read-vault-secrets"},{"version":"v3","name":"docker/login-action"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":1}}
{"id":10254,"level":3,"name":"projectblacklight/blacklight","file_name":"test.yml","len":5,"prompt":"Generate a GitHub Workflow named `` for a GitHub repository whose primary programming language is Ruby. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives an input: ref-it is optional, the data type is string, its default value is  and this input represents the branch or reference to run the workflow against. The workflow has 2 jobs. The job id of the 1st job is `set_matrix`. This job will run on ubuntu-latest runner. The job `set_matrix` has 2 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v3. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Echo ./.github/matrix.json` and its id is `matrix`. This step runs a script: `echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n`. This job has an output: `matrix` is defined as ${{ steps.matrix.outputs.matrix }}. The 2nd job is named `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}` and its job id is `test`. Before this job runs, `set_matrix` must complete successfully. This job will run on ubuntu-latest runner. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The matrix is ${{fromJson(needs.set_matrix.outputs.matrix)}}. The job sets 6 environment variables to use: `RAILS_VERSION` is set to `${{ matrix.rails_version }}`, `SOLR_VERSION` is set to `${{ matrix.solr_version || 'latest' }}`, `VIEW_COMPONENT_VERSION` is set to `${{ matrix.view_component_version }}`, `BOOTSTRAP_VERSION` is set to `${{ matrix.bootstrap_version }}`, `BLACKLIGHT_API_TEST` is set to `${{ matrix.api }}` and `ENGINE_CART_RAILS_OPTIONS` is set to `--skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}`. The job `test` has 5 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The step defines an input parameter for the action: `ref` is set to `${{ inputs.ref }}`. The 2nd step is named `Set up Ruby`. This step runs action `ruby/setup-ruby` tagged as v1. The step defines 2 input parameters for the action: `bundler` is set to `latest` and `ruby-version` is set to `${{ matrix.ruby }}`. The 3rd step is named `Change permissions`. This step runs a script: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. The 4th step is named `Install dependencies`. This step runs a script: `bundle install`. The 5th step is named `Run tests`. This step runs a script: `bundle exec rake ci`. /no-think","answer":"```yaml\non:\n  workflow_call:\n    inputs:\n      ref:\n        required: false\n        type: string\n        default: ''\n        description: The branch or reference to run the workflow against\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  test:\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ \n      matrix.additional_name }}\n    strategy:\n      fail-fast: false\n      matrix: ${{fromJson(needs.set_matrix.outputs.matrix)}}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring \n        --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ \n        matrix.additional_engine_cart_rails_options }}\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: 'chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems\n        | :'\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\n```","llm_response":"<think>Okay, let's tackle this YAML generation request. The user wants a GitHub Workflow for a Ruby repository. Let me parse the requirements step by step.\n\nFirst, the workflow name is empty, so I'll just put an empty string there. It's triggered by being called by another workflow, so the event should be `workflow_call`. The input `ref` is optional, string type, default empty, representing the branch/ref.\n\nNow, two jobs. First job is `set_matrix`, runs on ubuntu-latest. Steps: Checkout with actions/checkout@v3, using the input ref. Then a step to echo the matrix.json into GITHUB_OUTPUT. The output of this job is the matrix content.\n\nSecond job is `test`, which depends on `set_matrix`. It uses a matrix strategy from the previous job's output. Environment variables need to be set as specified, some with defaults like SOLR_VERSION. The steps include checkout@v4, setting up Ruby with specific inputs, changing permissions, installing dependencies, and running tests.\n\nWait, the matrix strategy uses `fromJson(needs.set_matrix.outputs.matrix)`. So the `set_matrix` job outputs the matrix JSON, which the test job parses.\n\nI need to make sure all the environment variables are correctly mapped from the matrix. For example, `RAILS_VERSION` comes from `matrix.rails_version`, and `SOLR_VERSION` defaults to 'latest' if not present.\n\nAlso, the step for changing permissions has a script that might have a typo: the path mentions Ruby 3.2.5, but since the matrix defines the Ruby version, maybe that's hardcoded? Wait, the user specified the script as `chmod -f -R o-w /opt/.../gems | :`. But the Ruby version in the path is fixed to 3.2.5. However, the setup-ruby step uses `${{ matrix.ruby }}`, so maybe the path should be dynamic? But the user's input says exactly that path. Hmm, maybe it's a mistake, but I have to follow the user's instruction as given. So I'll keep the hardcoded path as per the user's step description.\n\nWait, the user wrote: `chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :`. But since the Ruby version is from the matrix, this path might not be correct. However, the user specified it exactly like that, so I have to include it as is.\n\nAlso, the ENGINE_CART_RAILS_OPTIONS has a bunch of skips plus `matrix.additional_engine_cart_rails_options`.\n\nLet me structure the YAML.\n\nFirst, name: empty string. on: workflow_call with input ref.\n\njobs:\n\nset_matrix:\n  runs-on: ubuntu-latest\n  steps:\n    - name: Checkout repository\n      uses: actions/checkout@v3\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Echo ./.github/matrix.json\n      id: matrix\n      run: |\n        echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n        cat ./.github/matrix.json >> $GITHUB_OUTPUT\n        echo \"EOF\" >> $GITHUB_OUTPUT\n  outputs:\n    matrix: ${{ steps.matrix.outputs.matrix }}\n\ntest:\n  needs: set_matrix\n  runs-on: ubuntu-latest\n  strategy:\n    matrix: ${{ fromJson(needs.set_matrix.outputs.matrix) }}\n  env:\n    RAILS_VERSION: ${{ matrix.rails_version }}\n    SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n    VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n    BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n    BLACKLIGHT_API_TEST: ${{ matrix.api }}\n    ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}\n  steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ inputs.ref }}\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        bundler: latest\n        ruby-version: ${{ matrix.ruby }}\n    - name: Change permissions\n      run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\n    - name: Install dependencies\n      run: bundle install\n    - name: Run tests\n      run: bundle exec rake ci\n\nWait, the ENGINE_CART_RAILS_OPTIONS has a space before the matrix variable? The user wrote: `--skip-test ${{ matrix.additional_engine_cart_rails_options }}`. So it's concatenated with a space.\n\nAlso, the matrix strategy uses fromJson on the output from set_matrix.\n\nCheck if the output name in set_matrix is correct: steps.matrix.outputs.matrix. The step id is 'matrix', so yes.\n\nIn the test job, the env variables are set correctly. For SOLR_VERSION, using the || operator in the YAML might not work as expected. Wait, in GitHub Actions, the expression syntax uses || for default values. So `${{ matrix.solr_version || 'latest' }}` should work.\n\nAlso, the job name for test is dynamic: `ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}`. So the name field should have that string.\n\nLet me verify all parts.\n\nYes, the workflow name is empty. The input ref is defined with default empty string.\n\nIn the set_matrix job, the second step writes the matrix.json content into the output. The script appends to GITHUB_OUTPUT with the matrix<<EOF...EOF syntax, which is a way to output multi-line content.\n\nWait, the script is:\n\necho \"matrix<<EOF\" >> $GITHUB_OUTPUT\ncat ./.github/matrix.json >> $GITHUB_OUTPUT\necho \"EOF\" >> $GITHUB_OUTPUT\n\nThis is a common pattern to set a multi-line output. The \"matrix<<EOF\" sets the output name to 'matrix' and starts the here-document, then the content of matrix.json is added, and \"EOF\" ends it. So the output will be the content of matrix.json.\n\nBut in the outputs section, it's `matrix: ${{ steps.matrix.outputs.matrix }}`, which should capture that.\n\nIn the test job, the strategy matrix is fromJson of that output, which should parse the JSON into the matrix.\n\nEnvironment variables are correctly set.\n\nThe steps for test job: checkout v4, setup-ruby with bundler latest and ruby-version from matrix, change permissions with the hardcoded path, bundle install, and rake ci.\n\nI think that's all. Let me structure the YAML accordingly.\n</think>\n\n```yaml\nname: \"\"\non:\n  workflow_call:\n    inputs:\n      ref:\n        description: \"The branch or reference to run the workflow against\"\n        required: false\n        default: \"\"\n        type: string\njobs:\n  set_matrix:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Echo ./.github/matrix.json\n        id: matrix\n        run: |\n          echo \"matrix<<EOF\" >> $GITHUB_OUTPUT\n          cat ./.github/matrix.json >> $GITHUB_OUTPUT\n          echo \"EOF\" >> $GITHUB_OUTPUT\n    outputs:\n      matrix: ${{ steps.matrix.outputs.matrix }}\n  test:\n    name: ruby ${{ matrix.ruby }} | rails ${{ matrix.rails_version }} ${{ matrix.additional_name }}\n    needs: set_matrix\n    runs-on: ubuntu-latest\n    strategy:\n      matrix: ${{ fromJson(needs.set_matrix.outputs.matrix) }}\n    env:\n      RAILS_VERSION: ${{ matrix.rails_version }}\n      SOLR_VERSION: ${{ matrix.solr_version || 'latest' }}\n      VIEW_COMPONENT_VERSION: ${{ matrix.view_component_version }}\n      BOOTSTRAP_VERSION: ${{ matrix.bootstrap_version }}\n      BLACKLIGHT_API_TEST: ${{ matrix.api }}\n      ENGINE_CART_RAILS_OPTIONS: --skip-git --skip-listen --skip-spring --skip-keeps --skip-kamal --skip-solid --skip-coffee --skip-test ${{ matrix.additional_engine_cart_rails_options }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          ref: ${{ inputs.ref }}\n      - name: Set up Ruby\n        uses: ruby/setup-ruby@v1\n        with:\n          bundler: latest\n          ruby-version: ${{ matrix.ruby }}\n      - name: Change permissions\n        run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\n      - name: Install dependencies\n        run: bundle install\n      - name: Run tests\n        run: bundle exec rake ci\n```","repository_id":18227469,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 50: mapping values are not allowed in this context\", \"filepath\": \"../../tmp/0d9387ba-01cc-416b-9985-43c6481631f2.yml\", \"line\": 50, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        run: chmod -f -R o-w /opt/hostedtoolcache/Ruby/3.2.5/x64/lib/ruby/gems/3.2.0/gems | :\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":478,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":2,"NumofActions":3,"Actions":["actions/checkout","actions/checkout","ruby/setup-ruby"],"Actions_details":[{"version":"v3","name":"actions/checkout"},{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"ruby/setup-ruby"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":7,"CyclomaticComplexity":1}}
{"id":3572,"level":3,"name":"paradigmxyz/reth","file_name":"sync.yml","len":5,"prompt":"Generate a GitHub Workflow named `sync test` for a GitHub repository whose primary programming language is Rust. This workflow will be triggered by an event: there is activity relating to a merge group in a merge queue. The workflow sets an environment variable to use: `CARGO_TERM_COLOR` is set to `always`. Only a single workflow using the ${{ github.workflow }}-${{ github.head_ref || github.run_id }} concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `sync (${{ matrix.chain.bin }})` and its job id is `sync`. This job will execute on any runner that is a member of Reth. The job uses a matrix strategy to automatically create multiple job runs that are based on the combinations of the variables. The variable `chain` has 2 values: {'bin': 'reth', 'block': 100000, 'build': 'install', 'chain': 'mainnet', 'tip': '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', 'unwind-target': '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'} and {'bin': 'op-reth', 'block': 10000, 'build': 'install-op', 'chain': 'base', 'tip': '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', 'unwind-target': '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}. The job sets 2 environment variables to use: `RUST_BACKTRACE` is set to `1` and `RUST_LOG` is set to `info,sync=error`. The maximum number of minutes to run the job is 60. The job `sync` has 9 steps. The 1st step is named `Checkout repository`. This step runs action `actions/checkout` tagged as v4. The 2nd step is named `Setup mold`. This step runs action `rui314/setup-mold` tagged as v1. The 3rd step is named `Setup Rust toolchain`. This step runs action `dtolnay/rust-toolchain` from the stable branch. The 4th step is named `Cache Rust`. This step runs action `Swatinem/rust-cache` tagged as v2. The step defines an input parameter for the action: `cache-on-failure` is set to `True`. The 5th step is named `Build ${{ matrix.chain.bin }}`. This step runs a script: `make ${{ matrix.chain.build }}`. The 6th step is named `Run sync`. This step runs a script: `${{ matrix.chain.bin }} node \\\n  --chain ${{ matrix.chain.chain }} \\\n  --debug.tip ${{ matrix.chain.tip }} \\\n  --debug.max-block ${{ matrix.chain.block }} \\\n  --debug.terminate\n`. The 7th step is named `Verify the target block hash`. This step runs a script: `${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n  | grep ${{ matrix.chain.tip }}\n`. The 8th step is named `Run stage unwind for 100 blocks`. This step runs a script: `${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n`. The 9th step is named `Run stage unwind to block hash`. This step runs a script: `${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n`. /no-think","answer":"```yaml\nname: sync test\ntrue:\n  merge_group: null\nenv:\n  CARGO_TERM_COLOR: always\nconcurrency:\n  cancel-in-progress: true\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\njobs:\n  sync:\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      group: Reth\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: \"${{ matrix.chain.bin }} node \\\\\\n  --chain ${{ matrix.chain.chain }} \\\\\\\n        \\n  --debug.tip ${{ matrix.chain.tip }} \\\\\\n  --debug.max-block ${{ matrix.chain.block\\\n        \\ }} \\\\\\n  --debug.terminate\\n\"\n    - name: Verify the target block hash\n      run: \"${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file\\\n        \\ headers ${{ matrix.chain.block }} \\\\\\n  | grep ${{ matrix.chain.tip }}\\n\"\n    - name: Run stage unwind for 100 blocks\n      run: '${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain\n        }}\n\n        '\n    - name: Run stage unwind to block hash\n      run: \"${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target\\\n        \\ }} --chain ${{ matrix.chain.chain }} \\n\"\n    strategy:\n      matrix:\n        chain:\n        - bin: reth\n          block: 100000\n          build: install\n          chain: mainnet\n          tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4'\n          unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'\n        - bin: op-reth\n          block: 10000\n          build: install-op\n          chain: base\n          tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7'\n          unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'\n    timeout-minutes: 60\n\n```","llm_response":"```yaml\nname: sync test\n\non:\n  merge_group:\nenv:\n  CARGO_TERM_COLOR: always\n\n# Cancel any workflow update on workflow update\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n\njobs:\n  sync:\n    name: sync (${{ matrix.chain.bin }})\n    runs-on:\n      - Reth\n    strategy:\n      fail-fast: false # Run all combinations, fail workflow if one fails\n      matrix:\n        chain:\n        - {bin: 'reth', block: 100000, build: 'install', chain: 'mainnet', tip: '0x91c90676cab257a59cd956d7cb0bceb9b1a71d79755c23c7277a0697ccfaf8c4', unwind-target: '0x52e0509d33a988ef807058e2980099ee3070187f7333aae12b64d4d675f34c5a'}\n        - {bin: 'op-reth', block: 10000, build: 'install-op', chain: 'base', tip: '0xbb9b85352c7ebca6ba8efc63bd66cecd038c92ec8ebd02e153a3e0b197e672b7', unwind-target: '0x118a6e922a8c6cab221fc5adfe5056d2b72d58c6580e9c5629de55299e2cf8de'}\n    env:\n      RUST_BACKTRACE: 1\n      RUST_LOG: info,sync=error\n    timeout-minutes: 60\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n    - name: Setup mold\n      uses: rui314/setup-mold@v1\n    - name: Setup Rust toolchain\n      uses: dtolnay/rust-toolchain@stable\n    - name: Cache Rust\n      uses: Swatinem/rust-cache@v2\n      with:\n        cache-on-failure: true\n    - name: Build ${{ matrix.chain.bin }}\n      run: make ${{ matrix.chain.build }}\n    - name: Run sync\n      run: |\n        ${{ matrix.chain.bin }} node \\\n          --chain ${{ matrix.chain.chain }} \\\n          --debug.tip ${{ matrix.chain.tip }} \\\n          --debug.max-block ${{ matrix.chain.block }} \\\n          --debug.terminate\n    - name: Verify the target block hash\n      run: |\n        ${{ matrix.chain.bin }} db --chain ${{ matrix.chain.chain }} get static-file headers ${{ matrix.chain.block }} \\\n          | grep ${{ matrix.chain.tip }}\n    - name: Run stage unwind for 100 blocks\n      run: |\n        ${{ matrix.chain.bin }} stage unwind num-blocks 100 --chain ${{ matrix.chain.chain }}\n    - name: Run stage unwind to block hash\n      run: |\n        ${{ matrix.chain.bin }} stage unwind to-block ${{ matrix.chain.unwind-target }} --chain ${{ matrix.chain.chain }} \n\n```","repository_id":94552057,"lint_valid":false,"lint_output":"[{\"message\": \"label \\\"Reth\\\" is unknown. available labels are \\\"windows-latest\\\", \\\"windows-latest-8-cores\\\", \\\"windows-2025\\\", \\\"windows-2022\\\", \\\"windows-2019\\\", \\\"ubuntu-latest\\\", \\\"ubuntu-latest-4-cores\\\", \\\"ubuntu-latest-8-cores\\\", \\\"ubuntu-latest-16-cores\\\", \\\"ubuntu-24.04\\\", \\\"ubuntu-24.04-arm\\\", \\\"ubuntu-22.04\\\", \\\"ubuntu-22.04-arm\\\", \\\"ubuntu-20.04\\\", \\\"macos-latest\\\", \\\"macos-latest-xl\\\", \\\"macos-latest-xlarge\\\", \\\"macos-latest-large\\\", \\\"macos-15-xlarge\\\", \\\"macos-15-large\\\", \\\"macos-15\\\", \\\"macos-14-xl\\\", \\\"macos-14-xlarge\\\", \\\"macos-14-large\\\", \\\"macos-14\\\", \\\"macos-13-xl\\\", \\\"macos-13-xlarge\\\", \\\"macos-13-large\\\", \\\"macos-13\\\", \\\"self-hosted\\\", \\\"x64\\\", \\\"arm\\\", \\\"arm64\\\", \\\"linux\\\", \\\"macos\\\", \\\"windows\\\". if it is a custom label for self-hosted runner, set list of labels in actionlint.yaml config file\", \"filepath\": \"../../tmp/8a19bc43-7e65-4e91-8847-517d73f0e631.yml\", \"line\": 17, \"column\": 9, \"kind\": \"runner-label\", \"snippet\": \"      - Reth\\n        ^~~~\", \"end_column\": 12}]","meteor_score":0.9942293054252194,"judge_score":5.0,"is_infinite_loop":false,"tokens_count":719,"stats":{"NumofTriggers":1,"Triggers":["merge_group"],"NumofJobs":1,"NumofActions":4,"Actions":["Swatinem/rust-cache","actions/checkout","dtolnay/rust-toolchain","rui314/setup-mold"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v1","name":"rui314/setup-mold"},{"version":"stable","name":"dtolnay/rust-toolchain"},{"version":"v2","name":"Swatinem/rust-cache"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":9,"CyclomaticComplexity":1}}
{"id":46171,"level":1,"name":"wger-project/flutter","file_name":"make-release.yml","len":5,"prompt":"Generate a GitHub Workflow named `Build release artefacts` for a GitHub repository whose primary programming language is Dart. This workflow will be triggered by an event: someone manually triggers the workflow. This workflow receives an input: version-this input represents version to tag and release (x.y.z), it must be supplied and the data type is string. The workflow has 9 jobs. The 1st job is named `CI` and its job id is `ci`. The 2nd job is named `Prepare` and its job id is `determine_version`. The 3rd job is named `Linux` and its job id is `build_linux`. The 4th job is named `Android` and its job id is `build_android`. The 5th job is named `Apple` and its job id is `build_apple`. The 6th job is named `Microsoft` and its job id is `build_windows`. The 7th job is named `Upload to Play Store` and its job id is `upload_play_store`. The 8th job is named `Make Github Release` and its job id is `make_gh_release`. The 9th job is named `Upload flathub manifest` and its job id is `generate_flathub_manifest`. /no-think","answer":"```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: Version to tag and release (X.Y.Z)\n        required: true\n        type: string\n\njobs:\n\n  ci:\n    name: CI\n    uses: ./.github/workflows/ci.yml\n\n  determine_version:\n    needs: ci\n    name: Prepare\n    uses: ./.github/workflows/bump-version.yml\n    with:\n      app_version: ${{ github.event.inputs.version }}\n\n  build_linux:\n    name: Linux\n    needs: determine_version\n    uses: ./.github/workflows/build-linux.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_android:\n    name: Android\n    needs: determine_version\n    uses: ./.github/workflows/build-android.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n    secrets:\n      DECRYPTKEY_PLAYSTORE_SIGNING_KEY: ${{ \n        secrets.DECRYPTKEY_PLAYSTORE_SIGNING_KEY }}\n      DECRYPTKEY_PROPERTIES: ${{ secrets.DECRYPTKEY_PROPERTIES }}\n\n  build_apple:\n    name: Apple\n    needs: determine_version\n    uses: ./.github/workflows/build-apple.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  build_windows:\n    name: Microsoft\n    needs: determine_version\n    uses: ./.github/workflows/build-windows.yml\n    with:\n      ref: ${{ github.event.inputs.version }}\n\n  upload_play_store:\n    name: Upload to Play Store\n    runs-on: ubuntu-latest\n    needs:\n    - build_android\n    - build_linux\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Download builds\n      uses: actions/download-artifact@v4\n      with:\n        path: /tmp/\n\n    - name: Setup Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.4\n\n    - name: Decrypt config files\n      run: |\n        cd ./fastlane/metadata/envfiles\n        chmod +x ./decrypt_secrets.sh\n        ./decrypt_secrets.sh\n      shell: bash\n      env:\n        DECRYPTKEY_PLAYSTORE: ${{ secrets.DECRYPTKEY_PLAYSTORE }}\n\n    - name: Upload build to Play Store\n      run: |\n        mkdir -p ./build/app/outputs/bundle/release/\n        cp /tmp/builds-aab/app-release.aab ./build/app/outputs/bundle/release/app-release.aab\n        bundle install\n        bundle exec fastlane android production\n\n  #\n  # This is currently commented out since the iOS upload are currently being handled\n  # by the fastlane script in the ios folder. We use the account of pthaler for this\n  # and he runs the script manually.\n  #\n\n  #  upload_app_store:\n  #    name: Upload to App Store (placeholder)\n  #    runs-on: ubuntu-latest\n  #    needs:\n  #      - build_android\n  #      - build_apple\n  #    steps:\n  #      - name: Checkout application\n  #        uses: actions/checkout@v4\n  #        with:\n  #          ref: feature/build-process\n  #        #          ref: ${{ github.event.inputs.version }}\n  #\n  #      - name: Common flutter setup\n  #        uses: ./.github/actions/flutter-common\n  #\n  #      - name: Download builds\n  #        uses: actions/download-artifact@v4\n  #        with:\n  #          path: /tmp/\n  #\n  #      - name: Upload build to App Store\n  #        run: |\n  #          # bundle exec fastlane todo\n\n  make_gh_release:\n    name: Make Github Release\n    runs-on: ubuntu-latest\n    needs:\n    - upload_play_store\n    - build_linux\n    - build_windows\n    - build_apple\n\n    steps:\n    - name: Download builds\n      uses: actions/download-artifact@v4\n\n    - name: Make Github release\n      uses: softprops/action-gh-release@v2\n      with:\n        tag_name: ${{ inputs.version }}\n        files: |\n          builds-aab/app-release.aab\n          builds-apk/app-release.apk\n          builds-linux/wger-linux-x86_64.tar.gz\n          builds-linux/wger-linux-x86_64.sha256\n          builds-ios/Runner.app\n          builds-macos/wger.app\n          builds-windows/wger.exe\n\n  generate_flathub_manifest:\n    runs-on: ubuntu-latest\n    name: Upload flathub manifest\n    needs:\n    - make_gh_release\n    steps:\n    - name: Checkout application\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.event.inputs.version }}\n\n    - name: Common flutter setup\n      uses: ./.github/actions/flutter-common\n\n    - name: Generate manifest\n      run: |\n        cd flatpak/scripts\n        dart pub get\n        dart manifest_generator.dart --meta ../flatpak_meta.json --github\n        mkdir ../../flathub\n        cp flatpak_generator_exports/de.wger.flutter.json ../../flathub\n        cp flatpak_generator_exports/flathub.json ../../flathub\n\n    - name: Push updated config to flathub repository\n      uses: cpina/github-action-push-to-another-repository@main\n      env:\n        SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}\n      with:\n        source-directory: flathub\n        destination-github-username: wger-project\n        destination-repository-name: de.wger.flutter\n        user-email: github-actions@github.com\n        target-branch: release-${{ github.event.inputs.version }}\n        create-target-branch-if-needed: true\n        commit-message: Update to ${{ github.event.inputs.version }}\n\n\n```","llm_response":" ```yaml\nname: Build release artefacts\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        description: \"Version to tag and release (x.y.z)\"\n        required: true\njobs:\n  ci:\n    runs-on: ubuntu-latest\n    if: github.repository_owner == 'flutter'\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n      - name: Cache dependencies\n        uses: actions/cache@v2\n        with:\n          path: |\n            ~/.pub-cache\n            ~/.cache/flutter\n          key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.yaml') }}\n          restore-keys: |\n            ${{ runner.os }}-flutter-\n  determine_version:\n    needs: ci\n    runs-on: ubuntu-latest\n    outputs:\n      version: ${{ steps.determine-version.outputs.version }}\n    steps:\n      - name: Determine version\n        id: determine-version\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"--version\"\n        env:\n          FLUTTER_CHANNEL: stable\n  build_linux:\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"build linux --release\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n          FLUTTER_LINUX_BUILD_ARGS: --no-sound-null-safety\n  build_android:\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"build apk --release\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n          FLUTTER_ANDROID_BUILD_ARGS: --no-sound-null-safety\n  build_apple:\n    needs: determine_version\n    runs-on: macos-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"build ios --release\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n  build_windows:\n    needs: determine_version\n    runs-on: windows-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"build windows --release\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n  upload_play_store:\n    needs: build_android\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Upload to Play Store\n        uses: apollographql/upload-to-google-play-action@v1.2\n        with:\n          service_account_key: ${{ secrets.ANDROID_SERVICE_ACCOUNT_KEY }}\n          track: internal\n          release_status: completed\n          version_name: ${{ needs.determine_version.outputs.version }}\n          package_name: com.example.flutter_native_pdf\n          apk_path: build/app/outputs/flutter-apk/app-release.apk\n  make_gh_release:\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Python\n        uses: actions/setup-python@v2\n        with:\n          python-version: '3.8'\n      - name: Set up Git\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"--version\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n      - name: Make release\n        run: |\n          python -m pip install --upgrade pip\n          pip install --upgrade setuptools wheel twine\n          python setup.py sdist bdist_wheel\n          twine upload dist/*\n        env:\n          TWINE_USERNAME: ${{ secrets.PYPI_USERNAME }}\n          TWINE_PASSWORD: ${{ secrets.PYPI_PASSWORD }}\n  generate_flathub_manifest:\n    needs: determine_version\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n      - name: Set up Flutter\n        uses: subosito/flutter-action@v1\n        with:\n          channel: stable\n          args: \"devtools\"\n        env:\n          FLUTTER_CHANNEL: stable\n          FLUTTER_VERSION: 1.20.4\n      - name: Generate Flathub manifest\n        run: |\n          flutter devtools --version\n          flutter devtools --manifest-generate\n      - name: Push to the repo\n        uses: EndBug/add-and-commit@v7\n        with:\n          message: \"Update flathub manifest\"\n          add: \"flutter_devtools_manifest.yaml\"\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          COMMIT_USER_NAME: \"github actions\"\n          COMMIT_USER_EMAIL: \"github-actions@example.com\"\n``` ","repository_id":69029763,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"determine_version\\\" is not defined in object type {build_android: {outputs: {}; result: string}}\", \"filepath\": \"../../tmp/38c25b80-dda3-44d0-a107-641dcb9fad5d.yml\", \"line\": 124, \"column\": 29, \"kind\": \"expression\", \"snippet\": \"          version_name: ${{ needs.determine_version.outputs.version }}\\n                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 67}]","meteor_score":0.3286223002304025,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1270,"stats":{"NumofTriggers":1,"Triggers":["workflow_dispatch"],"NumofJobs":9,"NumofActions":8,"Actions":["./.github/actions/flutter-common","actions/checkout","actions/checkout","actions/download-artifact","actions/download-artifact","cpina/github-action-push-to-another-repository","ruby/setup-ruby","softprops/action-gh-release"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":"v4","name":"actions/download-artifact"},{"version":"v1","name":"ruby/setup-ruby"},{"version":"v4","name":"actions/download-artifact"},{"version":"v2","name":"softprops/action-gh-release"},{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/flutter-common"},{"version":"main","name":"cpina/github-action-push-to-another-repository"}],"NumofReusableWfs":6,"ReusableWfs":["./.github/workflows/build-android.yml","./.github/workflows/build-apple.yml","./.github/workflows/build-linux.yml","./.github/workflows/build-windows.yml","./.github/workflows/bump-version.yml","./.github/workflows/ci.yml"],"NumofSteps":11,"CyclomaticComplexity":5}}
{"id":64153,"level":2,"name":"oracle/graal","file_name":"ni-layers.yml","len":5,"prompt":"Generate a GitHub Workflow named `Weekly Native Image Layer Building Tests` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by multiple events: 1) Only if at least one path of push event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 2) Only if at least one path of pull_request event matches a pattern in the paths filter(.github/workflows/ni-layers.yml or vm/tests/gh_workflows/NILayerTests/**), the workflow runs. 3) the scheduled time has come: at 12:00 am, only on monday. 4) someone manually triggers the workflow. The workflow sets 3 environment variables to use: `LIBRARY_METADATA_PATH` is set to `${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests`, `JAVA_VERSION` is set to `21` and `PYTHON_VERSION` is set to `3.12.3`. The workflow has 2 jobs. The 1st job is named `Build GraalVM and populate matrix` and its job id is `build-graalvm-and-populate-matrix`. The job `build-graalvm-and-populate-matrix` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Build GraalVM JDK`. The 3rd step is named `Tar GraalVM JDK`. The 4th step is named `Persist GraalVM JDK build`. The 5th step is named `Setup python`. The 6th step is named `Populate matrix` and its id is `set-matrix`. The 2nd job is named `${{ matrix.coordinates }}` and its job id is `test-native-image-layer-build`. The job `test-native-image-layer-build` has 6 steps. The 1st step is named `Checkout repository`. The 2nd step is named `Download GraalVM JDK build`. The 3rd step is named `Extract GraalVM JDK build`. The 4th step is named `Setup JAVA_HOME`. The 5th step is named `Setup python`. The 6th step is named `Build layer`. /no-think","answer":"```yaml\n#\n# Copyright (c) 2024, 2024, Oracle and/or its affiliates. All rights reserved.\n# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n#\n# The Universal Permissive License (UPL), Version 1.0\n#\n# Subject to the condition set forth below, permission is hereby granted to any\n# person obtaining a copy of this software, associated documentation and/or\n# data (collectively the \"Software\"), free of charge and under any and all\n# copyright rights in the Software, and any and all patent rights owned or\n# freely licensable by each licensor hereunder covering either (i) the\n# unmodified Software as contributed to or provided by such licensor, or (ii)\n# the Larger Works (as defined below), to deal in both\n#\n# (a) the Software, and\n#\n# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if\n# one is included with the Software each a \"Larger Work\" to which the Software\n# is contributed by such licensors),\n#\n# without restriction, including without limitation the rights to copy, create\n# derivative works of, display, perform, and distribute the Software and make,\n# use, sell, offer for sale, import, export, have made, and have sold the\n# Software and the Larger Work(s), and to sublicense the foregoing rights on\n# either these or other terms.\n#\n# This license is subject to the following condition:\n#\n# The above copyright notice and either this complete permission notice or at a\n# minimum a reference to the UPL must be included in all copies or substantial\n# portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n#\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  pull_request:\n    paths:\n    - .github/workflows/ni-layers.yml\n    - vm/tests/gh_workflows/NILayerTests/**\n  schedule:\n  - cron: 0 0 * * 1   # Once a week, at midnight on Monday (00:00 UTC)\n  workflow_dispatch:\n\nenv:\n  LIBRARY_METADATA_PATH: ${{ github.workspace \n    }}/vm/tests/gh_workflows/NILayerTests\n  JAVA_VERSION: 21\n  PYTHON_VERSION: 3.12.3\n\njobs:\n  build-graalvm-and-populate-matrix:\n    name: Build GraalVM and populate matrix\n    runs-on: ubuntu-latest\n    if: (github.repository=='oracle/graal')\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Build GraalVM JDK\n      uses: ./.github/actions/build-graalvm\n      with:\n        native-images: \n          native-image,native-image-configure,lib:native-image-agent\n        components: Native Image,Native Image Configure Tool\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Tar GraalVM JDK\n      shell: bash\n      run: tar -czvhf graalvm.tgz -C $(dirname ${GRAALVM_HOME}) $(basename \n        ${GRAALVM_HOME})\n    - name: Persist GraalVM JDK build\n      uses: actions/upload-artifact@v4\n      with:\n        name: graalvm\n        path: graalvm.tgz\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Populate matrix\n      id: set-matrix\n      run: python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py \n        ${{ env.LIBRARY_METADATA_PATH }}/\n\n  test-native-image-layer-build:\n    name: ${{ matrix.coordinates }}\n    runs-on: ubuntu-latest\n    env:\n      GRAALVM_HOME: ${{ github.workspace }}/graalvm\n    timeout-minutes: 30\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      fail-fast: false\n      matrix:\n        coordinates: ${{ fromJson(needs. \n          build-graalvm-and-populate-matrix.outputs.matrix).coordinates }}\n    steps:\n    - name: Checkout oracle/graal\n      uses: actions/checkout@v4\n    - name: Download GraalVM JDK build\n      uses: actions/download-artifact@95815c38cf2ff2164869cbab79da8d1f422bc89e   # v4.2.1\n      with:\n        name: graalvm\n        path: .\n    - name: Extract GraalVM JDK build\n      run: tar -xzvf graalvm.tgz -C $(dirname ${GRAALVM_HOME})\n    - name: Setup JAVA_HOME\n      uses: actions/setup-java@v4\n      with:\n        distribution: oracle\n        java-version: ${{ env.JAVA_VERSION }}\n    - name: Setup python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n    - name: Build layer\n      run: |\n        python3 ${{ env.LIBRARY_METADATA_PATH }}/build_native_image_layer.py ${{ env.GRAALVM_HOME }}/bin/native-image \"${{ matrix.coordinates }}\"\n\n```","llm_response":"```yaml\nname: Weekly Native Image Layer Building Tests\n\non:\n  push:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**  \n  pull_request:\n    paths:\n      - .github/workflows/ni-layers.yml\n      - vm/tests/gh_workflows/NILayerTests/**  \n  schedule:\n    - cron: '0 0 * * 1'  # Runs at 12:00 am on Mondays\n  workflow_dispatch:  # Manually triggered workflow\n\nenv:\n  LIBRARY_METADATA_PATH: '${{ github.workspace }}/vm/tests/gh_workflows/NILayerTests'\n  JAVA_VERSION: '21'\n  PYTHON_VERSION: '3.12.3'\n\njobs:\n  build-graalvm-and-populate-matrix:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n      - name: Build GraalVM JDK\n        # Add your build command for GraalVM JDK here\n      - name: Tar GraalVM JDK\n        # Add your tar command for GraalVM JDK here\n      - name: Persist GraalVM JDK build\n        # Add your persist command for GraalVM JDK build here\n      - name: Setup python\n        # Add your setup python command here\n      - name: Populate matrix\n        id: set-matrix\n        run: |\n          echo \"::set-output name=coordinates::${{ matrix.coordinates }}\"\n          echo \"::set-output name=java_version::${{ env.JAVA_VERSION }}\"\n          echo \"::set-output name=python_version::${{ env.PYTHON_VERSION }}\"\n\n  \"${{ matrix.coordinates }}\":\n    runs-on: ubuntu-latest\n    needs: build-graalvm-and-populate-matrix\n    strategy:\n      matrix:\n        coordinates: ['1.0', '1.1', '1.2']  # Example matrix\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n      - name: Download GraalVM JDK build\n        # Add your download command for GraalVM JDK build here\n      - name: Extract GraalVM JDK build\n        # Add your extract command for GraalVM JDK build here\n      - name: Setup JAVA_HOME\n        run: |\n          export JAVA_HOME=${{ github.workspace }}/graalvm-jdk\n      - name: Setup python\n        # Add your setup python command here\n      - name: Build layer\n        # Add your build layer command here\n```","repository_id":3313009,"lint_valid":false,"lint_output":"[{\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 27, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Build GraalVM JDK\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 29, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Tar GraalVM JDK\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 31, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Persist GraalVM JDK build\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 33, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Setup python\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 37, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 37, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"workflow command \\\"set-output\\\" was deprecated. use `echo \\\"{name}={value}\\\" >> $GITHUB_OUTPUT` instead: https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 37, \"column\": 14, \"kind\": \"deprecated-commands\", \"snippet\": \"        run: |\\n             ^\", \"end_column\": 14}, {\"message\": \"property \\\"coordinates\\\" is not defined in object type {}\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 37, \"column\": 55, \"kind\": \"expression\", \"snippet\": \"        run: |\", \"end_column\": 55}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 51, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Download GraalVM JDK build\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 53, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Extract GraalVM JDK build\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 58, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Setup python\\n        ^~~~~\", \"end_column\": 13}, {\"message\": \"step must run script with \\\"run\\\" section or run action with \\\"uses\\\" section\", \"filepath\": \"../../tmp/137d1584-da09-4162-86cc-0b10fffb0421.yml\", \"line\": 60, \"column\": 9, \"kind\": \"syntax-check\", \"snippet\": \"      - name: Build layer\\n        ^~~~~\", \"end_column\": 13}]","meteor_score":0.4337579140197328,"judge_score":2.0,"is_infinite_loop":false,"tokens_count":1278,"stats":{"NumofTriggers":4,"Triggers":["pull_request","push","schedule","workflow_dispatch"],"NumofJobs":2,"NumofActions":8,"Actions":["./.github/actions/build-graalvm","actions/checkout","actions/checkout","actions/download-artifact","actions/setup-java","actions/setup-python","actions/setup-python","actions/upload-artifact"],"Actions_details":[{"version":"v4","name":"actions/checkout"},{"version":null,"name":"./.github/actions/build-graalvm"},{"version":"v4","name":"actions/upload-artifact"},{"version":"v5","name":"actions/setup-python"},{"version":"v4","name":"actions/checkout"},{"version":"95815c38cf2ff2164869cbab79da8d1f422bc89e","name":"actions/download-artifact"},{"version":"v4","name":"actions/setup-java"},{"version":"v5","name":"actions/setup-python"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":12,"CyclomaticComplexity":1}}
{"id":17801,"level":3,"name":"jabref/jabref","file_name":"on-issue-labeled.yml","len":5,"prompt":"Generate a GitHub Workflow named `On issue labeled` for a GitHub repository whose primary programming language is Java. This workflow will be triggered by an event: a label is added to an issue. The workflow has 5 jobs. The 1st job is named `ðŸ“ Assigned` and its job id is `Assigned`. This job will run only if the condition(${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `Assigned` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `Assigned`. The job `Assigned` has 2 steps. The 1st step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `ðŸ“ Assigned`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The job id of the 2nd job is `FirstTimeCodeContribution`. This job will run only if the condition(${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `FirstTimeCodeContribution` modifies the default permissions for the GITHUB_TOKEN: write access is granted to the GITHUB_TOKEN in the `issues` scope. This permission setting only applies to the job `FirstTimeCodeContribution`. The job `FirstTimeCodeContribution` has 3 steps. The 1st step is named `GreetingFirstTimeCodeContribution`. This step runs action `peter-evans/create-or-update-comment` tagged as v4. The step defines 2 input parameters for the action: `issue-number` is set to `${{ github.event.issue.number || github.event.pull_request.number }}` and `body` is set to `Welcome to the vibrant world of open-source development with JabRef!\n\nNewcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\nIn case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\nHaving any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\nâš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\nðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\nHappy coding! ðŸš€\n`. The 2nd step is named `Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/3`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd step is named `Move Issue to \"Assigned\" Column in \"Good First Issues\"`. This step runs action `m7kvqbe1/github-action-move-issues` from the main branch. The step defines 7 input parameters for the action: `github-token` is set to `${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}`, `project-url` is set to `https://github.com/orgs/JabRef/projects/5`, `target-labels` is set to `FirstTimeCodeContribution`, `target-column` is set to `Assigned`, `ignored-columns` is set to ``, `default-column` is set to `Free to take` and `skip-if-not-in-project` is set to `True`. The 3rd job is named `good first issue` and its job id is `good-first-issue`. This job will run only if the condition(${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `good-first-issue` has one step. The 1st step is named `good first issue`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 5 --owner JabRef --url $ISSUE_URL\n`. The job id of the 4th job is `needs-refinement`. This job will run only if the condition(github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef') is met. This job will run on ubuntu-latest runner. The job `needs-refinement` has one step. The 1st step is named `needs-refinement`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 15 --owner JabRef --url $ISSUE_URL\n`. The 5th job is named `status: freeze` and its job id is `status-freeze`. This job will run only if the condition(${{ github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef' }}) is met. This job will run on ubuntu-latest runner. The job `status-freeze` has one step. The 1st step is named `status: freeze`. The step sets an environment variable to use: `GH_TOKEN` is set to `${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}`. This step runs a script: `ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\ngh project item-add 9 --owner JabRef --url $ISSUE_URL\n`. /no-think","answer":"```yaml\nname: On issue labeled\n\non:\n  issues:\n    types:\n    - labeled\n\njobs:\n  Assigned:\n    # Triggered when manually assigned the label \"ðŸ“ Assigned\" to trigger the automatic unassignment after 30 days\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner \n      == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: ðŸ“ Assigned\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n    - name: GreetingFirstTimeCodeContribution\n      uses: peter-evans/create-or-update-comment@v4\n      with:\n        issue-number: ${{ github.event.issue.number || \n          github.event.pull_request.number }}\n        body: |\n          Welcome to the vibrant world of open-source development with JabRef!\n\n          Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n          In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n          Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n          âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n          ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n\n          Happy coding! ðŸš€\n    - name: Move Issue to \"Assigned\" Column in \"Candidates for University \n        Projects\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/3\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n    - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n      uses: m7kvqbe1/github-action-move-issues@main\n      with:\n        github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n        project-url: https://github.com/orgs/JabRef/projects/5\n        target-labels: FirstTimeCodeContribution\n        target-column: Assigned\n        ignored-columns: ''\n        default-column: Free to take\n        skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    if: ${{ github.event.label.name == 'good first issue' && \n      github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    steps:\n    - name: good first issue\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 5 --owner JabRef --url $ISSUE_URL\n  needs-refinement:\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner\n      == 'JabRef'\n    runs-on: ubuntu-latest\n    steps:\n    - name: needs-refinement\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 15 --owner JabRef --url $ISSUE_URL\n  status-freeze:\n    name: 'status: freeze'\n    if: \"${{ github.event.label.name == 'status: freeze' && github.repository_owner\n      == 'JabRef' }}\"\n    runs-on: ubuntu-latest\n    steps:\n    - name: 'status: freeze'\n      env:\n        GH_TOKEN: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n      run: |\n        ISSUE_URL=$(jq --raw-output .issue.html_url \"$GITHUB_EVENT_PATH\")\n        gh project item-add 9 --owner JabRef --url $ISSUE_URL\n\n```","llm_response":" Yes\n```yaml\nname: On issue labeled\non:\n  issues:\n    types: [labeled]\njobs:\n  Assigned:\n    name: ðŸ“ Assigned\n    if: ${{ github.event.label.name == 'ðŸ“ Assigned' && github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: ðŸ“ Assigned\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n  FirstTimeCodeContribution:\n    name: ðŸ“ FirstTimeCodeContribution\n    if: ${{ github.event.label.name == 'FirstTimeCodeContribution' && github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: GreetingFirstTimeCodeContribution\n        uses: peter-evans/create-or-update-comment@v4\n        with:\n          issue-number: ${{ github.event.issue.number || github.event.pull_request.number }}\n          body: |\n            Welcome to the vibrant world of open-source development with JabRef!\n\n            Newcomers, we're excited to have you on board. Start by exploring our [Contributing](https://github.com/JabRef/jabref/blob/main/CONTRIBUTING.md) guidelines, and don't forget to check out our [workspace setup guidelines](https://devdocs.jabref.org/getting-into-the-code/guidelines-for-setting-up-a-local-workspace) to get started smoothly.\n\n            In case you encounter failing tests during development, please check our [developer FAQs](https://devdocs.jabref.org/code-howtos/faq.html)!\n\n            Having any questions or issues? Feel free to ask here on GitHub. Need help setting up your local workspace? Join the conversation on [JabRef's Gitter chat](https://gitter.im/JabRef/jabref). And don't hesitate to open a (draft) pull request early on to show the direction it is heading towards. This way, you will receive valuable feedback.\n\n           âš  Note that this issue will become unassigned if it isn't closed within **30 days**.\n\n           ðŸ”§ A maintainer can also add the **`Pinned`** label to prevent it from being unassigned automatically.\n      - name: Move Issue to \"Assigned\" Column in \"Candidates for University Projects\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/3\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n      - name: Move Issue to \"Assigned\" Column in \"Good First Issues\"\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_ACTION_MOVE_ISSUE }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n  good-first-issue:\n    name: good first issue\n    needs: [Assigned, FirstTimeCodeContribution]\n    if: ${{ github.event.label.name == 'good first issue' && github.repository_owner == 'JabRef' }}\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: good first issue\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n          project-url: https://github.com/orgs/JabRef/projects/5\n          target-labels: FirstTimeCodeContribution\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n  needs-refinement:\n    name: needs refinement\n    needs: [Assigned, FirstTimeCodeContribution]\n    if: github.event.label.name == 'needs-refinement' && github.repository_owner == 'JabRef'\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: needs refinement\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n          project-url: https://github.com/orgs/JabRef/projects/15\n          target-labels: needs-refinement\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n  status-freeze:\n    name: status: freeze\n    needs: [Assigned, FirstTimeCodeContribution]\n    if: github.event.label.name == 'status: freeze' && github.repository_owner == 'JabRef'\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n    steps:\n      - name: status: freeze\n        uses: m7kvqbe1/github-action-move-issues@main\n        with:\n          github-token: ${{ secrets.GH_TOKEN_PROJECT_ITEM_ADD }}\n          project-url: https://github.com/orgs/JabRef/projects/9\n          target-labels: status: freeze\n          target-column: Assigned\n          ignored-columns: \"\"\n          default-column: Free to take\n          skip-if-not-in-project: true\n``` ","repository_id":1050286,"lint_valid":false,"lint_output":"[{\"message\": \"could not parse as YAML: yaml: line 42: did not find expected key\", \"filepath\": \"../../tmp/5b1bf383-d127-4be1-a780-6db04be9f046.yml\", \"line\": 42, \"column\": 0, \"kind\": \"syntax-check\", \"snippet\": \"        with:\", \"end_column\": 0}]","meteor_score":0.0,"judge_score":1.0,"is_infinite_loop":false,"tokens_count":1255,"stats":{"NumofTriggers":1,"Triggers":["issues"],"NumofJobs":5,"NumofActions":5,"Actions":["m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","m7kvqbe1/github-action-move-issues","peter-evans/create-or-update-comment"],"Actions_details":[{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"v4","name":"peter-evans/create-or-update-comment"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"},{"version":"main","name":"m7kvqbe1/github-action-move-issues"}],"NumofReusableWfs":0,"ReusableWfs":[],"NumofSteps":8,"CyclomaticComplexity":5}}
{"id":16232,"level":2,"name":"envoyproxy/envoy","file_name":"_check_coverage.yml","len":5,"prompt":"Generate a GitHub Workflow named `Check/coverage` for a GitHub repository whose primary programming language is C++. This workflow will be triggered by an event: this workflow is called by another workflow. This workflow receives 3 inputs: gcs-cache-bucket-the data type is string and it must be supplied; request-the data type is string and it must be supplied; trusted-the data type is boolean and it must be supplied. It receives 2 secrets: gcs-cache-key-it must be supplied; gcp-key-it must be supplied. The workflow modifies the default permissions for the GITHUB_TOKEN: read access is granted to the GITHUB_TOKEN in the `contents` scope. This permission setting applies to all jobs in the workflow. Only a single workflow using the ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage concurrency group will run at a time. When this workflow is queued, any currently running workflow in the same concurrency group will be canceled. The workflow has one job. The 1st job is named `${{ matrix.name ||matrix.target }}` and its job id is `coverage`. /no-think","answer":"```yaml\nname: Check/coverage\n\npermissions:\n  contents: read\n\non:\n  workflow_call:\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\n\njobs:\n  coverage:\n    secrets:\n      gcs-cache-key: ${{ secrets.gcs-cache-key }}\n      gcp-key: ${{ secrets.gcp-key }}\n    permissions:\n      contents: read\n      packages: read\n    uses: ./.github/workflows/_run.yml\n    name: ${{ matrix.name ||matrix.target }}\n    with:\n      # bazel-extra: '--config=remote-envoy-engflow'\n      cache-build-image: ${{ \n        fromJSON(inputs.request).request.build-image.default }}\n      concurrency-suffix: -${{ matrix.target }}\n      diskspace-hack: ${{ matrix.diskspace-hack && true || false }}\n      diskspace-hack-paths: ${{ matrix.diskspace-hack-paths }}\n      error-match: |\n        ERROR\n        error:\n        Error:\n        lower than limit\n      gcs-cache-bucket: ${{ inputs.gcs-cache-bucket }}\n      rbe: true\n      rbe-google: true\n      request: ${{ inputs.request }}\n      runs-on: ${{ fromJSON(inputs.request).config.ci.agent-ubuntu }}\n      steps-post: |\n        - uses: envoyproxy/toolshed/gh-actions/gcs/artefact/sync@actions-v0.3.16\n          with:\n            bucket: ${{ inputs.trusted && vars.GCS_ARTIFACT_BUCKET_POST || vars.GCS_ARTIFACT_BUCKET_PRE }}\n            path: generated/${{ matrix.target }}\n            path-upload: ${{ matrix.target }}\n            sha: ${{ fromJSON(inputs.request).request.sha }}\n            redirect: >-\n              ${{ vars.GCS_ARTIFACT_PREFIX\n                  && format('{0}-', vars.GCS_ARTIFACT_PREFIX)\n              }}${{ fromJSON(inputs.request).request.pr\n                    || fromJSON(inputs.request).request.target-branch }}\n      target: ${{ matrix.target }}\n      timeout-minutes: 180\n      trusted: ${{ inputs.trusted }}\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: coverage\n          name: Coverage\n          diskspace-hack: true\n          diskspace-hack-paths: |\n            /opt/hostedtoolcache\n        - target: fuzz_coverage\n          name: Fuzz coverage\n\n```","llm_response":"```yaml\nname: Check/coverage\n\non:\n  workflow_call:\n    inputs:\n      gcs-cache-bucket:\n        type: string\n        required: true\n      request:\n        type: string\n        required: true\n      trusted:\n        type: boolean\n        required: true\n    secrets:\n      gcs-cache-key:\n        required: true\n      gcp-key:\n        required: true\n\npermissions:\n  contents: read\n\n# Cancel any workflow update on PR update\nconcurrency:\n  group: ${{ github.head_ref || github.run_id }}-${{ github.workflow }}-coverage\n  cancel-in-progress: true\n\njobs:\n  coverage:\n    name: ${{ matrix.name ||matrix.target }}\n    permissions:\n      contents: read\n      security-events: write\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n        - target: test\n          name: Unit tests\n        - target: benchmark\n          name: Benchmark tests\n        - target: integration\n          name: Integration tests\n    steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n      with:\n        ref: ${{ github.ref }}\n    - name: Set up Python\n      uses: actions/setup-python@v5\n      with:\n        python-version: '3.9'   # or the latest Python version\n    - name: Install dependencies\n      run: |\n        python -m pip install pytest\n    - name: Install Google Cloud SDK\n      uses: google-github-actions/setup@v4\n      with:\n        version: '619.0.0'\n        cache: 'all'\n    - name: Install GCS cache\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        gcloud auth activate-service-account --key-file=${{ secrets.gcp-key }}\n        gcloud storage cp -r \"gs://${{ inputs.gcs-cache-bucket }}/$GITHUB_RUN_ID\" .\n    - name: Install dependencies\n      run: |\n        sudo apt-get update\n        sudo apt-get install -y g++ make cmake\n    - name: Build project\n      run: |\n        cmake -S . -B build\n        cmake --build build\n    - name: Run tests\n      if: ${{ github.event_name == 'workflow_call' }}\n      env:\n        GITHUB_TOKEN: ${{ secrets.GCS-CACHE-KEY }}\n      run: |\n        cd build\n        ctest\n    - name: Generate coverage report\n      if: ${{ github.event_name == 'workflow_call' }}\n      run: |\n        cd build\n        ctest --test-dir test --test-index 1\n    - name: Upload coverage to Codecov\n      uses: codecov/codecov@v4\n      with:\n        token: ${{ secrets.CODECOV_TOKEN }}\n    - name: Upload artifact\n      if: ${{ github.event_name == 'workflow_call' }}\n      uses: actions/upload-artifact@v4\n      with:\n        name: coverage-report-${{ github.run_id }}\n        path: 'build/Testing/Temporary/LastTest.log'\n        retention-days: 7\n\n```","repository_id":3995858,"lint_valid":false,"lint_output":"[{\"message\": \"property \\\"codecov_token\\\" is not defined in object type {actions_runner_debug: string; actions_step_debug: string; gcp-key: string; gcs-cache-key: string; github_token: string}\", \"filepath\": \"../../tmp/848401a4-16b0-4bbc-bb4d-598d68d24b83.yml\", \"line\": 91, \"column\": 20, \"kind\": \"expression\", \"snippet\": \"        token: ${{ secrets.CODECOV_TOKEN }}\\n                   ^~~~~~~~~~~~~~~~~~~~~\", \"end_column\": 40}]","meteor_score":0.35267230643696124,"judge_score":4.0,"is_infinite_loop":false,"tokens_count":588,"stats":{"NumofTriggers":1,"Triggers":["workflow_call"],"NumofJobs":1,"NumofActions":0,"Actions":[],"Actions_details":[],"NumofReusableWfs":1,"ReusableWfs":["./.github/workflows/_run.yml"],"NumofSteps":0,"CyclomaticComplexity":1}}
